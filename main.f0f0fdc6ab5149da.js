(self.webpackChunkstyleguide=self.webpackChunkstyleguide||[]).push([[179],{12:(fi,Ot,Me)=>{"use strict";var r=Me(62);let V=null;function q(){return V}class Ve{}const pe=new r.InjectionToken("DocumentToken");let lt=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return function Ce(){return(0,r.\u0275\u0275inject)(We)}()},providedIn:"platform"}),t})();const Ue=new r.InjectionToken("Location Initialized");let We=(()=>{class t extends lt{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(e){const i=q().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=q().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,l){Ye()?this._history.pushState(e,i,l):this._location.hash=l}replaceState(e,i,l){Ye()?this._history.replaceState(e,i,l):this._location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return function ct(){return new We((0,r.\u0275\u0275inject)(pe))}()},providedIn:"platform"}),t})();function Ye(){return!!window.history.pushState}function it(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function Mt(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Rn(t){return t&&"?"!==t[0]?"?"+t:t}let Zt=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return(0,r.inject)(Zi)},providedIn:"root"}),t})();const gt=new r.InjectionToken("appBaseHref");let Zi=(()=>{class t extends Zt{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,r.inject)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return it(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Rn(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${i}${l}`:i}pushState(e,i,l,m){const C=this.prepareExternalUrl(l+Rn(m));this._platformLocation.pushState(e,i,C)}replaceState(e,i,l,m){const C=this.prepareExternalUrl(l+Rn(m));this._platformLocation.replaceState(e,i,C)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(lt),r.\u0275\u0275inject(gt,8))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ni=(()=>{class t extends Zt{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=it(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,l,m){let C=this.prepareExternalUrl(l+Rn(m));0==C.length&&(C=this._platformLocation.pathname),this._platformLocation.pushState(e,i,C)}replaceState(e,i,l,m){let C=this.prepareExternalUrl(l+Rn(m));0==C.length&&(C=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,C)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(lt),r.\u0275\u0275inject(gt,8))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Sr=(()=>{class t{constructor(e){this._subject=new r.EventEmitter,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function In(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(Mt(hi(i))),this._locationStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Rn(i))}normalize(e){return t.stripTrailingSlash(function fn(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,hi(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",l=null){this._locationStrategy.pushState(l,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rn(i)),l)}replaceState(e,i="",l=null){this._locationStrategy.replaceState(l,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Rn(i)),l)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(l=>l(e,i))}subscribe(e,i,l){return this._subject.subscribe({next:e,error:i,complete:l})}}return t.normalizeQueryParams=Rn,t.joinWithSlash=it,t.stripTrailingSlash=Mt,t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(Zt))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return function Ui(){return new Sr((0,r.\u0275\u0275inject)(Zt))}()},providedIn:"root"}),t})();function hi(t){return t.replace(/\/index.html$/,"")}var Jn=(()=>((Jn=Jn||{})[Jn.Format=0]="Format",Jn[Jn.Standalone=1]="Standalone",Jn))(),Fn=(()=>((Fn=Fn||{})[Fn.Narrow=0]="Narrow",Fn[Fn.Abbreviated=1]="Abbreviated",Fn[Fn.Wide=2]="Wide",Fn[Fn.Short=3]="Short",Fn))(),gn=(()=>((gn=gn||{})[gn.Short=0]="Short",gn[gn.Medium=1]="Medium",gn[gn.Long=2]="Long",gn[gn.Full=3]="Full",gn))(),hn=(()=>((hn=hn||{})[hn.Decimal=0]="Decimal",hn[hn.Group=1]="Group",hn[hn.List=2]="List",hn[hn.PercentSign=3]="PercentSign",hn[hn.PlusSign=4]="PlusSign",hn[hn.MinusSign=5]="MinusSign",hn[hn.Exponential=6]="Exponential",hn[hn.SuperscriptingExponent=7]="SuperscriptingExponent",hn[hn.PerMille=8]="PerMille",hn[hn.Infinity=9]="Infinity",hn[hn.NaN=10]="NaN",hn[hn.TimeSeparator=11]="TimeSeparator",hn[hn.CurrencyDecimal=12]="CurrencyDecimal",hn[hn.CurrencyGroup=13]="CurrencyGroup",hn))();function Si(t,n){return kt((0,r.\u0275findLocaleData)(t)[r.\u0275LocaleDataIndex.DateFormat],n)}function Er(t,n){return kt((0,r.\u0275findLocaleData)(t)[r.\u0275LocaleDataIndex.TimeFormat],n)}function _r(t,n){return kt((0,r.\u0275findLocaleData)(t)[r.\u0275LocaleDataIndex.DateTimeFormat],n)}function ii(t,n){const e=(0,r.\u0275findLocaleData)(t),i=e[r.\u0275LocaleDataIndex.NumberSymbols][n];if(typeof i>"u"){if(n===hn.CurrencyDecimal)return e[r.\u0275LocaleDataIndex.NumberSymbols][hn.Decimal];if(n===hn.CurrencyGroup)return e[r.\u0275LocaleDataIndex.NumberSymbols][hn.Group]}return i}function Br(t){if(!t[r.\u0275LocaleDataIndex.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.\u0275LocaleDataIndex.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function kt(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function xi(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const kr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Or={},Mn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var qi=(()=>((qi=qi||{})[qi.Short=0]="Short",qi[qi.ShortGMT=1]="ShortGMT",qi[qi.Long=2]="Long",qi[qi.Extended=3]="Extended",qi))(),Cn=(()=>((Cn=Cn||{})[Cn.FullYear=0]="FullYear",Cn[Cn.Month=1]="Month",Cn[Cn.Date=2]="Date",Cn[Cn.Hours=3]="Hours",Cn[Cn.Minutes=4]="Minutes",Cn[Cn.Seconds=5]="Seconds",Cn[Cn.FractionalSeconds=6]="FractionalSeconds",Cn[Cn.Day=7]="Day",Cn))(),yn=(()=>((yn=yn||{})[yn.DayPeriods=0]="DayPeriods",yn[yn.Days=1]="Days",yn[yn.Months=2]="Months",yn[yn.Eras=3]="Eras",yn))();function It(t,n,e,i){let l=function ht(t){if(Xe(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[l,m=1,C=1]=t.split("-").map(F=>+F);return Ko(l,m-1,C)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let i;if(i=t.match(kr))return function ut(t){const n=new Date(0);let e=0,i=0;const l=t[8]?n.setUTCFullYear:n.setFullYear,m=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),i=Number(t[9]+t[11])),l.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const C=Number(t[4]||0)-e,F=Number(t[5]||0)-i,K=Number(t[6]||0),le=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return m.call(n,C,F,K,le),n}(i)}const n=new Date(t);if(!Xe(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=Vn(e,n)||n;let F,C=[];for(;n;){if(F=Mn.exec(n),!F){C.push(n);break}{C=C.concat(F.slice(1));const xe=C.pop();if(!xe)break;n=xe}}let K=l.getTimezoneOffset();i&&(K=Oe(i,K),l=function Re(t,n,e){const i=e?-1:1,l=t.getTimezoneOffset();return function Le(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,i*(Oe(n,l)-l))}(l,i,!0));let le="";return C.forEach(xe=>{const Ae=function Ge(t){if(De[t])return De[t];let n;switch(t){case"G":case"GG":case"GGG":n=ei(yn.Eras,Fn.Abbreviated);break;case"GGGG":n=ei(yn.Eras,Fn.Wide);break;case"GGGGG":n=ei(yn.Eras,Fn.Narrow);break;case"y":n=Yt(Cn.FullYear,1,0,!1,!0);break;case"yy":n=Yt(Cn.FullYear,2,0,!0,!0);break;case"yyy":n=Yt(Cn.FullYear,3,0,!1,!0);break;case"yyyy":n=Yt(Cn.FullYear,4,0,!1,!0);break;case"Y":n=ve(1);break;case"YY":n=ve(2,!0);break;case"YYY":n=ve(3);break;case"YYYY":n=ve(4);break;case"M":case"L":n=Yt(Cn.Month,1,1);break;case"MM":case"LL":n=Yt(Cn.Month,2,1);break;case"MMM":n=ei(yn.Months,Fn.Abbreviated);break;case"MMMM":n=ei(yn.Months,Fn.Wide);break;case"MMMMM":n=ei(yn.Months,Fn.Narrow);break;case"LLL":n=ei(yn.Months,Fn.Abbreviated,Jn.Standalone);break;case"LLLL":n=ei(yn.Months,Fn.Wide,Jn.Standalone);break;case"LLLLL":n=ei(yn.Months,Fn.Narrow,Jn.Standalone);break;case"w":n=me(1);break;case"ww":n=me(2);break;case"W":n=me(1,!0);break;case"d":n=Yt(Cn.Date,1);break;case"dd":n=Yt(Cn.Date,2);break;case"c":case"cc":n=Yt(Cn.Day,1);break;case"ccc":n=ei(yn.Days,Fn.Abbreviated,Jn.Standalone);break;case"cccc":n=ei(yn.Days,Fn.Wide,Jn.Standalone);break;case"ccccc":n=ei(yn.Days,Fn.Narrow,Jn.Standalone);break;case"cccccc":n=ei(yn.Days,Fn.Short,Jn.Standalone);break;case"E":case"EE":case"EEE":n=ei(yn.Days,Fn.Abbreviated);break;case"EEEE":n=ei(yn.Days,Fn.Wide);break;case"EEEEE":n=ei(yn.Days,Fn.Narrow);break;case"EEEEEE":n=ei(yn.Days,Fn.Short);break;case"a":case"aa":case"aaa":n=ei(yn.DayPeriods,Fn.Abbreviated);break;case"aaaa":n=ei(yn.DayPeriods,Fn.Wide);break;case"aaaaa":n=ei(yn.DayPeriods,Fn.Narrow);break;case"b":case"bb":case"bbb":n=ei(yn.DayPeriods,Fn.Abbreviated,Jn.Standalone,!0);break;case"bbbb":n=ei(yn.DayPeriods,Fn.Wide,Jn.Standalone,!0);break;case"bbbbb":n=ei(yn.DayPeriods,Fn.Narrow,Jn.Standalone,!0);break;case"B":case"BB":case"BBB":n=ei(yn.DayPeriods,Fn.Abbreviated,Jn.Format,!0);break;case"BBBB":n=ei(yn.DayPeriods,Fn.Wide,Jn.Format,!0);break;case"BBBBB":n=ei(yn.DayPeriods,Fn.Narrow,Jn.Format,!0);break;case"h":n=Yt(Cn.Hours,1,-12);break;case"hh":n=Yt(Cn.Hours,2,-12);break;case"H":n=Yt(Cn.Hours,1);break;case"HH":n=Yt(Cn.Hours,2);break;case"m":n=Yt(Cn.Minutes,1);break;case"mm":n=Yt(Cn.Minutes,2);break;case"s":n=Yt(Cn.Seconds,1);break;case"ss":n=Yt(Cn.Seconds,2);break;case"S":n=Yt(Cn.FractionalSeconds,1);break;case"SS":n=Yt(Cn.FractionalSeconds,2);break;case"SSS":n=Yt(Cn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=Nn(qi.Short);break;case"ZZZZZ":n=Nn(qi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=Nn(qi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=Nn(qi.Long);break;default:return null}return De[t]=n,n}(xe);le+=Ae?Ae(l,e,K):"''"===xe?"'":xe.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),le}function Ko(t,n,e){const i=new Date(0);return i.setFullYear(t,n,e),i.setHours(0,0,0),i}function Vn(t,n){const e=function wa(t){return(0,r.\u0275findLocaleData)(t)[r.\u0275LocaleDataIndex.LocaleId]}(t);if(Or[e]=Or[e]||{},Or[e][n])return Or[e][n];let i="";switch(n){case"shortDate":i=Si(t,gn.Short);break;case"mediumDate":i=Si(t,gn.Medium);break;case"longDate":i=Si(t,gn.Long);break;case"fullDate":i=Si(t,gn.Full);break;case"shortTime":i=Er(t,gn.Short);break;case"mediumTime":i=Er(t,gn.Medium);break;case"longTime":i=Er(t,gn.Long);break;case"fullTime":i=Er(t,gn.Full);break;case"short":const l=Vn(t,"shortTime"),m=Vn(t,"shortDate");i=Qo(_r(t,gn.Short),[l,m]);break;case"medium":const C=Vn(t,"mediumTime"),F=Vn(t,"mediumDate");i=Qo(_r(t,gn.Medium),[C,F]);break;case"long":const K=Vn(t,"longTime"),le=Vn(t,"longDate");i=Qo(_r(t,gn.Long),[K,le]);break;case"full":const xe=Vn(t,"fullTime"),Ae=Vn(t,"fullDate");i=Qo(_r(t,gn.Full),[xe,Ae])}return i&&(Or[e][n]=i),i}function Qo(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,i){return null!=n&&i in n?n[i]:e})),t}function Rr(t,n,e="-",i,l){let m="";(t<0||l&&t<=0)&&(l?t=1-t:(t=-t,m=e));let C=String(t);for(;C.length<n;)C="0"+C;return i&&(C=C.slice(C.length-n)),m+C}function Yt(t,n,e=0,i=!1,l=!1){return function(m,C){let F=function Ln(t,n){switch(t){case Cn.FullYear:return n.getFullYear();case Cn.Month:return n.getMonth();case Cn.Date:return n.getDate();case Cn.Hours:return n.getHours();case Cn.Minutes:return n.getMinutes();case Cn.Seconds:return n.getSeconds();case Cn.FractionalSeconds:return n.getMilliseconds();case Cn.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,m);if((e>0||F>-e)&&(F+=e),t===Cn.Hours)0===F&&-12===e&&(F=12);else if(t===Cn.FractionalSeconds)return function Lt(t,n){return Rr(t,3).substring(0,n)}(F,n);const K=ii(C,hn.MinusSign);return Rr(F,n,K,i,l)}}function ei(t,n,e=Jn.Format,i=!1){return function(l,m){return function bo(t,n,e,i,l,m){switch(e){case yn.Months:return function qn(t,n,e){const i=(0,r.\u0275findLocaleData)(t),m=kt([i[r.\u0275LocaleDataIndex.MonthsFormat],i[r.\u0275LocaleDataIndex.MonthsStandalone]],n);return kt(m,e)}(n,l,i)[t.getMonth()];case yn.Days:return function Ii(t,n,e){const i=(0,r.\u0275findLocaleData)(t),m=kt([i[r.\u0275LocaleDataIndex.DaysFormat],i[r.\u0275LocaleDataIndex.DaysStandalone]],n);return kt(m,e)}(n,l,i)[t.getDay()];case yn.DayPeriods:const C=t.getHours(),F=t.getMinutes();if(m){const le=function Ke(t){const n=(0,r.\u0275findLocaleData)(t);return Br(n),(n[r.\u0275LocaleDataIndex.ExtraData][2]||[]).map(i=>"string"==typeof i?xi(i):[xi(i[0]),xi(i[1])])}(n),xe=function dt(t,n,e){const i=(0,r.\u0275findLocaleData)(t);Br(i);const m=kt([i[r.\u0275LocaleDataIndex.ExtraData][0],i[r.\u0275LocaleDataIndex.ExtraData][1]],n)||[];return kt(m,e)||[]}(n,l,i),Ae=le.findIndex(et=>{if(Array.isArray(et)){const[Qe,yt]=et,At=C>=Qe.hours&&F>=Qe.minutes,Nt=C<yt.hours||C===yt.hours&&F<yt.minutes;if(Qe.hours<yt.hours){if(At&&Nt)return!0}else if(At||Nt)return!0}else if(et.hours===C&&et.minutes===F)return!0;return!1});if(-1!==Ae)return xe[Ae]}return function xn(t,n,e){const i=(0,r.\u0275findLocaleData)(t),m=kt([i[r.\u0275LocaleDataIndex.DayPeriodsFormat],i[r.\u0275LocaleDataIndex.DayPeriodsStandalone]],n);return kt(m,e)}(n,l,i)[C<12?0:1];case yn.Eras:return function ji(t,n){return kt((0,r.\u0275findLocaleData)(t)[r.\u0275LocaleDataIndex.Eras],n)}(n,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(l,m,t,n,e,i)}}function Nn(t){return function(n,e,i){const l=-1*i,m=ii(e,hn.MinusSign),C=l>0?Math.floor(l/60):Math.ceil(l/60);switch(t){case qi.Short:return(l>=0?"+":"")+Rr(C,2,m)+Rr(Math.abs(l%60),2,m);case qi.ShortGMT:return"GMT"+(l>=0?"+":"")+Rr(C,1,m);case qi.Long:return"GMT"+(l>=0?"+":"")+Rr(C,2,m)+":"+Rr(Math.abs(l%60),2,m);case qi.Extended:return 0===i?"Z":(l>=0?"+":"")+Rr(C,2,m)+":"+Rr(Math.abs(l%60),2,m);default:throw new Error(`Unknown zone width "${t}"`)}}}const Fs=0,we=4;function oe(t){return Ko(t.getFullYear(),t.getMonth(),t.getDate()+(we-t.getDay()))}function me(t,n=!1){return function(e,i){let l;if(n){const m=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,C=e.getDate();l=1+Math.floor((C+m)/7)}else{const m=oe(e),C=function ie(t){const n=Ko(t,Fs,1).getDay();return Ko(t,0,1+(n<=we?we:we+7)-n)}(m.getFullYear()),F=m.getTime()-C.getTime();l=1+Math.round(F/6048e5)}return Rr(l,t,ii(i,hn.MinusSign))}}function ve(t,n=!1){return function(e,i){return Rr(oe(e).getFullYear(),t,ii(i,hn.MinusSign),n)}}const De={};function Oe(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function Xe(t){return t instanceof Date&&!isNaN(t.valueOf())}const fe=/\s+/,Be=[];let Ne=(()=>{class t{constructor(e,i,l,m){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=l,this._renderer=m,this.initialClasses=Be,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(fe):Be}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(fe):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,Boolean(e[i]));this._applyStateDiff()}_updateState(e,i){const l=this.stateMap.get(e);void 0!==l?(l.enabled!==i&&(l.changed=!0,l.enabled=i),l.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],l=e[1];l.changed?(this._toggleClass(i,l.enabled),l.changed=!1):l.touched||(l.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),l.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(fe).forEach(l=>{i?this._renderer.addClass(this._ngEl.nativeElement,l):this._renderer.removeClass(this._ngEl.nativeElement,l)})}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.IterableDiffers),r.\u0275\u0275directiveInject(r.KeyValueDiffers),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class dn{constructor(n,e,i,l){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bt=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,l){this._viewContainer=e,this._template=i,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((l,m,C)=>{if(null==l.previousIndex)i.createEmbeddedView(this._template,new dn(l.item,this._ngForOf,-1,-1),null===C?void 0:C);else if(null==C)i.remove(null===m?void 0:m);else if(null!==m){const F=i.get(m);i.move(F,C),ft(F,l)}});for(let l=0,m=i.length;l<m;l++){const F=i.get(l).context;F.index=l,F.count=m,F.ngForOf=this._ngForOf}e.forEachIdentityChange(l=>{ft(i.get(l.currentIndex),l)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ViewContainerRef),r.\u0275\u0275directiveInject(r.TemplateRef),r.\u0275\u0275directiveInject(r.IterableDiffers))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function ft(t,n){t.context.$implicit=n.item}let on=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new Xo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Mi("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Mi("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ViewContainerRef),r.\u0275\u0275directiveInject(r.TemplateRef))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class Xo{constructor(){this.$implicit=null,this.ngIf=null}}function Mi(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.\u0275stringify)(n)}'.`)}let hl=(()=>{class t{constructor(e,i,l){this._ngEl=e,this._differs=i,this._renderer=l,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[l,m]=e.split("."),C=-1===l.indexOf("-")?void 0:r.RendererStyleFlags2.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,l,m?`${i}${m}`:i,C):this._renderer.removeStyle(this._ngEl.nativeElement,l,C)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.KeyValueDiffers),r.\u0275\u0275directiveInject(r.Renderer2))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),Es=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:l,ngTemplateOutletContext:m,ngTemplateOutletInjector:C}=this;this._viewRef=i.createEmbeddedView(l,m,C?{injector:C}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ViewContainerRef))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[r.\u0275\u0275NgOnChangesFeature]}),t})();function Yr(t,n){return new r.\u0275RuntimeError(2100,!1)}const Uc=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let $n=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw Yr();return e.replace(Uc,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.\u0275\u0275definePipe({name:"titlecase",type:t,pure:!0,standalone:!0}),t})();const ia=new r.InjectionToken("DATE_PIPE_DEFAULT_TIMEZONE"),rr=new r.InjectionToken("DATE_PIPE_DEFAULT_OPTIONS");let dl=(()=>{class t{constructor(e,i,l){this.locale=e,this.defaultTimezone=i,this.defaultOptions=l}transform(e,i,l,m){if(null==e||""===e||e!=e)return null;try{return It(e,i??this.defaultOptions?.dateFormat??"mediumDate",m||this.locale,l??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(C){throw Yr()}}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.LOCALE_ID,16),r.\u0275\u0275directiveInject(ia,24),r.\u0275\u0275directiveInject(rr,24))},t.\u0275pipe=r.\u0275\u0275definePipe({name:"date",type:t,pure:!0,standalone:!0}),t})(),Ao=(()=>{class t{transform(e){return JSON.stringify(e,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.\u0275\u0275definePipe({name:"json",type:t,pure:!1,standalone:!0}),t})(),pc=(()=>{class t{transform(e,i,l){if(null==e)return null;if(!this.supports(e))throw Yr();return e.slice(i,l)}supports(e){return"string"==typeof e||Array.isArray(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.\u0275\u0275definePipe({name:"slice",type:t,pure:!1,standalone:!0}),t})(),Ri=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({}),t})();const ms="browser";function Sa(t){return t===ms}let fh=(()=>{class t{}return t.\u0275prov=(0,r.\u0275\u0275defineInjectable)({token:t,providedIn:"root",factory:()=>new gp((0,r.\u0275\u0275inject)(pe),window)}),t})();class gp{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function Ea(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let l=i.currentNode;for(;l;){const m=l.shadowRoot;if(m){const C=m.getElementById(n)||m.querySelector(`[name="${n}"]`);if(C)return C}l=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,l=e.top+this.window.pageYOffset,m=this.offset();this.window.scrollTo(i-m[0],l-m[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=ra(this.window.history)||ra(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ra(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Ms extends Ve{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hs extends Ms{static makeCurrent(){!function y(t){V||(V=t)}(new Hs)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function Oa(){return $s=$s||document.querySelector("base"),$s?$s.getAttribute("href"):null}();return null==e?null:function Ra(t){Rt=Rt||document.createElement("a"),Rt.setAttribute("href",t);const n=Rt.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){$s=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function se(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[l,m]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(l.trim()===n)return decodeURIComponent(m)}return null}(document.cookie,n)}}let Rt,$s=null;const ua=new r.InjectionToken("TRANSITION_ID"),Qc=[{provide:r.APP_INITIALIZER,useFactory:function Fu(t,n,e){return()=>{e.get(r.ApplicationInitStatus).donePromise.then(()=>{const i=q(),l=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let m=0;m<l.length;m++)i.remove(l[m])})}},deps:[ua,pe,r.Injector],multi:!0}];let xl=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const ql=new r.InjectionToken("EventManagerPlugins");let Xc=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(l=>{l.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,l){return this._findPluginFor(i).addEventListener(e,i,l)}addGlobalEventListener(e,i,l){return this._findPluginFor(i).addGlobalEventListener(e,i,l)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const l=this._plugins;for(let m=0;m<l.length;m++){const C=l[m];if(C.supports(e))return this._eventNameToPlugin.set(e,C),C}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(ql),r.\u0275\u0275inject(r.NgZone))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class wl{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const l=q().getGlobalEventTarget(this._doc,n);if(!l)throw new Error(`Unsupported event target ${l} for event ${e}`);return this.addEventListener(l,e,i)}}let Jc=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,i){const l=this.usageCount;let m=l.get(e)??0;return m+=i,m>0?l.set(e,m):l.delete(e),m}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Cl=(()=>{class t extends Jc{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.forEach(m=>m.remove()),i.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,i){const l=this.doc.createElement("style");l.textContent=i,e.appendChild(l);const m=this.styleRef.get(i);m?m.push(l):this.styleRef.set(i,[l])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Yl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ko=/%COMP%/g,p="%COMP%",x=`_nghost-${p}`,P=`_ngcontent-${p}`,J=new r.InjectionToken("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function tt(t,n){return n.flat(100).map(e=>e.replace(ko,t))}function at(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let wt=(()=>{class t{constructor(e,i,l,m){this.eventManager=e,this.sharedStylesHost=i,this.appId=l,this.removeStylesOnCompDestory=m,this.rendererByCompId=new Map,this.defaultRenderer=new qt(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;const l=this.getOrCreateRenderer(e,i);return l instanceof pn?l.applyToHost(e):l instanceof Wt&&l.applyStyles(),l}getOrCreateRenderer(e,i){const l=this.rendererByCompId;let m=l.get(i.id);if(!m){const C=this.eventManager,F=this.sharedStylesHost,K=this.removeStylesOnCompDestory;switch(i.encapsulation){case r.ViewEncapsulation.Emulated:m=new pn(C,F,i,this.appId,K);break;case r.ViewEncapsulation.ShadowDom:return new ha(C,F,e,i);default:m=new Wt(C,F,i,K)}m.onDestroy=()=>l.delete(i.id),l.set(i.id,m)}return m}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(Xc),r.\u0275\u0275inject(Cl),r.\u0275\u0275inject(r.APP_ID),r.\u0275\u0275inject(J))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class qt{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(Yl[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){(or(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(or(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,l){if(l){e=l+":"+e;const m=Yl[l];m?n.setAttributeNS(m,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const l=Yl[i];l?n.removeAttributeNS(l,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,l){l&(r.RendererStyleFlags2.DashCase|r.RendererStyleFlags2.Important)?n.style.setProperty(e,i,l&r.RendererStyleFlags2.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&r.RendererStyleFlags2.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,at(i)):this.eventManager.addEventListener(n,e,at(i))}}function or(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class ha extends qt{constructor(n,e,i,l){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=tt(l.id,l.styles);for(const C of m){const F=document.createElement("style");F.textContent=C,this.shadowRoot.appendChild(F)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wt extends qt{constructor(n,e,i,l,m=i.id){super(n),this.sharedStylesHost=e,this.removeStylesOnCompDestory=l,this.rendererUsageCount=0,this.styles=tt(m,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class pn extends Wt{constructor(n,e,i,l,m){const C=l+"-"+i.id;super(n,e,i,m,C),this.contentAttr=function ue(t){return P.replace(ko,t)}(C),this.hostAttr=function Pe(t){return x.replace(ko,t)}(C)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let da=(()=>{class t extends wl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,l){return e.addEventListener(i,l,!1),()=>this.removeEventListener(e,i,l)}removeEventListener(e,i,l){return e.removeEventListener(i,l)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Kl=["alt","control","meta","shift"],eu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ir={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ql=(()=>{class t extends wl{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,l){const m=t.parseEventName(i),C=t.eventCallback(m.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>q().onAndCancel(e,m.domEventName,C))}static parseEventName(e){const i=e.toLowerCase().split("."),l=i.shift();if(0===i.length||"keydown"!==l&&"keyup"!==l)return null;const m=t._normalizeKey(i.pop());let C="",F=i.indexOf("code");if(F>-1&&(i.splice(F,1),C="code."),Kl.forEach(le=>{const xe=i.indexOf(le);xe>-1&&(i.splice(xe,1),C+=le+".")}),C+=m,0!=i.length||0===m.length)return null;const K={};return K.domEventName=l,K.fullKey=C,K}static matchEventFullKeyCode(e,i){let l=eu[e.key]||e.key,m="";return i.indexOf("code.")>-1&&(l=e.code,m="code."),!(null==l||!l)&&(l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),Kl.forEach(C=>{C!==l&&(0,Ir[C])(e)&&(m+=C+".")}),m+=l,m===i)}static eventCallback(e,i,l){return m=>{t.matchEventFullKeyCode(m,e)&&l.runGuarded(()=>i(m))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const tu=(0,r.createPlatformFactory)(r.platformCore,"browser",[{provide:r.PLATFORM_ID,useValue:ms},{provide:r.PLATFORM_INITIALIZER,useValue:function Xl(){Hs.makeCurrent()},multi:!0},{provide:pe,useFactory:function gs(){return(0,r.\u0275setDocument)(document),document},deps:[]}]),zu=new r.InjectionToken(""),pa=[{provide:r.\u0275TESTABILITY_GETTER,useClass:class bl{addToWindow(n){r.\u0275global.getAngularTestability=(i,l=!0)=>{const m=n.findTestabilityInTree(i,l);if(null==m)throw new Error("Could not find testability for element.");return m},r.\u0275global.getAllAngularTestabilities=()=>n.getAllTestabilities(),r.\u0275global.getAllAngularRootElements=()=>n.getAllRootElements(),r.\u0275global.frameworkStabilizers||(r.\u0275global.frameworkStabilizers=[]),r.\u0275global.frameworkStabilizers.push(i=>{const l=r.\u0275global.getAllAngularTestabilities();let m=l.length,C=!1;const F=function(K){C=C||K,m--,0==m&&i(C)};l.forEach(function(K){K.whenStable(F)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?q().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:r.\u0275TESTABILITY,useClass:r.Testability,deps:[r.NgZone,r.TestabilityRegistry,r.\u0275TESTABILITY_GETTER]},{provide:r.Testability,useClass:r.Testability,deps:[r.NgZone,r.TestabilityRegistry,r.\u0275TESTABILITY_GETTER]}],mh=[{provide:r.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:r.ErrorHandler,useFactory:function Ka(){return new r.ErrorHandler},deps:[]},{provide:ql,useClass:da,multi:!0,deps:[pe,r.NgZone,r.PLATFORM_ID]},{provide:ql,useClass:Ql,multi:!0,deps:[pe]},{provide:wt,useClass:wt,deps:[Xc,Cl,r.APP_ID,J]},{provide:r.RendererFactory2,useExisting:wt},{provide:Jc,useExisting:Cl},{provide:Cl,useClass:Cl,deps:[pe]},{provide:Xc,useClass:Xc,deps:[ql,r.NgZone]},{provide:class Ds{},useClass:xl,deps:[]},[]];let nu=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.APP_ID,useValue:e.appId},{provide:ua,useExisting:r.APP_ID},Qc]}}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(zu,12))},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({providers:[...mh,...pa],imports:[Ri,r.ApplicationModule]}),t})(),E=(()=>{class t{constructor(e){this._doc=e,this._dom=q()}addTag(e,i=!1){return e?this._getOrCreateElement(e,i):null}addTags(e,i=!1){return e?e.reduce((l,m)=>(m&&l.push(this._getOrCreateElement(m,i)),l),[]):[]}getTag(e){return e&&this._doc.querySelector(`meta[${e}]`)||null}getTags(e){if(!e)return[];const i=this._doc.querySelectorAll(`meta[${e}]`);return i?[].slice.call(i):[]}updateTag(e,i){if(!e)return null;i=i||this._parseSelector(e);const l=this.getTag(i);return l?this._setMetaElementAttributes(e,l):this._getOrCreateElement(e,!0)}removeTag(e){this.removeTagElement(this.getTag(e))}removeTagElement(e){e&&this._dom.remove(e)}_getOrCreateElement(e,i=!1){if(!i){const C=this._parseSelector(e),F=this.getTags(C).filter(K=>this._containsAttributes(e,K))[0];if(void 0!==F)return F}const l=this._dom.createElement("meta");return this._setMetaElementAttributes(e,l),this._doc.getElementsByTagName("head")[0].appendChild(l),l}_setMetaElementAttributes(e,i){return Object.keys(e).forEach(l=>i.setAttribute(this._getMetaKeyMap(l),e[l])),i}_parseSelector(e){const i=e.name?"name":"property";return`${i}="${e[i]}"`}_containsAttributes(e,i){return Object.keys(e).every(l=>i.getAttribute(this._getMetaKeyMap(l))===e[l])}_getMetaKeyMap(e){return s[e]||e}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(e){let i=null;return i=e?new e:function Bi(){return new E((0,r.\u0275\u0275inject)(pe))}(),i},providedIn:"root"}),t})();const s={httpEquiv:"http-equiv"};let v=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(e){let i=null;return i=e?new e:function f(){return new v((0,r.\u0275\u0275inject)(pe))}(),i},providedIn:"root"}),t})();typeof window<"u"&&window;let St=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(e){let i=null;return i=e?new(e||t):r.\u0275\u0275inject(_i),i},providedIn:"root"}),t})(),_i=(()=>{class t extends St{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case r.SecurityContext.NONE:return i;case r.SecurityContext.HTML:return(0,r.\u0275allowSanitizationBypassAndThrow)(i,"HTML")?(0,r.\u0275unwrapSafeValue)(i):(0,r.\u0275_sanitizeHtml)(this._doc,String(i)).toString();case r.SecurityContext.STYLE:return(0,r.\u0275allowSanitizationBypassAndThrow)(i,"Style")?(0,r.\u0275unwrapSafeValue)(i):i;case r.SecurityContext.SCRIPT:if((0,r.\u0275allowSanitizationBypassAndThrow)(i,"Script"))return(0,r.\u0275unwrapSafeValue)(i);throw new Error("unsafe value used in a script context");case r.SecurityContext.URL:return(0,r.\u0275allowSanitizationBypassAndThrow)(i,"URL")?(0,r.\u0275unwrapSafeValue)(i):(0,r.\u0275_sanitizeUrl)(String(i));case r.SecurityContext.RESOURCE_URL:if((0,r.\u0275allowSanitizationBypassAndThrow)(i,"ResourceURL"))return(0,r.\u0275unwrapSafeValue)(i);throw new Error(`unsafe value used in a resource URL context (see ${r.\u0275XSS_SECURITY_URL})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${r.\u0275XSS_SECURITY_URL})`)}}bypassSecurityTrustHtml(e){return(0,r.\u0275bypassSanitizationTrustHtml)(e)}bypassSecurityTrustStyle(e){return(0,r.\u0275bypassSanitizationTrustStyle)(e)}bypassSecurityTrustScript(e){return(0,r.\u0275bypassSanitizationTrustScript)(e)}bypassSecurityTrustUrl(e){return(0,r.\u0275bypassSanitizationTrustUrl)(e)}bypassSecurityTrustResourceUrl(e){return(0,r.\u0275bypassSanitizationTrustResourceUrl)(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(e){let i=null;return i=e?new e:function Jt(t){return new _i(t.get(pe))}(r.\u0275\u0275inject(r.Injector)),i},providedIn:"root"}),t})();function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function A(t,n,e){return(n=function dr(t){var n=function cn(t,n){if("object"!==mn(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,n||"default");if("object"!==mn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===mn(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}let An={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const $i=/[&<>"']/,ns=new RegExp($i.source,"g"),Qr=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Xr=new RegExp(Qr.source,"g"),Gs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xr=t=>Gs[t];function Pr(t,n){if(n){if($i.test(t))return t.replace(ns,xr)}else if(Qr.test(t))return t.replace(Xr,xr);return t}const Qa=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Xa(t){return t.replace(Qa,(n,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const Sl=/(^|[^\[])\^/g;function Vi(t,n){t="string"==typeof t?t:t.source,n=n||"";const e={replace:(i,l)=>(l=(l=l.source||l).replace(Sl,"$1"),t=t.replace(i,l),e),getRegex:()=>new RegExp(t,n)};return e}const wo=/[^\w:]/g,Jr=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Co(t,n,e){if(t){let i;try{i=decodeURIComponent(Xa(e)).replace(wo,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}n&&!Jr.test(e)&&(e=function Ar(t,n){_s[" "+t]||(_s[" "+t]=zr.test(t)?t+"/":iu(t,"/",!0));const e=-1===(t=_s[" "+t]).indexOf(":");return"//"===n.substring(0,2)?e?n:t.replace(ao,"$1")+n:"/"===n.charAt(0)?e?n:t.replace(Oo,"$1")+n:t+n}(n,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const _s={},zr=/^[^:]+:\/*[^/]*$/,ao=/^([^:]+:)[\s\S]*$/,Oo=/^([^:]+:\/*[^/]*)[\s\S]*$/,Na={exec:function(){}};function Bu(t,n){const i=t.replace(/\|/g,(m,C,F)=>{let K=!1,le=C;for(;--le>=0&&"\\"===F[le];)K=!K;return K?"|":" |"}).split(/ \|/);let l=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;l<i.length;l++)i[l]=i[l].trim().replace(/\\\|/g,"|");return i}function iu(t,n,e){const i=t.length;if(0===i)return"";let l=0;for(;l<i;){const m=t.charAt(i-l-1);if(m!==n||e){if(m===n||!e)break;l++}else l++}return t.slice(0,i-l)}function gh(t,n){if(n<1)return"";let e="";for(;n>1;)1&n&&(e+=t),n>>=1,t+=t;return e+t}function Ja(t,n,e,i){const l=n.href,m=n.title?Pr(n.title):null,C=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const F={type:"link",raw:e,href:l,title:m,text:C,tokens:i.inlineTokens(C)};return i.state.inLink=!1,F}return{type:"image",raw:e,href:l,title:m,text:Pr(C)}}class Zs{constructor(n){this.options=n||An}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const i=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:iu(i,"\n")}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const i=e[0],l=function Jl(t,n){const e=t.match(/^(\s+)(?:```)/);if(null===e)return n;const i=e[1];return n.split("\n").map(l=>{const m=l.match(/^\s+/);if(null===m)return l;const[C]=m;return C.length>=i.length?l.slice(i.length):l}).join("\n")}(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:l}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let i=e[2].trim();if(/#$/.test(i)){const l=iu(i,"#");(this.options.pedantic||!l||/ $/.test(l))&&(i=l.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){const i=e[0].replace(/^ *>[ \t]?/gm,""),l=this.lexer.state.top;this.lexer.state.top=!0;const m=this.lexer.blockTokens(i);return this.lexer.state.top=l,{type:"blockquote",raw:e[0],tokens:m,text:i}}}list(n){let e=this.rules.block.list.exec(n);if(e){let i,l,m,C,F,K,le,xe,Ae,et,Qe,yt,At=e[1].trim();const Nt=At.length>1,Gt={type:"list",raw:"",ordered:Nt,start:Nt?+At.slice(0,-1):"",loose:!1,items:[]};At=Nt?`\\d{1,9}\\${At.slice(-1)}`:`\\${At}`,this.options.pedantic&&(At=Nt?At:"[*+-]");const Tn=new RegExp(`^( {0,3}${At})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;n&&(yt=!1,(e=Tn.exec(n))&&!this.rules.block.hr.test(n));){if(i=e[0],n=n.substring(i.length),xe=e[2].split("\n",1)[0].replace(/^\t+/,Fi=>" ".repeat(3*Fi.length)),Ae=n.split("\n",1)[0],this.options.pedantic?(C=2,Qe=xe.trimLeft()):(C=e[2].search(/[^ ]/),C=C>4?1:C,Qe=xe.slice(C),C+=e[1].length),K=!1,!xe&&/^ *$/.test(Ae)&&(i+=Ae+"\n",n=n.substring(Ae.length+1),yt=!0),!yt){const Fi=new RegExp(`^ {0,${Math.min(3,C-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Cr=new RegExp(`^ {0,${Math.min(3,C-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ui=new RegExp(`^ {0,${Math.min(3,C-1)}}(?:\`\`\`|~~~)`),pr=new RegExp(`^ {0,${Math.min(3,C-1)}}#`);for(;n&&(et=n.split("\n",1)[0],Ae=et,this.options.pedantic&&(Ae=Ae.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ui.test(Ae)||pr.test(Ae)||Fi.test(Ae)||Cr.test(n)));){if(Ae.search(/[^ ]/)>=C||!Ae.trim())Qe+="\n"+Ae.slice(C);else{if(K||xe.search(/[^ ]/)>=4||ui.test(xe)||pr.test(xe)||Cr.test(xe))break;Qe+="\n"+Ae}!K&&!Ae.trim()&&(K=!0),i+=et+"\n",n=n.substring(et.length+1),xe=Ae.slice(C)}}Gt.loose||(le?Gt.loose=!0:/\n *\n *$/.test(i)&&(le=!0)),this.options.gfm&&(l=/^\[[ xX]\] /.exec(Qe),l&&(m="[ ] "!==l[0],Qe=Qe.replace(/^\[[ xX]\] +/,""))),Gt.items.push({type:"list_item",raw:i,task:!!l,checked:m,loose:!1,text:Qe}),Gt.raw+=i}Gt.items[Gt.items.length-1].raw=i.trimRight(),Gt.items[Gt.items.length-1].text=Qe.trimRight(),Gt.raw=Gt.raw.trimRight();const Xi=Gt.items.length;for(F=0;F<Xi;F++)if(this.lexer.state.top=!1,Gt.items[F].tokens=this.lexer.blockTokens(Gt.items[F].text,[]),!Gt.loose){const Fi=Gt.items[F].tokens.filter(ui=>"space"===ui.type),Cr=Fi.length>0&&Fi.some(ui=>/\n.*\n/.test(ui.raw));Gt.loose=Cr}if(Gt.loose)for(F=0;F<Xi;F++)Gt.items[F].loose=!0;return Gt}}html(n){const e=this.rules.block.html.exec(n);if(e){const i={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){const l=this.options.sanitizer?this.options.sanitizer(e[0]):Pr(e[0]);i.type="paragraph",i.text=l,i.tokens=this.lexer.inline(l)}return i}}def(n){const e=this.rules.block.def.exec(n);if(e){const i=e[1].toLowerCase().replace(/\s+/g," "),l=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",m=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:l,title:m}}}table(n){const e=this.rules.block.table.exec(n);if(e){const i={type:"table",header:Bu(e[1]).map(l=>({text:l})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=e[0];let m,C,F,K,l=i.align.length;for(m=0;m<l;m++)i.align[m]=/^ *-+: *$/.test(i.align[m])?"right":/^ *:-+: *$/.test(i.align[m])?"center":/^ *:-+ *$/.test(i.align[m])?"left":null;for(l=i.rows.length,m=0;m<l;m++)i.rows[m]=Bu(i.rows[m],i.header.length).map(le=>({text:le}));for(l=i.header.length,C=0;C<l;C++)i.header[C].tokens=this.lexer.inline(i.header[C].text);for(l=i.rows.length,C=0;C<l;C++)for(K=i.rows[C],F=0;F<K.length;F++)K[F].tokens=this.lexer.inline(K[F].text);return i}}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const i="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(n){const e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:Pr(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Pr(e[0]):e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const C=iu(i.slice(0,-1),"\\");if((i.length-C.length)%2==0)return}else{const C=function xc(t,n){if(-1===t.indexOf(n[1]))return-1;const e=t.length;let i=0,l=0;for(;l<e;l++)if("\\"===t[l])l++;else if(t[l]===n[0])i++;else if(t[l]===n[1]&&(i--,i<0))return l;return-1}(e[2],"()");if(C>-1){const K=(0===e[0].indexOf("!")?5:4)+e[1].length+C;e[2]=e[2].substring(0,C),e[0]=e[0].substring(0,K).trim(),e[3]=""}}let l=e[2],m="";if(this.options.pedantic){const C=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(l);C&&(l=C[1],m=C[3])}else m=e[3]?e[3].slice(1,-1):"";return l=l.trim(),/^</.test(l)&&(l=this.options.pedantic&&!/>$/.test(i)?l.slice(1):l.slice(1,-1)),Ja(e,{href:l&&l.replace(this.rules.inline._escapes,"$1"),title:m&&m.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(n,e){let i;if((i=this.rules.inline.reflink.exec(n))||(i=this.rules.inline.nolink.exec(n))){let l=(i[2]||i[1]).replace(/\s+/g," ");if(l=e[l.toLowerCase()],!l){const m=i[0].charAt(0);return{type:"text",raw:m,text:m}}return Ja(i,l,i[0],this.lexer)}}emStrong(n,e,i=""){let l=this.rules.inline.emStrong.lDelim.exec(n);if(!l||l[3]&&i.match(/[\p{L}\p{N}]/u))return;const m=l[1]||l[2]||"";if(!m||m&&(""===i||this.rules.inline.punctuation.exec(i))){const C=l[0].length-1;let F,K,le=C,xe=0;const Ae="*"===l[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Ae.lastIndex=0,e=e.slice(-1*n.length+C);null!=(l=Ae.exec(e));){if(F=l[1]||l[2]||l[3]||l[4]||l[5]||l[6],!F)continue;if(K=F.length,l[3]||l[4]){le+=K;continue}if((l[5]||l[6])&&C%3&&!((C+K)%3)){xe+=K;continue}if(le-=K,le>0)continue;K=Math.min(K,K+le+xe);const et=n.slice(0,C+l.index+(l[0].length-F.length)+K);if(Math.min(C,K)%2){const yt=et.slice(1,-1);return{type:"em",raw:et,text:yt,tokens:this.lexer.inlineTokens(yt)}}const Qe=et.slice(2,-2);return{type:"strong",raw:et,text:Qe,tokens:this.lexer.inlineTokens(Qe)}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let i=e[2].replace(/\n/g," ");const l=/[^ ]/.test(i),m=/^ /.test(i)&&/ $/.test(i);return l&&m&&(i=i.substring(1,i.length-1)),i=Pr(i,!0),{type:"codespan",raw:e[0],text:i}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n,e){const i=this.rules.inline.autolink.exec(n);if(i){let l,m;return"@"===i[2]?(l=Pr(this.options.mangle?e(i[1]):i[1]),m="mailto:"+l):(l=Pr(i[1]),m=l),{type:"link",raw:i[0],text:l,href:m,tokens:[{type:"text",raw:l,text:l}]}}}url(n,e){let i;if(i=this.rules.inline.url.exec(n)){let l,m;if("@"===i[2])l=Pr(this.options.mangle?e(i[0]):i[0]),m="mailto:"+l;else{let C;do{C=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(C!==i[0]);l=Pr(i[0]),m="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:l,href:m,tokens:[{type:"text",raw:l,text:l}]}}}inlineText(n,e){const i=this.rules.inline.text.exec(n);if(i){let l;return l=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Pr(i[0]):i[0]:Pr(this.options.smartypants?e(i[0]):i[0]),{type:"text",raw:i[0],text:l}}}}const wn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Na,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};wn.def=Vi(wn.def).replace("label",wn._label).replace("title",wn._title).getRegex(),wn.bullet=/(?:[*+-]|\d{1,9}[.)])/,wn.listItemStart=Vi(/^( *)(bull) */).replace("bull",wn.bullet).getRegex(),wn.list=Vi(wn.list).replace(/bull/g,wn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+wn.def.source+")").getRegex(),wn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,wn.html=Vi(wn.html,"i").replace("comment",wn._comment).replace("tag",wn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),wn.paragraph=Vi(wn._paragraph).replace("hr",wn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wn._tag).getRegex(),wn.blockquote=Vi(wn.blockquote).replace("paragraph",wn.paragraph).getRegex(),wn.normal={...wn},wn.gfm={...wn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},wn.gfm.table=Vi(wn.gfm.table).replace("hr",wn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wn._tag).getRegex(),wn.gfm.paragraph=Vi(wn._paragraph).replace("hr",wn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",wn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wn._tag).getRegex(),wn.pedantic={...wn.normal,html:Vi("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",wn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Na,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Vi(wn.normal._paragraph).replace("hr",wn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",wn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const en={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Na,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Na,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function fd(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function el(t){let e,i,n="";const l=t.length;for(e=0;e<l;e++)i=t.charCodeAt(e),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}en._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",en.punctuation=Vi(en.punctuation).replace(/punctuation/g,en._punctuation).getRegex(),en.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,en.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,en._comment=Vi(wn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),en.emStrong.lDelim=Vi(en.emStrong.lDelim).replace(/punct/g,en._punctuation).getRegex(),en.emStrong.rDelimAst=Vi(en.emStrong.rDelimAst,"g").replace(/punct/g,en._punctuation).getRegex(),en.emStrong.rDelimUnd=Vi(en.emStrong.rDelimUnd,"g").replace(/punct/g,en._punctuation).getRegex(),en._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,en._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,en._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,en.autolink=Vi(en.autolink).replace("scheme",en._scheme).replace("email",en._email).getRegex(),en._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,en.tag=Vi(en.tag).replace("comment",en._comment).replace("attribute",en._attribute).getRegex(),en._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,en._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,en._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,en.link=Vi(en.link).replace("label",en._label).replace("href",en._href).replace("title",en._title).getRegex(),en.reflink=Vi(en.reflink).replace("label",en._label).replace("ref",wn._label).getRegex(),en.nolink=Vi(en.nolink).replace("ref",wn._label).getRegex(),en.reflinkSearch=Vi(en.reflinkSearch,"g").replace("reflink",en.reflink).replace("nolink",en.nolink).getRegex(),en.normal={...en},en.pedantic={...en.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Vi(/^!?\[(label)\]\((.*?)\)/).replace("label",en._label).getRegex(),reflink:Vi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",en._label).getRegex()},en.gfm={...en.normal,escape:Vi(en.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},en.gfm.url=Vi(en.gfm.url,"i").replace("email",en.gfm._extended_email).getRegex(),en.breaks={...en.gfm,br:Vi(en.br).replace("{2,}","*").getRegex(),text:Vi(en.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class El{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||An,this.options.tokenizer=this.options.tokenizer||new Zs,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:wn.normal,inline:en.normal};this.options.pedantic?(e.block=wn.pedantic,e.inline=en.pedantic):this.options.gfm&&(e.block=wn.gfm,e.inline=this.options.breaks?en.breaks:en.gfm),this.tokenizer.rules=e}static get rules(){return{block:wn,inline:en}}static lex(n,e){return new El(e).lex(n)}static lexInline(n,e){return new El(e).inlineTokens(n)}lex(n){let e;for(n=n.replace(/\r\n|\r/g,"\n"),this.blockTokens(n,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(n,e=[]){let i,l,m,C;for(n=this.options.pedantic?n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n.replace(/^( *)(\t+)/gm,(F,K,le)=>K+"    ".repeat(le.length));n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(F=>!!(i=F.call({lexer:this},n,e))&&(n=n.substring(i.raw.length),e.push(i),!0)))){if(i=this.tokenizer.space(n)){n=n.substring(i.raw.length),1===i.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(i);continue}if(i=this.tokenizer.code(n)){n=n.substring(i.raw.length),l=e[e.length-1],!l||"paragraph"!==l.type&&"text"!==l.type?e.push(i):(l.raw+="\n"+i.raw,l.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=l.text);continue}if(i=this.tokenizer.fences(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(n)){n=n.substring(i.raw.length),l=e[e.length-1],!l||"paragraph"!==l.type&&"text"!==l.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(l.raw+="\n"+i.raw,l.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=l.text);continue}if(i=this.tokenizer.table(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(m=n,this.options.extensions&&this.options.extensions.startBlock){let F=1/0;const K=n.slice(1);let le;this.options.extensions.startBlock.forEach(function(xe){le=xe.call({lexer:this},K),"number"==typeof le&&le>=0&&(F=Math.min(F,le))}),F<1/0&&F>=0&&(m=n.substring(0,F+1))}if(this.state.top&&(i=this.tokenizer.paragraph(m))){l=e[e.length-1],C&&"paragraph"===l.type?(l.raw+="\n"+i.raw,l.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):e.push(i),C=m.length!==n.length,n=n.substring(i.raw.length);continue}if(i=this.tokenizer.text(n)){n=n.substring(i.raw.length),l=e[e.length-1],l&&"text"===l.type?(l.raw+="\n"+i.raw,l.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):e.push(i);continue}if(n){const F="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(F);break}throw new Error(F)}}return this.state.top=!0,e}inline(n,e=[]){return this.inlineQueue.push({src:n,tokens:e}),e}inlineTokens(n,e=[]){let i,l,m,F,K,le,C=n;if(this.tokens.links){const xe=Object.keys(this.tokens.links);if(xe.length>0)for(;null!=(F=this.tokenizer.rules.inline.reflinkSearch.exec(C));)xe.includes(F[0].slice(F[0].lastIndexOf("[")+1,-1))&&(C=C.slice(0,F.index)+"["+gh("a",F[0].length-2)+"]"+C.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(F=this.tokenizer.rules.inline.blockSkip.exec(C));)C=C.slice(0,F.index)+"["+gh("a",F[0].length-2)+"]"+C.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(F=this.tokenizer.rules.inline.escapedEmSt.exec(C));)C=C.slice(0,F.index+F[0].length-2)+"++"+C.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;n;)if(K||(le=""),K=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(xe=>!!(i=xe.call({lexer:this},n,e))&&(n=n.substring(i.raw.length),e.push(i),!0)))){if(i=this.tokenizer.escape(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(n)){n=n.substring(i.raw.length),l=e[e.length-1],l&&"text"===i.type&&"text"===l.type?(l.raw+=i.raw,l.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(i.raw.length),l=e[e.length-1],l&&"text"===i.type&&"text"===l.type?(l.raw+=i.raw,l.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(n,C,le)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(n,el)){n=n.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(n,el))){n=n.substring(i.raw.length),e.push(i);continue}if(m=n,this.options.extensions&&this.options.extensions.startInline){let xe=1/0;const Ae=n.slice(1);let et;this.options.extensions.startInline.forEach(function(Qe){et=Qe.call({lexer:this},Ae),"number"==typeof et&&et>=0&&(xe=Math.min(xe,et))}),xe<1/0&&xe>=0&&(m=n.substring(0,xe+1))}if(i=this.tokenizer.inlineText(m,fd)){n=n.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(le=i.raw.slice(-1)),K=!0,l=e[e.length-1],l&&"text"===l.type?(l.raw+=i.raw,l.text+=i.text):e.push(i);continue}if(n){const xe="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(xe);break}throw new Error(xe)}}return e}}class md{constructor(n){this.options=n||An}code(n,e,i){const l=(e||"").match(/\S*/)[0];if(this.options.highlight){const m=this.options.highlight(n,l);null!=m&&m!==n&&(i=!0,n=m)}return n=n.replace(/\n$/,"")+"\n",l?'<pre><code class="'+this.options.langPrefix+Pr(l)+'">'+(i?n:Pr(n,!0))+"</code></pre>\n":"<pre><code>"+(i?n:Pr(n,!0))+"</code></pre>\n"}blockquote(n){return`<blockquote>\n${n}</blockquote>\n`}html(n){return n}heading(n,e,i,l){return this.options.headerIds?`<h${e} id="${this.options.headerPrefix+l.slug(i)}">${n}</h${e}>\n`:`<h${e}>${n}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(n,e,i){const l=e?"ol":"ul";return"<"+l+(e&&1!==i?' start="'+i+'"':"")+">\n"+n+"</"+l+">\n"}listitem(n){return`<li>${n}</li>\n`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return`<p>${n}</p>\n`}table(n,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+n+"</thead>\n"+e+"</table>\n"}tablerow(n){return`<tr>\n${n}</tr>\n`}tablecell(n,e){const i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+n+`</${i}>\n`}strong(n){return`<strong>${n}</strong>`}em(n){return`<em>${n}</em>`}codespan(n){return`<code>${n}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return`<del>${n}</del>`}link(n,e,i){if(null===(n=Co(this.options.sanitize,this.options.baseUrl,n)))return i;let l='<a href="'+n+'"';return e&&(l+=' title="'+e+'"'),l+=">"+i+"</a>",l}image(n,e,i){if(null===(n=Co(this.options.sanitize,this.options.baseUrl,n)))return i;let l=`<img src="${n}" alt="${i}"`;return e&&(l+=` title="${e}"`),l+=this.options.xhtml?"/>":">",l}text(n){return n}}class eo{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,i){return""+i}image(n,e,i){return""+i}br(){return""}}class _h{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,e){let i=n,l=0;if(this.seen.hasOwnProperty(i)){l=this.seen[n];do{l++,i=n+"-"+l}while(this.seen.hasOwnProperty(i))}return e||(this.seen[n]=l,this.seen[i]=0),i}slug(n,e={}){const i=this.serialize(n);return this.getNextSafeSlug(i,e.dryrun)}}class ru{constructor(n){this.options=n||An,this.options.renderer=this.options.renderer||new md,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new eo,this.slugger=new _h}static parse(n,e){return new ru(e).parse(n)}static parseInline(n,e){return new ru(e).parseInline(n)}parse(n,e=!0){let l,m,C,F,K,le,xe,Ae,et,Qe,yt,At,Nt,Gt,Tn,Xi,Fi,Cr,ui,i="";const pr=n.length;for(l=0;l<pr;l++)if(Qe=n[l],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Qe.type]&&(ui=this.options.extensions.renderers[Qe.type].call({parser:this},Qe),!1!==ui||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Qe.type)))i+=ui||"";else switch(Qe.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(Qe.tokens),Qe.depth,Xa(this.parseInline(Qe.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(Qe.text,Qe.lang,Qe.escaped);continue;case"table":for(Ae="",xe="",F=Qe.header.length,m=0;m<F;m++)xe+=this.renderer.tablecell(this.parseInline(Qe.header[m].tokens),{header:!0,align:Qe.align[m]});for(Ae+=this.renderer.tablerow(xe),et="",F=Qe.rows.length,m=0;m<F;m++){for(le=Qe.rows[m],xe="",K=le.length,C=0;C<K;C++)xe+=this.renderer.tablecell(this.parseInline(le[C].tokens),{header:!1,align:Qe.align[C]});et+=this.renderer.tablerow(xe)}i+=this.renderer.table(Ae,et);continue;case"blockquote":et=this.parse(Qe.tokens),i+=this.renderer.blockquote(et);continue;case"list":for(yt=Qe.ordered,At=Qe.start,Nt=Qe.loose,F=Qe.items.length,et="",m=0;m<F;m++)Tn=Qe.items[m],Xi=Tn.checked,Fi=Tn.task,Gt="",Tn.task&&(Cr=this.renderer.checkbox(Xi),Nt?Tn.tokens.length>0&&"paragraph"===Tn.tokens[0].type?(Tn.tokens[0].text=Cr+" "+Tn.tokens[0].text,Tn.tokens[0].tokens&&Tn.tokens[0].tokens.length>0&&"text"===Tn.tokens[0].tokens[0].type&&(Tn.tokens[0].tokens[0].text=Cr+" "+Tn.tokens[0].tokens[0].text)):Tn.tokens.unshift({type:"text",text:Cr}):Gt+=Cr),Gt+=this.parse(Tn.tokens,Nt),et+=this.renderer.listitem(Gt,Fi,Xi);i+=this.renderer.list(et,yt,At);continue;case"html":i+=this.renderer.html(Qe.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(Qe.tokens));continue;case"text":for(et=Qe.tokens?this.parseInline(Qe.tokens):Qe.text;l+1<pr&&"text"===n[l+1].type;)Qe=n[++l],et+="\n"+(Qe.tokens?this.parseInline(Qe.tokens):Qe.text);i+=e?this.renderer.paragraph(et):et;continue;default:{const Uo='Token with "'+Qe.type+'" type was not found.';if(this.options.silent)return void console.error(Uo);throw new Error(Uo)}}return i}parseInline(n,e){e=e||this.renderer;let l,m,C,i="";const F=n.length;for(l=0;l<F;l++)if(m=n[l],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(C=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==C||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(m.type)))i+=C||"";else switch(m.type){case"escape":case"text":i+=e.text(m.text);break;case"html":i+=e.html(m.text);break;case"link":i+=e.link(m.href,m.title,this.parseInline(m.tokens,e));break;case"image":i+=e.image(m.href,m.title,m.text);break;case"strong":i+=e.strong(this.parseInline(m.tokens,e));break;case"em":i+=e.em(this.parseInline(m.tokens,e));break;case"codespan":i+=e.codespan(m.text);break;case"br":i+=e.br();break;case"del":i+=e.del(this.parseInline(m.tokens,e));break;default:{const K='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(K);throw new Error(K)}}return i}}class Tl{constructor(n){this.options=n||An}preprocess(n){return n}postprocess(n){return n}}function yh(t,n){return(e,i,l)=>{"function"==typeof i&&(l=i,i=null);const m={...i},C=function ju(t,n,e){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const l="<p>An error occurred:</p><pre>"+Pr(i.message+"",!0)+"</pre>";return n?Promise.resolve(l):e?void e(null,l):l}if(n)return Promise.reject(i);if(!e)throw i;e(i)}}((i={...Hn.defaults,...m}).silent,i.async,l);if(typeof e>"u"||null===e)return C(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return C(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(function Vu(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),l){const F=i.highlight;let K;try{i.hooks&&(e=i.hooks.preprocess(e)),K=t(e,i)}catch(Ae){return C(Ae)}const le=function(Ae){let et;if(!Ae)try{i.walkTokens&&Hn.walkTokens(K,i.walkTokens),et=n(K,i),i.hooks&&(et=i.hooks.postprocess(et))}catch(Qe){Ae=Qe}return i.highlight=F,Ae?C(Ae):l(null,et)};if(!F||F.length<3||(delete i.highlight,!K.length))return le();let xe=0;return Hn.walkTokens(K,function(Ae){"code"===Ae.type&&(xe++,setTimeout(()=>{F(Ae.text,Ae.lang,function(et,Qe){if(et)return le(et);null!=Qe&&Qe!==Ae.text&&(Ae.text=Qe,Ae.escaped=!0),xe--,0===xe&&le()})},0))}),void(0===xe&&le())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(e):e).then(F=>t(F,i)).then(F=>i.walkTokens?Promise.all(Hn.walkTokens(F,i.walkTokens)).then(()=>F):F).then(F=>n(F,i)).then(F=>i.hooks?i.hooks.postprocess(F):F).catch(C);try{i.hooks&&(e=i.hooks.preprocess(e));const F=t(e,i);i.walkTokens&&Hn.walkTokens(F,i.walkTokens);let K=n(F,i);return i.hooks&&(K=i.hooks.postprocess(K)),K}catch(F){return C(F)}}}function Hn(t,n,e){return yh(El.lex,ru.parse)(t,n,e)}A(Tl,"passThroughHooks",new Set(["preprocess","postprocess"])),Hn.options=Hn.setOptions=function(t){return function Fr(t){An=t}(Hn.defaults={...Hn.defaults,...t}),Hn},Hn.getDefaults=function ri(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Hn.defaults=An,Hn.use=function(...t){const n=Hn.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(e=>{const i={...e};if(i.async=Hn.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if(l.renderer){const m=n.renderers[l.name];n.renderers[l.name]=m?function(...C){let F=l.renderer.apply(this,C);return!1===F&&(F=m.apply(this,C)),F}:l.renderer}if(l.tokenizer){if(!l.level||"block"!==l.level&&"inline"!==l.level)throw new Error("extension level must be 'block' or 'inline'");n[l.level]?n[l.level].unshift(l.tokenizer):n[l.level]=[l.tokenizer],l.start&&("block"===l.level?n.startBlock?n.startBlock.push(l.start):n.startBlock=[l.start]:"inline"===l.level&&(n.startInline?n.startInline.push(l.start):n.startInline=[l.start]))}l.childTokens&&(n.childTokens[l.name]=l.childTokens)}),i.extensions=n),e.renderer){const l=Hn.defaults.renderer||new md;for(const m in e.renderer){const C=l[m];l[m]=(...F)=>{let K=e.renderer[m].apply(l,F);return!1===K&&(K=C.apply(l,F)),K}}i.renderer=l}if(e.tokenizer){const l=Hn.defaults.tokenizer||new Zs;for(const m in e.tokenizer){const C=l[m];l[m]=(...F)=>{let K=e.tokenizer[m].apply(l,F);return!1===K&&(K=C.apply(l,F)),K}}i.tokenizer=l}if(e.hooks){const l=Hn.defaults.hooks||new Tl;for(const m in e.hooks){const C=l[m];l[m]=Tl.passThroughHooks.has(m)?F=>{if(Hn.defaults.async)return Promise.resolve(e.hooks[m].call(l,F)).then(le=>C.call(l,le));const K=e.hooks[m].call(l,F);return C.call(l,K)}:(...F)=>{let K=e.hooks[m].apply(l,F);return!1===K&&(K=C.apply(l,F)),K}}i.hooks=l}if(e.walkTokens){const l=Hn.defaults.walkTokens;i.walkTokens=function(m){let C=[];return C.push(e.walkTokens.call(this,m)),l&&(C=C.concat(l.call(this,m))),C}}Hn.setOptions(i)})},Hn.walkTokens=function(t,n){let e=[];for(const i of t)switch(e=e.concat(n.call(Hn,i)),i.type){case"table":for(const l of i.header)e=e.concat(Hn.walkTokens(l.tokens,n));for(const l of i.rows)for(const m of l)e=e.concat(Hn.walkTokens(m.tokens,n));break;case"list":e=e.concat(Hn.walkTokens(i.items,n));break;default:Hn.defaults.extensions&&Hn.defaults.extensions.childTokens&&Hn.defaults.extensions.childTokens[i.type]?Hn.defaults.extensions.childTokens[i.type].forEach(function(l){e=e.concat(Hn.walkTokens(i[l],n))}):i.tokens&&(e=e.concat(Hn.walkTokens(i.tokens,n)))}return e},Hn.parseInline=yh(El.lexInline,ru.parseInline),Hn.Parser=ru,Hn.parser=ru.parse,Hn.Renderer=md,Hn.TextRenderer=eo,Hn.Lexer=El,Hn.lexer=El.lex,Hn.Tokenizer=Zs,Hn.Slugger=_h,Hn.Hooks=Tl,Hn.parse=Hn;var Lf=Me(153);function vh(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"pre")(1,"code"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.codeSnippet)}}function Ig(t,n){if(1&t&&r.\u0275\u0275element(0,"div",3),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("innerHTML",e.codeSnippet,r.\u0275\u0275sanitizeHtml)}}let tr=(()=>{class t{constructor(e,i,l){A(this,"platformId",void 0),A(this,"el",void 0),A(this,"highlightJsService",void 0),A(this,"setClass",!0),A(this,"codeSnippet",void 0),A(this,"processMarkdown",!1),A(this,"scrollable",!0),this.platformId=e,this.el=i,this.highlightJsService=l}ngOnChanges(){this.processMarkdown&&(this.codeSnippet=Hn(this.codeSnippet))}ngAfterViewInit(){if(Sa(this.platformId)){const e=this.el.nativeElement.querySelectorAll("pre");for(const i of e)i.classList.contains("a-pre")||(i.className+=" a-pre",this.scrollable&&(i.className+=" a-pre--scrollable")),this.highlightJsService.highlight(i)}}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.PLATFORM_ID),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Lf.vp))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-code-snippet"]],hostVars:2,hostBindings:function(e,i){2&e&&r.\u0275\u0275classProp("ngx-code-snippet",i.setClass)},inputs:{codeSnippet:"codeSnippet",processMarkdown:"processMarkdown",scrollable:"scrollable"},features:[r.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[[1,"aui-code-snippet__inner"],[4,"ngIf"],["class","code-snippet-md",3,"innerHTML",4,"ngIf"],[1,"code-snippet-md",3,"innerHTML"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,vh,3,1,"pre",1),r.\u0275\u0275template(2,Ig,1,1,"div",2),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.processMarkdown),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.processMarkdown))},dependencies:[on],encapsulation:2,changeDetection:0})),t})();var lo=Me(254),Uu=Me(866),vp=Me(9),Dl=Me(454);function Zn(...t){let n=t[t.length-1];return(0,Uu.K)(n)?(t.pop(),(0,Dl.r)(t,n)):(0,vp.n)(t)}var pi=Me(529),bh=Me(279);class Ws extends pi.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return e&&!e.closed&&n.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new bh.N;return this._value}next(n){super.next(this._value=n)}}const ou=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Of=Me(688),ys=Me(489);class Pg extends ys.L{notifyNext(n,e,i,l,m){this.destination.next(e)}notifyError(n,e){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class Ag extends ys.L{constructor(n,e,i){super(),this.parent=n,this.outerValue=e,this.outerIndex=i,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Rf=Me(249),jr=Me(498);function Ff(t,n,e,i,l=new Ag(t,e,i)){if(!l.closed)return n instanceof jr.y?n.subscribe(l):(0,Rf.s)(n)(l)}const gd={};function _d(...t){let n,e;return(0,Uu.K)(t[t.length-1])&&(e=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&(0,Of.k)(t[0])&&(t=t[0]),(0,vp.n)(t,e).lift(new is(n))}class is{constructor(n){this.resultSelector=n}call(n,e){return e.subscribe(new wc(n,this.resultSelector))}}class wc extends Pg{constructor(n,e){super(n),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(gd),this.observables.push(n)}_complete(){const n=this.observables,e=n.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(Ff(this,n[i],void 0,i))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,e,i){const l=this.values,C=this.toRespond?l[i]===gd?--this.toRespond:this.toRespond:0;l[i]=e,0===C&&(this.resultSelector?this._tryResultSelector(l):this.destination.next(l.slice()))}_tryResultSelector(n){let e;try{e=this.resultSelector.apply(this,n)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}var rs=Me(146);function zf(...t){return function Nf(){return(0,rs.J)(1)}()(Zn(...t))}const Cc=new jr.y(t=>t.complete());function Bf(t){return t?function Lg(t){return new jr.y(n=>t.schedule(()=>n.complete()))}(t):Cc}function kg(t){return new jr.y(n=>{let e;try{e=t()}catch(l){return void n.error(l)}return(e?(0,lo.D)(e):Bf()).subscribe(n)})}var Og=Me(843);function Hu(t,n){return new jr.y(n?e=>n.schedule(bp,0,{error:t,subscriber:e}):e=>e.error(t))}function bp({error:t,subscriber:n}){n.error(t)}var yd=Me(762),Qn=Me(850),za=Me(177);function qs(t,n){return"function"==typeof n?e=>e.pipe(qs((i,l)=>(0,lo.D)(t(i,l)).pipe((0,Qn.U)((m,C)=>n(i,m,l,C))))):e=>e.lift(new Xy(t))}class Xy{constructor(n){this.project=n}call(n,e){return e.subscribe(new Jy(n,this.project))}}class Jy extends za.Ds{constructor(n,e){super(n),this.project=e,this.index=0}_next(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(l){return void this.destination.error(l)}this._innerSub(e)}_innerSub(n){const e=this.innerSubscription;e&&e.unsubscribe();const i=new za.IY(this),l=this.destination;l.add(i),this.innerSubscription=(0,za.ft)(n,i),this.innerSubscription!==i&&l.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const xp=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function $u(t){return n=>0===t?Bf():n.lift(new xh(t))}class xh{constructor(n){if(this.total=n,this.total<0)throw new xp}call(n,e){return e.subscribe(new vd(n,this.total))}}class vd extends ys.L{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){const e=this.total,i=++this.count;i<=e&&(this.destination.next(n),i===e&&(this.destination.complete(),this.unsubscribe()))}}function fa(t,n){return function(i){return i.lift(new Vf(t,n))}}class Vf{constructor(n,e){this.predicate=n,this.thisArg=e}call(n,e){return e.subscribe(new to(n,this.predicate,this.thisArg))}}class to extends ys.L{constructor(n,e,i){super(n),this.predicate=e,this.thisArg=i,this.count=0}_next(n){let e;try{e=this.predicate.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(n)}}var vs=Me(709);function bd(t=null){return n=>n.lift(new wp(t))}class wp{constructor(n){this.defaultValue=n}call(n,e){return e.subscribe(new Cp(n,this.defaultValue))}}class Cp extends ys.L{constructor(n,e){super(n),this.defaultValue=e,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function wh(t=Ch){return n=>n.lift(new jf(t))}class jf{constructor(n){this.errorFactory=n}call(n,e){return e.subscribe(new Sp(n,this.errorFactory))}}class Sp extends ys.L{constructor(n,e){super(n),this.errorFactory=e,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function Ch(){return new ou}var Sh=Me(379);function ec(t,n){const e=arguments.length>=2;return i=>i.pipe(t?fa((l,m)=>t(l,m,i)):Sh.y,$u(1),e?bd(n):wh(()=>new ou))}function su(t,n){return(0,vs.zg)(t,n,1)}function Sc(){}var Uf=Me(43);function ar(t,n,e){return function(l){return l.lift(new Ng(t,n,e))}}class Ng{constructor(n,e,i){this.nextOrObserver=n,this.error=e,this.complete=i}call(n,e){return e.subscribe(new Ep(n,this.nextOrObserver,this.error,this.complete))}}class Ep extends ys.L{constructor(n,e,i,l){super(n),this._tapNext=Sc,this._tapError=Sc,this._tapComplete=Sc,this._tapError=i||Sc,this._tapComplete=l||Sc,(0,Uf.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Sc,this._tapError=e.error||Sc,this._tapComplete=e.complete||Sc)}_next(n){try{this._tapNext.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function Gu(t){return function(e){const i=new zg(t),l=e.lift(i);return i.caught=l}}class zg{constructor(n){this.selector=n}call(n,e){return e.subscribe(new Eh(n,this.selector,this.caught))}}class Eh extends za.Ds{constructor(n,e,i){super(n),this.selector=e,this.caught=i}error(n){if(!this.isStopped){let e;try{e=this.selector(n,this.caught)}catch(m){return void super.error(m)}this._unsubscribeAndRecycle();const i=new za.IY(this);this.add(i);const l=(0,za.ft)(e,i);l!==i&&this.add(l)}}}function Tp(t,n){let e=!1;return arguments.length>=2&&(e=!0),function(l){return l.lift(new Hf(t,n,e))}}class Hf{constructor(n,e,i=!1){this.accumulator=n,this.seed=e,this.hasSeed=i}call(n,e){return e.subscribe(new $f(n,this.accumulator,this.seed,this.hasSeed))}}class $f extends ys.L{constructor(n,e,i,l){super(n),this.accumulator=e,this._seed=i,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const e=this.index++;let i;try{i=this.accumulator(this.seed,n,e)}catch(l){this.destination.error(l)}this.seed=i,this.destination.next(i)}}function Dp(t){return function(e){return 0===t?Bf():e.lift(new Gf(t))}}class Gf{constructor(n){if(this.total=n,this.total<0)throw new xp}call(n,e){return e.subscribe(new Bg(n,this.total))}}class Bg extends ys.L{constructor(n,e){super(n),this.total=e,this.ring=new Array,this.count=0}_next(n){const e=this.ring,i=this.total,l=this.count++;e.length<i?e.push(n):e[l%i]=n}_complete(){const n=this.destination;let e=this.count;if(e>0){const i=this.count>=this.total?this.total:this.count,l=this.ring;for(let m=0;m<i;m++){const C=e++%i;n.next(l[C])}}n.complete()}}function xd(t,n){const e=arguments.length>=2;return i=>i.pipe(t?fa((l,m)=>t(l,m,i)):Sh.y,Dp(1),e?bd(n):wh(()=>new ou))}class Ec{constructor(n,e){this.predicate=n,this.inclusive=e}call(n,e){return e.subscribe(new Zf(n,this.predicate,this.inclusive))}}class Zf extends ys.L{constructor(n,e,i){super(n),this.predicate=e,this.inclusive=i,this.index=0}_next(n){const e=this.destination;let i;try{i=this.predicate(n,this.index++)}catch(l){return void e.error(l)}this.nextOrComplete(n,i)}nextOrComplete(n,e){const i=this.destination;Boolean(e)?i.next(n):(this.inclusive&&i.next(n),i.complete())}}class au{constructor(n){this.value=n}call(n,e){return e.subscribe(new wd(n,this.value))}}class wd extends ys.L{constructor(n,e){super(n),this.value=e}_next(n){this.destination.next(this.value)}}var Vg=Me(654);function Pp(t){return n=>n.lift(new jg(t))}class jg{constructor(n){this.callback=n}call(n,e){return e.subscribe(new Ug(n,this.callback))}}class Ug extends ys.L{constructor(n,e){super(n),this.add(new Vg.w(e))}}var Hg=Me(327);const yi="primary",Th=Symbol("RouteTitle");class Ap{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function tc(t){return new Ap(t)}function nc(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const l={};for(let m=0;m<i.length;m++){const C=i[m],F=t[m];if(C.startsWith(":"))l[C.substring(1)]=F;else if(C!==F.path)return null}return{consumed:t.slice(0,i.length),posParams:l}}function ic(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let l;for(let m=0;m<e.length;m++)if(l=e[m],!ev(t[l],n[l]))return!1;return!0}function ev(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((l,m)=>i[m]===l)}return t===n}function Lp(t){return Array.prototype.concat.apply([],t)}function kp(t){return t.length>0?t[t.length-1]:null}function co(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function tl(t){return(0,r.\u0275isObservable)(t)?t:(0,r.\u0275isPromise)(t)?(0,lo.D)(Promise.resolve(t)):Zn(t)}const Dh=!1,$g={exact:function Gg(t,n,e){if(!lu(t.segments,n.segments)||!Cd(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!Gg(t.children[i],n.children[i],e))return!1;return!0},subset:Op},qf={exact:function Zu(t,n){return ic(t,n)},subset:function Zg(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>ev(t[e],n[e]))},ignored:()=>!0};function Yf(t,n,e){return $g[e.paths](t.root,n.root,e.matrixParams)&&qf[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function Op(t,n,e){return Kf(t,n,n.segments,e)}function Kf(t,n,e,i){if(t.segments.length>e.length){const l=t.segments.slice(0,e.length);return!(!lu(l,e)||n.hasChildren()||!Cd(l,e,i))}if(t.segments.length===e.length){if(!lu(t.segments,e)||!Cd(t.segments,e,i))return!1;for(const l in n.children)if(!t.children[l]||!Op(t.children[l],n.children[l],i))return!1;return!0}{const l=e.slice(0,t.segments.length),m=e.slice(t.segments.length);return!!(lu(t.segments,l)&&Cd(t.segments,l,i)&&t.children[yi])&&Kf(t.children[yi],n,m,i)}}function Cd(t,n,e){return n.every((i,l)=>qf[e](t[l].parameters,i.parameters))}class bs{constructor(n=new vi([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tc(this.queryParams)),this._queryParamMap}toString(){return Xf.serialize(this)}}class vi{constructor(n,e){this.segments=n,this.children=e,this.parent=null,co(e,(i,l)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rp(this)}}class Tc{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=tc(this.parameters)),this._parameterMap}toString(){return Dd(this)}}function lu(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let Sd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return new Qf},providedIn:"root"}),t})();class Qf{parse(n){const e=new Wg(n);return new bs(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Ed(n.root,!0)}`,i=function iv(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(l=>`${Ur(e)}=${Ur(l)}`).join("&"):`${Ur(e)}=${Ur(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function Td(t){return encodeURI(t)}(n.fragment)}`:""}`}}const Xf=new Qf;function Rp(t){return t.segments.map(n=>Dd(n)).join("/")}function Ed(t,n){if(!t.hasChildren())return Rp(t);if(n){const e=t.children[yi]?Ed(t.children[yi],!1):"",i=[];return co(t.children,(l,m)=>{m!==yi&&i.push(`${m}:${Ed(l,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function nv(t,n){let e=[];return co(t.children,(i,l)=>{l===yi&&(e=e.concat(n(i,l)))}),co(t.children,(i,l)=>{l!==yi&&(e=e.concat(n(i,l)))}),e}(t,(i,l)=>l===yi?[Ed(t.children[yi],!1)]:[`${l}:${Ed(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[yi]?`${Rp(t)}/${e[0]}`:`${Rp(t)}/(${e.join("//")})`}}function Mh(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ur(t){return Mh(t).replace(/%3B/gi,";")}function nl(t){return Mh(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dc(t){return decodeURIComponent(t)}function nr(t){return Dc(t.replace(/\+/g,"%20"))}function Dd(t){return`${nl(t.path)}${function Jf(t){return Object.keys(t).map(n=>`;${nl(n)}=${nl(t[n])}`).join("")}(t.parameters)}`}const cu=/^[^\/()?;=#]+/;function uu(t){const n=t.match(cu);return n?n[0]:""}const Fp=/^[^=?&#]+/,y0=/^[^&#]+/;class Wg{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vi([],{}):new vi([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[yi]=new vi(n,e)),i}parseSegment(){const n=uu(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new r.\u0275RuntimeError(4009,Dh);return this.capture(n),new Tc(Dc(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=uu(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const l=uu(this.remaining);l&&(i=l,this.capture(i))}n[Dc(e)]=Dc(i)}parseQueryParam(n){const e=function em(t){const n=t.match(Fp);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const C=function v0(t){const n=t.match(y0);return n?n[0]:""}(this.remaining);C&&(i=C,this.capture(i))}const l=nr(e),m=nr(i);if(n.hasOwnProperty(l)){let C=n[l];Array.isArray(C)||(C=[C],n[l]=C),C.push(m)}else n[l]=m}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=uu(this.remaining),l=this.remaining[i.length];if("/"!==l&&")"!==l&&";"!==l)throw new r.\u0275RuntimeError(4010,Dh);let m;i.indexOf(":")>-1?(m=i.slice(0,i.indexOf(":")),this.capture(m),this.capture(":")):n&&(m=yi);const C=this.parseChildren();e[m]=1===Object.keys(C).length?C[yi]:new vi([],C),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new r.\u0275RuntimeError(4011,Dh)}}function tm(t){return t.segments.length>0?new vi([],{[yi]:t}):t}function Np(t){const n={};for(const i of Object.keys(t.children)){const m=Np(t.children[i]);(m.segments.length>0||m.hasChildren())&&(n[i]=m)}return function rv(t){if(1===t.numberOfChildren&&t.children[yi]){const n=t.children[yi];return new vi(t.segments.concat(n.segments),n.children)}return t}(new vi(t.segments,n))}function Wu(t){return t instanceof bs}const zp=!1;function nm(t,n,e,i,l){if(0===e.length)return qu(n.root,n.root,n.root,i,l);const m=function Vp(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Id(!0,0,t);let n=0,e=!1;const i=t.reduce((l,m,C)=>{if("object"==typeof m&&null!=m){if(m.outlets){const F={};return co(m.outlets,(K,le)=>{F[le]="string"==typeof K?K.split("/"):K}),[...l,{outlets:F}]}if(m.segmentPath)return[...l,m.segmentPath]}return"string"!=typeof m?[...l,m]:0===C?(m.split("/").forEach((F,K)=>{0==K&&"."===F||(0==K&&""===F?e=!0:".."===F?n++:""!=F&&l.push(F))}),l):[...l,m]},[]);return new Id(e,n,i)}(e);return m.toRoot()?qu(n.root,n.root,new vi([],{}),i,l):function C(K){const le=function qg(t,n,e,i){if(t.isAbsolute)return new So(n.root,!0,0);if(-1===i)return new So(e,e===n.root,0);return function rc(t,n,e){let i=t,l=n,m=e;for(;m>l;){if(m-=l,i=i.parent,!i)throw new r.\u0275RuntimeError(4005,zp&&"Invalid number of '../'");l=i.segments.length}return new So(i,!1,l-m)}(e,i+(Lr(t.commands[0])?0:1),t.numberOfDoubleDots)}(m,n,t.snapshot?._urlSegment,K),xe=le.processChildren?Ys(le.segmentGroup,le.index,m.commands):Ah(le.segmentGroup,le.index,m.commands);return qu(n.root,le.segmentGroup,xe,i,l)}(t.snapshot?._lastPathIndex)}function Lr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ph(t){return"object"==typeof t&&null!=t&&t.outlets}function qu(t,n,e,i,l){let C,m={};i&&co(i,(K,le)=>{m[le]=Array.isArray(K)?K.map(xe=>`${xe}`):`${K}`}),C=t===n?e:Bp(t,n,e);const F=tm(Np(C));return new bs(F,m,l)}function Bp(t,n,e){const i={};return co(t.children,(l,m)=>{i[m]=l===n?e:Bp(l,n,e)}),new vi(t.segments,i)}class Id{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Lr(i[0]))throw new r.\u0275RuntimeError(4003,zp&&"Root segment cannot have matrix parameters");const l=i.find(Ph);if(l&&l!==kp(i))throw new r.\u0275RuntimeError(4004,zp&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class So{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function Ah(t,n,e){if(t||(t=new vi([],{})),0===t.segments.length&&t.hasChildren())return Ys(t,n,e);const i=function Lh(t,n,e){let i=0,l=n;const m={match:!1,pathIndex:0,commandIndex:0};for(;l<t.segments.length;){if(i>=e.length)return m;const C=t.segments[l],F=e[i];if(Ph(F))break;const K=`${F}`,le=i<e.length-1?e[i+1]:null;if(l>0&&void 0===K)break;if(K&&le&&"object"==typeof le&&void 0===le.outlets){if(!im(K,le,C))return m;i+=2}else{if(!im(K,{},C))return m;i++}l++}return{match:!0,pathIndex:l,commandIndex:i}}(t,n,e),l=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const m=new vi(t.segments.slice(0,i.pathIndex),{});return m.children[yi]=new vi(t.segments.slice(i.pathIndex),t.children),Ys(m,0,l)}return i.match&&0===l.length?new vi(t.segments,{}):i.match&&!t.hasChildren()?du(t,n,e):i.match?Ys(t,0,l):du(t,n,e)}function Ys(t,n,e){if(0===e.length)return new vi(t.segments,{});{const i=function Up(t){return Ph(t[0])?t[0].outlets:{[yi]:t}}(e),l={};if(!i[yi]&&t.children[yi]&&1===t.numberOfChildren&&0===t.children[yi].segments.length){const m=Ys(t.children[yi],n,e);return new vi(t.segments,m.children)}return co(i,(m,C)=>{"string"==typeof m&&(m=[m]),null!==m&&(l[C]=Ah(t.children[C],n,m))}),co(t.children,(m,C)=>{void 0===i[C]&&(l[C]=m)}),new vi(t.segments,l)}}function du(t,n,e){const i=t.segments.slice(0,n);let l=0;for(;l<e.length;){const m=e[l];if(Ph(m)){const K=Yg(m.outlets);return new vi(i,K)}if(0===l&&Lr(e[0])){i.push(new Tc(t.segments[n].path,Hp(e[0]))),l++;continue}const C=Ph(m)?m.outlets[yi]:`${m}`,F=l<e.length-1?e[l+1]:null;C&&F&&Lr(F)?(i.push(new Tc(C,Hp(F))),l+=2):(i.push(new Tc(C,{})),l++)}return new vi(i,{})}function Yg(t){const n={};return co(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=du(new vi([],{}),0,e))}),n}function Hp(t){const n={};return co(t,(e,i)=>n[i]=`${e}`),n}function im(t,n,e){return t==e.path&&ic(n,e.parameters)}const kh="imperative";class il{constructor(n,e){this.id=n,this.url=e}}class Pd extends il{constructor(n,e,i="imperative",l=null){super(n,e),this.type=0,this.navigationTrigger=i,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rl extends il{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ad extends il{constructor(n,e,i,l){super(n,e),this.reason=i,this.code=l,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Oh extends il{constructor(n,e,i,l){super(n,e),this.reason=i,this.code=l,this.type=16}}class rm extends il{constructor(n,e,i,l){super(n,e),this.error=i,this.target=l,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $p extends il{constructor(n,e,i,l){super(n,e),this.urlAfterRedirects=i,this.state=l,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rh extends il{constructor(n,e,i,l){super(n,e),this.urlAfterRedirects=i,this.state=l,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ml extends il{constructor(n,e,i,l,m){super(n,e),this.urlAfterRedirects=i,this.state=l,this.shouldActivate=m,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ma extends il{constructor(n,e,i,l){super(n,e),this.urlAfterRedirects=i,this.state=l,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kg extends il{constructor(n,e,i,l){super(n,e),this.urlAfterRedirects=i,this.state=l,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ld{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gp{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ov{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fh{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nh{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yu{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kd{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Qg=(()=>{class t{createUrlTree(e,i,l,m,C,F){return nm(e||i.root,l,m,C,F)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),pu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(n){return Qg.\u0275fac(n)},providedIn:"root"}),t})();class sm{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Bh(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=Bh(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Zp(n,this._root);return e.length<2?[]:e[e.length-2].children.map(l=>l.value).filter(l=>l!==n)}pathFromRoot(n){return Zp(n,this._root).map(e=>e.value)}}function Bh(t,n){if(t===n.value)return n;for(const e of n.children){const i=Bh(t,e);if(i)return i}return null}function Zp(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Zp(t,e);if(i.length)return i.unshift(n),i}return[]}class Il{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ku(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class Vh extends sm{constructor(n,e){super(n),this.snapshot=e,mu(this,n)}toString(){return this.snapshot.toString()}}function Xg(t,n){const e=function Jg(t,n){const C=new Pl([],{},{},"",{},yi,n,null,t.root,-1,{});return new fu("",new Il(C,[]))}(t,n),i=new Ws([new Tc("",{})]),l=new Ws({}),m=new Ws({}),C=new Ws({}),F=new Ws(""),K=new jh(i,l,C,F,m,yi,n,e.root);return K.snapshot=e.root,new Vh(new Il(K,[]),e)}class jh{constructor(n,e,i,l,m,C,F,K){this.url=n,this.params=e,this.queryParams=i,this.fragment=l,this.data=m,this.outlet=C,this.component=F,this.title=this.data?.pipe((0,Qn.U)(le=>le[Th]))??Zn(void 0),this._futureSnapshot=K}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qn.U)(n=>tc(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qn.U)(n=>tc(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function e_(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const l=e[i],m=e[i-1];if(l.routeConfig&&""===l.routeConfig.path)i--;else{if(m.component)break;i--}}return function Qu(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Pl{get title(){return this.data?.[Th]}constructor(n,e,i,l,m,C,F,K,le,xe,Ae){this.url=n,this.params=e,this.queryParams=i,this.fragment=l,this.data=m,this.outlet=C,this.component=F,this.routeConfig=K,this._urlSegment=le,this._lastPathIndex=xe,this._resolve=Ae}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fu extends sm{constructor(n,e){super(e),this.url=n,mu(this,e)}toString(){return am(this._root)}}function mu(t,n){n.value._routerState=t,n.children.forEach(e=>mu(t,e))}function am(t){const n=t.children.length>0?` { ${t.children.map(am).join(", ")} } `:"";return`${t.value}${n}`}function Rd(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,ic(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),ic(n.params,e.params)||t.params.next(e.params),function Wf(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!ic(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),ic(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Wp(t,n){const e=ic(t.params,n.params)&&function tv(t,n){return lu(t,n)&&t.every((e,i)=>ic(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Wp(t.parent,n.parent))}function gu(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const l=function Fd(t,n,e){return n.children.map(i=>{for(const l of e.children)if(t.shouldReuseRoute(i.value,l.value.snapshot))return gu(t,i,l);return gu(t,i)})}(t,n,e);return new Il(i,l)}{if(t.shouldAttach(n.value)){const m=t.retrieve(n.value);if(null!==m){const C=m.route;return C.value._futureSnapshot=n.value,C.children=n.children.map(F=>gu(t,F)),C}}const i=function lm(t){return new jh(new Ws(t.url),new Ws(t.params),new Ws(t.queryParams),new Ws(t.fragment),new Ws(t.data),t.outlet,t.component,t)}(n.value),l=n.children.map(m=>gu(t,m));return new Il(i,l)}}const _u="ngNavigationCancelingError";function Nd(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=Wu(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,l=ga(!1,0,n);return l.url=e,l.navigationBehaviorOptions=i,l}function ga(t,n,e){const i=new Error("NavigationCancelingError: "+(t||""));return i[_u]=!0,i.cancellationCode=n,e&&(i.url=e),i}function yu(t){return Xu(t)&&Wu(t.url)}function Xu(t){return t&&t[_u]}class n_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Uh,this.attachRef=null}}let Uh=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const l=this.getOrCreateContext(e);l.outlet=i,this.contexts.set(e,l)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new n_,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const zd=!1;let Ju=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=yi,this.activateEvents=new r.EventEmitter,this.deactivateEvents=new r.EventEmitter,this.attachEvents=new r.EventEmitter,this.detachEvents=new r.EventEmitter,this.parentContexts=(0,r.inject)(Uh),this.location=(0,r.inject)(r.ViewContainerRef),this.changeDetector=(0,r.inject)(r.ChangeDetectorRef),this.environmentInjector=(0,r.inject)(r.EnvironmentInjector)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:l}=e.name;if(i)return;this.isTrackedInParentContexts(l)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(l)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new r.\u0275RuntimeError(4012,zd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new r.\u0275RuntimeError(4012,zd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new r.\u0275RuntimeError(4012,zd);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new r.\u0275RuntimeError(4013,zd);this._activatedRoute=e;const l=this.location,C=e.snapshot.component,F=this.parentContexts.getOrCreateContext(this.name).children,K=new cm(e,F,l.injector);if(i&&function i_(t){return!!t.resolveComponentFactory}(i)){const le=i.resolveComponentFactory(C);this.activated=l.createComponent(le,l.length,K)}else this.activated=l.createComponent(C,{index:l.length,injector:K,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[r.\u0275\u0275NgOnChangesFeature]}),t})();class cm{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===jh?this.route:n===Uh?this.childContexts:this.parent.get(n,e)}}let Bd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],standalone:!0,features:[r.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(e,i){1&e&&r.\u0275\u0275element(0,"router-outlet")},dependencies:[Ju],encapsulation:2}),t})();function _a(t,n){return t.providers&&!t._injector&&(t._injector=(0,r.createEnvironmentInjector)(t.providers,n,`Route: ${t.path}`)),t._injector??n}function Vd(t){const n=t.children&&t.children.map(Vd),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==yi&&(e.component=Bd),e}function Ks(t){return t.outlet||yi}function qp(t,n){const e=t.filter(i=>Ks(i)===n);return e.push(...t.filter(i=>Ks(i)!==n)),e}function vu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class ya{constructor(n,e,i,l){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=l}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Rd(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const l=Ku(e);n.children.forEach(m=>{const C=m.value.outlet;this.deactivateRoutes(m,l[C],i),delete l[C]}),co(l,(m,C)=>{this.deactivateRouteAndItsChildren(m,i)})}deactivateRoutes(n,e,i){const l=n.value,m=e?e.value:null;if(l===m)if(l.component){const C=i.getContext(l.outlet);C&&this.deactivateChildRoutes(n,e,C.children)}else this.deactivateChildRoutes(n,e,i);else m&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),l=i&&n.value.component?i.children:e,m=Ku(n);for(const C of Object.keys(m))this.deactivateRouteAndItsChildren(m[C],l);if(i&&i.outlet){const C=i.outlet.detach(),F=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:C,route:n,contexts:F})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),l=i&&n.value.component?i.children:e,m=Ku(n);for(const C of Object.keys(m))this.deactivateRouteAndItsChildren(m[C],l);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const l=Ku(e);n.children.forEach(m=>{this.activateRoutes(m,l[m.value.outlet],i),this.forwardEvent(new Yu(m.value.snapshot))}),n.children.length&&this.forwardEvent(new Fh(n.value.snapshot))}activateRoutes(n,e,i){const l=n.value,m=e?e.value:null;if(Rd(l),l===m)if(l.component){const C=i.getOrCreateContext(l.outlet);this.activateChildRoutes(n,e,C.children)}else this.activateChildRoutes(n,e,i);else if(l.component){const C=i.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const F=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),C.children.onOutletReAttached(F.contexts),C.attachRef=F.componentRef,C.route=F.route.value,C.outlet&&C.outlet.attach(F.componentRef,F.route.value),Rd(F.route.value),this.activateChildRoutes(n,null,C.children)}else{const F=vu(l.snapshot),K=F?.get(r.ComponentFactoryResolver)??null;C.attachRef=null,C.route=l,C.resolver=K,C.injector=F,C.outlet&&C.outlet.activateWith(l,C.injector),this.activateChildRoutes(n,null,C.children)}}else this.activateChildRoutes(n,null,i)}}class s_{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class jd{constructor(n,e){this.component=n,this.route=e}}function cv(t,n,e){const i=t._root;return uo(i,n?n._root:null,e,[i.value])}function Al(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||(0,r.\u0275isInjectable)(t)?n.get(t):t:i}function uo(t,n,e,i,l={canDeactivateChecks:[],canActivateChecks:[]}){const m=Ku(n);return t.children.forEach(C=>{(function Ic(t,n,e,i,l={canDeactivateChecks:[],canActivateChecks:[]}){const m=t.value,C=n?n.value:null,F=e?e.getContext(t.value.outlet):null;if(C&&m.routeConfig===C.routeConfig){const K=function um(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!lu(t.url,n.url);case"pathParamsOrQueryParamsChange":return!lu(t.url,n.url)||!ic(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wp(t,n)||!ic(t.queryParams,n.queryParams);default:return!Wp(t,n)}}(C,m,m.routeConfig.runGuardsAndResolvers);K?l.canActivateChecks.push(new s_(i)):(m.data=C.data,m._resolvedData=C._resolvedData),uo(t,n,m.component?F?F.children:null:e,i,l),K&&F&&F.outlet&&F.outlet.isActivated&&l.canDeactivateChecks.push(new jd(F.outlet.component,C))}else C&&Hh(n,F,l),l.canActivateChecks.push(new s_(i)),uo(t,null,m.component?F?F.children:null:e,i,l)})(C,m[C.value.outlet],e,i.concat([C.value]),l),delete m[C.value.outlet]}),co(m,(C,F)=>Hh(C,e.getContext(F),l)),l}function Hh(t,n,e){const i=Ku(t),l=t.value;co(i,(m,C)=>{Hh(m,l.component?n?n.children.getContext(C):null:n,e)}),e.canDeactivateChecks.push(new jd(l.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,l))}function $h(t){return"function"==typeof t}function Ud(t){return t instanceof ou||"EmptyError"===t?.name}const bu=Symbol("INITIAL_VALUE");function xu(){return qs(t=>_d(t.map(n=>n.pipe($u(1),function Fg(...t){const n=t[t.length-1];return(0,Uu.K)(n)?(t.pop(),e=>zf(t,e,n)):e=>zf(t,e)}(bu)))).pipe((0,Qn.U)(n=>{for(const e of n)if(!0!==e){if(e===bu)return bu;if(!1===e||e instanceof bs)return e}return!0}),fa(n=>n!==bu),$u(1)))}function o(t){return(0,Og.z)(ar(n=>{if(Wu(n))throw Nd(0,n)}),(0,Qn.U)(n=>!0===n))}const g={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function w(t,n,e,i,l){const m=M(t,n,e);return m.matched?function h(t,n,e,i){const l=n.canMatch;return l&&0!==l.length?Zn(l.map(C=>{const F=Al(C,t);return tl(function l_(t){return t&&$h(t.canMatch)}(F)?F.canMatch(n,e):t.runInContext(()=>F(n,e)))})).pipe(xu(),o()):Zn(!0)}(i=_a(n,i),n,e).pipe((0,Qn.U)(C=>!0===C?m:{...g})):Zn(m)}function M(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...g}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const l=(n.matcher||nc)(e,t,n);if(!l)return{...g};const m={};co(l.posParams,(F,K)=>{m[K]=F.path});const C=l.consumed.length>0?{...m,...l.consumed[l.consumed.length-1].parameters}:m;return{matched:!0,consumedSegments:l.consumed,remainingSegments:e.slice(l.consumed.length),parameters:C,positionalParamSegments:l.posParams??{}}}function I(t,n,e,i){if(e.length>0&&function $(t,n,e){return e.some(i=>ee(t,n,i)&&Ks(i)!==yi)}(t,e,i)){const m=new vi(n,function B(t,n,e,i){const l={};l[yi]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const m of e)if(""===m.path&&Ks(m)!==yi){const C=new vi([],{});C._sourceSegment=t,C._segmentIndexShift=n.length,l[Ks(m)]=C}return l}(t,n,i,new vi(e,t.children)));return m._sourceSegment=t,m._segmentIndexShift=n.length,{segmentGroup:m,slicedSegments:[]}}if(0===e.length&&function Y(t,n,e){return e.some(i=>ee(t,n,i))}(t,e,i)){const m=new vi(t.segments,function O(t,n,e,i,l){const m={};for(const C of i)if(ee(t,e,C)&&!l[Ks(C)]){const F=new vi([],{});F._sourceSegment=t,F._segmentIndexShift=n.length,m[Ks(C)]=F}return{...l,...m}}(t,n,e,i,t.children));return m._sourceSegment=t,m._segmentIndexShift=n.length,{segmentGroup:m,slicedSegments:e}}const l=new vi(t.segments,t.children);return l._sourceSegment=t,l._segmentIndexShift=n.length,{segmentGroup:l,slicedSegments:e}}function ee(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function re(t,n,e,i){return!!(Ks(t)===i||i!==yi&&ee(n,e,t))&&("**"===t.path||M(n,t,e).matched)}function ce(t,n,e){return 0===n.length&&!t.children[e]}const de=!1;class _e{constructor(n){this.segmentGroup=n||null}}class Ie{constructor(n){this.urlTree=n}}function ke(t){return Hu(new _e(t))}function $e(t){return Hu(new Ie(t))}class mt{constructor(n,e,i,l,m){this.injector=n,this.configLoader=e,this.urlSerializer=i,this.urlTree=l,this.config=m,this.allowRedirects=!0}apply(){const n=I(this.urlTree.root,[],[],this.config).segmentGroup,e=new vi(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,yi).pipe((0,Qn.U)(m=>this.createUrlTree(Np(m),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gu(m=>{if(m instanceof Ie)return this.allowRedirects=!1,this.match(m.urlTree);throw m instanceof _e?this.noMatchError(m):m}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,yi).pipe((0,Qn.U)(l=>this.createUrlTree(Np(l),n.queryParams,n.fragment))).pipe(Gu(l=>{throw l instanceof _e?this.noMatchError(l):l}))}noMatchError(n){return new r.\u0275RuntimeError(4002,de)}createUrlTree(n,e,i){const l=tm(n);return new bs(l,e,i)}expandSegmentGroup(n,e,i,l){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe((0,Qn.U)(m=>new vi([],m))):this.expandSegment(n,i,e,i.segments,l,!0)}expandChildren(n,e,i){const l=[];for(const m of Object.keys(i.children))"primary"===m?l.unshift(m):l.push(m);return(0,lo.D)(l).pipe(su(m=>{const C=i.children[m],F=qp(e,m);return this.expandSegmentGroup(n,F,C,m).pipe((0,Qn.U)(K=>({segment:K,outlet:m})))}),Tp((m,C)=>(m[C.outlet]=C.segment,m),{}),xd())}expandSegment(n,e,i,l,m,C){return(0,lo.D)(i).pipe(su(F=>this.expandSegmentAgainstRoute(n,e,i,F,l,m,C).pipe(Gu(le=>{if(le instanceof _e)return Zn(null);throw le}))),ec(F=>!!F),Gu((F,K)=>{if(Ud(F))return ce(e,l,m)?Zn(new vi([],{})):ke(e);throw F}))}expandSegmentAgainstRoute(n,e,i,l,m,C,F){return re(l,e,m,C)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(n,e,l,m,C):F&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,l,m,C):ke(e):ke(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,l,m,C){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,l,C):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,l,m,C)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,l){const m=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?$e(m):this.lineralizeSegments(i,m).pipe((0,vs.zg)(C=>{const F=new vi(C,{});return this.expandSegment(n,F,e,C,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,l,m,C){const{matched:F,consumedSegments:K,remainingSegments:le,positionalParamSegments:xe}=M(e,l,m);if(!F)return ke(e);const Ae=this.applyRedirectCommands(K,l.redirectTo,xe);return l.redirectTo.startsWith("/")?$e(Ae):this.lineralizeSegments(l,Ae).pipe((0,vs.zg)(et=>this.expandSegment(n,e,i,et.concat(le),C,!1)))}matchSegmentAgainstRoute(n,e,i,l,m){return"**"===i.path?(n=_a(i,n),i.loadChildren?(i._loadedRoutes?Zn({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(n,i)).pipe((0,Qn.U)(F=>(i._loadedRoutes=F.routes,i._loadedInjector=F.injector,new vi(l,{})))):Zn(new vi(l,{}))):w(e,i,l,n).pipe(qs(({matched:C,consumedSegments:F,remainingSegments:K})=>C?this.getChildConfig(n=i._injector??n,i,l).pipe((0,vs.zg)(xe=>{const Ae=xe.injector??n,et=xe.routes,{segmentGroup:Qe,slicedSegments:yt}=I(e,F,K,et),At=new vi(Qe.segments,Qe.children);if(0===yt.length&&At.hasChildren())return this.expandChildren(Ae,et,At).pipe((0,Qn.U)(Xi=>new vi(F,Xi)));if(0===et.length&&0===yt.length)return Zn(new vi(F,{}));const Nt=Ks(i)===m;return this.expandSegment(Ae,At,et,yt,Nt?yi:m,!0).pipe((0,Qn.U)(Tn=>new vi(F.concat(Tn.segments),Tn.children)))})):ke(e)))}getChildConfig(n,e,i){return e.children?Zn({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?Zn({routes:e._loadedRoutes,injector:e._loadedInjector}):function u(t,n,e,i){const l=n.canLoad;return void 0===l||0===l.length?Zn(!0):Zn(l.map(C=>{const F=Al(C,t);return tl(function a_(t){return t&&$h(t.canLoad)}(F)?F.canLoad(n,e):t.runInContext(()=>F(n,e)))})).pipe(xu(),o())}(n,e,i).pipe((0,vs.zg)(l=>l?this.configLoader.loadChildren(n,e).pipe(ar(m=>{e._loadedRoutes=m.routes,e._loadedInjector=m.injector})):function qe(t){return Hu(ga(de,3))}())):Zn({routes:[],injector:n})}lineralizeSegments(n,e){let i=[],l=e.root;for(;;){if(i=i.concat(l.segments),0===l.numberOfChildren)return Zn(i);if(l.numberOfChildren>1||!l.children[yi])return n.redirectTo,Hu(new r.\u0275RuntimeError(4e3,de));l=l.children[yi]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreateUrlTree(n,e,i,l){const m=this.createSegmentGroup(n,e.root,i,l);return new bs(m,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return co(n,(l,m)=>{if("string"==typeof l&&l.startsWith(":")){const F=l.substring(1);i[m]=e[F]}else i[m]=l}),i}createSegmentGroup(n,e,i,l){const m=this.createSegments(n,e.segments,i,l);let C={};return co(e.children,(F,K)=>{C[K]=this.createSegmentGroup(n,F,i,l)}),new vi(m,C)}createSegments(n,e,i,l){return e.map(m=>m.path.startsWith(":")?this.findPosParam(n,m,l):this.findOrReturn(m,i))}findPosParam(n,e,i){const l=i[e.path.substring(1)];if(!l)throw new r.\u0275RuntimeError(4001,de);return l}findOrReturn(n,e){let i=0;for(const l of e){if(l.path===n.path)return e.splice(i),l;i++}return n}}class $t{}class nn{constructor(n,e,i,l,m,C,F){this.injector=n,this.rootComponentType=e,this.config=i,this.urlTree=l,this.url=m,this.paramsInheritanceStrategy=C,this.urlSerializer=F}recognize(){const n=I(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,yi).pipe((0,Qn.U)(e=>{if(null===e)return null;const i=new Pl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},yi,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new Il(i,e),m=new fu(this.url,l);return this.inheritParamsAndData(m._root),m}))}inheritParamsAndData(n){const e=n.value,i=e_(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(n,e,i,l){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,l)}processChildren(n,e,i){return(0,lo.D)(Object.keys(i.children)).pipe(su(l=>{const m=i.children[l],C=qp(e,l);return this.processSegmentGroup(n,C,m,l)}),Tp((l,m)=>l&&m?(l.push(...m),l):null),function Mp(t,n=!1){return e=>e.lift(new Ec(t,n))}(l=>null!==l),bd(null),xd(),(0,Qn.U)(l=>{if(null===l)return null;const m=un(l);return function Ft(t){t.sort((n,e)=>n.value.outlet===yi?-1:e.value.outlet===yi?1:n.value.outlet.localeCompare(e.value.outlet))}(m),m}))}processSegment(n,e,i,l,m){return(0,lo.D)(e).pipe(su(C=>this.processSegmentAgainstRoute(C._injector??n,C,i,l,m)),ec(C=>!!C),Gu(C=>{if(Ud(C))return ce(i,l,m)?Zn([]):Zn(null);throw C}))}processSegmentAgainstRoute(n,e,i,l,m){if(e.redirectTo||!re(e,i,l,m))return Zn(null);let C;if("**"===e.path){const F=l.length>0?kp(l).parameters:{},K=gr(i)+l.length;C=Zn({snapshot:new Pl(l,F,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xs(e),Ks(e),e.component??e._loadedComponent??null,e,Qi(i),K,Ro(e)),consumedSegments:[],remainingSegments:[]})}else C=w(i,e,l,n).pipe((0,Qn.U)(({matched:F,consumedSegments:K,remainingSegments:le,parameters:xe})=>{if(!F)return null;const Ae=gr(i)+K.length;return{snapshot:new Pl(K,xe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xs(e),Ks(e),e.component??e._loadedComponent??null,e,Qi(i),Ae,Ro(e)),consumedSegments:K,remainingSegments:le}}));return C.pipe(qs(F=>{if(null===F)return Zn(null);const{snapshot:K,consumedSegments:le,remainingSegments:xe}=F;n=e._injector??n;const Ae=e._loadedInjector??n,et=function Et(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:Qe,slicedSegments:yt}=I(i,le,xe,et.filter(Nt=>void 0===Nt.redirectTo));if(0===yt.length&&Qe.hasChildren())return this.processChildren(Ae,et,Qe).pipe((0,Qn.U)(Nt=>null===Nt?null:[new Il(K,Nt)]));if(0===et.length&&0===yt.length)return Zn([new Il(K,[])]);const At=Ks(e)===m;return this.processSegment(Ae,et,Qe,yt,At?yi:m).pipe((0,Qn.U)(Nt=>null===Nt?null:[new Il(K,Nt)]))}))}}function Sn(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function un(t){const n=[],e=new Set;for(const i of t){if(!Sn(i)){n.push(i);continue}const l=n.find(m=>i.value.routeConfig===m.value.routeConfig);void 0!==l?(l.children.push(...i.children),e.add(l)):n.push(i)}for(const i of e){const l=un(i.children);n.push(new Il(i.value,l))}return n.filter(i=>!e.has(i))}function Qi(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function gr(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function xs(t){return t.data||{}}function Ro(t){return t.resolve||{}}function ho(t){return"string"==typeof t.title||null===t.title}function Zo(t){return qs(n=>{const e=t(n);return e?(0,lo.D)(e).pipe((0,Qn.U)(()=>n)):Zn(n)})}const po=new r.InjectionToken("ROUTES");let as=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,r.inject)(r.Compiler)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Zn(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=tl(e.loadComponent()).pipe((0,Qn.U)(fo),ar(m=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=m}),Pp(()=>{this.componentLoaders.delete(e)})),l=new yd.c(i,()=>new pi.xQ).pipe((0,Hg.x)());return this.componentLoaders.set(e,l),l}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Zn({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const m=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Qn.U)(F=>{this.onLoadEndListener&&this.onLoadEndListener(i);let K,le,xe=!1;Array.isArray(F)?le=F:(K=F.create(e).injector,le=Lp(K.get(po,[],r.InjectFlags.Self|r.InjectFlags.Optional)));return{routes:le.map(Vd),injector:K}}),Pp(()=>{this.childrenLoaders.delete(i)})),C=new yd.c(m,()=>new pi.xQ).pipe((0,Hg.x)());return this.childrenLoaders.set(i,C),C}loadModuleFactoryOrRoutes(e){return tl(e()).pipe((0,Qn.U)(fo),(0,vs.zg)(i=>i instanceof r.NgModuleFactory||Array.isArray(i)?Zn(i):(0,lo.D)(this.compiler.compileModuleAsync(i))))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function fo(t){return function Is(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let lr=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pi.xQ,this.configLoader=(0,r.inject)(as),this.environmentInjector=(0,r.inject)(r.EnvironmentInjector),this.urlSerializer=(0,r.inject)(Sd),this.rootContexts=(0,r.inject)(Uh),this.navigationId=0,this.afterPreactivation=()=>Zn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=l=>this.events.next(new Gp(l)),this.configLoader.onLoadStartListener=l=>this.events.next(new Ld(l))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new Ws({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:kh,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fa(i=>0!==i.id),(0,Qn.U)(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),qs(i=>{let l=!1,m=!1;return Zn(i).pipe(ar(C=>{this.currentNavigation={id:C.id,initialUrl:C.rawUrl,extractedUrl:C.extractedUrl,trigger:C.source,extras:C.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),qs(C=>{const F=e.browserUrlTree.toString(),K=!e.navigated||C.extractedUrl.toString()!==F||F!==e.currentUrlTree.toString();if(!K&&"reload"!==(C.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const xe="";return this.events.next(new Oh(C.id,e.serializeUrl(i.rawUrl),xe,0)),e.rawUrlTree=C.rawUrl,C.resolve(null),Cc}if(e.urlHandlingStrategy.shouldProcessUrl(C.rawUrl))return Wo(C.source)&&(e.browserUrlTree=C.extractedUrl),Zn(C).pipe(qs(xe=>{const Ae=this.transitions?.getValue();return this.events.next(new Pd(xe.id,this.urlSerializer.serialize(xe.extractedUrl),xe.source,xe.restoredState)),Ae!==this.transitions?.getValue()?Cc:Promise.resolve(xe)}),function Ut(t,n,e,i){return qs(l=>function rt(t,n,e,i,l){return new mt(t,n,e,i,l).apply()}(t,n,e,l.extractedUrl,i).pipe((0,Qn.U)(m=>({...l,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),ar(xe=>{this.currentNavigation={...this.currentNavigation,finalUrl:xe.urlAfterRedirects},i.urlAfterRedirects=xe.urlAfterRedirects}),function no(t,n,e,i,l){return(0,vs.zg)(m=>function Pt(t,n,e,i,l,m,C="emptyOnly"){return new nn(t,n,e,i,l,C,m).recognize().pipe(qs(F=>null===F?function jt(t){return new jr.y(n=>n.error(t))}(new $t):Zn(F)))}(t,n,e,m.urlAfterRedirects,i.serialize(m.urlAfterRedirects),i,l).pipe((0,Qn.U)(C=>({...m,targetSnapshot:C}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),ar(xe=>{if(i.targetSnapshot=xe.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!xe.extras.skipLocationChange){const et=e.urlHandlingStrategy.merge(xe.urlAfterRedirects,xe.rawUrl);e.setBrowserUrl(et,xe)}e.browserUrlTree=xe.urlAfterRedirects}const Ae=new $p(xe.id,this.urlSerializer.serialize(xe.extractedUrl),this.urlSerializer.serialize(xe.urlAfterRedirects),xe.targetSnapshot);this.events.next(Ae)}));if(K&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:xe,extractedUrl:Ae,source:et,restoredState:Qe,extras:yt}=C,At=new Pd(xe,this.urlSerializer.serialize(Ae),et,Qe);this.events.next(At);const Nt=Xg(Ae,this.rootComponentType).snapshot;return Zn(i={...C,targetSnapshot:Nt,urlAfterRedirects:Ae,extras:{...yt,skipLocationChange:!1,replaceUrl:!1}})}{const xe="";return this.events.next(new Oh(C.id,e.serializeUrl(i.extractedUrl),xe,1)),e.rawUrlTree=C.rawUrl,C.resolve(null),Cc}}),ar(C=>{const F=new Rh(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(F)}),(0,Qn.U)(C=>i={...C,guards:cv(C.targetSnapshot,C.currentSnapshot,this.rootContexts)}),function c_(t,n){return(0,vs.zg)(e=>{const{targetSnapshot:i,currentSnapshot:l,guards:{canActivateChecks:m,canDeactivateChecks:C}}=e;return 0===C.length&&0===m.length?Zn({...e,guardsResult:!0}):function Hd(t,n,e,i){return(0,lo.D)(t).pipe((0,vs.zg)(l=>function dv(t,n,e,i,l){const m=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return m&&0!==m.length?Zn(m.map(F=>{const K=vu(n)??l,le=Al(F,K);return tl(function hv(t){return t&&$h(t.canDeactivate)}(le)?le.canDeactivate(t,n,e,i):K.runInContext(()=>le(t,n,e,i))).pipe(ec())})).pipe(xu()):Zn(!0)}(l.component,l.route,e,n,i)),ec(l=>!0!==l,!0))}(C,i,l,t).pipe((0,vs.zg)(F=>F&&function oi(t){return"boolean"==typeof t}(F)?function $d(t,n,e,i){return(0,lo.D)(n).pipe(su(l=>zf(function mm(t,n){return null!==t&&n&&n(new ov(t)),Zn(!0)}(l.route.parent,i),function ol(t,n){return null!==t&&n&&n(new Nh(t)),Zn(!0)}(l.route,i),function Zd(t,n,e){const i=n[n.length-1],m=n.slice(0,n.length-1).reverse().map(C=>function uv(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(C)).filter(C=>null!==C).map(C=>kg(()=>Zn(C.guards.map(K=>{const le=vu(C.node)??e,xe=Al(K,le);return tl(function dm(t){return t&&$h(t.canActivateChild)}(xe)?xe.canActivateChild(i,t):le.runInContext(()=>xe(i,t))).pipe(ec())})).pipe(xu())));return Zn(m).pipe(xu())}(t,l.path,e),function Gd(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Zn(!0);const l=i.map(m=>kg(()=>{const C=vu(n)??e,F=Al(m,C);return tl(function hm(t){return t&&$h(t.canActivate)}(F)?F.canActivate(n,t):C.runInContext(()=>F(n,t))).pipe(ec())}));return Zn(l).pipe(xu())}(t,l.route,e))),ec(l=>!0!==l,!0))}(i,m,t,n):Zn(F)),(0,Qn.U)(F=>({...e,guardsResult:F})))})}(this.environmentInjector,C=>this.events.next(C)),ar(C=>{if(i.guardsResult=C.guardsResult,Wu(C.guardsResult))throw Nd(0,C.guardsResult);const F=new Ml(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot,!!C.guardsResult);this.events.next(F)}),fa(C=>!!C.guardsResult||(e.restoreHistory(C),this.cancelNavigationTransition(C,"",3),!1)),Zo(C=>{if(C.guards.canActivateChecks.length)return Zn(C).pipe(ar(F=>{const K=new ma(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(F.urlAfterRedirects),F.targetSnapshot);this.events.next(K)}),qs(F=>{let K=!1;return Zn(F).pipe(function Eo(t,n){return(0,vs.zg)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:l}}=e;if(!l.length)return Zn(e);let m=0;return(0,lo.D)(l).pipe(su(C=>function Fo(t,n,e,i){const l=t.routeConfig,m=t._resolve;return void 0!==l?.title&&!ho(l)&&(m[Th]=l.title),function os(t,n,e,i){const l=function ws(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===l.length)return Zn({});const m={};return(0,lo.D)(l).pipe((0,vs.zg)(C=>function io(t,n,e,i){const l=vu(n)??i,m=Al(t,l);return tl(m.resolve?m.resolve(n,e):l.runInContext(()=>m(n,e)))}(t[C],n,e,i).pipe(ec(),ar(F=>{m[C]=F}))),Dp(1),function Ip(t){return n=>n.lift(new au(t))}(m),Gu(C=>Ud(C)?Cc:Hu(C)))}(m,t,n,i).pipe((0,Qn.U)(C=>(t._resolvedData=C,t.data=e_(t,e).resolve,l&&ho(l)&&(t.data[Th]=l.title),null)))}(C.route,i,t,n)),ar(()=>m++),Dp(1),(0,vs.zg)(C=>m===l.length?Zn(e):Cc))})}(e.paramsInheritanceStrategy,this.environmentInjector),ar({next:()=>K=!0,complete:()=>{K||(e.restoreHistory(F),this.cancelNavigationTransition(F,"",2))}}))}),ar(F=>{const K=new Kg(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(F.urlAfterRedirects),F.targetSnapshot);this.events.next(K)}))}),Zo(C=>{const F=K=>{const le=[];K.routeConfig?.loadComponent&&!K.routeConfig._loadedComponent&&le.push(this.configLoader.loadComponent(K.routeConfig).pipe(ar(xe=>{K.component=xe}),(0,Qn.U)(()=>{})));for(const xe of K.children)le.push(...F(xe));return le};return _d(F(C.targetSnapshot.root)).pipe(bd(),$u(1))}),Zo(()=>this.afterPreactivation()),(0,Qn.U)(C=>{const F=function t_(t,n,e){const i=gu(t,n._root,e?e._root:void 0);return new Vh(i,n)}(e.routeReuseStrategy,C.targetSnapshot,C.currentRouterState);return i={...C,targetRouterState:F}}),ar(C=>{e.currentUrlTree=C.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl),e.routerState=C.targetRouterState,"deferred"===e.urlUpdateStrategy&&(C.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,C),e.browserUrlTree=C.urlAfterRedirects)}),((t,n,e)=>(0,Qn.U)(i=>(new ya(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,e.routeReuseStrategy,C=>this.events.next(C)),$u(1),ar({next:C=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new rl(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(C.targetRouterState.snapshot),C.resolve(!0)},complete:()=>{l=!0}}),Pp(()=>{l||m||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Gu(C=>{if(m=!0,Xu(C)){yu(C)||(e.navigated=!0,e.restoreHistory(i,!0));const F=new Ad(i.id,this.urlSerializer.serialize(i.extractedUrl),C.message,C.cancellationCode);if(this.events.next(F),yu(C)){const K=e.urlHandlingStrategy.merge(C.url,e.rawUrlTree),le={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Wo(i.source)};e.scheduleNavigation(K,kh,null,le,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const F=new rm(i.id,this.urlSerializer.serialize(i.extractedUrl),C,i.targetSnapshot??void 0);this.events.next(F);try{i.resolve(e.errorHandler(C))}catch(K){i.reject(K)}}return Cc}))}))}cancelNavigationTransition(e,i,l){const m=new Ad(e.id,this.urlSerializer.serialize(e.extractedUrl),i,l);this.events.next(m),e.resolve(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Wo(t){return t!==kh}let mo=(()=>{class t{buildTitle(e){let i,l=e.root;for(;void 0!==l;)i=this.getResolvedTitleForRoute(l)??i,l=l.children.find(m=>m.outlet===yi);return i}getResolvedTitleForRoute(e){return e.data[Th]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return(0,r.inject)(Ll)},providedIn:"root"}),t})(),Ll=(()=>{class t extends mo{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(v))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ba=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return(0,r.inject)(Pc)},providedIn:"root"}),t})();class sl{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let Pc=(()=>{class t extends sl{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.\u0275\u0275getInheritedFactory(t)))(i||t)}}(),t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ps=new r.InjectionToken("",{providedIn:"root",factory:()=>({})});let As=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:function(){return(0,r.inject)(Ac)},providedIn:"root"}),t})(),Ac=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Kp(t){throw t}function gm(t,n,e){return n.parse("/")}const _m={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ls=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,r.inject)(r.\u0275Console),this.isNgZoneEnabled=!1,this.options=(0,r.inject)(Ps,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Kp,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||gm,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,r.inject)(As),this.routeReuseStrategy=(0,r.inject)(Ba),this.urlCreationStrategy=(0,r.inject)(pu),this.titleStrategy=(0,r.inject)(mo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Lp((0,r.inject)(po,{optional:!0})??[]),this.navigationTransitions=(0,r.inject)(lr),this.urlSerializer=(0,r.inject)(Sd),this.location=(0,r.inject)(Sr),this.isNgZoneEnabled=(0,r.inject)(r.NgZone)instanceof r.NgZone&&r.NgZone.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new bs,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xg(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),kh,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,l){const m={replaceUrl:!0},C=l?.navigationId?l:null;if(l){const K={...l};delete K.navigationId,delete K.\u0275routerPageId,0!==Object.keys(K).length&&(m.state=K)}const F=this.parseUrl(e);this.scheduleNavigation(F,i,C,m)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(Vd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:l,queryParams:m,fragment:C,queryParamsHandling:F,preserveFragment:K}=i,le=K?this.currentUrlTree.fragment:C;let xe=null;switch(F){case"merge":xe={...this.currentUrlTree.queryParams,...m};break;case"preserve":xe=this.currentUrlTree.queryParams;break;default:xe=m||null}return null!==xe&&(xe=this.removeEmptyProps(xe)),this.urlCreationStrategy.createUrlTree(l,this.routerState,this.currentUrlTree,e,xe,le??null)}navigateByUrl(e,i={skipLocationChange:!1}){const l=Wu(e)?e:this.parseUrl(e),m=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(m,kh,null,i)}navigate(e,i={skipLocationChange:!1}){return function u_(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new r.\u0275RuntimeError(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(l){i=this.malformedUriErrorHandler(l,this.urlSerializer,e)}return i}isActive(e,i){let l;if(l=!0===i?{..._m}:!1===i?{...Lc}:i,Wu(e))return Yf(this.currentUrlTree,e,l);const m=this.parseUrl(e);return Yf(this.currentUrlTree,m,l)}removeEmptyProps(e){return Object.keys(e).reduce((i,l)=>{const m=e[l];return null!=m&&(i[l]=m),i},{})}scheduleNavigation(e,i,l,m,C){if(this.disposed)return Promise.resolve(!1);let F,K,le,xe;return C?(F=C.resolve,K=C.reject,le=C.promise):le=new Promise((Ae,et)=>{F=Ae,K=et}),xe="computed"===this.canceledNavigationResolution?l&&l.\u0275routerPageId?l.\u0275routerPageId:m.replaceUrl||m.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:xe,source:i,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:m,resolve:F,reject:K,promise:le,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),le.catch(Ae=>Promise.reject(Ae))}setBrowserUrl(e,i){const l=this.urlSerializer.serialize(e),m={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(l)||i.extras.replaceUrl?this.location.replaceState(l,"",m):this.location.go(l,"",m)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===l?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===l&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),va=(()=>{class t{constructor(e,i,l,m,C,F){this.router=e,this.route=i,this.tabIndexAttribute=l,this.renderer=m,this.el=C,this.locationStrategy=F,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new pi.xQ;const K=C.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===K||"area"===K,this.isAnchorElement?this.subscription=e.events.subscribe(le=>{le instanceof rl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,r.\u0275coerceToBoolean)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,r.\u0275coerceToBoolean)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,r.\u0275coerceToBoolean)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,l,m,C){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||l||m||C||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,r.\u0275\u0275sanitizeUrlOrResourceUrl)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const l=this.renderer,m=this.el.nativeElement;null!==i?l.setAttribute(m,e,i):l.removeAttribute(m,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Ls),r.\u0275\u0275directiveInject(jh),r.\u0275\u0275injectAttribute("tabindex"),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(Zt))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("click",function(m){return i.onClick(m.button,m.ctrlKey,m.shiftKey,m.altKey,m.metaKey)}),2&e&&r.\u0275\u0275attribute("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[r.\u0275\u0275NgOnChangesFeature]}),t})(),Qp=(()=>{class t{get isActive(){return this._isActive}constructor(e,i,l,m,C){this.router=e,this.element=i,this.renderer=l,this.cdr=m,this.link=C,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new r.EventEmitter,this.routerEventsSubscription=e.events.subscribe(F=>{F instanceof rl&&this.update()})}ngAfterContentInit(){Zn(this.links.changes,Zn(null)).pipe((0,rs.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,lo.D)(e).pipe((0,rs.J)()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(l=>!!l)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function pv(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return l=>!!l.urlTree&&e.isActive(l.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Ls),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(va,8))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,l){if(1&e&&r.\u0275\u0275contentQuery(l,va,5),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.links=m)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[r.\u0275\u0275NgOnChangesFeature]}),t})();class h_{}let mv=(()=>{class t{constructor(e,i,l,m,C){this.router=e,this.injector=l,this.preloadingStrategy=m,this.loader=C}setUpPreloading(){this.subscription=this.router.events.pipe(fa(e=>e instanceof rl),su(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const l=[];for(const m of i){m.providers&&!m._injector&&(m._injector=(0,r.createEnvironmentInjector)(m.providers,e,`Route: ${m.path}`));const C=m._injector??e,F=m._loadedInjector??C;(m.loadChildren&&!m._loadedRoutes&&void 0===m.canLoad||m.loadComponent&&!m._loadedComponent)&&l.push(this.preloadConfig(C,m)),(m.children||m._loadedRoutes)&&l.push(this.processRoutes(F,m.children??m._loadedRoutes))}return(0,lo.D)(l).pipe((0,rs.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let l;l=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Zn(null);const m=l.pipe((0,vs.zg)(C=>null===C?Zn(void 0):(i._loadedRoutes=C.routes,i._loadedInjector=C.injector,this.processRoutes(C.injector??e,C.routes))));if(i.loadComponent&&!i._loadedComponent){const C=this.loader.loadComponent(i);return(0,lo.D)([m,C]).pipe((0,rs.J)())}return m})}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(Ls),r.\u0275\u0275inject(r.Compiler),r.\u0275\u0275inject(r.EnvironmentInjector),r.\u0275\u0275inject(h_),r.\u0275\u0275inject(as))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ym=new r.InjectionToken("");let ba=(()=>{class t{constructor(e,i,l,m,C={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=l,this.zone=m,this.options=C,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},C.scrollPositionRestoration=C.scrollPositionRestoration||"disabled",C.anchorScrolling=C.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Pd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof rl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof kd&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new kd(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(e){r.\u0275\u0275invalidFactory()},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();var ks=(()=>((ks=ks||{})[ks.COMPLETE=0]="COMPLETE",ks[ks.FAILED=1]="FAILED",ks[ks.REDIRECTING=2]="REDIRECTING",ks))();const kc=!1;function ro(t,n){return{\u0275kind:t,\u0275providers:n}}const Cs=new r.InjectionToken("",{providedIn:"root",factory:()=>!1});function ll(){const t=(0,r.inject)(r.Injector);return n=>{const e=t.get(r.ApplicationRef);if(n!==e.components[0])return;const i=t.get(Ls),l=t.get(gv);1===t.get(bm)&&i.initialNavigation(),t.get(qd,null,r.InjectFlags.Optional)?.setUpPreloading(),t.get(ym,null,r.InjectFlags.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),l.closed||(l.next(),l.complete(),l.unsubscribe())}}const gv=new r.InjectionToken(kc?"bootstrap done indicator":"",{factory:()=>new pi.xQ}),bm=new r.InjectionToken(kc?"initial navigation":"",{providedIn:"root",factory:()=>1});function f_(){let t=[];return t=kc?[{provide:r.ENVIRONMENT_INITIALIZER,multi:!0,useFactory:()=>{const n=(0,r.inject)(Ls);return()=>n.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function Od(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],ro(1,t)}const qd=new r.InjectionToken(kc?"router preloader":"");function CC(t){return ro(0,[{provide:qd,useExisting:mv},{provide:h_,useExisting:t}])}const xm=!1,_v=new r.InjectionToken(xm?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ED=[Sr,{provide:Sd,useClass:Qf},Ls,Uh,{provide:jh,useFactory:function Wd(t){return t.routerState.root},deps:[Ls]},as,xm?{provide:Cs,useValue:!0}:[]];function TC(){return new r.NgProbeToken("Router",Ls)}let m_=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[ED,xm&&i?.enableTracing?f_().\u0275providers:[],{provide:po,multi:!0,useValue:e},{provide:_v,useFactory:PC,deps:[[Ls,new r.Optional,new r.SkipSelf]]},{provide:Ps,useValue:i||{}},i?.useHash?{provide:Zt,useClass:ni}:{provide:Zt,useClass:Zi},{provide:ym,useFactory:()=>{const t=(0,r.inject)(fh),n=(0,r.inject)(r.NgZone),e=(0,r.inject)(Ps),i=(0,r.inject)(lr),l=(0,r.inject)(Sd);return e.scrollOffset&&t.setOffset(e.scrollOffset),new ba(l,i,t,n,e)}},i?.preloadingStrategy?CC(i.preloadingStrategy).\u0275providers:[],{provide:r.NgProbeToken,multi:!0,useFactory:TC},i?.initialNavigation?w0(i):[],[{provide:yv,useFactory:ll},{provide:r.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:yv}]]}}static forChild(e){return{ngModule:t,providers:[{provide:po,multi:!0,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(_v,8))},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[Bd]}),t})();function PC(t){if(xm&&t)throw new r.\u0275RuntimeError(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function w0(t){return["disabled"===t.initialNavigation?ro(3,[{provide:r.APP_INITIALIZER,multi:!0,useFactory:()=>{const n=(0,r.inject)(Ls);return()=>{n.setUpLocationChangeListener()}}},{provide:bm,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?ro(2,[{provide:bm,useValue:0},{provide:r.APP_INITIALIZER,multi:!0,deps:[r.Injector],useFactory:n=>{const e=n.get(Ue,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const l=n.get(Ls),m=n.get(gv);(function d_(t,n){t.events.pipe(fa(e=>e instanceof rl||e instanceof Ad||e instanceof rm||e instanceof Oh),(0,Qn.U)(e=>e instanceof rl||e instanceof Oh?ks.COMPLETE:e instanceof Ad&&(0===e.code||1===e.code)?ks.REDIRECTING:ks.FAILED),fa(e=>e!==ks.REDIRECTING),$u(1)).subscribe(()=>{n()})})(l,()=>{i(!0)}),n.get(lr).afterPreactivation=()=>(i(!0),m.closed?Zn(void 0):m),l.initialNavigation()}))}}]).\u0275providers:[]]}const yv=new r.InjectionToken(xm?"Router Initializer":"");let g_=(()=>{class t{constructor(e){A(this,"router",void 0),A(this,"title","Ga naar homepage."),A(this,"src","https://cdn.antwerpen.be/core_branding_scss/6.6.6/assets/images/a-logo.svg"),A(this,"link",void 0),A(this,"onClick",void 0),this.router=e}logoClicked(e){e.preventDefault(),this.link&&"#"!==this.link&&(e.metaKey?this.router.navigate([]).then(i=>{window.open(this.link,"_blank")}):this.router.navigate([this.link])),this.onClick&&this.onClick(e)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Ls))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-logo"]],inputs:{title:"title",src:"src",link:"link",onClick:"onClick"},decls:2,vars:2,consts:[["href","#",1,"o-header__logo",3,"click"],[3,"alt","src"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"a",0),r.\u0275\u0275listener("click",function(m){return i.logoClicked(m)}),r.\u0275\u0275element(1,"img",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("alt",i.title)("src",i.src,r.\u0275\u0275sanitizeUrl))},encapsulation:2})),t})(),AC=(()=>{class t{constructor(){A(this,"imgTitle","Title for logo"),A(this,"imgSrc","https://robohash.org/antwerp-ui"),A(this,"imgLink","#"),A(this,"javascript1","import { LogoModule } from '@acpaas-ui/ngx-logo';\n\n@NgModule({\n\timports: [\n\t\tLogoModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"javascript2","public imgTitle = 'Title for logo';\npublic imgSrc = 'https://robohash.org/antwerp-ui';\npublic imgLink = '#';\n\npublic imgClicked(event) {\n\talert('Logo was clicked');\n}"),A(this,"html",'<aui-logo [src]="imgSrc" [title]="imgTitle" [link]="imgLink" [onClick]="imgClicked"></aui-logo>')}imgClicked(e){alert("Logo was clicked")}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:10,vars:6,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom","p-fix-position"],[3,"link","src","title","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Logo"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",3)(9,"aui-logo",4),r.\u0275\u0275listener("click",function(m){return i.imgClicked(m)}),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.javascript1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.javascript2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html),r.\u0275\u0275advance(2),r.\u0275\u0275property("link",i.imgLink)("src",i.imgSrc)("title",i.imgTitle))},dependencies:[tr,g_],encapsulation:2})),t})(),LC=(()=>{class t{constructor(){A(this,"codeExampleJS1","\nimport { CodeSnippetModule } from '@acpaas-ui/ngx-code-snippet';\n\n@NgModule({\n\timports: [\n\t\tCodeSnippetModule\n\t]\n})\n\nexport class AppModule {}"),A(this,"codeExampleHTML1",'<div class="u-margin-bottom">\n\t<div class="u-margin-bottom-xs">\n\t\t<h4><aui-code-snippet [codeSnippet]="\'Single text example\'"></aui-code-snippet></h4>\n\t</div>\n</div>'),A(this,"html2",'public codeExampleJSON = [\n\t{\n\t\t"title": "apples",\n\t\t"count": [12000, 20000],\n\t\t"description": {"text": "...", "sensitive": false}\n\t},\n\t{\n\t\t"title": "oranges",\n\t\t"count": [17500, null],\n\t\t"description": {"text": "...", "sensitive": false}\n\t}\n];'),A(this,"html3","public codeExampleJS =\n\tfunction greetMe(yourName) {\n\t\talert('Hello ' + yourName);\n\t}\n\tgreetMe('World');"),A(this,"html4",'public codeExampleJSON = [\n\t\t{\n\t\t\t"title": "apples",\n\t\t\t"count": [12000, 20000],\n\t\t\t"description": {"text": "...", "sensitive": false}\n\t\t},\n\t\t{\n\t\t\t"title": "oranges",\n\t\t\t"count": [17500, null],\n\t\t\t"description": {"text": "...", "sensitive": false}\n\t\t}\n\t];\n\npublic codeExampleJS =\n\tfunction greetMe(yourName) {\n\t\talert(\'Hello \' + yourName);\n\t}\n\tgreetMe(\'World\');'),A(this,"html5","import { Injectable } from '@angular/core';\nimport { Http } from '@angular/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class ContentService {\n\tconstructor(\n\t\tprivate http: Http\n\t) {}\n\n\tgetMarkdown(): any {\n\t\treturn this.http.get('/example.md')\n\t\t.pipe(map((res) => res.text()));\n\t}\n}"),A(this,"example1",'<div class="u-margin-bottom">\n\t<div class="u-margin-bottom-xs">\n\t\t<aui-code-snippet [codeSnippet]="\'codeExample JS\'"></aui-code-snippet>\n\t</div>\n\t<aui-code-snippet [codeSnippet]="example3"></aui-code-snippet>\n\t<div class="u-margin-bottom-xs">\n\t\t<aui-code-snippet [codeSnippet]="codeExampleJS"></aui-code-snippet>\n\t</div>\n</div>'),A(this,"example2",'<div class="u-margin-bottom">\n\t<div class="u-margin-bottom-xs">\n\t\t<aui-code-snippet [codeSnippet]="\'codeExample JS\'"></aui-code-snippet>\n\t</div>\n\t<aui-code-snippet [codeSnippet]="example3"></aui-code-snippet>\n\t<div class="u-margin-bottom-xs">\n\t\t<aui-code-snippet [codeSnippet]="codeExampleJS"></aui-code-snippet>\n\t</div>\n</div>'),A(this,"example3",'<div class="u-margin-bottom">\n\t<div class="u-margin-bottom-xs">\n\t\t<aui-code-snippet [codeSnippet]="\'codeExample JS\'"></aui-code-snippet>\n\t</div>\n\t<aui-code-snippet [codeSnippet]="example3"></aui-code-snippet>\n\t<div class="u-margin-bottom-xs">\n\t\t<aui-code-snippet [codeSnippet]="codeExampleJS"></aui-code-snippet>\n\t</div>\n</div>'),A(this,"example4",'<aui-code-snippet\n\t*ngFor="let codeExample of codeExamples"\n\t[codeSnippet]="codeExample"></aui-code-snippet>'),A(this,"example5",'<aui-code-snippet\n\t*ngIf="mdExample"\n\t[codeSnippet]="mdExample"\n\t[processMarkdown]="true"></aui-code-snippet>'),A(this,"codeExampleJSON",'[\n\t{\n\t\t"title": "apples",\n\t\t"count": [12000, 20000],\n\t\t"description": {"text": "...", "sensitive": false}\n\t},\n\t{\n\t\t"title": "oranges",\n\t\t"count": [17500, null],\n\t\t"description": {"text": "...", "sensitive": false}\n\t}\n]'),A(this,"codeExampleJS","\nfunction greetMe(yourName) {\n\talert('Hello ' + yourName);\n}\ngreetMe('World');"),A(this,"codeExamples",[this.codeExampleJS,this.codeExampleJSON]),A(this,"codeExampleMarkdown","public mdExample: string;\n\nconstructor(\n\tprivate contentService: ContentService\n) {\n\tcontentService.getMarkdown().subscribe(data => this.mdExample = data);\n}")}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:50,vars:16,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-l"],[1,"h4","u-margin-bottom"],[1,"u-margin-bottom-xs"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Code snippet"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",3),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"h3",4),r.\u0275\u0275text(7,"Single text"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1)(9,"div",5)(10,"h4"),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(12,"div",3),r.\u0275\u0275element(13,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"h3",4),r.\u0275\u0275text(15,"JSON"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"div",1)(17,"div",5),r.\u0275\u0275element(18,"aui-code-snippet",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(19,"div",1),r.\u0275\u0275element(20,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",3),r.\u0275\u0275element(22,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"h3",4),r.\u0275\u0275text(24,"JavaScript"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(25,"div",1)(26,"div",5),r.\u0275\u0275element(27,"aui-code-snippet",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(28,"div",1),r.\u0275\u0275element(29,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(30,"div",3),r.\u0275\u0275element(31,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(32,"h3",4),r.\u0275\u0275text(33,"Multiple code snippets"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"div",1)(35,"div",5),r.\u0275\u0275element(36,"aui-code-snippet",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(37,"div",1),r.\u0275\u0275element(38,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(39,"div",3),r.\u0275\u0275element(40,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(41,"h3",4),r.\u0275\u0275text(42,"Markdown file"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(43,"div",1),r.\u0275\u0275element(44,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(45,"div",1)(46,"div",5),r.\u0275\u0275element(47,"aui-code-snippet",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(48,"div",1),r.\u0275\u0275element(49,"aui-code-snippet",2),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML1),r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet","Single text example"),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.example1),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExampleJSON),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.example2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html2),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExampleJS),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.example3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html3),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExamples),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.example4),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html4),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.html5),r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.codeExampleMarkdown),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.example5))},dependencies:[tr],encapsulation:2})),t})();function C0(t,n,e,i,l,m,C){try{var F=t[m](C),K=F.value}catch(le){return void e(le)}F.done?n(K):Promise.resolve(K).then(i,l)}function S0(t){return function(){var n=this,e=arguments;return new Promise(function(i,l){var m=t.apply(n,e);function C(K){C0(m,i,l,C,F,"next",K)}function F(K){C0(m,i,l,C,F,"throw",K)}C(void 0)})}}function E0(t,n){if(1&t&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(0,"span",3),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.ariaLabel)}}let To=(()=>{class t{get classes(){return["ai",this.className,this.name].filter(Boolean).join(" ")}constructor(e){var i=this;this.renderer=e,this.className="",this.fetchAntwerpIcons=S0(function*(){try{const C=yield(yield fetch("https://cdn.antwerpen.be/core_branding_scss/6.6.6/assets/images/ai.svg")).text(),F=i.renderer.createElement("svg");i.renderer.setAttribute(F,"id","ai-svg");const K=(new DOMParser).parseFromString(C,"text/html").querySelector("body > svg");i.renderer.appendChild(F,K),document.getElementById("ai-svg")||i.renderer.appendChild(document.body,F)}catch(l){throw new Error(l)}})}ngOnInit(){document.getElementById("ai-svg")||this.fetchAntwerpIcons()}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.Renderer2))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["aui-icon"]],hostVars:1,hostBindings:function(e,i){2&e&&r.\u0275\u0275attribute("class",i.classes)},inputs:{name:"name",ariaLabel:"ariaLabel",className:"className"},decls:4,vars:2,consts:[[1,"ai"],["aria-hidden","true"],["class","u-screen-reader-only",4,"ngIf"],[1,"u-screen-reader-only"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"span",0),r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(1,"svg",1),r.\u0275\u0275element(2,"use"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,E0,2,1,"span",2),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275attribute("href","#"+i.name),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.ariaLabel))},dependencies:[on],styles:["[_nghost-%COMP%]{display:inline-flex}"]}),t})(),ls=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[Ri]}),t})();function T0(t,n){if(1&t&&r.\u0275\u0275element(0,"img",5),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("alt",e.title)("src",e.image,r.\u0275\u0275sanitizeUrl)}}function kC(t,n){if(1&t&&r.\u0275\u0275element(0,"aui-icon",6),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("name",e.icon)}}function MD(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.letter)}}function D0(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.title)}}const ID=function(t,n,e,i){return[t,n,e,i]};var Yd=(()=>{return(t=Yd||(Yd={})).S="S",t.M="M",t.L="L",Yd;var t})();let OC=(()=>{class t{constructor(){A(this,"title",""),A(this,"image",void 0),A(this,"icon",void 0),A(this,"letter",""),A(this,"className",""),A(this,"size",Yd.M),A(this,"rounded",!1),A(this,"avatarSizes",{S:"a-avatar--s",M:"",L:"a-avatar--l"})}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-avatar"]],inputs:{title:"title",image:"image",icon:"icon",letter:"letter",className:"className",size:"size",rounded:"rounded"},decls:5,vars:10,consts:[[1,"a-avatar",3,"ngClass"],["class","a-avatar__image",3,"alt","src",4,"ngIf"],["class","a-avatar__icon",3,"name",4,"ngIf"],["aria-hidden","true","class","a-avatar__letter",4,"ngIf"],["class","u-screen-reader-only",4,"ngIf"],[1,"a-avatar__image",3,"alt","src"],[1,"a-avatar__icon",3,"name"],["aria-hidden","true",1,"a-avatar__letter"],[1,"u-screen-reader-only"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,T0,1,2,"img",1),r.\u0275\u0275template(2,kC,1,1,"aui-icon",2),r.\u0275\u0275template(3,MD,2,1,"span",3),r.\u0275\u0275template(4,D0,2,1,"span",4),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction4(5,ID,i.className,i.avatarSizes[i.size],i.letter?"a-avatar--primary":"",i.rounded?"a-avatar--rounded":"")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.image),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.icon),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.letter),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.icon||i.letter))},dependencies:[Ne,on,To],encapsulation:2})),t})(),RC=(()=>{class t{constructor(){A(this,"importModule","import { AvatarModule } from '@acpaas-ui/ngx-avatar';\n\n@NgModule({\n\timports: [\n\t\tAvatarModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"example1",'<aui-avatar icon="ai-alarm-bell"  title="An alarm bell icon" size="S"></aui-avatar>\n<aui-avatar icon="ai-alarm-bell"  title="An alarm bell icon"></aui-avatar>\n<aui-avatar icon="ai-alarm-bell"  title="An alarm bell icon" size="L"></aui-avatar>'),A(this,"example2",'<aui-avatar image="https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg" title="A robot avatar" size="S"></aui-avatar>\n<aui-avatar image="https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg" title="A robot avatar"></aui-avatar>\n<aui-avatar image="https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg" title="A robot avatar" size="L"></aui-avatar>'),A(this,"example3",'<aui-avatar letter="T"  title="A letter T avatar" size="S"></aui-avatar>\n<aui-avatar letter="T"  title="A letter T avatar"></aui-avatar>\n<aui-avatar letter="T"  title="A letter T avatar" size="L"></aui-avatar>'),A(this,"example4",'<aui-avatar icon="ai-alarm-bell"  title="An alarm bell icon" size="S" rounded="true"></aui-avatar>\n<aui-avatar letter="T"  title="A letter T avatar" rounded="true"></aui-avatar>\n<aui-avatar image="https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg" title="A robot avatar" size="L" rounded="true"></aui-avatar>')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:28,vars:5,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-xs"],["icon","ai-alarm-bell","title","An alarm bell icon","size","S"],["icon","ai-alarm-bell","title","An alarm bell icon"],["icon","ai-alarm-bell","title","An alarm bell icon","size","L"],["image","https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg","title","A robot avatar","size","S"],["image","https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg","title","A robot avatar"],["image","https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg","title","A robot avatar","size","L"],["letter","T","title","A letter T avatar","size","S"],["letter","T","title","A letter T avatar"],["letter","T","title","A letter T avatar","size","L"],["icon","ai-alarm-bell","title","An alarm bell icon","size","S","rounded","true"],["letter","T","title","A letter T avatar","rounded","true"],["image","https://www.publicdomainpictures.net/pictures/270000/velka/avatar-people-person-business-u.jpg","title","A robot avatar","size","L","rounded","true"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Avatar"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementStart(6,"div",3),r.\u0275\u0275element(7,"aui-avatar",4)(8,"aui-avatar",5)(9,"aui-avatar",6),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",1),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementStart(12,"div",3),r.\u0275\u0275element(13,"aui-avatar",7)(14,"aui-avatar",8)(15,"aui-avatar",9),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(16,"div",1),r.\u0275\u0275element(17,"aui-code-snippet",2),r.\u0275\u0275elementStart(18,"div",3),r.\u0275\u0275element(19,"aui-avatar",10)(20,"aui-avatar",11)(21,"aui-avatar",12),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(22,"div",1),r.\u0275\u0275element(23,"aui-code-snippet",2),r.\u0275\u0275elementStart(24,"div",3),r.\u0275\u0275element(25,"aui-avatar",13)(26,"aui-avatar",14)(27,"aui-avatar",15),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.example1),r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet",i.example2),r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet",i.example3),r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet",i.example4))},dependencies:[tr,OC],encapsulation:2})),t})();var bv=Me(830);function Ol(t,n){return new jr.y(e=>{const i=t.length;if(0===i)return void e.complete();const l=new Array(i);let m=0,C=0;for(let F=0;F<i;F++){const K=(0,lo.D)(t[F]);let le=!1;e.add(K.subscribe({next:xe=>{le||(le=!0,C++),l[F]=xe},error:xe=>e.error(xe),complete:()=>{m++,(m===i||!le)&&(C===i&&e.next(n?n.reduce((xe,Ae,et)=>(xe[Ae]=l[et],xe),{}):l),e.complete())}}))}})}let Xp=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.ElementRef))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t}),t})(),No=(()=>{class t extends Xp{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.\u0275\u0275getInheritedFactory(t)))(i||t)}}(),t.\u0275dir=r.\u0275\u0275defineDirective({type:t,features:[r.\u0275\u0275InheritDefinitionFeature]}),t})();const qo=new r.InjectionToken("NgValueAccessor"),__={provide:qo,useExisting:(0,r.forwardRef)(()=>cs),multi:!0};let cs=(()=>{class t extends No{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.\u0275\u0275getInheritedFactory(t)))(i||t)}}(),t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("change",function(m){return i.onChange(m.target.checked)})("blur",function(){return i.onTouched()})},features:[r.\u0275\u0275ProvidersFeature([__]),r.\u0275\u0275InheritDefinitionFeature]}),t})();const xv={provide:qo,useExisting:(0,r.forwardRef)(()=>cl),multi:!0},ef=new r.InjectionToken("CompositionEventMode");let cl=(()=>{class t extends Xp{constructor(e,i,l){super(e,i),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Jp(){const t=q()?q().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(ef,8))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("input",function(m){return i._handleInput(m.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(m){return i._compositionEnd(m.target.value)})},features:[r.\u0275\u0275ProvidersFeature([xv]),r.\u0275\u0275InheritDefinitionFeature]}),t})();const tf=!1,zo=new r.InjectionToken("NgValidators"),Fl=new r.InjectionToken("NgAsyncValidators");function P0(t){return null!=t}function wv(t){const n=(0,r.\u0275isPromise)(t)?(0,lo.D)(t):t;if(tf&&!(0,r.\u0275isObservable)(n)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new r.\u0275RuntimeError(-1101,e)}return n}function Cv(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function Sv(t,n){return n.map(e=>e(t))}function T_(t){return t.map(n=>function Ev(t){return!t.validate}(n)?n:e=>n.validate(e))}function rf(t){return null!=t?function A0(t){if(!t)return null;const n=t.filter(P0);return 0==n.length?null:function(e){return Cv(Sv(e,n))}}(T_(t)):null}function Em(t){return null!=t?function Sm(t){if(!t)return null;const n=t.filter(P0);return 0==n.length?null:function(e){return function M0(...t){if(1===t.length){const n=t[0];if((0,Of.k)(n))return Ol(n,null);if((0,bv.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return Ol(e.map(i=>n[i]),e)}}if("function"==typeof t[t.length-1]){const n=t.pop();return Ol(t=1===t.length&&(0,Of.k)(t[0])?t[0]:t,null).pipe((0,Qn.U)(e=>n(...e)))}return Ol(t,null)}(Sv(e,n).map(wv)).pipe((0,Qn.U)(Cv))}}(T_(t)):null}function L0(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function Tm(t){return t._rawValidators}function Dm(t){return t._rawAsyncValidators}function Mm(t){return t?Array.isArray(t)?t:[t]:[]}function Im(t,n){return Array.isArray(t)?t.includes(n):t===n}function D_(t,n){const e=Mm(n);return Mm(t).forEach(l=>{Im(e,l)||e.push(l)}),e}function Tv(t,n){return Mm(n).filter(e=>!Im(t,e))}class Dv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=rf(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Em(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Qs extends Dv{get formDirective(){return null}get path(){return null}}class wu extends Dv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class k0{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Os=(()=>{class t extends k0{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(wu,2))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&r.\u0275\u0275classProp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[r.\u0275\u0275InheritDefinitionFeature]}),t})(),sf=(()=>{class t extends k0{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Qs,10))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&r.\u0275\u0275classProp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[r.\u0275\u0275InheritDefinitionFeature]}),t})();function Lm(t,n){return t?`with name: '${n}'`:`at index: ${n}`}const km=!1,Oc="VALID",af="INVALID",lf="PENDING",Qd="DISABLED";function U0(t){return(Om(t)?t.validators:t)||null}function Pv(t,n){return(Om(n)?n.asyncValidators:t)||null}function Om(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function H0(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new r.\u0275RuntimeError(1e3,km?function Zh(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!i[e])throw new r.\u0275RuntimeError(1001,km?function zC(t,n){return`Cannot find form control ${Lm(t,n)}`}(n,e):"")}function us(t,n,e){t._forEachChild((i,l)=>{if(void 0===e[l])throw new r.\u0275RuntimeError(1002,km?function BC(t,n){return`Must supply a value for form control ${Lm(t,n)}`}(n,l):"")})}class Rm{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Oc}get invalid(){return this.status===af}get pending(){return this.status==lf}get disabled(){return this.status===Qd}get enabled(){return this.status!==Qd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(D_(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(D_(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Tv(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Tv(n,this._rawAsyncValidators))}hasValidator(n){return Im(this._rawValidators,n)}hasAsyncValidator(n){return Im(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=lf,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Qd,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Oc,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oc||this.status===lf)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qd:Oc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=lf,this._hasOwnPendingAsyncValidator=!0;const e=wv(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,l)=>i&&i._find(l),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new r.EventEmitter,this.statusChanges=new r.EventEmitter}_calculateStatus(){return this._allControlsDisabled()?Qd:this.errors?af:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lf)?lf:this._anyControlsHaveStatus(af)?af:Oc}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Om(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function PD(t){return Array.isArray(t)?rf(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function VC(t){return Array.isArray(t)?Em(t):t||null}(this._rawAsyncValidators)}}class Fm extends Rm{constructor(n,e,i){super(U0(e),Pv(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){us(this,!0,n),Object.keys(n).forEach(i=>{H0(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const l=this.controls[i];l&&l.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,l)=>{i.reset(n[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,l)=>((i.enabled||this.disabled)&&(e[l]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((l,m)=>{i=e(i,l,m)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class $0 extends Fm{}const Wh=new r.InjectionToken("CallSetDisabledState",{providedIn:"root",factory:()=>Cu}),Cu="always";function I_(t,n){return[...n.path,t]}function Nm(t,n,e=Cu){Z0(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function Av(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&W0(t,n)})}(t,n),function q0(t,n){const e=(i,l)=>{n.valueAccessor.writeValue(i),l&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function Rc(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&W0(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function G0(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function zm(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),cf(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function P_(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Z0(t,n){const e=Tm(t);null!==n.validator?t.setValidators(L0(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=Dm(t);null!==n.asyncValidator?t.setAsyncValidators(L0(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const l=()=>t.updateValueAndValidity();P_(n._rawValidators,l),P_(n._rawAsyncValidators,l)}function cf(t,n){let e=!1;if(null!==t){if(null!==n.validator){const l=Tm(t);if(Array.isArray(l)&&l.length>0){const m=l.filter(C=>C!==n.validator);m.length!==l.length&&(e=!0,t.setValidators(m))}}if(null!==n.asyncValidator){const l=Dm(t);if(Array.isArray(l)&&l.length>0){const m=l.filter(C=>C!==n.asyncValidator);m.length!==l.length&&(e=!0,t.setAsyncValidators(m))}}}const i=()=>{};return P_(n._rawValidators,i),P_(n._rawAsyncValidators,i),e}function W0(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Lv(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function Xd(t,n){if(!n)return null;let e,i,l;return Array.isArray(n),n.forEach(m=>{m.constructor===cl?e=m:function HC(t){return Object.getPrototypeOf(t.constructor)===No}(m)?i=m:l=m}),l||i||e||null}function Bm(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function K0(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Jd=class extends Rm{constructor(n=null,e,i){super(U0(e),Pv(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Om(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=K0(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Bm(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Bm(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){K0(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},O_=Jd,Rv={provide:wu,useExisting:(0,r.forwardRef)(()=>oc)},F_=(()=>Promise.resolve())();let oc=(()=>{class t extends wu{constructor(e,i,l,m,C,F){super(),this._changeDetectorRef=C,this.callSetDisabledState=F,this.control=new Jd,this._registered=!1,this.update=new r.EventEmitter,this._parent=e,this._setValidators(i),this._setAsyncValidators(l),this.valueAccessor=Xd(0,m)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Lv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Nm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){F_.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,l=0!==i&&(0,r.\u0275coerceToBoolean)(i);F_.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?I_(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Qs,9),r.\u0275\u0275directiveInject(zo,10),r.\u0275\u0275directiveInject(Fl,10),r.\u0275\u0275directiveInject(qo,10),r.\u0275\u0275directiveInject(r.ChangeDetectorRef,8),r.\u0275\u0275directiveInject(Wh,8))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.\u0275\u0275ProvidersFeature([Rv]),r.\u0275\u0275InheritDefinitionFeature,r.\u0275\u0275NgOnChangesFeature]}),t})(),N_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Nv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({}),t})();const z_=new r.InjectionToken("NgModelWithFormControlWarning"),ox={provide:wu,useExisting:(0,r.forwardRef)(()=>rh)};let rh=(()=>{class t extends wu{set isDisabled(e){}constructor(e,i,l,m,C){super(),this._ngModelWarningConfig=m,this.callSetDisabledState=C,this.update=new r.EventEmitter,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=Xd(0,l)}ngOnChanges(e){if(this._isControlChanged(e)){const i=e.form.previousValue;i&&zm(i,this,!1),Nm(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Lv(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&zm(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(zo,10),r.\u0275\u0275directiveInject(Fl,10),r.\u0275\u0275directiveInject(qo,10),r.\u0275\u0275directiveInject(z_,8),r.\u0275\u0275directiveInject(Wh,8))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[r.\u0275\u0275ProvidersFeature([ox]),r.\u0275\u0275InheritDefinitionFeature,r.\u0275\u0275NgOnChangesFeature]}),t})();const sx={provide:Qs,useExisting:(0,r.forwardRef)(()=>qh)};let qh=(()=>{class t extends Qs{constructor(e,i,l){super(),this.callSetDisabledState=l,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.EventEmitter,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Nm(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){zm(e.control||null,e,!1),function $C(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function L_(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,l=this.form.get(e.path);i!==l&&(zm(i||null,e),(t=>t instanceof Jd)(l)&&(Nm(l,e,this.callSetDisabledState),e.control=l))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function Fc(t,n){Z0(t,n)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function Nc(t,n){return cf(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Z0(this.form,this),this._oldForm&&cf(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(zo,10),r.\u0275\u0275directiveInject(Fl,10),r.\u0275\u0275directiveInject(Wh,8))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("submit",function(m){return i.onSubmit(m)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.\u0275\u0275ProvidersFeature([sx]),r.\u0275\u0275InheritDefinitionFeature,r.\u0275\u0275NgOnChangesFeature]}),t})();const jv={provide:wu,useExisting:(0,r.forwardRef)(()=>hf)};let hf=(()=>{class t extends wu{set isDisabled(e){}constructor(e,i,l,m,C){super(),this._ngModelWarningConfig=C,this._added=!1,this.update=new r.EventEmitter,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(l),this.valueAccessor=Xd(0,m)}ngOnChanges(e){this._added||this._setUpControl(),Lv(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return I_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Qs,13),r.\u0275\u0275directiveInject(zo,10),r.\u0275\u0275directiveInject(Fl,10),r.\u0275\u0275directiveInject(qo,10),r.\u0275\u0275directiveInject(z_,8))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.\u0275\u0275ProvidersFeature([jv]),r.\u0275\u0275InheritDefinitionFeature,r.\u0275\u0275NgOnChangesFeature]}),t})();const Uv={provide:qo,useExisting:(0,r.forwardRef)(()=>oh),multi:!0};function j_(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let oh=(()=>{class t extends No{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const l=j_(this._getOptionId(e),e);this.setProperty("value",l)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function Hv(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.\u0275\u0275getInheritedFactory(t)))(i||t)}}(),t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("change",function(m){return i.onChange(m.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.\u0275\u0275ProvidersFeature([Uv]),r.\u0275\u0275InheritDefinitionFeature]}),t})(),ep=(()=>{class t{constructor(e,i,l){this._element=e,this._renderer=i,this._select=l,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(j_(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(oh,9))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const $v={provide:qo,useExisting:(0,r.forwardRef)(()=>Kh),multi:!0};function Yh(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Kh=(()=>{class t extends No{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const l=e.map(m=>this._getOptionId(m));i=(m,C)=>{m._setSelected(l.indexOf(C.toString())>-1)}}else i=(l,m)=>{l._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const l=[],m=i.selectedOptions;if(void 0!==m){const C=m;for(let F=0;F<C.length;F++){const le=this._getOptionValue(C[F].value);l.push(le)}}else{const C=i.options;for(let F=0;F<C.length;F++){const K=C[F];if(K.selected){const le=this._getOptionValue(K.value);l.push(le)}}}this.value=l,e(l)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function qC(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.\u0275\u0275getInheritedFactory(t)))(i||t)}}(),t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("change",function(m){return i.onChange(m.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.\u0275\u0275ProvidersFeature([$v]),r.\u0275\u0275InheritDefinitionFeature]}),t})(),Um=(()=>{class t{constructor(e,i,l){this._element=e,this._renderer=i,this._select=l,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Yh(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Yh(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2),r.\u0275\u0275directiveInject(Kh,9))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),fx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[Nv]}),t})();class Zv extends Rm{constructor(n,e,i){super(U0(e),Pv(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){let l=this._adjustIndex(n);l<0&&(l=0),this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),this.controls.splice(l,1),e&&(this.controls.splice(l,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){us(this,!1,n),n.forEach((i,l)=>{H0(this,!1,l),this.at(l).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,l)=>{this.at(l)&&this.at(l).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,l)=>{i.reset(n[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}const mx=Zv;function gx(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let nS=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new t;return e.useNonNullable=!0,e}group(e,i=null){const l=this._reduceControls(e);let m={};return gx(i)?m=i:null!==i&&(m.validators=i.validator,m.asyncValidators=i.asyncValidator),new Fm(l,m)}record(e,i=null){const l=this._reduceControls(e);return new $0(l,i)}control(e,i,l){let m={};return this.useNonNullable?(gx(i)?m=i:(m.validators=i,m.asyncValidators=l),new Jd(e,{...m,nonNullable:!0})):new Jd(e,i,l)}array(e,i,l){const m=e.map(C=>this._createControl(C));return new Zv(m,i,l)}_reduceControls(e){const i={};return Object.keys(e).forEach(l=>{i[l]=this._createControl(e[l])}),i}_createControl(e){return e instanceof Jd||e instanceof Rm?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Xh=(()=>{class t extends nS{group(e,i=null){return super.group(e,i)}control(e,i,l){return super.control(e,i,l)}array(e,i,l){return super.array(e,i,l)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=r.\u0275\u0275getInheritedFactory(t)))(i||t)}}(),t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),sc=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Wh,useValue:e.callSetDisabledState??Cu}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[fx]}),t})(),tp=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:z_,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Wh,useValue:e.callSetDisabledState??Cu}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[fx]}),t})();function Nl(t){return n=>n.lift(new $m(t))}class $m{constructor(n){this.notifier=n}call(n,e){const i=new Gm(n),l=(0,za.ft)(this.notifier,new za.IY(i));return l&&!i.seenValue?(i.add(l),e.subscribe(i)):i}}class Gm extends za.Ds{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var rS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Z_(t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const lS={date:Z_({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Z_({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Z_({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var cS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function W_(t){return function(n,e){var l;if("formatting"===(null!=e&&e.context?String(e.context):"standalone")&&t.formattingValues){var m=t.defaultFormattingWidth||t.defaultWidth,C=null!=e&&e.width?String(e.width):m;l=t.formattingValues[C]||t.formattingValues[m]}else{var F=t.defaultWidth,K=null!=e&&e.width?String(e.width):t.defaultWidth;l=t.values[K]||t.values[F]}return l[t.argumentCallback?t.argumentCallback(n):n]}}const pS={ordinalNumber:function(n,e){var i=Number(n),l=i%100;if(l>20||l<10)switch(l%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:W_({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:W_({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:W_({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:W_({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:W_({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Wm(t){return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.width,m=n.match(i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth]);if(!m)return null;var le,C=m[0],F=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],K=Array.isArray(F)?function BD(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return e}(F,function(Ae){return Ae.test(C)}):function fS(t,n){for(var e in t)if(t.hasOwnProperty(e)&&n(t[e]))return e}(F,function(Ae){return Ae.test(C)});return le=t.valueCallback?t.valueCallback(K):K,{value:le=e.valueCallback?e.valueCallback(le):le,rest:n.slice(C.length)}}}var wS={ordinalNumber:function mS(t){return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.match(t.matchPattern);if(!i)return null;var l=i[0],m=n.match(t.parsePattern);if(!m)return null;var C=t.valueCallback?t.valueCallback(m[0]):m[0];return{value:C=e.valueCallback?e.valueCallback(C):C,rest:n.slice(l.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(n){return parseInt(n,10)}}),era:Wm({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Wm({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:Wm({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Wm({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Wm({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const SS={code:"en-US",formatDistance:function(n,e,i){var l,m=rS[n];return l="string"==typeof m?m:1===e?m.one:m.other.replace("{{count}}",e.toString()),null!=i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+l:l+" ago":l},formatLong:lS,formatRelative:function(n,e,i,l){return cS[n]},localize:pS,match:wS,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ul(t){if(null===t||!0===t||!1===t)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function Yo(t,n){if(n.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+n.length+" present")}function Y_(t){return(Y_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function xa(t){Yo(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||"object"===Y_(t)&&"[object Date]"===n?new Date(t.getTime()):"number"==typeof t||"[object Number]"===n?new Date(t):(("string"==typeof t||"[object String]"===n)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function DS(t,n){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}var Dx=function(n,e){switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Mx=function(n,e){switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}};const Ix={p:Mx,P:function(n,e){var C,i=n.match(/(P+)(p+)?/)||[],l=i[1],m=i[2];if(!m)return Dx(n,e);switch(l){case"P":C=e.dateTime({width:"short"});break;case"PP":C=e.dateTime({width:"medium"});break;case"PPP":C=e.dateTime({width:"long"});break;default:C=e.dateTime({width:"full"})}return C.replace("{{date}}",Dx(l,e)).replace("{{time}}",Mx(m,e))}};var Yv=["D","DD"],Px=["YY","YYYY"];function Qv(t,n,e){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}function Ym(t){return(Ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Lx(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Km(t,n)}function Km(t,n){return(Km=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function K_(t){var n=function PS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=Q_(t);if(n){var m=Q_(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function kx(t,n){return!n||"object"!==Ym(n)&&"function"!=typeof n?Qm(t):n}(this,l)}}function Qm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q_(t){return(Q_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Xm(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Ox(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function X_(t,n,e){return n&&Ox(t.prototype,n),e&&Ox(t,e),t}function Jh(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Rx=10,Xv=function(){function t(){Xm(this,t),Jh(this,"subPriority",0)}return X_(t,[{key:"validate",value:function(e,i){return!0}}]),t}(),AS=function(t){Lx(e,t);var n=K_(e);function e(i,l,m,C,F){var K;return Xm(this,e),(K=n.call(this)).value=i,K.validateValue=l,K.setValue=m,K.priority=C,F&&(K.subPriority=F),K}return X_(e,[{key:"validate",value:function(l,m){return this.validateValue(l,this.value,m)}},{key:"set",value:function(l,m,C){return this.setValue(l,m,this.value,C)}}]),e}(Xv),Jv=function(t){Lx(e,t);var n=K_(e);function e(){var i;Xm(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return Jh(Qm(i=n.call.apply(n,[this].concat(m))),"priority",Rx),Jh(Qm(i),"subPriority",-1),i}return X_(e,[{key:"set",value:function(l,m){if(m.timestampIsSet)return l;var C=new Date(0);return C.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),C.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),C}}]),e}(Xv);function Fx(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var wr=function(){function t(){!function J_(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return function eb(t,n,e){n&&Fx(t.prototype,n),e&&Fx(t,e)}(t,[{key:"run",value:function(e,i,l,m){var C=this.parse(e,i,l,m);return C?{setter:new AS(C.value,this.validate,this.set,this.priority,this.subPriority),rest:C.rest}:null}},{key:"validate",value:function(e,i,l){return!0}}]),t}();function Jm(t){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function nb(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ey(t,n){return(ey=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function ib(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function df(t){return(df=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function OS(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Vx=function(t){!function zx(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&ey(t,n)}(e,t);var n=function LS(t){var n=function kS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=df(t);if(n){var m=df(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function Bx(t,n){return!n||"object"!==Jm(n)&&"function"!=typeof n?ib(t):n}(this,l)}}(e);function e(){var i;!function tb(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return OS(ib(i=n.call.apply(n,[this].concat(m))),"priority",140),OS(ib(i),"incompatibleTokens",["R","u","t","T"]),i}return function Nx(t,n,e){n&&nb(t.prototype,n),e&&nb(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"G":case"GG":case"GGG":return C.era(l,{width:"abbreviated"})||C.era(l,{width:"narrow"});case"GGGGG":return C.era(l,{width:"narrow"});default:return C.era(l,{width:"wide"})||C.era(l,{width:"abbreviated"})||C.era(l,{width:"narrow"})}}},{key:"set",value:function(l,m,C){return m.era=C,l.setUTCFullYear(C,0,1),l.setUTCHours(0,0,0,0),l}}]),e}(wr),FS=(Math.pow(10,8),6e4),jx=36e5,Ux=1e3,Vo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},zc_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,zc_basic=/^([+-])(\d{2})(\d{2})|Z/,zc_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,zc_extended=/^([+-])(\d{2}):(\d{2})|Z/,zc_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function jo(t,n){return t&&{value:n(t.value),rest:t.rest}}function go(t,n){var e=n.match(t);return e?{value:parseInt(e[0],10),rest:n.slice(e[0].length)}:null}function Eu(t,n){var e=n.match(t);if(!e)return null;if("Z"===e[0])return{value:0,rest:n.slice(1)};var i="+"===e[1]?1:-1,l=e[2]?parseInt(e[2],10):0,m=e[3]?parseInt(e[3],10):0,C=e[5]?parseInt(e[5],10):0;return{value:i*(l*jx+m*FS+C*Ux),rest:n.slice(e[0].length)}}function GS(t){return go(Vo.anyDigitsSigned,t)}function Do(t,n){switch(t){case 1:return go(Vo.singleDigit,n);case 2:return go(Vo.twoDigits,n);case 3:return go(Vo.threeDigits,n);case 4:return go(Vo.fourDigits,n);default:return go(new RegExp("^\\d{1,"+t+"}"),n)}}function tg(t,n){switch(t){case 1:return go(Vo.singleDigitSigned,n);case 2:return go(Vo.twoDigitsSigned,n);case 3:return go(Vo.threeDigitsSigned,n);case 4:return go(Vo.fourDigitsSigned,n);default:return go(new RegExp("^-?\\d{1,"+t+"}"),n)}}function ty(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ob(t,n){var l,e=n>0,i=e?n:1-n;if(i<=50)l=t||100;else{var m=i+50;l=t+100*Math.floor(m/100)-(t>=m%100?100:0)}return e?l:1-l}function sb(t){return t%400==0||t%4==0&&t%100!=0}function ed(t){return(ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ny(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pf(t,n){return(pf=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function ab(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function np(t){return(np=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function ig(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var KS=function(t){!function WS(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&pf(t,n)}(e,t);var n=function ng(t){var n=function YS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=np(t);if(n){var m=np(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function qS(t,n){return!n||"object"!==ed(n)&&"function"!=typeof n?ab(t):n}(this,l)}}(e);function e(){var i;!function ZS(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return ig(ab(i=n.call.apply(n,[this].concat(m))),"priority",130),ig(ab(i),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),i}return function Tu(t,n,e){n&&ny(t.prototype,n),e&&ny(t,e)}(e,[{key:"parse",value:function(l,m,C){var F=function(le){return{year:le,isTwoDigitYear:"yy"===m}};switch(m){case"y":return jo(Do(4,l),F);case"yo":return jo(C.ordinalNumber(l,{unit:"year"}),F);default:return jo(Do(m.length,l),F)}}},{key:"validate",value:function(l,m){return m.isTwoDigitYear||m.year>0}},{key:"set",value:function(l,m,C){var F=l.getUTCFullYear();if(C.isTwoDigitYear){var K=ob(C.year,F);return l.setUTCFullYear(K,0,1),l.setUTCHours(0,0,0,0),l}return l.setUTCFullYear("era"in m&&1!==m.era?1-C.year:C.year,0,1),l.setUTCHours(0,0,0,0),l}}]),e}(wr),Gx={};function ff(){return Gx}function ah(t,n){var e,i,l,m,C,F,K,le;Yo(1,arguments);var xe=ff(),Ae=ul(null!==(e=null!==(i=null!==(l=null!==(m=n?.weekStartsOn)&&void 0!==m?m:null==n||null===(C=n.locale)||void 0===C||null===(F=C.options)||void 0===F?void 0:F.weekStartsOn)&&void 0!==l?l:xe.weekStartsOn)&&void 0!==i?i:null===(K=xe.locale)||void 0===K||null===(le=K.options)||void 0===le?void 0:le.weekStartsOn)&&void 0!==e?e:0);if(!(Ae>=0&&Ae<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var et=xa(t),Qe=et.getUTCDay(),yt=(Qe<Ae?7:0)+Qe-Ae;return et.setUTCDate(et.getUTCDate()-yt),et.setUTCHours(0,0,0,0),et}function lb(t,n){var e,i,l,m,C,F,K,le;Yo(1,arguments);var xe=xa(t),Ae=xe.getUTCFullYear(),et=ff(),Qe=ul(null!==(e=null!==(i=null!==(l=null!==(m=n?.firstWeekContainsDate)&&void 0!==m?m:null==n||null===(C=n.locale)||void 0===C||null===(F=C.options)||void 0===F?void 0:F.firstWeekContainsDate)&&void 0!==l?l:et.firstWeekContainsDate)&&void 0!==i?i:null===(K=et.locale)||void 0===K||null===(le=K.options)||void 0===le?void 0:le.firstWeekContainsDate)&&void 0!==e?e:1);if(!(Qe>=1&&Qe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var yt=new Date(0);yt.setUTCFullYear(Ae+1,0,Qe),yt.setUTCHours(0,0,0,0);var At=ah(yt,n),Nt=new Date(0);Nt.setUTCFullYear(Ae,0,Qe),Nt.setUTCHours(0,0,0,0);var Gt=ah(Nt,n);return xe.getTime()>=At.getTime()?Ae+1:xe.getTime()>=Gt.getTime()?Ae:Ae-1}function mf(t){return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ub(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pb(t,n){return(pb=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function fb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gf(t){return(gf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function mb(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Wx=function(t){!function db(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&pb(t,n)}(e,t);var n=function XS(t){var n=function Zx(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=gf(t);if(n){var m=gf(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function JS(t,n){return!n||"object"!==mf(n)&&"function"!=typeof n?fb(t):n}(this,l)}}(e);function e(){var i;!function cb(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return mb(fb(i=n.call.apply(n,[this].concat(m))),"priority",130),mb(fb(i),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),i}return function hb(t,n,e){n&&ub(t.prototype,n),e&&ub(t,e)}(e,[{key:"parse",value:function(l,m,C){var F=function(le){return{year:le,isTwoDigitYear:"YY"===m}};switch(m){case"Y":return jo(Do(4,l),F);case"Yo":return jo(C.ordinalNumber(l,{unit:"year"}),F);default:return jo(Do(m.length,l),F)}}},{key:"validate",value:function(l,m){return m.isTwoDigitYear||m.year>0}},{key:"set",value:function(l,m,C,F){var K=lb(l,F);if(C.isTwoDigitYear){var le=ob(C.year,K);return l.setUTCFullYear(le,0,F.firstWeekContainsDate),l.setUTCHours(0,0,0,0),ah(l,F)}return l.setUTCFullYear("era"in m&&1!==m.era?1-C.year:C.year,0,F.firstWeekContainsDate),l.setUTCHours(0,0,0,0),ah(l,F)}}]),e}(wr);function ip(t){Yo(1,arguments);var e=xa(t),i=e.getUTCDay(),l=(i<1?7:0)+i-1;return e.setUTCDate(e.getUTCDate()-l),e.setUTCHours(0,0,0,0),e}function rg(t){return(rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function gb(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function iy(t,n){return(iy=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ry(t){return(ry=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Kx(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var HD=function(t){!function tE(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&iy(t,n)}(e,t);var n=function Yx(t){var n=function nE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=ry(t);if(n){var m=ry(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function Va(t,n){return!n||"object"!==rg(n)&&"function"!=typeof n?td(t):n}(this,l)}}(e);function e(){var i;!function eE(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return Kx(td(i=n.call.apply(n,[this].concat(m))),"priority",130),Kx(td(i),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),i}return function qx(t,n,e){n&&gb(t.prototype,n),e&&gb(t,e)}(e,[{key:"parse",value:function(l,m){return tg("R"===m?4:m.length,l)}},{key:"set",value:function(l,m,C){var F=new Date(0);return F.setUTCFullYear(C,0,4),F.setUTCHours(0,0,0,0),ip(F)}}]),e}(wr);function og(t){return(og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function _f(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function oy(t,n){return(oy=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function sy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yf(t){return(yf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function vb(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Jx=function(t){!function yb(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&oy(t,n)}(e,t);var n=function Qx(t){var n=function rE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=yf(t);if(n){var m=yf(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function Xx(t,n){return!n||"object"!==og(n)&&"function"!=typeof n?sy(t):n}(this,l)}}(e);function e(){var i;!function _b(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return vb(sy(i=n.call.apply(n,[this].concat(m))),"priority",130),vb(sy(i),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),i}return function iE(t,n,e){n&&_f(t.prototype,n),e&&_f(t,e)}(e,[{key:"parse",value:function(l,m){return tg("u"===m?4:m.length,l)}},{key:"set",value:function(l,m,C){return l.setUTCFullYear(C,0,1),l.setUTCHours(0,0,0,0),l}}]),e}(wr);function rp(t){return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ew(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function sg(t,n){return(sg=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function ay(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ag(t){return(ag=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function nw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var $D=function(t){!function oE(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&sg(t,n)}(e,t);var n=function op(t){var n=function xb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=ag(t);if(n){var m=ag(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function sE(t,n){return!n||"object"!==rp(n)&&"function"!=typeof n?ay(t):n}(this,l)}}(e);function e(){var i;!function bb(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return nw(ay(i=n.call.apply(n,[this].concat(m))),"priority",120),nw(ay(i),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),i}return function tw(t,n,e){n&&ew(t.prototype,n),e&&ew(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"Q":case"QQ":return Do(m.length,l);case"Qo":return C.ordinalNumber(l,{unit:"quarter"});case"QQQ":return C.quarter(l,{width:"abbreviated",context:"formatting"})||C.quarter(l,{width:"narrow",context:"formatting"});case"QQQQQ":return C.quarter(l,{width:"narrow",context:"formatting"});default:return C.quarter(l,{width:"wide",context:"formatting"})||C.quarter(l,{width:"abbreviated",context:"formatting"})||C.quarter(l,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(l,m){return m>=1&&m<=4}},{key:"set",value:function(l,m,C){return l.setUTCMonth(3*(C-1),1),l.setUTCHours(0,0,0,0),l}}]),e}(wr);function ly(t){return(ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function cy(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wb(t,n){return(wb=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Cb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lg(t){return(lg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function aw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var lw=function(t){!function rw(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&wb(t,n)}(e,t);var n=function ow(t){var n=function lE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=lg(t);if(n){var m=lg(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function sw(t,n){return!n||"object"!==ly(n)&&"function"!=typeof n?Cb(t):n}(this,l)}}(e);function e(){var i;!function aE(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return aw(Cb(i=n.call.apply(n,[this].concat(m))),"priority",120),aw(Cb(i),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),i}return function iw(t,n,e){n&&cy(t.prototype,n),e&&cy(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"q":case"qq":return Do(m.length,l);case"qo":return C.ordinalNumber(l,{unit:"quarter"});case"qqq":return C.quarter(l,{width:"abbreviated",context:"standalone"})||C.quarter(l,{width:"narrow",context:"standalone"});case"qqqqq":return C.quarter(l,{width:"narrow",context:"standalone"});default:return C.quarter(l,{width:"wide",context:"standalone"})||C.quarter(l,{width:"abbreviated",context:"standalone"})||C.quarter(l,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(l,m){return m>=1&&m<=4}},{key:"set",value:function(l,m,C){return l.setUTCMonth(3*(C-1),1),l.setUTCHours(0,0,0,0),l}}]),e}(wr);function cg(t){return(cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Sb(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function uy(t,n){return(uy=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Eb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hy(t){return(hy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function dw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var dE=function(t){!function uE(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&uy(t,n)}(e,t);var n=function uw(t){var n=function hE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=hy(t);if(n){var m=hy(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function hw(t,n){return!n||"object"!==cg(n)&&"function"!=typeof n?Eb(t):n}(this,l)}}(e);function e(){var i;!function cw(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return dw(Eb(i=n.call.apply(n,[this].concat(m))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),dw(Eb(i),"priority",110),i}return function cE(t,n,e){n&&Sb(t.prototype,n),e&&Sb(t,e)}(e,[{key:"parse",value:function(l,m,C){var F=function(le){return le-1};switch(m){case"M":return jo(go(Vo.month,l),F);case"MM":return jo(Do(2,l),F);case"Mo":return jo(C.ordinalNumber(l,{unit:"month"}),F);case"MMM":return C.month(l,{width:"abbreviated",context:"formatting"})||C.month(l,{width:"narrow",context:"formatting"});case"MMMMM":return C.month(l,{width:"narrow",context:"formatting"});default:return C.month(l,{width:"wide",context:"formatting"})||C.month(l,{width:"abbreviated",context:"formatting"})||C.month(l,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(l,m){return m>=0&&m<=11}},{key:"set",value:function(l,m,C){return l.setUTCMonth(C,1),l.setUTCHours(0,0,0,0),l}}]),e}(wr);function dy(t){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ug(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vf(t,n){return(vf=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Tb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hg(t){return(hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function gw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var fE=function(t){!function pw(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&vf(t,n)}(e,t);var n=function fw(t){var n=function Db(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=hg(t);if(n){var m=hg(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function mw(t,n){return!n||"object"!==dy(n)&&"function"!=typeof n?Tb(t):n}(this,l)}}(e);function e(){var i;!function pE(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return gw(Tb(i=n.call.apply(n,[this].concat(m))),"priority",110),gw(Tb(i),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),i}return function GD(t,n,e){n&&ug(t.prototype,n),e&&ug(t,e)}(e,[{key:"parse",value:function(l,m,C){var F=function(le){return le-1};switch(m){case"L":return jo(go(Vo.month,l),F);case"LL":return jo(Do(2,l),F);case"Lo":return jo(C.ordinalNumber(l,{unit:"month"}),F);case"LLL":return C.month(l,{width:"abbreviated",context:"standalone"})||C.month(l,{width:"narrow",context:"standalone"});case"LLLLL":return C.month(l,{width:"narrow",context:"standalone"});default:return C.month(l,{width:"wide",context:"standalone"})||C.month(l,{width:"abbreviated",context:"standalone"})||C.month(l,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(l,m){return m>=0&&m<=11}},{key:"set",value:function(l,m,C){return l.setUTCMonth(C,1),l.setUTCHours(0,0,0,0),l}}]),e}(wr),gE=6048e5;function fy(t){return(fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function _w(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mb(t,n){return(Mb=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Ib(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dg(t){return(dg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function xw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var ac=function(t){!function yw(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Mb(t,n)}(e,t);var n=function vw(t){var n=function bw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=dg(t);if(n){var m=dg(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function vE(t,n){return!n||"object"!==fy(n)&&"function"!=typeof n?Ib(t):n}(this,l)}}(e);function e(){var i;!function yE(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return xw(Ib(i=n.call.apply(n,[this].concat(m))),"priority",100),xw(Ib(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),i}return function Du(t,n,e){n&&_w(t.prototype,n),e&&_w(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"w":return go(Vo.week,l);case"wo":return C.ordinalNumber(l,{unit:"week"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=1&&m<=53}},{key:"set",value:function(l,m,C,F){return ah(function py(t,n,e){Yo(2,arguments);var i=xa(t),l=ul(n),m=function _E(t,n){Yo(1,arguments);var e=xa(t),i=ah(e,n).getTime()-function mE(t,n){var e,i,l,m,C,F,K,le;Yo(1,arguments);var xe=ff(),Ae=ul(null!==(e=null!==(i=null!==(l=null!==(m=n?.firstWeekContainsDate)&&void 0!==m?m:null==n||null===(C=n.locale)||void 0===C||null===(F=C.options)||void 0===F?void 0:F.firstWeekContainsDate)&&void 0!==l?l:xe.firstWeekContainsDate)&&void 0!==i?i:null===(K=xe.locale)||void 0===K||null===(le=K.options)||void 0===le?void 0:le.firstWeekContainsDate)&&void 0!==e?e:1),et=lb(t,n),Qe=new Date(0);return Qe.setUTCFullYear(et,0,Ae),Qe.setUTCHours(0,0,0,0),ah(Qe,n)}(e,n).getTime();return Math.round(i/gE)+1}(i,e)-l;return i.setUTCDate(i.getUTCDate()-7*m),i}(l,C,F),F)}}]),e}(wr);var xE=6048e5;function lc(t,n){Yo(2,arguments);var e=xa(t),i=ul(n),l=function ZD(t){Yo(1,arguments);var n=xa(t),e=ip(n).getTime()-function Pb(t){Yo(1,arguments);var n=function bE(t){Yo(1,arguments);var n=xa(t),e=n.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(e+1,0,4),i.setUTCHours(0,0,0,0);var l=ip(i),m=new Date(0);m.setUTCFullYear(e,0,4),m.setUTCHours(0,0,0,0);var C=ip(m);return n.getTime()>=l.getTime()?e+1:n.getTime()>=C.getTime()?e:e-1}(t),e=new Date(0);return e.setUTCFullYear(n,0,4),e.setUTCHours(0,0,0,0),ip(e)}(n).getTime();return Math.round(e/xE)+1}(e)-i;return e.setUTCDate(e.getUTCDate()-7*l),e}function my(t){return(my="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ww(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gy(t,n){return(gy=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function _y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yy(t){return(yy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function kb(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Tw=function(t){!function Lb(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&gy(t,n)}(e,t);var n=function Cw(t){var n=function Ew(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=yy(t);if(n){var m=yy(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function Sw(t,n){return!n||"object"!==my(n)&&"function"!=typeof n?_y(t):n}(this,l)}}(e);function e(){var i;!function Ab(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return kb(_y(i=n.call.apply(n,[this].concat(m))),"priority",100),kb(_y(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),i}return function wE(t,n,e){n&&ww(t.prototype,n),e&&ww(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"I":return go(Vo.week,l);case"Io":return C.ordinalNumber(l,{unit:"week"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=1&&m<=53}},{key:"set",value:function(l,m,C){return ip(lc(l,C))}}]),e}(wr);function bf(t){return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ch(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vy(t,n){return(vy=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function pg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fg(t){return(fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Fb(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Mw=[31,28,31,30,31,30,31,31,30,31,30,31],SE=[31,29,31,30,31,30,31,31,30,31,30,31],Iw=function(t){!function Rb(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&vy(t,n)}(e,t);var n=function Dw(t){var n=function CE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=fg(t);if(n){var m=fg(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function WD(t,n){return!n||"object"!==bf(n)&&"function"!=typeof n?pg(t):n}(this,l)}}(e);function e(){var i;!function lh(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return Fb(pg(i=n.call.apply(n,[this].concat(m))),"priority",90),Fb(pg(i),"subPriority",1),Fb(pg(i),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),i}return function Ob(t,n,e){n&&ch(t.prototype,n),e&&ch(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"d":return go(Vo.date,l);case"do":return C.ordinalNumber(l,{unit:"date"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){var F=sb(l.getUTCFullYear()),K=l.getUTCMonth();return F?m>=1&&m<=SE[K]:m>=1&&m<=Mw[K]}},{key:"set",value:function(l,m,C){return l.setUTCDate(C),l.setUTCHours(0,0,0,0),l}}]),e}(wr);function mg(t){return(mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Aw(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xy(t,n){return(xy=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function gg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sp(t){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Cy(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var EE=function(t){!function Nb(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&xy(t,n)}(e,t);var n=function Lw(t){var n=function wy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=sp(t);if(n){var m=sp(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function kw(t,n){return!n||"object"!==mg(n)&&"function"!=typeof n?gg(t):n}(this,l)}}(e);function e(){var i;!function Pw(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return Cy(gg(i=n.call.apply(n,[this].concat(m))),"priority",90),Cy(gg(i),"subpriority",1),Cy(gg(i),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),i}return function by(t,n,e){n&&Aw(t.prototype,n),e&&Aw(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"D":case"DD":return go(Vo.dayOfYear,l);case"Do":return C.ordinalNumber(l,{unit:"date"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return sb(l.getUTCFullYear())?m>=1&&m<=366:m>=1&&m<=365}},{key:"set",value:function(l,m,C){return l.setUTCMonth(0,C),l.setUTCHours(0,0,0,0),l}}]),e}(wr);function zb(t,n,e){var i,l,m,C,F,K,le,xe;Yo(2,arguments);var Ae=ff(),et=ul(null!==(i=null!==(l=null!==(m=null!==(C=e?.weekStartsOn)&&void 0!==C?C:null==e||null===(F=e.locale)||void 0===F||null===(K=F.options)||void 0===K?void 0:K.weekStartsOn)&&void 0!==m?m:Ae.weekStartsOn)&&void 0!==l?l:null===(le=Ae.locale)||void 0===le||null===(xe=le.options)||void 0===xe?void 0:xe.weekStartsOn)&&void 0!==i?i:0);if(!(et>=0&&et<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var Qe=xa(t),yt=ul(n),Tn=((yt%7+7)%7<et?7:0)+yt-Qe.getUTCDay();return Qe.setUTCDate(Qe.getUTCDate()+Tn),Qe}function Sy(t){return(Sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Ow(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ey(t,n){return(Ey=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Bb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ty(t){return(Ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function zw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Vb=function(t){!function Fw(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Ey(t,n)}(e,t);var n=function DE(t){var n=function qD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=Ty(t);if(n){var m=Ty(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function Nw(t,n){return!n||"object"!==Sy(n)&&"function"!=typeof n?Bb(t):n}(this,l)}}(e);function e(){var i;!function TE(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return zw(Bb(i=n.call.apply(n,[this].concat(m))),"priority",90),zw(Bb(i),"incompatibleTokens",["D","i","e","c","t","T"]),i}return function Rw(t,n,e){n&&Ow(t.prototype,n),e&&Ow(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"E":case"EE":case"EEE":return C.day(l,{width:"abbreviated",context:"formatting"})||C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"});case"EEEEE":return C.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"});default:return C.day(l,{width:"wide",context:"formatting"})||C.day(l,{width:"abbreviated",context:"formatting"})||C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(l,m){return m>=0&&m<=6}},{key:"set",value:function(l,m,C,F){return(l=zb(l,C,F)).setUTCHours(0,0,0,0),l}}]),e}(wr);function nd(t){return(nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Bw(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Dy(t,n){return(Dy=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Hb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xf(t){return(xf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function lp(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var IE=function(t){!function ap(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Dy(t,n)}(e,t);var n=function jb(t){var n=function $b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=xf(t);if(n){var m=xf(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function Ub(t,n){return!n||"object"!==nd(n)&&"function"!=typeof n?Hb(t):n}(this,l)}}(e);function e(){var i;!function ME(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return lp(Hb(i=n.call.apply(n,[this].concat(m))),"priority",90),lp(Hb(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),i}return function Vw(t,n,e){n&&Bw(t.prototype,n),e&&Bw(t,e)}(e,[{key:"parse",value:function(l,m,C,F){var K=function(xe){var Ae=7*Math.floor((xe-1)/7);return(xe+F.weekStartsOn+6)%7+Ae};switch(m){case"e":case"ee":return jo(Do(m.length,l),K);case"eo":return jo(C.ordinalNumber(l,{unit:"day"}),K);case"eee":return C.day(l,{width:"abbreviated",context:"formatting"})||C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"});case"eeeee":return C.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"});default:return C.day(l,{width:"wide",context:"formatting"})||C.day(l,{width:"abbreviated",context:"formatting"})||C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(l,m){return m>=0&&m<=6}},{key:"set",value:function(l,m,C,F){return(l=zb(l,C,F)).setUTCHours(0,0,0,0),l}}]),e}(wr);function Gb(t){return(Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function PE(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function My(t,n){return(My=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Iy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _g(t){return(_g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Hw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var OE=function(t){!function AE(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&My(t,n)}(e,t);var n=function LE(t){var n=function Uw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=_g(t);if(n){var m=_g(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function kE(t,n){return!n||"object"!==Gb(n)&&"function"!=typeof n?Iy(t):n}(this,l)}}(e);function e(){var i;!function YD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return Hw(Iy(i=n.call.apply(n,[this].concat(m))),"priority",90),Hw(Iy(i),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),i}return function jw(t,n,e){n&&PE(t.prototype,n),e&&PE(t,e)}(e,[{key:"parse",value:function(l,m,C,F){var K=function(xe){var Ae=7*Math.floor((xe-1)/7);return(xe+F.weekStartsOn+6)%7+Ae};switch(m){case"c":case"cc":return jo(Do(m.length,l),K);case"co":return jo(C.ordinalNumber(l,{unit:"day"}),K);case"ccc":return C.day(l,{width:"abbreviated",context:"standalone"})||C.day(l,{width:"short",context:"standalone"})||C.day(l,{width:"narrow",context:"standalone"});case"ccccc":return C.day(l,{width:"narrow",context:"standalone"});case"cccccc":return C.day(l,{width:"short",context:"standalone"})||C.day(l,{width:"narrow",context:"standalone"});default:return C.day(l,{width:"wide",context:"standalone"})||C.day(l,{width:"abbreviated",context:"standalone"})||C.day(l,{width:"short",context:"standalone"})||C.day(l,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(l,m){return m>=0&&m<=6}},{key:"set",value:function(l,m,C,F){return(l=zb(l,C,F)).setUTCHours(0,0,0,0),l}}]),e}(wr);function wf(t){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Zb(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qb(t,n){return(qb=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Yb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Py(t){return(Py=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Gw(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var BE=function(t){!function RE(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&qb(t,n)}(e,t);var n=function FE(t){var n=function zE(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=Py(t);if(n){var m=Py(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function NE(t,n){return!n||"object"!==wf(n)&&"function"!=typeof n?Yb(t):n}(this,l)}}(e);function e(){var i;!function KD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return Gw(Yb(i=n.call.apply(n,[this].concat(m))),"priority",90),Gw(Yb(i),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),i}return function Wb(t,n,e){n&&Zb(t.prototype,n),e&&Zb(t,e)}(e,[{key:"parse",value:function(l,m,C){var F=function(le){return 0===le?7:le};switch(m){case"i":case"ii":return Do(m.length,l);case"io":return C.ordinalNumber(l,{unit:"day"});case"iii":return jo(C.day(l,{width:"abbreviated",context:"formatting"})||C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"}),F);case"iiiii":return jo(C.day(l,{width:"narrow",context:"formatting"}),F);case"iiiiii":return jo(C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"}),F);default:return jo(C.day(l,{width:"wide",context:"formatting"})||C.day(l,{width:"abbreviated",context:"formatting"})||C.day(l,{width:"short",context:"formatting"})||C.day(l,{width:"narrow",context:"formatting"}),F)}}},{key:"validate",value:function(l,m){return m>=1&&m<=7}},{key:"set",value:function(l,m,C){return l=function $w(t,n){Yo(2,arguments);var e=ul(n);e%7==0&&(e-=7);var l=xa(t),K=((e%7+7)%7<1?7:0)+e-l.getUTCDay();return l.setUTCDate(l.getUTCDate()+K),l}(l,C),l.setUTCHours(0,0,0,0),l}}]),e}(wr);function Ay(t){return(Ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Zw(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Kb(t,n){return(Kb=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function Qb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function d(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var _=function(t){!function UE(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Kb(t,n)}(e,t);var n=function HE(t){var n=function a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=c(t);if(n){var m=c(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function $E(t,n){return!n||"object"!==Ay(n)&&"function"!=typeof n?Qb(t):n}(this,l)}}(e);function e(){var i;!function VE(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return d(Qb(i=n.call.apply(n,[this].concat(m))),"priority",80),d(Qb(i),"incompatibleTokens",["b","B","H","k","t","T"]),i}return function jE(t,n,e){n&&Zw(t.prototype,n),e&&Zw(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"a":case"aa":case"aaa":return C.dayPeriod(l,{width:"abbreviated",context:"formatting"})||C.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaaa":return C.dayPeriod(l,{width:"narrow",context:"formatting"});default:return C.dayPeriod(l,{width:"wide",context:"formatting"})||C.dayPeriod(l,{width:"abbreviated",context:"formatting"})||C.dayPeriod(l,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(l,m,C){return l.setUTCHours(ty(C),0,0,0),l}}]),e}(wr);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function k(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ne(t,n){return(ne=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function He(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Bt(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var rn=function(t){!function G(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&ne(t,n)}(e,t);var n=function he(t){var n=function ot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=_t(t);if(n){var m=_t(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function Ee(t,n){return!n||"object"!==b(n)&&"function"!=typeof n?He(t):n}(this,l)}}(e);function e(){var i;!function T(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return Bt(He(i=n.call.apply(n,[this].concat(m))),"priority",80),Bt(He(i),"incompatibleTokens",["a","B","H","k","t","T"]),i}return function j(t,n,e){n&&k(t.prototype,n),e&&k(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"b":case"bb":case"bbb":return C.dayPeriod(l,{width:"abbreviated",context:"formatting"})||C.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbbb":return C.dayPeriod(l,{width:"narrow",context:"formatting"});default:return C.dayPeriod(l,{width:"wide",context:"formatting"})||C.dayPeriod(l,{width:"abbreviated",context:"formatting"})||C.dayPeriod(l,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(l,m,C){return l.setUTCHours(ty(C),0,0,0),l}}]),e}(wr);function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Dt(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mo(t,n){return(Mo=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function GE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ww(t){return(Ww=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function XD(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var kA=function(t){!function _o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Mo(t,n)}(e,t);var n=function QD(t){var n=function LA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=Ww(t);if(n){var m=Ww(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function AA(t,n){return!n||"object"!==_n(n)&&"function"!=typeof n?GE(t):n}(this,l)}}(e);function e(){var i;!function ti(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return XD(GE(i=n.call.apply(n,[this].concat(m))),"priority",80),XD(GE(i),"incompatibleTokens",["a","b","t","T"]),i}return function wi(t,n,e){n&&Dt(t.prototype,n),e&&Dt(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"B":case"BB":case"BBB":return C.dayPeriod(l,{width:"abbreviated",context:"formatting"})||C.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBBB":return C.dayPeriod(l,{width:"narrow",context:"formatting"});default:return C.dayPeriod(l,{width:"wide",context:"formatting"})||C.dayPeriod(l,{width:"abbreviated",context:"formatting"})||C.dayPeriod(l,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(l,m,C){return l.setUTCHours(ty(C),0,0,0),l}}]),e}(wr);function qw(t){return(qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function JD(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ZE(t,n){return(ZE=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function WE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yw(t){return(Yw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function eM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var VA=function(t){!function FA(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&ZE(t,n)}(e,t);var n=function NA(t){var n=function BA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=Yw(t);if(n){var m=Yw(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function zA(t,n){return!n||"object"!==qw(n)&&"function"!=typeof n?WE(t):n}(this,l)}}(e);function e(){var i;!function OA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return eM(WE(i=n.call.apply(n,[this].concat(m))),"priority",70),eM(WE(i),"incompatibleTokens",["H","K","k","t","T"]),i}return function RA(t,n,e){n&&JD(t.prototype,n),e&&JD(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"h":return go(Vo.hour12h,l);case"ho":return C.ordinalNumber(l,{unit:"hour"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=1&&m<=12}},{key:"set",value:function(l,m,C){var F=l.getUTCHours()>=12;return l.setUTCHours(F&&C<12?C+12:F||12!==C?C:0,0,0,0),l}}]),e}(wr);function Kw(t){return(Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function tM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qE(t,n){return(qE=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function YE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qw(t){return(Qw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function nM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var WA=function(t){!function HA(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&qE(t,n)}(e,t);var n=function $A(t){var n=function ZA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=Qw(t);if(n){var m=Qw(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function GA(t,n){return!n||"object"!==Kw(n)&&"function"!=typeof n?YE(t):n}(this,l)}}(e);function e(){var i;!function jA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return nM(YE(i=n.call.apply(n,[this].concat(m))),"priority",70),nM(YE(i),"incompatibleTokens",["a","b","h","K","k","t","T"]),i}return function UA(t,n,e){n&&tM(t.prototype,n),e&&tM(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"H":return go(Vo.hour23h,l);case"Ho":return C.ordinalNumber(l,{unit:"hour"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=0&&m<=23}},{key:"set",value:function(l,m,C){return l.setUTCHours(C,0,0,0),l}}]),e}(wr);function Xw(t){return(Xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function iM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function KE(t,n){return(KE=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function QE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jw(t){return(Jw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function rM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var e2=function(t){!function KA(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&KE(t,n)}(e,t);var n=function QA(t){var n=function JA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=Jw(t);if(n){var m=Jw(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function XA(t,n){return!n||"object"!==Xw(n)&&"function"!=typeof n?QE(t):n}(this,l)}}(e);function e(){var i;!function qA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return rM(QE(i=n.call.apply(n,[this].concat(m))),"priority",70),rM(QE(i),"incompatibleTokens",["h","H","k","t","T"]),i}return function YA(t,n,e){n&&iM(t.prototype,n),e&&iM(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"K":return go(Vo.hour11h,l);case"Ko":return C.ordinalNumber(l,{unit:"hour"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=0&&m<=11}},{key:"set",value:function(l,m,C){var F=l.getUTCHours()>=12;return l.setUTCHours(F&&C<12?C+12:C,0,0,0),l}}]),e}(wr);function e1(t){return(e1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function oM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function XE(t,n){return(XE=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function JE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t1(t){return(t1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function sM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var l2=function(t){!function r2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&XE(t,n)}(e,t);var n=function o2(t){var n=function a2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=t1(t);if(n){var m=t1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function s2(t,n){return!n||"object"!==e1(n)&&"function"!=typeof n?JE(t):n}(this,l)}}(e);function e(){var i;!function t2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return sM(JE(i=n.call.apply(n,[this].concat(m))),"priority",70),sM(JE(i),"incompatibleTokens",["a","b","h","H","K","t","T"]),i}return function n2(t,n,e){n&&oM(t.prototype,n),e&&oM(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"k":return go(Vo.hour24h,l);case"ko":return C.ordinalNumber(l,{unit:"hour"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=1&&m<=24}},{key:"set",value:function(l,m,C){return l.setUTCHours(C<=24?C%24:C,0,0,0),l}}]),e}(wr);function n1(t){return(n1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function aM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function eT(t,n){return(eT=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function tT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r1(t){return(r1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function lM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var m2=function(t){!function h2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&eT(t,n)}(e,t);var n=function d2(t){var n=function f2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=r1(t);if(n){var m=r1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function p2(t,n){return!n||"object"!==n1(n)&&"function"!=typeof n?tT(t):n}(this,l)}}(e);function e(){var i;!function c2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return lM(tT(i=n.call.apply(n,[this].concat(m))),"priority",60),lM(tT(i),"incompatibleTokens",["t","T"]),i}return function u2(t,n,e){n&&aM(t.prototype,n),e&&aM(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"m":return go(Vo.minute,l);case"mo":return C.ordinalNumber(l,{unit:"minute"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=0&&m<=59}},{key:"set",value:function(l,m,C){return l.setUTCMinutes(C,0,0),l}}]),e}(wr);function o1(t){return(o1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function cM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nT(t,n){return(nT=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function iT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s1(t){return(s1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function uM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var w2=function(t){!function y2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&nT(t,n)}(e,t);var n=function v2(t){var n=function x2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=s1(t);if(n){var m=s1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function b2(t,n){return!n||"object"!==o1(n)&&"function"!=typeof n?iT(t):n}(this,l)}}(e);function e(){var i;!function g2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return uM(iT(i=n.call.apply(n,[this].concat(m))),"priority",50),uM(iT(i),"incompatibleTokens",["t","T"]),i}return function _2(t,n,e){n&&cM(t.prototype,n),e&&cM(t,e)}(e,[{key:"parse",value:function(l,m,C){switch(m){case"s":return go(Vo.second,l);case"so":return C.ordinalNumber(l,{unit:"second"});default:return Do(m.length,l)}}},{key:"validate",value:function(l,m){return m>=0&&m<=59}},{key:"set",value:function(l,m,C){return l.setUTCSeconds(C,0),l}}]),e}(wr);function a1(t){return(a1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function hM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function rT(t,n){return(rT=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function oT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l1(t){return(l1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function dM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var I2=function(t){!function E2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&rT(t,n)}(e,t);var n=function T2(t){var n=function M2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=l1(t);if(n){var m=l1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function D2(t,n){return!n||"object"!==a1(n)&&"function"!=typeof n?oT(t):n}(this,l)}}(e);function e(){var i;!function C2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return dM(oT(i=n.call.apply(n,[this].concat(m))),"priority",30),dM(oT(i),"incompatibleTokens",["t","T"]),i}return function S2(t,n,e){n&&hM(t.prototype,n),e&&hM(t,e)}(e,[{key:"parse",value:function(l,m){return jo(Do(m.length,l),function(K){return Math.floor(K*Math.pow(10,3-m.length))})}},{key:"set",value:function(l,m,C){return l.setUTCMilliseconds(C),l}}]),e}(wr);function c1(t){return(c1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function pM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function sT(t,n){return(sT=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function aT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u1(t){return(u1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function fM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var F2=function(t){!function L2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&sT(t,n)}(e,t);var n=function k2(t){var n=function R2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=u1(t);if(n){var m=u1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function O2(t,n){return!n||"object"!==c1(n)&&"function"!=typeof n?aT(t):n}(this,l)}}(e);function e(){var i;!function P2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return fM(aT(i=n.call.apply(n,[this].concat(m))),"priority",10),fM(aT(i),"incompatibleTokens",["t","T","x"]),i}return function A2(t,n,e){n&&pM(t.prototype,n),e&&pM(t,e)}(e,[{key:"parse",value:function(l,m){switch(m){case"X":return Eu(zc_basicOptionalMinutes,l);case"XX":return Eu(zc_basic,l);case"XXXX":return Eu(zc_basicOptionalSeconds,l);case"XXXXX":return Eu(zc_extendedOptionalSeconds,l);default:return Eu(zc_extended,l)}}},{key:"set",value:function(l,m,C){return m.timestampIsSet?l:new Date(l.getTime()-C)}}]),e}(wr);function h1(t){return(h1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function mM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lT(t,n){return(lT=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function cT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d1(t){return(d1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function gM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var H2=function(t){!function B2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&lT(t,n)}(e,t);var n=function V2(t){var n=function U2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=d1(t);if(n){var m=d1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function j2(t,n){return!n||"object"!==h1(n)&&"function"!=typeof n?cT(t):n}(this,l)}}(e);function e(){var i;!function N2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return gM(cT(i=n.call.apply(n,[this].concat(m))),"priority",10),gM(cT(i),"incompatibleTokens",["t","T","X"]),i}return function z2(t,n,e){n&&mM(t.prototype,n),e&&mM(t,e)}(e,[{key:"parse",value:function(l,m){switch(m){case"x":return Eu(zc_basicOptionalMinutes,l);case"xx":return Eu(zc_basic,l);case"xxxx":return Eu(zc_basicOptionalSeconds,l);case"xxxxx":return Eu(zc_extendedOptionalSeconds,l);default:return Eu(zc_extended,l)}}},{key:"set",value:function(l,m,C){return m.timestampIsSet?l:new Date(l.getTime()-C)}}]),e}(wr);function p1(t){return(p1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function _M(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function uT(t,n){return(uT=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function hT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f1(t){return(f1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function yM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var K2=function(t){!function Z2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&uT(t,n)}(e,t);var n=function W2(t){var n=function Y2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=f1(t);if(n){var m=f1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function q2(t,n){return!n||"object"!==p1(n)&&"function"!=typeof n?hT(t):n}(this,l)}}(e);function e(){var i;!function $2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return yM(hT(i=n.call.apply(n,[this].concat(m))),"priority",40),yM(hT(i),"incompatibleTokens","*"),i}return function G2(t,n,e){n&&_M(t.prototype,n),e&&_M(t,e)}(e,[{key:"parse",value:function(l){return GS(l)}},{key:"set",value:function(l,m,C){return[new Date(1e3*C),{timestampIsSet:!0}]}}]),e}(wr);function m1(t){return(m1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function vM(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function dT(t,n){return(dT=Object.setPrototypeOf||function(i,l){return i.__proto__=l,i})(t,n)}function pT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g1(t){return(g1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function bM(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var iL=function(t){!function J2(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&dT(t,n)}(e,t);var n=function eL(t){var n=function nL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,i=g1(t);if(n){var m=g1(this).constructor;l=Reflect.construct(i,arguments,m)}else l=i.apply(this,arguments);return function tL(t,n){return!n||"object"!==m1(n)&&"function"!=typeof n?pT(t):n}(this,l)}}(e);function e(){var i;!function Q2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,m=new Array(l),C=0;C<l;C++)m[C]=arguments[C];return bM(pT(i=n.call.apply(n,[this].concat(m))),"priority",20),bM(pT(i),"incompatibleTokens","*"),i}return function X2(t,n,e){n&&vM(t.prototype,n),e&&vM(t,e)}(e,[{key:"parse",value:function(l){return GS(l)}},{key:"set",value:function(l,m,C){return[new Date(C),{timestampIsSet:!0}]}}]),e}(wr),rL={G:new Vx,y:new KS,Y:new Wx,R:new HD,u:new Jx,Q:new $D,q:new lw,M:new dE,L:new fE,w:new ac,I:new Tw,d:new Iw,D:new EE,E:new Vb,e:new IE,c:new OE,i:new BE,a:new _,b:new rn,B:new kA,h:new VA,H:new WA,K:new e2,k:new l2,m:new m2,s:new w2,S:new I2,X:new F2,x:new H2,t:new K2,T:new iL};function _1(t){return(_1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function xM(t,n){var e;if(typeof Symbol>"u"||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function oL(t,n){if(t){if("string"==typeof t)return wM(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return wM(t,n)}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0,l=function(){};return{s:l,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(le){throw le},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F,m=!0,C=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var le=e.next();return m=le.done,le},e:function(le){C=!0,F=le},f:function(){try{!m&&null!=e.return&&e.return()}finally{if(C)throw F}}}}function wM(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var sL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,aL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lL=/^'([^]*?)'?$/,cL=/''/g,uL=/\S/,hL=/[a-zA-Z]/;function dL(t,n,e,i){var l,m,C,F,K,le,xe,Ae,et,Qe,yt,At,Nt,Gt,Tn,Xi,Fi,Cr;Yo(3,arguments);var ui=String(t),pr=String(n),Uo=ff(),ja=null!==(l=null!==(m=i?.locale)&&void 0!==m?m:Uo.locale)&&void 0!==l?l:SS;if(!ja.match)throw new RangeError("locale must contain match property");var jc=ul(null!==(C=null!==(F=null!==(K=null!==(le=i?.firstWeekContainsDate)&&void 0!==le?le:null==i||null===(xe=i.locale)||void 0===xe||null===(Ae=xe.options)||void 0===Ae?void 0:Ae.firstWeekContainsDate)&&void 0!==K?K:Uo.firstWeekContainsDate)&&void 0!==F?F:null===(et=Uo.locale)||void 0===et||null===(Qe=et.options)||void 0===Qe?void 0:Qe.firstWeekContainsDate)&&void 0!==C?C:1);if(!(jc>=1&&jc<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var qy=ul(null!==(yt=null!==(At=null!==(Nt=null!==(Gt=i?.weekStartsOn)&&void 0!==Gt?Gt:null==i||null===(Tn=i.locale)||void 0===Tn||null===(Xi=Tn.options)||void 0===Xi?void 0:Xi.weekStartsOn)&&void 0!==Nt?Nt:Uo.weekStartsOn)&&void 0!==At?At:null===(Fi=Uo.locale)||void 0===Fi||null===(Cr=Fi.options)||void 0===Cr?void 0:Cr.weekStartsOn)&&void 0!==yt?yt:0);if(!(qy>=0&&qy<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===pr)return""===ui?xa(e):new Date(NaN);var Wn,fp={firstWeekContainsDate:jc,weekStartsOn:qy,locale:ja},dh=[new Jv],xC=pr.match(aL).map(function(vo){var Gi=vo[0];return Gi in Ix?(0,Ix[Gi])(vo,ja.formatLong):vo}).join("").match(sL),Yy=[],En=xM(xC);try{var ai=function(){var Gi=Wn.value;!(null!=i&&i.useAdditionalWeekYearTokens)&&function Kv(t){return-1!==Px.indexOf(t)}(Gi)&&Qv(Gi,pr,t),(null==i||!i.useAdditionalDayOfYearTokens)&&function Ax(t){return-1!==Yv.indexOf(t)}(Gi)&&Qv(Gi,pr,t);var Ua=Gi[0],Pf=rL[Ua];if(Pf){var DA=Pf.incompatibleTokens;if(Array.isArray(DA)){var MA=Yy.find(function(IA){return DA.includes(IA.token)||IA.token===Ua});if(MA)throw new RangeError("The format string mustn't contain `".concat(MA.fullToken,"` and `").concat(Gi,"` at the same time"))}else if("*"===Pf.incompatibleTokens&&Yy.length>0)throw new RangeError("The format string mustn't contain `".concat(Gi,"` and any other token at the same time"));Yy.push({token:Ua,fullToken:Gi});var CD=Pf.run(ui,Gi,ja.match,fp);if(!CD)return{v:new Date(NaN)};dh.push(CD.setter),ui=CD.rest}else{if(Ua.match(hL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ua+"`");if("''"===Gi?Gi="'":"'"===Ua&&(Gi=function pL(t){return t.match(lL)[1].replace(cL,"'")}(Gi)),0!==ui.indexOf(Gi))return{v:new Date(NaN)};ui=ui.slice(Gi.length)}};for(En.s();!(Wn=En.n()).done;){var cr=ai();if("object"===_1(cr))return cr.v}}catch(vo){En.e(vo)}finally{En.f()}if(ui.length>0&&uL.test(ui))return new Date(NaN);var Rs=dh.map(function(vo){return vo.priority}).sort(function(vo,Gi){return Gi-vo}).filter(function(vo,Gi,Ua){return Ua.indexOf(vo)===Gi}).map(function(vo){return dh.filter(function(Gi){return Gi.priority===vo}).sort(function(Gi,Ua){return Ua.subPriority-Gi.subPriority})}).map(function(vo){return vo[0]}),uc=xa(e);if(isNaN(uc.getTime()))return new Date(NaN);var p0,Xs=function TS(t,n){return Yo(2,arguments),function ES(t,n){Yo(2,arguments);var e=xa(t).getTime(),i=ul(n);return new Date(e+i)}(t,-ul(n))}(uc,function qv(t){var n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),t.getTime()-n.getTime()}(uc)),ph={},Gr=xM(Rs);try{for(Gr.s();!(p0=Gr.n()).done;){var wC=p0.value;if(!wC.validate(Xs,fp))return new Date(NaN);var Ss=wC.set(Xs,ph,fp);Array.isArray(Ss)?(Xs=Ss[0],DS(ph,Ss[1])):Xs=Ss}}catch(vo){Gr.e(vo)}finally{Gr.f()}return Xs}let wL=(()=>{class t{transform(e,i){return i&&e?((t,n)=>{if(!n)return t;const i=new RegExp(`%{(${Object.keys(n).map(l=>l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")).join("|")})}`,"g");return t.replace(i,(l,m)=>n[m]?String(n[m]):"")})(e,i):e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.\u0275\u0275definePipe({name:"interpolateLabel",type:t,pure:!0}),t})(),CM=(()=>{class t{transform(e,i){return e&&"string"!=typeof e?1===i?e.singular:e.plural:e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.\u0275\u0275definePipe({name:"pluralizeLabel",type:t,pure:!0}),t})(),CL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({}),t})();new r.InjectionToken("WindowToken");class SM{constructor(n,e){this.min=n,this.max=e,this.bound="bounded",this.meaning="OR"}}class IL extends SM{checkIsInRange(n){switch(this.type){case"closed":return n>=this.min&&n<=this.max;case"open":return n>this.min&&n<this.max;case"leftopen":return"bounded"===this.bound?n>this.min&&n<=this.max:"unbounded"===this.bound&&n<=this.max;case"rightopen":return"bounded"===this.bound?n>=this.min&&n<this.max:"unbounded"===this.bound&&n>=this.min;default:return!1}}isInRange(n){return"OR"===this.meaning?this.checkIsInRange(n):!this.checkIsInRange(n)}toString(){return String(`\n    ${"closed"===this.type||"rightopen"===this.type?"[":"]"}\n    ${"unbounded"===this.bound&&"leftopen"===this.type?"-infinity":this.min}\n    ,\n    ${"unbounded"===this.bound&&"rightopen"===this.type?"+infinity":this.max}\n    ${"closed"===this.type||"leftopen"===this.type?"]":"["}\n    `).replace(/\n/g,"").replace(/ /g,"").trim()}}class Mu extends SM{constructor(n,e){if(super(n,e),!n&&!e)throw new Error("Error creating date interval, please provide at least min or max.");n?e?this.type="closed":(this.bound="unbounded",this.type="rightopen"):(this.bound="unbounded",this.type="leftopen")}static isSameOrAfter(n,e){return e.getTime()>=n.getTime()}static isSameOrBefore(n,e){return e.getTime()<=n.getTime()}static isAfter(n,e){return e.getTime()>n.getTime()}static isBefore(n,e){return e.getTime()<n.getTime()}checkIsInRange(n){switch(this.type){case"closed":return Mu.isSameOrAfter(this.min,n)&&Mu.isSameOrBefore(this.max,n);case"open":return Mu.isAfter(this.min,n)&&Mu.isBefore(this.max,n);case"leftopen":return"bounded"===this.bound?Mu.isAfter(this.min,n)&&Mu.isSameOrBefore(this.max,n):"unbounded"===this.bound&&Mu.isSameOrBefore(this.max,n);case"rightopen":return"bounded"===this.bound?Mu.isSameOrAfter(this.min,n)&&Mu.isBefore(this.max,n):"unbounded"===this.bound&&Mu.isSameOrAfter(this.min,n);default:return!1}}isInRange(n){return"OR"===this.meaning?this.checkIsInRange(n):!this.checkIsInRange(n)}toString(){return String(`\n    ${"closed"===this.type||"rightopen"===this.type?"[":"]"}\n    ${"unbounded"===this.bound&&"leftopen"===this.type?"-infinity":this.min.toISOString()}\n    ,\n    ${"unbounded"===this.bound&&"rightopen"===this.type?"+infinity":this.max.toISOString()}\n    ${"closed"===this.type||"leftopen"===this.type?"]":"["}\n    `).replace(/\n/g,"").replace(/ /g,"").trim()}}class Ly{constructor(n){this.model=n}static dateInterval(n,e){return new Ly(new Mu(n,e))}static genericInterval(n,e){return new Ly(new IL(n,e))}static numberInterval(n,e){return Ly.genericInterval(n,e)}openInterval(){return this.model.type="open",this}leftOpenInterval(){return this.model.type="leftopen",this}rightOpenInterval(){return this.model.type="rightopen",this}closedInterval(){return this.model.type="closed",this}bounded(){return this.model.bound="bounded",this}unbounded(){return this.model.bound="unbounded",this}not(){return this.model.meaning="NOR",this}build(){return this.model}}var uh=(t="")=>{const n=String(t);return n.length>=2?n:0===n.length?"00":`0${n}`},cc=(t,n=null)=>{if(null==t||!t||t instanceof Array)return null;if(t instanceof Date)return isNaN(t.valueOf())?null:t;const e=n?dL(t,n,new Date):new Date(Date.parse(t));return isNaN(e.getTime())?null:function fL(t){if(Yo(1,arguments),"string"==typeof t){var n=t.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return n?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4]-(+n[9]||0)*("-"==n[8]?-1:1),+n[5]-(+n[10]||0)*("-"==n[8]?-1:1),+n[6],+((n[7]||"0")+"00").substring(0,3))):new Date(NaN)}return xa(t)}(e)},yg=t=>{if(!cc(t))return-1;const n=new Date(t),e=new Date(t);return n.setDate(1),e.setMonth(n.getMonth()+1,1),Math.round((e.getTime()-n.getTime())/864e5)},PL=(t,n)=>{if(!cc(t))return null;if(!n||!Array.isArray(n))return new Date(t);const e=yg(t),i=Array.from(Array(e),(F,K)=>K+1).filter(F=>n.indexOf(F)<0),l=t.getDate(),m=i.reduce((F,K)=>Math.abs(K-l)<Math.abs(F-l)?K:F,-1),C=new Date(t);return C.setDate(m),C},AL=(t,n)=>!!cc(t)&&(!n||!Array.isArray(n)||n.indexOf(t.getDate())<0),EM=(t=[],n)=>n in new Date&&t.map(e=>cc(e)?e[n]():-1).reduce((e,i,l)=>0===l?e=i:e>=0&&i>=0&&e===i?e:-1)>=0,TM=(t=[],n="value")=>{if(!t.length)return!1;const e={Y:"getFullYear",M:"getMonth",D:"getDate",h:"getHours",m:"getMinutes",s:"getSeconds",ms:"getMilliseconds",value:"valueOf"},i=(l,m)=>{const C=e.hasOwnProperty(m)?e[m]:e.value;return EM(l,C)};if(Array.isArray(n)){for(let l=0;l<n.length;l+=1)if(!i(t,n[l]))return!1;return!0}return i(t,n)};const LL={leadingZero:!1,monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdayLabels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]};var y1=(t,n=0)=>{if(!cc(t))return-1;const e=(t.getDay()-n)%7;return e<0?e+7:e},kL=(t,n="",e={})=>{const i=cc(t);if(!i)return null;const l={...LL,...e},m={YY:C=>uh(String(C.getFullYear()).substr(2)),YYYY:C=>uh(C.getFullYear()),MM:C=>uh(C.getMonth()+1),MMMM:C=>uh(l.monthLabels[C.getMonth()]),DD:C=>uh(C.getDate()),DDDD:C=>uh(l.weekdayLabels[y1(C,e.startOfWeek)]),hh:C=>uh(C.getHours()),mm:C=>uh(C.getMinutes()),ss:C=>uh(C.getSeconds()),ms:C=>uh(C.getMilliseconds())};return n.split(/[^YMDhms]/).reduce((C,F)=>m.hasOwnProperty(F)?C.replace(F,m[F](i)):C,n)},mT=(t,n=0)=>{if(!cc(t))return-1;const e=new Date(t);return e.setDate(1),y1(e,n)},DM=(t,n=0)=>{if(!cc(t))return-1;const e=new Date(t),i=yg(e);return e.setDate(i),y1(e,n)},MM=(t,n)=>{if(!cc(t)||isNaN(parseInt(n,10)))return t;const e=new Date(t),i=yg(e);return e.setDate(n>i?i:n),e},IM=(t,n)=>{if(!cc(t)||isNaN(parseInt(n,10)))return t;const e=new Date(t),i=e.getDate();let l=e.getFullYear();return n>11?(l+=1,n-=12):n<0&&(l-=1,n+=12),e.setDate(1),e.setMonth(n),e.setFullYear(l),MM(e,i)},v1=(t,n={},e=[])=>{const i=n.hasOwnProperty("offset")?n.offset:0,l=n.hasOwnProperty("dayOffset")?n.dayOffset:0,m=n.hasOwnProperty("padding")&&n.padding,C=n.hasOwnProperty("fromStart")&&n.fromStart,F=xe=>!!m&&(C?xe<t+i:xe>t+(6-i)),K=m?7:7-i,le=[];for(let xe=t=t||(l>0?0:1);xe<t+K;xe+=1)F(xe)?m&&le.push({date:e.length?e[C?xe-t:xe-t-(7-i)]:null,padding:!0}):le.push({date:(C&&m?xe-i:xe)+l});return le},gT=(t,n=0,e=!1)=>{const i=[];if(!cc(t))return i;const l=IM(t,e?t.getMonth()-1:t.getMonth()+1),m=yg(l);for(let C=0;C<n&&(i.push(e?m-(n-C-1):i.length+1),e||!(C>=m));C+=1);return i},OL=(t,n={})=>{if(!cc(t))return[];const e=n.startOfWeek||0,i=yg(t),l=mT(t,e),m=DM(t,e),F=i-m,K=v1(0,{offset:l,dayOffset:e,fromStart:!0,padding:n.padding},n.generatePadding?gT(t,l,!0):[]),le=v1(F,{offset:6-m,padding:n.padding},n.generatePadding?gT(t,F):[]),xe=Math.floor((le[0].date-K[K.length-1].date)/7),Ae=[K];for(let et=0;et<xe;et+=1)Ae.push(v1(Ae[et][Ae[et].length-1].date+1));return Ae.push(le),Ae},RL=(t,n,e={})=>{if(!cc(t)||!n||n&&!n.length)return[];let m=[];const C=[];return n.forEach(F=>{if(F instanceof Date){const K=((F,K)=>K instanceof Date&&TM([F,K],["Y","M"])?K.getDate():null)(t,F);return!!K&&m.push(K)}isNaN(parseInt(F,10))||C.push(F)}),C.length&&(m=m.concat(((F,K,{startOfWeek:le=0})=>{const xe=mT(t,le),Ae=yg(t),et=[];for(let Qe=0;Qe<Ae;Qe+=1)K.indexOf((Qe+xe)%7)>=0&&et.push(Qe+1);return et})(0,C,e))),m.reduce((F,K)=>F.indexOf(K)>=0?F:F.concat(K),[]).sort((F,K)=>F-K)};let $r=(()=>{class t{}return t.addLeadingZero=uh,t.closestDateForRange=PL,t.dateOutOfRange=AL,t.datesAreEqual=TM,t.dateValuesAreEqual=EM,t.formatDate=kL,t.getFirstWeekdayOfMonth=mT,t.getLastWeekdayOfMonth=DM,t.getMonthLength=yg,t.getWeekday=y1,t.parseDate=cc,t.updateDate=MM,t.updateMonth=IM,t})(),id=(()=>{class t{}return t.generateMonth=OL,t.generatePadding=gT,t.generateRange=RL,t.generateWeek=v1,t})();function _T(t,n){Yo(2,arguments);var e=xa(t),i=ul(n);return isNaN(i)?new Date(NaN):(i&&e.setDate(e.getDate()+i),e)}const b1=["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"],x1=["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],w1=new r.InjectionToken("weekdayLabels"),C1=new r.InjectionToken("monthLabels"),ky="CALENDAR_VIEW_MONTH",S1="CALENDAR_VIEW_YEAR",E1="CALENDAR_VIEW_DECENNIA";let T1=(()=>{class t{constructor(){A(this,"months",{}),A(this,"currentYear",void 0)}getMonth(e,i){if(i&&(this.currentYear!==i&&(this.months={}),this.currentYear=i),this.months.hasOwnProperty(e))return[...this.months[e]];const l=new Date;l.setMonth(e,1),i&&l.setFullYear(i);const m=id.generateMonth(l,{startOfWeek:1,padding:!0,generatePadding:!0});return this.months[e]=m,[...m]}getMonthForDate(e){return this.getMonth(e.getMonth(),e.getFullYear())}getRangeForDate(e,i){return id.generateRange(e,i,{startOfWeek:1})}getRangesForDate(e,i){const l={startOfWeek:1},m=$r.updateMonth(e,e.getMonth()-1),C=$r.updateMonth(e,e.getMonth()+1);return{before:id.generateRange(m,i,l),current:id.generateRange(e,i,l),after:id.generateRange(C,i,l)}}getClosestDateForRange(e=new Date,i){const l=this.getRangeForDate(e,i);return $r.dateOutOfRange(e,l)?e:$r.closestDateForRange(e,l)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})();const Cf=Array.isArray,PM="object"==typeof global&&global&&global.Object===Object&&global;var zL="object"==typeof self&&self&&self.Object===Object&&self;const hh=PM||zL||Function("return this")(),rd=hh.Symbol;var AM=Object.prototype,jL=AM.hasOwnProperty,UL=AM.toString,Xb=rd?rd.toStringTag:void 0;var ZL=Object.prototype.toString;var LM=rd?rd.toStringTag:void 0;const Oy=function QL(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":LM&&LM in Object(t)?function HL(t){var n=jL.call(t,Xb),e=t[Xb];try{t[Xb]=void 0;var i=!0}catch{}var l=UL.call(t);return i&&(n?t[Xb]=e:delete t[Xb]),l}(t):function WL(t){return ZL.call(t)}(t)},Sf=function XL(t){return null!=t&&"object"==typeof t};const D1=function ek(t){return"symbol"==typeof t||Sf(t)&&"[object Symbol]"==Oy(t)};var tk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nk=/^\w*$/;const cp=function ok(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)};const kM=function uk(t){if(!cp(t))return!1;var n=Oy(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n};var t,hk=hh["__core-js_shared__"],OM=(t=/[^.]+$/.exec(hk&&hk.keys&&hk.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var mk=Function.prototype.toString;const vg=function gk(t){if(null!=t){try{return mk.call(t)}catch{}try{return t+""}catch{}}return""};var yk=/^\[object .+?Constructor\]$/,Ck=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ek=function Sk(t){return!(!cp(t)||function dk(t){return!!OM&&OM in t}(t))&&(kM(t)?Ck:yk).test(vg(t))},bg=function Mk(t,n){var e=function Tk(t,n){return t?.[n]}(t,n);return Ek(e)?e:void 0},Jb=bg(Object,"create");var Fk=Object.prototype.hasOwnProperty;var Vk=Object.prototype.hasOwnProperty;function Ry(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}Ry.prototype.clear=function Pk(){this.__data__=Jb?Jb(null):{},this.size=0},Ry.prototype.delete=function Lk(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},Ry.prototype.get=function Nk(t){var n=this.__data__;if(Jb){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return Fk.call(n,t)?n[t]:void 0},Ry.prototype.has=function jk(t){var n=this.__data__;return Jb?void 0!==n[t]:Vk.call(n,t)},Ry.prototype.set=function $k(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Jb&&void 0===n?"__lodash_hash_undefined__":n,this};const RM=Ry,M1=function qk(t,n){return t===n||t!=t&&n!=n},I1=function Yk(t,n){for(var e=t.length;e--;)if(M1(t[e][0],n))return e;return-1};var Qk=Array.prototype.splice;function Fy(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}Fy.prototype.clear=function Zk(){this.__data__=[],this.size=0},Fy.prototype.delete=function Xk(t){var n=this.__data__,e=I1(n,t);return!(e<0||(e==n.length-1?n.pop():Qk.call(n,e,1),--this.size,0))},Fy.prototype.get=function eO(t){var n=this.__data__,e=I1(n,t);return e<0?void 0:n[e][1]},Fy.prototype.has=function nO(t){return I1(this.__data__,t)>-1},Fy.prototype.set=function rO(t,n){var e=this.__data__,i=I1(e,t);return i<0?(++this.size,e.push([t,n])):e[i][1]=n,this};const P1=Fy,e0=bg(hh,"Map"),A1=function hO(t,n){var e=t.__data__;return function cO(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?e["string"==typeof n?"string":"hash"]:e.map};function Ny(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}Ny.prototype.clear=function aO(){this.size=0,this.__data__={hash:new RM,map:new(e0||P1),string:new RM}},Ny.prototype.delete=function dO(t){var n=A1(this,t).delete(t);return this.size-=n?1:0,n},Ny.prototype.get=function fO(t){return A1(this,t).get(t)},Ny.prototype.has=function gO(t){return A1(this,t).has(t)},Ny.prototype.set=function yO(t,n){var e=A1(this,t),i=e.size;return e.set(t,n),this.size+=e.size==i?0:1,this};const L1=Ny;var bO="Expected a function";function vT(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(bO);var e=function(){var i=arguments,l=n?n.apply(this,i):i[0],m=e.cache;if(m.has(l))return m.get(l);var C=t.apply(this,i);return e.cache=m.set(l,C)||m,C};return e.cache=new(vT.Cache||L1),e}vT.Cache=L1;const xO=vT;var EO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TO=/\\(\\)?/g,DO=function CO(t){var n=xO(t,function(i){return 500===e.size&&e.clear(),i}),e=n.cache;return n}(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(EO,function(e,i,l,m){n.push(l?m.replace(TO,"$1"):i||e)}),n});const MO=DO;var FM=rd?rd.prototype:void 0,NM=FM?FM.toString:void 0;const LO=function zM(t){if("string"==typeof t)return t;if(Cf(t))return function IO(t,n){for(var e=-1,i=null==t?0:t.length,l=Array(i);++e<i;)l[e]=n(t[e],e,t);return l}(t,zM)+"";if(D1(t))return NM?NM.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},FO=function RO(t,n){return Cf(t)?t:function ik(t,n){if(Cf(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!D1(t))||nk.test(t)||!tk.test(t)||null!=n&&t in Object(n)}(t,n)?[t]:MO(function kO(t){return null==t?"":LO(t)}(t))};const BO=function zO(t){if("string"==typeof t||D1(t))return t;var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},zl=function UO(t,n,e){var i=null==t?void 0:function VO(t,n){for(var e=0,i=(n=FO(n,t)).length;null!=t&&e<i;)t=t[BO(n[e++])];return e&&e==i?t:void 0}(t,n);return void 0===i?e:i},$O=function HO(t,n,e){var i=-1,l=t.length;n<0&&(n=-n>l?0:l+n),(e=e>l?l:e)<0&&(e+=l),l=n>e?0:e-n>>>0,n>>>=0;for(var m=Array(l);++i<l;)m[i]=t[i+n];return m};const BM=function ZO(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},bT=function WO(t){return null!=t&&BM(t.length)&&!kM(t)};var YO=/^(?:0|[1-9]\d*)$/;const VM=function KO(t,n){var e=typeof t;return!!(n=n??9007199254740991)&&("number"==e||"symbol"!=e&&YO.test(t))&&t>-1&&t%1==0&&t<n};var JO=/\s/;var nR=/^\s+/;const rR=function iR(t){return t&&t.slice(0,function eR(t){for(var n=t.length;n--&&JO.test(t.charAt(n)););return n}(t)+1).replace(nR,"")};var oR=/^[-+]0x[0-9a-f]+$/i,sR=/^0b[01]+$/i,aR=/^0o[0-7]+$/i,lR=parseInt;const xT=function cR(t){if("number"==typeof t)return t;if(D1(t))return NaN;if(cp(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=cp(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=rR(t);var e=sR.test(t);return e||aR.test(t)?lR(t.slice(2),e?2:8):oR.test(t)?NaN:+t};const fR=function pR(t){var n=function hR(t){return t?1/0===(t=xT(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),e=n%1;return n==n?e?n-e:n:0};var mR=Math.ceil,gR=Math.max;const k1=function _R(t,n,e){n=(e?function QO(t,n,e){if(!cp(e))return!1;var i=typeof n;return!!("number"==i?bT(e)&&VM(n,e.length):"string"==i&&n in e)&&M1(e[n],t)}(t,n,e):void 0===n)?1:gR(fR(n),0);var i=null==t?0:t.length;if(!i||n<1)return[];for(var l=0,m=0,C=Array(mR(i/n));l<i;)C[m++]=$O(t,l,l+=n);return C},yR=function(t,n){return{"is-current":t,"is-selected":n}};function vR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"td")(1,"button",3),r.\u0275\u0275listener("click",function(l){const C=r.\u0275\u0275restoreView(e).$implicit,F=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(F.pickDate(l,C))}),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(2,yR,e===i.current,e===i.selectedYear)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e," ")}}function bR(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275template(1,vR,3,5,"td",2),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e)}}let xR=(()=>{class t{constructor(){A(this,"selectedDate",void 0),A(this,"activeDate",void 0),A(this,"selectDate",new r.EventEmitter),A(this,"years",[]),A(this,"selectedYear",-1),A(this,"current",-1)}ngOnInit(){this.current=(new Date).getFullYear()}ngOnChanges(e){const i=zl(e,"activeDate.currentValue"),l=zl(e,"activeDate.previousValue"),m=i instanceof Date?i.getFullYear():-1,C=l instanceof Date?l.getFullYear():-1;m>=0&&(C>m||C+17<m)&&this.updateYears(),this.selectedYear=this.selectedDate instanceof Date?this.selectedDate.getFullYear():-1}pickDate(e,i){e.stopPropagation();const l=new Date(this.activeDate);l.setFullYear(i),this.selectDate.emit(l)}updateYears(){const e=[],i=this.activeDate.getFullYear();for(let l=i;l<i+18;l+=1)e.push(l);this.years=k1(e,3)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar-decennia"]],inputs:{selectedDate:"selectedDate",activeDate:"activeDate"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:4,vars:1,consts:[[1,"m-datepicker__list"],[1,"m-datepicker__list-body"],[4,"ngFor","ngForOf"],["type","button",3,"ngClass","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"table")(2,"tbody",1),r.\u0275\u0275template(3,bR,2,1,"tr",2),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",i.years))},dependencies:[Ne,bt],encapsulation:2,changeDetection:0})),t})();function wR(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"th",5)(1,"span",6),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"slice"),r.\u0275\u0275elementEnd()()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("title",e),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind3(3,2,e,0,2))}}const CR=function(t,n,e,i){return{"is-faded":t,"is-selected":n,"is-current":e,"is-unavailable":i}};function SR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"td")(1,"button",7),r.\u0275\u0275listener("click",function(l){const C=r.\u0275\u0275restoreView(e).$implicit,F=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(F.pickDate(l,C))}),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("disabled",!e.available)("ngClass",r.\u0275\u0275pureFunction4(3,CR,!e.date||e.padding,!e.padding&&i.selectedDate&&e.date===i.selectedDay&&i.selectedDay&&i.selectedDate.getFullYear()===i.activeDate.getFullYear(),!e.padding&&e.date===i.current,!e.available)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.date," ")}}function ER(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275template(1,SR,3,8,"td",4),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e)}}let TR=(()=>{class t{constructor(e=b1,i){A(this,"moduleWeekdayLabels",void 0),A(this,"calendarService",void 0),A(this,"selectedDate",void 0),A(this,"activeDate",void 0),A(this,"range",void 0),A(this,"interval",void 0),A(this,"weekdayLabels",b1),A(this,"selectDate",new r.EventEmitter),A(this,"dates",[]),A(this,"selectedDay",-1),A(this,"current",void 0),this.moduleWeekdayLabels=e,this.calendarService=i}ngOnInit(){this.weekdayLabels=this.weekdayLabels||this.moduleWeekdayLabels}ngOnChanges(e){const i=this.hasChanged(e,"selectedDate"),l=!!e.interval&&e.interval.currentValue!==e.interval.previousValue,m=this.hasChanged(e,"activeDate"),C=m&&!$r.datesAreEqual([e.activeDate.currentValue,e.activeDate.previousValue],"M"),F=this.selectedDate&&this.activeDate.getMonth()===this.selectedDate.getMonth();this.current=this.getCurrentDate(),this.selectedDay=F?this.selectedDate.getDate():-1;let K=[];if(!(i||l||m&&C))return;K=this.calendarService.getMonthForDate(this.activeDate);const le=this.calendarService.getRangesForDate(this.activeDate,this.range);this.dates=K.map(xe=>xe.map(Ae=>{const et=new Date;this.activeDate.setHours(et.getHours(),et.getMinutes(),et.getSeconds());const Qe=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),Ae.date);Ae.padding&&Qe.setMonth(Ae.date>20?this.activeDate.getMonth()-1:this.activeDate.getMonth()+1),Qe.setDate(Ae.date);const yt=this.dayIsAvailableForRange(Ae,le)&&(!this.interval||!this.interval.isInRange(Qe));return{...Ae,available:yt}}))}pickDate(e,i){e.stopPropagation();let l=new Date(this.activeDate);if(i.padding){const m=i.date>20?-1:1;l=$r.updateMonth(l,l.getMonth()+m)}this.selectDate.emit($r.updateDate(l,i.date))}hasChanged(e,i){const l=zl(e,`${i}.currentValue`),m=zl(e,`${i}.previousValue`),C=l instanceof Date?l.valueOf():0,F=m instanceof Date?m.valueOf():0;return!!C&&C!==F}getCurrentDate(){const e=new Date;return $r.datesAreEqual([this.activeDate,e],["M","Y"])?e.getDate():-1}dayIsAvailableForRange(e,i){if(!i)return!0;let l=i.current;return e.padding&&(l=e.date>20?i.before:i.after),l.indexOf(e.date)<0}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(w1),r.\u0275\u0275directiveInject(T1))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar-month"]],inputs:{selectedDate:"selectedDate",activeDate:"activeDate",range:"range",interval:"interval",weekdayLabels:"weekdayLabels"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:[[1,"m-datepicker__grid"],[1,"m-datepicker__grid-head"],["scope","col",4,"ngFor","ngForOf"],[1,"m-datepicker__grid-body"],[4,"ngFor","ngForOf"],["scope","col"],[1,"u-text-capitalize",3,"title"],["type","button",3,"disabled","ngClass","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"table")(2,"thead")(3,"tr",1),r.\u0275\u0275template(4,wR,4,6,"th",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(5,"tbody",3),r.\u0275\u0275template(6,ER,2,1,"tr",4),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",i.weekdayLabels),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",i.dates))},dependencies:[Ne,bt,pc],encapsulation:2,changeDetection:0})),t})();const DR=function(t,n){return{"is-current":t,"is-selected":n}};function MR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"td")(1,"button",3),r.\u0275\u0275listener("click",function(l){const C=r.\u0275\u0275restoreView(e).$implicit,F=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(F.pickDate(l,C))}),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"titlecase"),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(4,DR,e===i.current,e===i.monthLabels[i.selectedMonth])),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(3,2,e)," ")}}function IR(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275template(1,MR,4,7,"td",2),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e)}}let PR=(()=>{class t{constructor(e=x1){A(this,"moduleMonthLabels",void 0),A(this,"selectedDate",void 0),A(this,"activeDate",void 0),A(this,"monthLabels",x1),A(this,"selectDate",new r.EventEmitter),A(this,"selectedMonth",-1),A(this,"current",""),A(this,"months",[]),this.moduleMonthLabels=e}ngOnChanges(e){const i=zl(e,"activeDate.currentValue"),l=i instanceof Date?i.getFullYear():-1,m=this.selectedDate&&this.selectedDate.getFullYear()===this.activeDate.getFullYear(),C=new Date;this.current=l===C.getFullYear()?this.monthLabels[C.getMonth()]:"",this.selectedMonth=m?this.selectedDate.getMonth():-1,e.monthLabels&&(this.monthLabels=this.monthLabels||this.moduleMonthLabels,this.months=k1(this.monthLabels,2))}pickDate(e,i){e.stopPropagation();let l=new Date(this.activeDate);l=$r.updateMonth(l,this.monthLabels.indexOf(i)),this.selectDate.emit(l)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(C1))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar-year"]],inputs:{selectedDate:"selectedDate",activeDate:"activeDate",monthLabels:"monthLabels"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:4,vars:1,consts:[[1,"m-datepicker__list"],[1,"m-datepicker__list-body"],[4,"ngFor","ngForOf"],["type","button",3,"ngClass","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"table")(2,"tbody",1),r.\u0275\u0275template(3,IR,2,1,"tr",2),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",i.months))},dependencies:[Ne,bt,$n],encapsulation:2,changeDetection:0})),t})();function AR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-calendar-month",10),r.\u0275\u0275listener("selectDate",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.pickDate(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("activeDate",e.activeDate)("range",e.range)("interval",e.interval)("selectedDate",e.selectedDate)("weekdayLabels",e.weekdayLabels)}}function LR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-calendar-year",11),r.\u0275\u0275listener("selectDate",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.pickDate(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("activeDate",e.activeDate)("monthLabels",e.monthLabels)("selectedDate",e.selectedDate)}}function kR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-calendar-decennia",12),r.\u0275\u0275listener("selectDate",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.pickDate(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("activeDate",e.activeDate)("selectedDate",e.selectedDate)}}let OR=(()=>{class t{constructor(e=x1,i=b1,l){A(this,"moduleMonthLabels",void 0),A(this,"moduleWeekdayLabels",void 0),A(this,"calendarService",void 0),A(this,"role","application"),A(this,"ariahidden","false"),A(this,"ariaPreviousLabels",["Ga naar vorige maand","Ga naar vorig jaar","Ga naar vorige 18 jaren"]),A(this,"ariaNextLabels",["Ga naar volgende maand","Ga naar volgend jaar","Ga naar volgende 18 jaren"]),A(this,"selectedDate",void 0),A(this,"range",void 0),A(this,"interval",void 0),A(this,"weekdayLabels",void 0),A(this,"monthLabels",void 0),A(this,"selectDate",new r.EventEmitter),A(this,"CALENDAR_VIEW_MONTH",ky),A(this,"CALENDAR_VIEW_YEAR",S1),A(this,"CALENDAR_VIEW_DECENNIA",E1),A(this,"activeDate",void 0),A(this,"activeView",ky),A(this,"headerLabel",""),A(this,"ariaPreviousLabel",this.ariaPreviousLabels[0]),A(this,"ariaNextLabel",this.ariaNextLabels[0]),this.moduleMonthLabels=e,this.moduleWeekdayLabels=i,this.calendarService=l}ngOnInit(){this.initControl()}ngOnChanges(e){const i=e.selectedDate&&e.selectedDate.currentValue?e.selectedDate:null;if(typeof this.monthLabels<"u"&&i&&!$r.datesAreEqual(i.currentValue,i.previousValue))this.activeDate=this.selectedDate,this.updateHeaderLabel();else{let l=new Date;this.interval&&this.interval.isInRange(l)&&(l=this.interval.min),this.activeDate=$r.parseDate(l),this.initControl()}}updateActiveDate(e=0){const i=this.activeDate?new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),1):new Date;switch(this.activeView){case ky:i.setMonth(i.getMonth()+e);break;case S1:i.setFullYear(i.getFullYear()+e);break;case E1:i.setFullYear(i.getFullYear()+18*e)}this.activeDate=i,this.updateHeaderLabel()}switchView(e=1){const i=[ky,S1,E1],l=i.indexOf(this.activeView);let m=l+e>=i.length?0:l+e;m=m<0?i.length-1:m,this.activeView=i[m],this.selectedDate&&0===m&&1===e&&(this.activeDate=this.selectedDate),this.updateHeaderLabel()}updateHeaderLabel(){switch(this.activeView){case ky:this.headerLabel=this.monthLabels[this.activeDate.getMonth()]+" "+this.activeDate.getFullYear(),this.ariaPreviousLabel=this.ariaPreviousLabels[0],this.ariaNextLabel=this.ariaNextLabels[0];break;case S1:this.headerLabel=String(this.activeDate.getFullYear()),this.ariaPreviousLabel=this.ariaPreviousLabels[1],this.ariaNextLabel=this.ariaNextLabels[1];break;case E1:const e=this.activeDate.getFullYear();this.headerLabel=`${e} - ${e+17}`,this.ariaPreviousLabel=this.ariaPreviousLabels[2],this.ariaNextLabel=this.ariaNextLabels[2]}}pickDate(e){const i=this.activeView===ky;this.selectDate.emit({date:e,complete:i}),i||(this.activeDate=e,this.switchView(-1))}initControl(){this.weekdayLabels=this.weekdayLabels||this.moduleWeekdayLabels,this.monthLabels=this.monthLabels||this.moduleMonthLabels,this.activeDate=this.calendarService.getClosestDateForRange(this.activeDate,this.range),this.selectedDate&&(this.activeDate=this.selectedDate,this.updateActiveDate()),this.updateHeaderLabel()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(C1),r.\u0275\u0275directiveInject(w1),r.\u0275\u0275directiveInject(T1))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar"]],hostVars:2,hostBindings:function(e,i){2&e&&r.\u0275\u0275attribute("role",i.role)("aria-hidden",i.ariahidden)},inputs:{ariaPreviousLabels:"ariaPreviousLabels",ariaNextLabels:"ariaNextLabels",selectedDate:"selectedDate",range:"range",interval:"interval",weekdayLabels:"weekdayLabels",monthLabels:"monthLabels"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:13,vars:8,consts:[[1,"m-datepicker__nav"],["type","button",1,"m-datepicker__nav-title",3,"click"],["name","ai-arrow-down-1"],[1,"m-datepicker__nav-pagination"],["type","button",1,"a-button","a-button--text","a-button--primary","has-icon",3,"click"],["name","ai-arrow-left-1"],["name","ai-arrow-right-1"],[3,"activeDate","range","interval","selectedDate","weekdayLabels","selectDate",4,"ngIf"],[3,"activeDate","monthLabels","selectedDate","selectDate",4,"ngIf"],[3,"activeDate","selectedDate","selectDate",4,"ngIf"],[3,"activeDate","range","interval","selectedDate","weekdayLabels","selectDate"],[3,"activeDate","monthLabels","selectedDate","selectDate"],[3,"activeDate","selectedDate","selectDate"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"button",1),r.\u0275\u0275listener("click",function(){return i.switchView()}),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"titlecase"),r.\u0275\u0275element(4,"aui-icon",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",3)(6,"button",4),r.\u0275\u0275listener("click",function(){return i.updateActiveDate(-1)}),r.\u0275\u0275element(7,"aui-icon",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"button",4),r.\u0275\u0275listener("click",function(){return i.updateActiveDate(1)}),r.\u0275\u0275element(9,"aui-icon",6),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275template(10,AR,1,5,"aui-calendar-month",7),r.\u0275\u0275template(11,LR,1,3,"aui-calendar-year",8),r.\u0275\u0275template(12,kR,1,2,"aui-calendar-decennia",9)),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(3,6,i.headerLabel)," "),r.\u0275\u0275advance(4),r.\u0275\u0275attribute("aria-label",i.ariaPreviousLabel),r.\u0275\u0275advance(2),r.\u0275\u0275attribute("aria-label",i.ariaNextLabel),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.activeView===i.CALENDAR_VIEW_MONTH),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.activeView===i.CALENDAR_VIEW_YEAR),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.activeView===i.CALENDAR_VIEW_DECENNIA))},dependencies:[on,To,xR,TR,PR,$n],encapsulation:2,changeDetection:0})),t})(),RR=(()=>{class t{constructor(){A(this,"clickedDate",new Date),A(this,"range",[1,6]),A(this,"interval",Ly.dateInterval(_T(new Date,1),_T(new Date,3)).closedInterval().build()),A(this,"javascript1","import { CalendarModule } from '@acpaas-ui/ngx-calendar;'\n\n@NgModule({\n\timports: [\n\t\tCalendarModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"javascript2","import { CalendarModule } from '@acpaas-ui/ngx-calendar;'\n\n@NgModule({\n\timports: [\n\t\tCalendarModule.forChild([\n\t\t\t'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday',\n\t\t], [\n\t\t\t'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December',\n\t\t])\n\t]\n});\n\nexport class AppModule {};"),A(this,"javascript3","import { DateRange } from '@acpaas-ui/ngx-utils';\n\npublic clickedDate: Date = new Date();\npublic range: DateRange = [1, 6];\n// date-fns is used to created the dates but do note that a Date object is passed through\npublic interval = IntervalBuilder\n    .dateInterval(addDays(new Date(), 1), addDays(new Date(), 3))\n    .closedInterval()\n    .build();\n\nselectDate(event) {\n\tif (event.complete) {\n\t\tthis.clickedDate = event.date;\n\t}\n}"),A(this,"html",'<aui-calendar\n  [range]="range"\n\t[interval]="interval"\n\t[selectedDate]="clickedDate"\n\t(selectDate)="selectDate($event)">\n</aui-calendar>')}changeDate(e){e.complete&&(this.clickedDate=e.date)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:21,vars:7,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom-xs"],[3,"codeSnippet"],[1,"u-margin-bottom"],["routerLink","/modules/utils/interval/"],[1,"m-datepicker","is-open"],[3,"range","interval","selectedDate","selectDate"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Calendar"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"p",1),r.\u0275\u0275text(5,"Or override the default values (Dutch labels are used by default):"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",3),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",3),r.\u0275\u0275element(9,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",3),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",3)(13,"blockquote"),r.\u0275\u0275text(14," For more information about using intervals to (dis)allow date selection, click "),r.\u0275\u0275elementStart(15,"a",4),r.\u0275\u0275text(16,"here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(17,". "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(18,"div",3)(19,"div",5)(20,"aui-calendar",6),r.\u0275\u0275listener("selectDate",function(m){return i.changeDate(m)}),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.javascript1),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.javascript2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.javascript3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html),r.\u0275\u0275advance(9),r.\u0275\u0275property("range",i.range)("interval",i.interval)("selectedDate",i.clickedDate))},dependencies:[tr,OR,va],encapsulation:2})),t})();const O1=new r.InjectionToken("contextConfig"),HM={useTitleSuffix:!1,extendTitle:!1,titleDelimiter:" | ",defaults:{},routerContext:!0};let R1=(()=>{class t{constructor(e,i,l){A(this,"metaConfig",void 0),A(this,"document",void 0),A(this,"titleService",void 0),this.metaConfig=e,this.document=i,this.titleService=l,this.metaConfig={...HM,...e}}updateMetaTags(e={}){if(e.disableUpdate)return;const i={...e,...this.metaConfig.defaults,title:this.getTitle(e)};Object.keys(i).forEach(l=>{this.setTag(l,i)})}setTag(e,i={}){switch(e){case"title":case"titleSuffix":return this.setTitle(i.title,i.titleSuffix);case"favIcon":return this.setFavIcon(i.favIcon);default:return this.setTagDefault(e,i[e])}}setTitle(e,i=this.metaConfig.defaults.titleSuffix){let l=this.isDefined(e)?e:this.metaConfig.defaults.title;this.metaConfig.useTitleSuffix&&this.isDefined(i)&&(l+=i),this.titleService.setTitle(l)}setFavIcon(e){this.updateFavIcon("apple-touch-icon",e),this.updateFavIcon("shortcut icon",e)}updateFavIcon(e,i,l){const m=this.document.querySelector(`link[rel="${e}"]`);if(m&&m.getAttribute("href")===i)return;const C=this.document.createElement("link");C.setAttribute("rel",e),C.setAttribute("href",i),l&&Object.keys(l).forEach(F=>{C.setAttribute(F,l[F])}),m&&this.document.head.removeChild(m),this.document.head.appendChild(C)}setTagDefault(e,i){const l=this.getOrCreateMetaTag(e),m=this.isDefined(i)?i:this.metaConfig.defaults[e]||"";l.setAttribute("content",m),"description"===e&&this.getOrCreateMetaTag("og:description").setAttribute("content",m)}isDefined(e){return typeof e<"u"}getOrCreateMetaTag(e){let i=this.document.querySelector(`meta[name='${e}']`);return i||(i=this.document.createElement("meta"),i.setAttribute("name",e),this.document.head.appendChild(i)),i}getTitle(e={}){return this.metaConfig.extendTitle&&e.parent?[e.title,e.parent].join(this.metaConfig.titleDelimiter):e.title}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275inject(O1),r.\u0275\u0275inject(pe),r.\u0275\u0275inject(v))}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})(),t0=(()=>{class t{constructor(e){A(this,"contextWriter",void 0),A(this,"context$",new Ws(null)),this.contextWriter=e}updateContext(e){this.contextWriter.updateMetaTags(e),this.context$.next(e)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275inject(R1))}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})();class $M{static getParentTitle(n,e=[]){if(!n)return e;const i=this.verifyPath(n,"parent.data.meta.title"),l=i?e.concat(i):e;return n.parent?this.getParentTitle(n.parent,l):l}static verifyPath(n,e){let i=n;const l=e.split(".");for(const m of l){if(!i[m])return null;i=i[m]}return i}static findLastChild(n){let i=n.snapshot.firstChild;for(;null!==i.firstChild;)i=i.firstChild;return i}}let GM=(()=>{class t{constructor(e,i,l,m,C){A(this,"contextService",void 0),A(this,"contextWriterService",void 0),A(this,"router",void 0),A(this,"activatedRoute",void 0),A(this,"contextConfig",void 0),this.contextService=e,this.contextWriterService=i,this.router=l,this.activatedRoute=m,this.contextConfig=C,C.routerContext||!C.defaults?this.router.events.pipe(fa(F=>F instanceof rl),(0,Qn.U)(()=>$M.findLastChild(this.activatedRoute))).subscribe(F=>{F.data=F.data||{},F.data.meta=F.data.meta||{},F.data.meta.parent=$M.getParentTitle(F),this.contextService.updateContext(F.data.meta)}):Object.keys(C.defaults).forEach(F=>{this.contextWriterService.setTag(F,C.defaults)})}static forRoot(e){return{ngModule:t,providers:[{provide:O1,useValue:e},t0,R1]}}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275inject(t0),r.\u0275\u0275inject(R1),r.\u0275\u0275inject(Ls),r.\u0275\u0275inject(jh),r.\u0275\u0275inject(O1))}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[t0,R1,{provide:O1,useValue:HM}],imports:[m_]})),t})(),FR=(()=>{class t{constructor(e,i,l){A(this,"contextService",void 0),A(this,"meta",void 0),A(this,"titleService",void 0),A(this,"importModule","import { ContextModule } from '@acpaas-ui/ngx-context';\n\n@NgModule({\n\timports: [\n\t\tContextModule\n\t]\n})"),A(this,"codeExampleJS1","@NgModule({\n\timports: [\n\t\tContextModule.forRoot({\n\t\t\tuseTitleSuffix: true,\n\t\t\textendTitle: true,\n\t\t\ttitleDelimiter: ' | ',\n\t\t\tdefaults: {\n\t\t\t\ttitleSuffix: 'Context Module',\n\t\t\t},\n\t\t\trouterContext: true,\n\t\t}),\n\t]\n})"),A(this,"codeExampleJS2","export const CONTEXT_EXAMPLES_ROUTES: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: ContextDemoPageComponent,\n\t\tpathMatch: 'full',\n\t\tdata: {\n\t\t\tmeta: {\n\t\t\t\tpage: 'Context example page',\n\t\t\t\ttitle: 'Context',\n\t\t\t\tdescription: 'Description of the context example page',\n\t\t\t\tmetatags: 'Antwerp UI, Angular, context',\n\t\t\t},\n\t\t},\n\t},\n];"),A(this,"codeExampleJS3","import { ContextService } from '@acpaas-ui/ngx-context';\n\n@Component({\n\tproviders: [\n\t\tContextService,\n\t],\n})\n\nexport class ContextDemoPageComponent {\n\tconstructor(private contextService: ContextService) {}\n\n\tpublic setTitle() {\n\t\tthis.contextService.updateContext({\n\t\t\ttitle: 'New context example title',\n\t\t});\n\t}\n}"),A(this,"codeExampleHTML",'<button class="a-button" (click)="setTitle()">Set title</button>'),A(this,"pageTitle",void 0),A(this,"pageDescription",void 0),this.contextService=e,this.meta=i,this.titleService=l}setTitle(){this.contextService.updateContext({title:"New context example title"}),this.pageTitle=this.titleService.getTitle()}ngOnInit(){this.pageTitle=this.titleService.getTitle(),this.pageDescription=this.meta.getTag('name = "description"').content}ngOnDestroy(){this.contextService.updateContext({title:"Antwerp UI Angular"})}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(t0),r.\u0275\u0275directiveInject(E),r.\u0275\u0275directiveInject(v))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],features:[r.\u0275\u0275ProvidersFeature([t0])],decls:34,vars:7,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"h4","u-margin-bottom"],[1,"m-alert"],[1,"a-definition-list","u-margin-bottom"],[1,"a-pre","a-pre--scrollable"],["type","button",1,"a-button",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Context"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"h3",3),r.\u0275\u0275text(5,"Set defaults"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"h3",3),r.\u0275\u0275text(9,"Set tags on routes"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",1),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",1)(13,"div",4),r.\u0275\u0275text(14," The following page properties were defined on the Angular routes. "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(15,"dl",5)(16,"dt"),r.\u0275\u0275text(17,"Page title:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"dd")(19,"pre",6),r.\u0275\u0275text(20),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(21,"dt"),r.\u0275\u0275text(22,"Page description:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"dd")(24,"pre",6),r.\u0275\u0275text(25),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(26,"h3",3),r.\u0275\u0275text(27,"Set tags in a component"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(28,"div",1),r.\u0275\u0275element(29,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(30,"div",1),r.\u0275\u0275element(31,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(32,"button",7),r.\u0275\u0275listener("click",function(){return i.setTitle()}),r.\u0275\u0275text(33,"Update page title"),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.codeExampleJS2),r.\u0275\u0275advance(9),r.\u0275\u0275textInterpolate(i.pageTitle),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(i.pageDescription),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.codeExampleJS3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML))},dependencies:[tr],encapsulation:2})),t})();var F1=(()=>(function(t){t.Auto="auto",t.Small="small",t.Medium="medium",t.Large="large",t.Full="full"}(F1||(F1={})),F1))(),up=(()=>(function(t){t[t.OPEN=0]="OPEN",t[t.CLOSED=1]="CLOSED"}(up||(up={})),up))();const n0=(t,n,e)=>!!t.code&&t.code.toLowerCase()===n&&(void 0===e||t.keyCode===e||t.which===e);var ZM=Me(787);function WM(t,n){return e=>e.lift(new NR(t,n))}class NR{constructor(n,e){this.compare=n,this.keySelector=e}call(n,e){return e.subscribe(new zR(n,this.compare,this.keySelector))}}class zR extends ys.L{constructor(n,e,i){super(n),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(n,e){return n===e}_next(n){let e;try{const{keySelector:l}=this;e=l?l(n):n}catch(l){return this.destination.error(l)}let i=!1;if(this.hasKey)try{const{compare:l}=this;i=l(this.key,e)}catch(l){return this.destination.error(l)}else this.hasKey=!0;i||(this.key=e,this.destination.next(n))}}let wT=(()=>{class t{constructor(e){A(this,"elementRef",void 0),A(this,"class",!0),A(this,"auiFlyoutZone",void 0),A(this,"isExpanded",!1),A(this,"element",void 0),this.elementRef=e,this.element=this.elementRef.nativeElement}get flyoutZoneIsExpanded(){return this.isExpanded}contains(e){return!1!==this.auiFlyoutZone&&this.element.contains(e)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef))}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyoutZone",""]],hostVars:3,hostBindings:function(e,i){2&e&&(r.\u0275\u0275attribute("aria-expanded",i.flyoutZoneIsExpanded),r.\u0275\u0275classProp("m-flyout__content",i.class))},inputs:{auiFlyoutZone:"auiFlyoutZone"},exportAs:["auiFlyoutZone"]})),t})(),qM=(()=>{class t{constructor(){A(this,"state$",new pi.xQ)}close(){this.state$.next(up.CLOSED)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})(),N1=(()=>{class t{constructor(e,i,l,m){A(this,"document",void 0),A(this,"flyoutService",void 0),A(this,"cdr",void 0),A(this,"ref",void 0),A(this,"flyoutClass",!0),A(this,"flyoutTabIndex","-1"),A(this,"flyoutAriaPop",!0),A(this,"size",F1.Auto),A(this,"align",void 0),A(this,"toggleClick",!0),A(this,"activateOnFocus",!1),A(this,"opened",new r.EventEmitter),A(this,"closed",new r.EventEmitter),A(this,"flyoutZone",void 0),A(this,"isOpened",!1),A(this,"state$",new pi.xQ),A(this,"destroyed$",new pi.xQ),this.document=e,this.flyoutService=i,this.cdr=l,this.ref=m,this.handleKeyUp=this.handleKeyUp.bind(this),this.state$.next(up.CLOSED),(0,ZM.T)(this.state$,this.flyoutService.state$).pipe(Nl(this.destroyed$),WM()).subscribe(C=>{this.isOpened=C===up.OPEN,this.flyoutZone&&(this.flyoutZone.isExpanded=this.isOpened),this.isOpened?this.opened.emit():this.closed.emit()})}get flyoutAlignRight(){return"right"===this.align}get flyoutSmall(){return"small"===this.size}get flyoutMedium(){return"medium"===this.size}get flyoutLarge(){return"large"===this.size}get flyoutFull(){return"full"===this.size}get flyoutOpen(){return this.isOpened}ngOnDestroy(){this.destroyed$.next(!0)}open(){this.state$.next(up.OPEN),this.document.addEventListener("keyup",this.handleKeyUp),this.cdr.detectChanges()}close(){this.state$.next(up.CLOSED),this.cdr.markForCheck()}isInClosableZone(e){if(!e)return!1;const i=this.flyoutZone&&this.flyoutZone.contains(e),l=this.ref.nativeElement===e||this.ref.nativeElement.contains(e);return i||l}handleKeyUp(e){n0(e,"escape",27)&&(this.document.removeEventListener("keyup",this.handleKeyUp),this.close(),this.cdr.markForCheck())}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(pe),r.\u0275\u0275directiveInject(qM),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.ElementRef))}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyout",""]],contentQueries:function(e,i,l){if(1&e&&r.\u0275\u0275contentQuery(l,wT,7),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.flyoutZone=m.first)}},hostVars:16,hostBindings:function(e,i){2&e&&(r.\u0275\u0275attribute("tabindex",i.flyoutTabIndex)("aria-haspopup",i.flyoutAriaPop),r.\u0275\u0275classProp("m-flyout",i.flyoutClass)("m-flyout--right",i.flyoutAlignRight)("m-flyout--s",i.flyoutSmall)("m-flyout--md",i.flyoutMedium)("m-flyout--l",i.flyoutLarge)("m-flyout--full",i.flyoutFull)("is-open",i.flyoutOpen))},inputs:{size:"size",align:"align",toggleClick:"toggleClick",activateOnFocus:"activateOnFocus"},outputs:{opened:"opened",closed:"closed"},exportAs:["auiFlyout"]})),t})(),YM=(()=>{class t{constructor(e,i,l,m){A(this,"flyout",void 0),A(this,"document",void 0),A(this,"elementRef",void 0),A(this,"class",!0),A(this,"openOnFocus",!0),A(this,"disabled",void 0),A(this,"isPlatformBrowser",void 0),A(this,"destroyed$",new pi.xQ),this.flyout=e,this.document=l,this.elementRef=m,this.isPlatformBrowser=Sa(i),this.closeIfInClosableZone=this.closeIfInClosableZone.bind(this),this.onBlur=this.onBlur.bind(this)}get tabIndex(){return this.disabled?"-1":"0"}ngOnInit(){this.flyout.state$.pipe(Nl(this.destroyed$)).subscribe(e=>{e===up.OPEN?setTimeout(()=>{this.addEventListeners()},100):this.removeEventListeners()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.isPlatformBrowser&&this.document.removeEventListener("click",this.closeIfInClosableZone,!0)}onMousedown(e){e.stopImmediatePropagation(),this.flyout.isOpened&&this.flyout.toggleClick?this.close():this.open()}onFocus(){!this.openOnFocus||!this.isPlatformBrowser||this.flyout.isOpened||this.open()}onKeyDown(e){(n0(e,"space",32)||n0(e,"enter",13))&&this.open()}onBlur(e){this.isPlatformBrowser&&this.flyout.isOpened&&e.relatedTarget&&!this.flyout.isInClosableZone(e.relatedTarget)&&e.relatedTarget!==this.elementRef.nativeElement&&this.close()}open(){!this.isPlatformBrowser||this.flyout.isOpened||this.flyout.open()}close(){!this.isPlatformBrowser||!this.flyout.isOpened||this.flyout.close()}addEventListeners(){this.document.addEventListener("click",this.closeIfInClosableZone,!0),this.document.addEventListener("focusout",this.onBlur,!0)}removeEventListeners(){this.document.removeEventListener("click",this.closeIfInClosableZone,!0),this.document.removeEventListener("focusout",this.onBlur,!0)}checkIfInClosableZone(e){const i=this.flyout.isInClosableZone(e.target),l=e.target===this.elementRef.nativeElement,m=this.elementRef.nativeElement.contains(e.target);return!i&&!l&&!m}closeIfInClosableZone(e){this.isPlatformBrowser&&this.checkIfInClosableZone(e)&&this.close()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(N1,1),r.\u0275\u0275directiveInject(r.PLATFORM_ID),r.\u0275\u0275directiveInject(pe),r.\u0275\u0275directiveInject(r.ElementRef))}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyoutAction",""]],hostVars:3,hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("mousedown",function(m){return i.onMousedown(m)})("focus",function(){return i.onFocus()})("keydown",function(m){return i.onKeyDown(m)}),2&e&&(r.\u0275\u0275attribute("tabindex",i.tabIndex),r.\u0275\u0275classProp("ngx-flyout-action",i.class))},inputs:{openOnFocus:"openOnFocus",disabled:"disabled"},exportAs:["auiFlyoutAction"]})),t})(),BR=(()=>{class t{constructor(e){A(this,"flyout",void 0),this.flyout=e}onClick(){this.flyout.close()}onKeyDown(e){(n0(e,"space",32)||n0(e,"enter",13))&&this.flyout.close()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(N1,1))}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyoutClose",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("click",function(){return i.onClick()})("keydown",function(m){return i.onKeyDown(m)})},exportAs:["auiFlyoutClose"]})),t})();var z1=(()=>(function(t){t.Auto="auto",t.Tiny="tiny",t.Small="small",t.Large="large"}(z1||(z1={})),z1))();function VR(t,n){1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275projection(1),r.\u0275\u0275elementContainerEnd())}const jR=function(t){return[t]},UR=function(t,n,e,i){return["a-button",t,n,e,i]},HR=["*"];let $R=(()=>{class t{constructor(){A(this,"buttonClassNames",{tiny:"a-button--s",small:"a-button--s",auto:"",large:"a-button--l"}),A(this,"title",void 0),A(this,"label",void 0),A(this,"icon",void 0),A(this,"align",void 0),A(this,"buttonSize",z1.Auto),A(this,"flyoutSize",void 0),A(this,"outline",!1),A(this,"flyoutOpen",!1)}handleFlyoutChanged(e){this.flyoutOpen=e}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-flyout-button"]],inputs:{title:"title",label:"label",icon:"icon",align:"align",buttonSize:"buttonSize",flyoutSize:"flyoutSize",outline:"outline"},ngContentSelectors:HR,decls:6,vars:14,consts:[["auiFlyout","",3,"ngClass","size","closed","opened"],["auiFlyoutAction","","type","button",3,"ngClass","title"],[3,"name"],["auiFlyoutZone",""],[4,"ngIf"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275listener("closed",function(){return i.handleFlyoutChanged(!1)})("opened",function(){return i.handleFlyoutChanged(!0)}),r.\u0275\u0275elementStart(1,"button",1),r.\u0275\u0275element(2,"aui-icon",2),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",3),r.\u0275\u0275template(5,VR,2,0,"ng-container",4),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(7,jR,"right"===i.align?"m-flyout--bottom-right":""))("size",i.flyoutSize),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("title",i.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction4(9,UR,i.buttonClassNames[i.buttonSize],i.icon&&i.label?"has-icon-left":"",i.icon&&!i.label?"has-icon":"",i.outline?"a-button a-button--outlined":"a-button")),r.\u0275\u0275advance(1),r.\u0275\u0275property("name",i.icon),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.label," "),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.flyoutOpen))},dependencies:[Ne,on,YM,wT,N1,To],encapsulation:2})),t})(),GR=(()=>{class t{constructor(){A(this,"codeExampleJS1","import { FlyoutModule } from '@acpaas-ui/ngx-flyout';\n\n@NgModule({\n\timports: [\n\t\tFlyoutModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"codeExampleJS2","import { FlyoutModule } from '@acpaas-ui/ngx-flyout';"),A(this,"codeExampleHTML1",'<div auiFlyout size="small" data-align="left">\n\t<button type="button" class="a-button" auiFlyoutAction>Open flyout</button>\n\t<div auiFlyoutZone class="has-padding u-text-center">\n\t\t<div class="u-margin-bottom">\n\t\t\t<p>Hello world!</p>\n\t\t</div>\n\t\t<div>\n\t\t\t<button type="button" class="a-button" auiFlyoutClose>Close flyout</button>\n\t\t</div>\n\t</div>\n</div>'),A(this,"codeExampleJS3","import { FlyoutButtonModule } from '@acpaas-ui/ngx-flyout';\n\n@NgModule({\n\timports: [\n\t\tFlyoutButtonModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"codeExampleJS4","import { FlyoutButtonModule } from '@acpaas-ui/ngx-flyout';"),A(this,"codeExampleHTML2",'<aui-flyout-button\n\ticon="ai-single-neutral"\n\tlabel="Open flyout"\n\talign="right"\n\ttitle="Click to open!"\n\toutline=true\n\tflyoutSize="small"\n\tbuttonSize="large">\n\t<div class="u-margin u-text-center">\n\t\t<p>Hello world!</p>\n\t</div>\n</aui-flyout-button>')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:34,vars:6,consts:[[1,"h3","u-margin-bottom"],[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-l"],["auiFlyout","","data-align","left","size","small"],["auiFlyoutAction","","type","button",1,"a-button"],["auiFlyoutZone","",1,"has-padding","u-text-center"],["auiFlyoutClose","","type","button",1,"a-button"],[1,"u-margin-bottom-3xl","u-text-right"],["buttonSize","large","align","right","flyoutSize","small","icon","ai-single-neutral","label","Open flyout","outline","true","title","Click to open!"],[1,"u-margin","u-text-center"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Flyout"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"h3",1),r.\u0275\u0275text(3,"Basic flyout"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",2),r.\u0275\u0275element(5,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",2),r.\u0275\u0275element(7,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",2),r.\u0275\u0275element(9,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",4)(11,"div",5)(12,"button",6),r.\u0275\u0275text(13,"Open flyout"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",7)(15,"div",2)(16,"p"),r.\u0275\u0275text(17,"Hello world!"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(18,"div")(19,"button",8),r.\u0275\u0275text(20,"Close flyout"),r.\u0275\u0275elementEnd()()()()(),r.\u0275\u0275elementStart(21,"h3",1),r.\u0275\u0275text(22,"Flyout Button"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"div",2),r.\u0275\u0275element(24,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(25,"div",2),r.\u0275\u0275element(26,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(27,"div",2),r.\u0275\u0275element(28,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"div",9)(30,"aui-flyout-button",10)(31,"div",11)(32,"p"),r.\u0275\u0275text(33,"Hello world!"),r.\u0275\u0275elementEnd()()()()),2&e&&(r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML1),r.\u0275\u0275advance(15),r.\u0275\u0275property("codeSnippet",i.codeExampleJS3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS4),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML2))},dependencies:[tr,YM,BR,wT,N1,$R],encapsulation:2})),t})();function ZR(t,n){if(1&t&&(r.\u0275\u0275namespaceSVG(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(0,"span",3),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.ariaLabel)}}let Ef=(()=>{class t{get classes(){return["ai",this.className,this.name].filter(Boolean).join(" ")}constructor(e){var i=this;A(this,"renderer",void 0),A(this,"name",void 0),A(this,"ariaLabel",void 0),A(this,"className",""),A(this,"fetchAntwerpIcons",S0(function*(){try{const C=yield(yield fetch("https://cdn.antwerpen.be/core_branding_scss/6.6.6/assets/images/ai.svg")).text(),F=i.renderer.createElement("svg");i.renderer.setAttribute(F,"id","ai-svg");const K=(new DOMParser).parseFromString(C,"text/html").querySelector("body > svg");i.renderer.appendChild(F,K),document.getElementById("ai-svg")||i.renderer.appendChild(document.body,F)}catch(l){throw new Error(l)}})),this.renderer=e}ngOnInit(){document.getElementById("ai-svg")||this.fetchAntwerpIcons()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.Renderer2))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-icon"]],hostVars:1,hostBindings:function(e,i){2&e&&r.\u0275\u0275attribute("class",i.classes)},inputs:{name:"name",ariaLabel:"ariaLabel",className:"className"},decls:4,vars:2,consts:[[1,"ai"],["aria-hidden","true"],["class","u-screen-reader-only",4,"ngIf"],[1,"u-screen-reader-only"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"span",0),r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(1,"svg",1),r.\u0275\u0275element(2,"use"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,ZR,2,1,"span",2),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275attribute("href","#"+i.name),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.ariaLabel))},dependencies:[on],styles:["[_nghost-%COMP%]{display:inline-flex}"]})),t})(),WR=(()=>{class t{constructor(){A(this,"javascript","import { IconModule } from '@acpaas-ui/ngx-icon';\n\n@NgModule({\n\timports: [\n\t\tIconModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"html",'<aui-icon name="ai-alarm-bell" ariaLabel="This is a bell" className="u-text-primary" style="font-size: 2rem;"></aui-icon>')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:8,vars:2,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],["name","ai-alarm-bell","ariaLabel","This is a bell","className","u-text-primary",2,"font-size","2rem"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Icon"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-icon",3),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.javascript),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html))},dependencies:[tr,Ef],encapsulation:2})),t})();const CT=function(t){return{"m-pagination--outline":t}},zy=function(t){return{"is-disabled":t}};function qR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ul",2)(1,"li",3)(2,"a",4),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.prev())}),r.\u0275\u0275element(3,"aui-icon",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(4,"li",6)(5,"a",4),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.next())}),r.\u0275\u0275element(6,"aui-icon",7),r.\u0275\u0275elementEnd()()()}if(2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(11,CT,"outlined"===e.styling)),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate1("id","pagination-",e.instanceId,"-prev-page"),r.\u0275\u0275property("href",e.currentPage>1?"#":null,r.\u0275\u0275sanitizeUrl)("ngClass",r.\u0275\u0275pureFunction1(13,zy,e.currentPage<=1)),r.\u0275\u0275attribute("aria-label",e.ariaPreviousLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",e.ariaPreviousLabel),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate1("id","pagination-",e.instanceId,"-next-page"),r.\u0275\u0275property("href",e.currentPage<e.totalPages?"#":null,r.\u0275\u0275sanitizeUrl)("ngClass",r.\u0275\u0275pureFunction1(15,zy,e.currentPage>=e.totalPages)),r.\u0275\u0275attribute("aria-label",e.ariaNextLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",e.ariaNextLabel)}}function YR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ul",2)(1,"li",3)(2,"a",4),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.prev())}),r.\u0275\u0275element(3,"aui-icon",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(4,"li",8),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"li",6)(7,"a",4),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.next())}),r.\u0275\u0275element(8,"aui-icon",7),r.\u0275\u0275elementEnd()()()}if(2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(13,CT,"outlined"===e.styling)),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate1("id","pagination-",e.instanceId,"-prev-page"),r.\u0275\u0275property("href",e.currentPage>1?"#":null,r.\u0275\u0275sanitizeUrl)("ngClass",r.\u0275\u0275pureFunction1(15,zy,e.currentPage<=1)),r.\u0275\u0275attribute("aria-label",e.ariaPreviousLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",e.ariaPreviousLabel),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate2("",e.currentPage," - ",e.totalPages,""),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate1("id","pagination-",e.instanceId,"-next-page"),r.\u0275\u0275property("href",e.currentPage<e.totalPages?"#":null,r.\u0275\u0275sanitizeUrl)("ngClass",r.\u0275\u0275pureFunction1(17,zy,e.currentPage>=e.totalPages)),r.\u0275\u0275attribute("aria-label",e.ariaNextLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",e.ariaNextLabel)}}const KR=function(t){return{"is-active":t}};function QR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li")(1,"a",10),r.\u0275\u0275listener("click",function(){const m=r.\u0275\u0275restoreView(e).$implicit,C=r.\u0275\u0275nextContext(3);return r.\u0275\u0275resetView(C.onUpdate(m))}),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=n.index,l=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate2("id","pagination-",l.instanceId,"-button-",i,""),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(6,KR,e===l.currentPage+"")),r.\u0275\u0275attribute("aria-current",e===l.currentPage+""?"page":null)("aria-label",l.ariaCurrentLabel+" "+e),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e)}}function XR(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ul",2)(1,"li",3)(2,"a",4),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.prev())}),r.\u0275\u0275element(3,"aui-icon",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275template(4,QR,3,8,"li",9),r.\u0275\u0275elementStart(5,"li",6)(6,"a",4),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.next())}),r.\u0275\u0275element(7,"aui-icon",7),r.\u0275\u0275elementEnd()()()}if(2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(12,CT,"outlined"===e.styling)),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate1("id","pagination-",e.instanceId,"-prev-page"),r.\u0275\u0275property("href",e.currentPage>1?"#":null,r.\u0275\u0275sanitizeUrl)("ngClass",r.\u0275\u0275pureFunction1(14,zy,e.currentPage<=1)),r.\u0275\u0275attribute("aria-label",e.ariaPreviousLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",e.ariaPreviousLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.numbers),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate1("id","pagination-",e.instanceId,"-next-page"),r.\u0275\u0275property("href",e.currentPage<e.totalPages?"#":null,r.\u0275\u0275sanitizeUrl)("ngClass",r.\u0275\u0275pureFunction1(16,zy,e.currentPage>=e.totalPages)),r.\u0275\u0275attribute("aria-label",e.ariaNextLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",e.ariaNextLabel)}}function JR(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"nav"),r.\u0275\u0275template(1,qR,7,17,"ul",1),r.\u0275\u0275template(2,YR,9,19,"ul",1),r.\u0275\u0275template(3,XR,8,18,"ul",1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275attribute("aria-label",e.ariaNavigationLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","basic"===e.display),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","text"===e.display),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","numbers"===e.display)}}let eF=(()=>{class t{constructor(){A(this,"ariaNavigationLabel","Paginering"),A(this,"ariaPreviousLabel","Ga naar de vorige pagina"),A(this,"ariaNextLabel","Ga naar de volgende pagina"),A(this,"ariaCurrentLabel","Pagina"),A(this,"currentPage",void 0),A(this,"display","basic"),A(this,"itemsPerPage",void 0),A(this,"styling","outlined"),A(this,"totalValues",void 0),A(this,"update",new r.EventEmitter),A(this,"totalPages",0),A(this,"numbers",[]),A(this,"instanceId",Math.random().toString(36).substr(2,9))}ngOnChanges(){this.setValues()}next(){return this.currentPage<this.totalPages&&this.onUpdate(this.currentPage+1),!1}prev(){return this.currentPage>1&&this.onUpdate(this.currentPage-1),!1}onUpdate(e){const i=parseInt(e,10);return i&&this.update.emit(i),!1}setValues(){if(this.totalValues&&this.itemsPerPage){this.currentPage=Number(this.currentPage),this.totalPages=Math.ceil(this.totalValues/this.itemsPerPage);const e=Array(this.totalPages).fill("").map((i,l)=>String(l+1));if(e.length<8)return this.numbers=e;this.numbers=this.currentPage<5?e.slice(0,5):this.currentPage>this.totalPages-4?e.slice(this.totalPages-5):e.slice(this.currentPage-2,this.currentPage+1),-1===this.numbers.indexOf("1")&&this.numbers.unshift("1"),-1===this.numbers.indexOf(String(this.totalPages))&&this.numbers.push(String(this.totalPages)),-1===this.numbers.indexOf("2")&&this.numbers.splice(1,0,"..."),-1===this.numbers.indexOf(String(this.totalPages-1))&&this.numbers.splice(this.numbers.length-1,0,"...")}}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-pagination"]],inputs:{ariaNavigationLabel:"ariaNavigationLabel",ariaPreviousLabel:"ariaPreviousLabel",ariaNextLabel:"ariaNextLabel",ariaCurrentLabel:"ariaCurrentLabel",currentPage:"currentPage",display:"display",itemsPerPage:"itemsPerPage",styling:"styling",totalValues:"totalValues"},outputs:{update:"update"},features:[r.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],["class","m-pagination",3,"ngClass",4,"ngIf"],[1,"m-pagination",3,"ngClass"],[1,"m-pagination__prev"],[3,"href","ngClass","id","click"],["name","ai-arrow-left-1",3,"ariaLabel"],[1,"m-pagination__next"],["name","ai-arrow-right-1",3,"ariaLabel"],[1,"m-pagination__label"],[4,"ngFor","ngForOf"],["href","#",3,"ngClass","id","click"]],template:function(e,i){1&e&&r.\u0275\u0275template(0,JR,4,4,"nav",0),2&e&&r.\u0275\u0275property("ngIf",i.totalPages>1)},dependencies:[Ne,bt,on,To],encapsulation:2})),t})();const ST=new r.InjectionToken("itemCounterLabels"),ET=new r.InjectionToken("itemsPerPageLabels"),tF=function(t,n,e){return{currentFrom:t,currentTo:n,totalAmount:e}};let nF=(()=>{class t{constructor(e){A(this,"setClass",!0),A(this,"currentPage",void 0),A(this,"totalAmount",void 0),A(this,"amountPerPage",0),A(this,"label",void 0),A(this,"currentFrom",1),A(this,"currentTo",this.amountPerPage),e&&!this.label?this.label=e:this.label||(this.label={singular:"%{currentFrom} - %{currentTo} van %{totalAmount} item",plural:"%{currentFrom} - %{currentTo} van %{totalAmount} items"})}setFromTo(){this.currentFrom=this.amountPerPage*(this.currentPage-1)+1,this.currentTo=this.amountPerPage*this.currentPage<=this.totalAmount?this.amountPerPage*this.currentPage:this.totalAmount}ngOnInit(){this.setFromTo()}ngOnChanges(){this.setFromTo()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(ST))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-item-counter"]],hostVars:2,hostBindings:function(e,i){2&e&&r.\u0275\u0275classProp("aui-item-counter",i.setClass)},inputs:{currentPage:"currentPage",totalAmount:"totalAmount",amountPerPage:"amountPerPage",label:"label"},features:[r.\u0275\u0275NgOnChangesFeature],decls:4,vars:11,consts:[[1,"m-item-counter"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"interpolateLabel"),r.\u0275\u0275pipe(3,"pluralizeLabel"),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,r.\u0275\u0275pipeBind2(3,4,i.label,i.totalAmount),r.\u0275\u0275pureFunction3(7,tF,i.currentFrom,i.currentTo,i.totalAmount)),"\n"))},dependencies:[CM,wL],styles:["[_nghost-%COMP%]{align-items:center;display:flex}"],changeDetection:0})),t})();function iF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"option",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275property("value",e),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e)}}const rF=function(t){return[t]};var B1=(()=>(function(t){t.S="S",t.R="R",t.L="L"}(B1||(B1={})),B1))();let oF=(()=>{class t{constructor(e){A(this,"inputSizes",{S:"a-input--small",R:"",L:"a-input--large"}),A(this,"id",void 0),A(this,"setClass",!0),A(this,"label",void 0),A(this,"size",B1.R),A(this,"selectOptions",void 0),A(this,"amountPerPage",void 0),A(this,"returnAmount",new r.EventEmitter),this.id="ngx-pagination-"+Math.random().toString(36).substring(2),e&&!this.label?this.label=e:this.label||(this.label={singular:"item per pagina",plural:"items per pagina"})}setAmount(e){this.amountPerPage=e,this.returnAmount.emit(this.amountPerPage)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(ET))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-items-per-page"]],hostVars:2,hostBindings:function(e,i){2&e&&r.\u0275\u0275classProp("aui-items-per-page",i.setClass)},inputs:{label:"label",size:"size",selectOptions:"selectOptions",amountPerPage:"amountPerPage"},outputs:{returnAmount:"returnAmount"},decls:9,vars:12,consts:[[1,"m-items-per-page"],[1,"a-input","has-icon-right",3,"ngClass"],[1,"a-input__wrapper"],[3,"id","name","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","ai-arrow-down-1"],[1,"a-input__label",3,"for"],[3,"value"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"select",3),r.\u0275\u0275listener("ngModelChange",function(m){return i.setAmount(m)}),r.\u0275\u0275template(4,iF,2,2,"option",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(5,"aui-icon",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"label",6),r.\u0275\u0275text(7),r.\u0275\u0275pipe(8,"pluralizeLabel"),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(10,rF,i.inputSizes[i.size])),r.\u0275\u0275advance(2),r.\u0275\u0275property("id",i.id)("name",i.id)("ngModel",i.amountPerPage),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",i.selectOptions),r.\u0275\u0275advance(2),r.\u0275\u0275property("for",i.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(8,7,i.label,i.amountPerPage)))},dependencies:[Ne,bt,ep,Um,oh,Os,oc,To,CM],styles:["[_nghost-%COMP%]{align-items:center;display:flex}"],changeDetection:0})),t})();function sF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"li"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.name)}}let aF=(()=>{class t{constructor(){A(this,"currentPage",1),A(this,"itemsPerPage",2),A(this,"visibleHeroes",void 0),A(this,"itemsPerPageOptions",[1,2,4]),A(this,"javascript1","import { PaginationModule } from '@acpaas-ui/ngx-pagination';\n\n@NgModule({\n\timports: [\n\t\tPaginationModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"javascript2","public currentPage = 1;\npublic itemsPerPage = 2;\nprivate heroes = [\n\t{ name: 'Batman' },\n\t{ name: 'Superman' },\n\t{ name: 'Iron man' },\n\t{ name: 'Wolverine' },\n\t{ name: 'Wonder woman' },\n\t{ name: 'Deadpool' }\n];\npublic visibleHeroes: any[];\npublic totalValues = this.heroes.length;\n\npublic ngOnInit() {\n\tthis.selectHeroes();\n}\n\npublic onUpdatePage(page) {\n\tthis.currentPage = page;\n\tthis.selectHeroes();\n}\n\nprivate selectHeroes() {\n\tthis.visibleHeroes = this.heroes.slice((this.currentPage * this.itemsPerPage)\n\t\t- this.itemsPerPage, (this.currentPage * this.itemsPerPage));\n}"),A(this,"html1",'<aui-pagination\n    [currentPage]="currentPage"\n    [itemsPerPage]="itemsPerPage"\n    [totalValues]="totalValues"\n    styling="basic"\n    display="numbers"\n    (update)="onUpdatePage($event)">\n</aui-pagination>'),A(this,"javascript3","import { ItemCounterModule } from '@acpaas-ui/ngx-pagination';\n\n@NgModule({\n\timports: [\n\t\tItemCounterModule.forChild({\n\t\t\tsingular: '%{currentFrom} - %{currentTo} of %{totalAmount} item',\n\t\t\tplural: '%{currentFrom} - %{currentTo} of %{totalAmount} items',\n\t\t},\n\t\t{\n\t\t\tsingular: 'item per page',\n\t\t\tplural: 'items per page',\n\t\t})\n\t]\n});\n\nexport class AppModule {};"),A(this,"javascript4","public itemsPerPageOptions = [1, 2, 4];\n\npublic onUpdateItems(count) {\n\tthis.itemsPerPage = count;\n\tthis.selectHeroes();\n}"),A(this,"html2",'<aui-items-per-page\n\t[selectOptions]="itemsPerPageOptions"\n\t[amountPerPage]="itemsPerPage"\n\t(returnAmount)="onUpdateItems($event)">\n</aui-items-per-page>\n\n<aui-item-counter\n\t[currentPage]="currentPage"\n\t[totalAmount]="totalValues"\n\t[amountPerPage]="itemsPerPage">\n</aui-item-counter>'),A(this,"heroes",[{name:"Batman"},{name:"Superman"},{name:"Iron man"},{name:"Wolverine"},{name:"Wonder woman"},{name:"Deadpool"}]),A(this,"totalValues",this.heroes.length)}ngOnInit(){this.selectHeroes()}onUpdatePage(e){this.currentPage=e,this.selectHeroes()}onUpdateItems(e){this.itemsPerPage=e,this.selectHeroes()}selectHeroes(){this.visibleHeroes=this.heroes.slice(this.currentPage*this.itemsPerPage-this.itemsPerPage,this.currentPage*this.itemsPerPage)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:29,vars:15,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"h5"],[4,"ngFor","ngForOf"],["display","numbers","styling","basic",3,"currentPage","itemsPerPage","totalValues","update"],[1,"h4","u-margin-bottom","u-margin-top-l"],[1,"m-alert","u-margin-bottom"],[1,"u-margin-bottom-x"],[3,"amountPerPage","selectOptions","returnAmount"],[1,"u-margin-bottom","u-margin-top"],[3,"amountPerPage","currentPage","totalAmount"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Pagination"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1)(9,"h3",3),r.\u0275\u0275text(10,"Heroes"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"ul"),r.\u0275\u0275template(12,sF,2,1,"li",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"aui-pagination",5),r.\u0275\u0275listener("update",function(m){return i.onUpdatePage(m)}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(14,"h3",6),r.\u0275\u0275text(15,"Item counter & items per page"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"div",7)(17,"p"),r.\u0275\u0275text(18,"Note that the following code is an extension of the code above."),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(19,"div",1),r.\u0275\u0275element(20,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",1),r.\u0275\u0275element(22,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"div",1),r.\u0275\u0275element(24,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(25,"div",8)(26,"aui-items-per-page",9),r.\u0275\u0275listener("returnAmount",function(m){return i.onUpdateItems(m)}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(27,"div",10),r.\u0275\u0275element(28,"aui-item-counter",11),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.javascript1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.javascript2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html1),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",i.visibleHeroes),r.\u0275\u0275advance(1),r.\u0275\u0275property("currentPage",i.currentPage)("itemsPerPage",i.itemsPerPage)("totalValues",i.totalValues),r.\u0275\u0275advance(7),r.\u0275\u0275property("codeSnippet",i.javascript3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.javascript4),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html2),r.\u0275\u0275advance(2),r.\u0275\u0275property("amountPerPage",i.itemsPerPage)("selectOptions",i.itemsPerPageOptions),r.\u0275\u0275advance(2),r.\u0275\u0275property("amountPerPage",i.itemsPerPage)("currentPage",i.currentPage)("totalAmount",i.totalValues))},dependencies:[tr,eF,nF,oF,bt],encapsulation:2})),t})();const lF=function(t){return{width:t}};let cF=(()=>{class t{constructor(){A(this,"value",0),A(this,"max",0)}calcProgress(){return this.max>0&&this.value>0?Math.floor(this.value/this.max*100)+"%":0}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-progress-bar"]],inputs:{value:"value",max:"max"},decls:3,vars:5,consts:[[1,"aui-progress-bar","a-progress"],[1,"a-progress__inner"],["aria-valuemin","0","role","progressbar",1,"a-progress__bar",3,"ngStyle"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275element(2,"div",2),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction1(3,lF,i.calcProgress())),r.\u0275\u0275attribute("aria-valuemax",i.max)("aria-valuenow",i.value))},dependencies:[hl],encapsulation:2})),t})(),uF=(()=>{class t{constructor(){A(this,"uploadProgress",20),A(this,"maxValue",100),A(this,"codeExampleJS1","import { ProgressBarModule } from '@acpaas-ui/ngx-progress-bar';\n\n@NgModule({\n  imports: [\n    ProgressBarModule\n  ]\n});\n\nexport class AppModule {};"),A(this,"codeExampleJS2","public uploadProgress = 20;\npublic maxValue = 100;"),A(this,"codeExampleHTML",'<aui-progress-bar\n  [value]="uploadProgress"\n  [max]="maxValue">\n</aui-progress-bar>')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:10,vars:5,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"a-input"],[3,"max","value"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Progress bar"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",3),r.\u0275\u0275element(9,"aui-progress-bar",4),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML),r.\u0275\u0275advance(2),r.\u0275\u0275property("max",i.maxValue)("value",i.uploadProgress))},dependencies:[tr,cF],encapsulation:2})),t})(),hF=(()=>{class t{constructor(){A(this,"data",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:2,vars:1,consts:[["type","button",1,"a-button","has-icon",3,"title"],["name","ai-view-1"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"button",0),r.\u0275\u0275element(1,"aui-icon",1),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275propertyInterpolate1("title","View ",null==i.data?null:i.data.firstName,"'s profile")},dependencies:[Ef],encapsulation:2})),t})(),TT=(()=>{class t{getLabel(e){return e.hasOwnProperty("label")?e.label:e}getValue(e){return e.hasOwnProperty("value")?e.value:e}getClass(e){return e.hasOwnProperty("classList")?e.classList.join(" "):e}formatValue(e,i,l){const m=e[this.getValue(i)];return i.format?i.format(m,i,e,l):m}getColumnClass(e,i,l){const m=e[this.getValue(i)];return i.columnClass?i.columnClass(m,i,e):""}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})();function KM(t){return!!Object.keys(t).find(n=>"metadata"===n)}function mF(t,n){}function gF(t,n){1&t&&r.\u0275\u0275template(0,mF,0,0,"ng-template")}function _F(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.value)}}function yF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",2),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",e.columnClass),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.value)}}let vF=(()=>{class t{constructor(e,i,l,m){A(this,"tableHelper",void 0),A(this,"viewContainerRef",void 0),A(this,"componentFactoryResolver",void 0),A(this,"changeDetectionRef",void 0),A(this,"component",void 0),A(this,"columnClass",void 0),A(this,"value",void 0),this.tableHelper=e,this.viewContainerRef=i,this.componentFactoryResolver=l,this.changeDetectionRef=m}ngOnChanges(e){e.component&&e.component.currentValue!==e.component.previousValue&&(this.loadComponent(this.component),this.changeDetectionRef.detectChanges())}hasComponent(){return!!this.component}loadComponent(e){const i=KM(e)?this.componentFactoryResolver.resolveComponentFactory(e.instance):this.componentFactoryResolver.resolveComponentFactory(e);this.viewContainerRef.clear();const l=this.viewContainerRef.createComponent(i);return l.instance.data=this.value,KM(e)&&(l.instance.metadata=e.metadata),l}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(TT),r.\u0275\u0275directiveInject(r.ViewContainerRef),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(r.ChangeDetectorRef))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-table-cell"]],inputs:{component:"component",columnClass:"columnClass",value:"value"},features:[r.\u0275\u0275NgOnChangesFeature],decls:3,vars:3,consts:[[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(e,i){1&e&&(r.\u0275\u0275template(0,gF,1,0,null,0),r.\u0275\u0275template(1,_F,2,1,"span",0),r.\u0275\u0275template(2,yF,2,2,"span",1)),2&e&&(r.\u0275\u0275property("ngIf",i.hasComponent()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.hasComponent()&&!i.columnClass),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.hasComponent()&&i.columnClass))},dependencies:[Ne,on],encapsulation:2})),t})();function bF(t,n){}function xF(t,n){1&t&&r.\u0275\u0275template(0,bF,0,0,"ng-template")}function wF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.label)}}let CF=(()=>{class t{constructor(e,i,l){A(this,"viewContainerRef",void 0),A(this,"componentFactoryResolver",void 0),A(this,"changeDetectionRef",void 0),A(this,"component",void 0),A(this,"label",void 0),A(this,"value",void 0),this.viewContainerRef=e,this.componentFactoryResolver=i,this.changeDetectionRef=l}ngOnChanges(){this.component&&this.loadComponent()}hasComponent(){return!!this.component}loadComponent(){const e=this.componentFactoryResolver.resolveComponentFactory(this.component),i=this.viewContainerRef;i.clear(),i.createComponent(e).instance.data=this.value,this.changeDetectionRef.detectChanges()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ViewContainerRef),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(r.ChangeDetectorRef))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-table-header"]],inputs:{component:"component",label:"label",value:"value"},features:[r.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,i){1&e&&(r.\u0275\u0275template(0,xF,1,0,null,0),r.\u0275\u0275template(1,wF,2,1,"span",0)),2&e&&(r.\u0275\u0275property("ngIf",i.hasComponent()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.hasComponent()))},dependencies:[on],encapsulation:2})),t})();function SF(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"aui-table-header",3),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("component",e.headerComponent)("label",i.tableHelper.getLabel(e))("value",i.tableHelper.getValue(e))}}function EF(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",7),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(3).$implicit,m=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(m.sort(l,"asc"))}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext(3).$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.tableHelper.getLabel(e)," ")}}function TF(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",8),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(3).$implicit,m=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(m.sort(l,"asc"))}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext(3).$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.tableHelper.getLabel(e)," ")}}function DF(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",9),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(3).$implicit,m=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(m.sort(l,"desc"))}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext(3).$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.tableHelper.getLabel(e)," ")}}function MF(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext(3).$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.tableHelper.getLabel(e)," ")}}function IF(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,EF,2,1,"button",4),r.\u0275\u0275template(2,TF,2,1,"button",5),r.\u0275\u0275template(3,DF,2,1,"button",6),r.\u0275\u0275template(4,MF,2,1,"ng-container",1),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext(2).$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.disableSorting&&i.tableHelper.getValue(e)!==(null==i.activeSorting?null:i.activeSorting.key)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.disableSorting&&i.tableHelper.getValue(e)===(null==i.activeSorting?null:i.activeSorting.key)&&"desc"===(null==i.activeSorting?null:i.activeSorting.order)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.disableSorting&&i.tableHelper.getValue(e)===(null==i.activeSorting?null:i.activeSorting.key)&&"asc"===(null==i.activeSorting?null:i.activeSorting.order)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.disableSorting)}}function PF(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext(2).$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",i.tableHelper.getLabel(e)," ")}}function AF(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,IF,5,4,"ng-container",1),r.\u0275\u0275template(2,PF,2,1,"ng-container",1),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.activeSorting),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.activeSorting)}}function LF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"th",0),r.\u0275\u0275template(1,SF,2,3,"ng-container",1),r.\u0275\u0275template(2,AF,3,2,"ng-container",1),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",i.tableHelper.getClass(e)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.headerComponent),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.headerComponent)}}function kF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"thead")(1,"tr"),r.\u0275\u0275template(2,LF,3,3,"th",2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.columns)}}function OF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr")(1,"td",10)(2,"div",11)(3,"div",12),r.\u0275\u0275element(4,"span",13),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div"),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd()()()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("colSpan",e.columns.length),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate1(" ",e.loadDataMessage," ")}}function RF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr")(1,"td"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.noColumnsMessage)}}function FF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr")(1,"td",10),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("colSpan",e.columns.length),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.noDataMessage)}}function NF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"td",0),r.\u0275\u0275element(1,"aui-table-cell",16),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(),l=i.$implicit,m=i.index,C=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",C.tableHelper.getClass(e)),r.\u0275\u0275advance(1),r.\u0275\u0275property("component",e.component)("columnClass",C.tableHelper.getColumnClass(l,e,m))("value",C.tableHelper.formatValue(l,e,m))}}const zF=function(t){return{"is-clickable":t}};function BF(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tr",15),r.\u0275\u0275listener("click",function(){const m=r.\u0275\u0275restoreView(e).$implicit,C=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(C.clickRow(m))}),r.\u0275\u0275template(1,NF,2,4,"td",2),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,zF,e.hasClickAction)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.columns)}}function VF(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,BF,2,4,"tr",14),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.rows)}}const jF=function(t,n,e){return{"a-table-responsive-wrapper":t,"has-first-column-fixed":n,"has-last-column-fixed":e}},UF=function(t,n){return{"a-table":!0,"aui-table":!0,"a-table--striped":t,"a-table--open":n}};let HF=(()=>{class t{constructor(e){A(this,"tableHelper",void 0),A(this,"rows",[]),A(this,"columns",[]),A(this,"loading",!1),A(this,"striped",!1),A(this,"open",!1),A(this,"responsive",!0),A(this,"fixedColumnLeft",!1),A(this,"fixedColumnRight",!1),A(this,"hasClickAction",!1),A(this,"activeSorting",void 0),A(this,"noDataMessage","No data available."),A(this,"loadDataMessage","Loading data..."),A(this,"noColumnsMessage","No columns available."),A(this,"orderBy",new r.EventEmitter),A(this,"rowClicked",new r.EventEmitter),this.tableHelper=e}sort(e,i){const l=this.tableHelper.getValue(e);this.activeSorting={key:l,order:i},this.orderBy.emit({key:l,order:i})}clickRow(e){this.hasClickAction&&this.rowClicked.emit(e)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(TT))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-table"]],inputs:{rows:"rows",columns:"columns",loading:"loading",striped:"striped",open:"open",responsive:"responsive",fixedColumnLeft:"fixedColumnLeft",fixedColumnRight:"fixedColumnRight",hasClickAction:"hasClickAction",activeSorting:"activeSorting",noDataMessage:"noDataMessage",loadDataMessage:"loadDataMessage",noColumnsMessage:"noColumnsMessage"},outputs:{orderBy:"orderBy",rowClicked:"rowClicked"},decls:8,vars:14,consts:[[3,"ngClass"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"component","label","value"],["class","a-table__sort-button a-table__sort-button--unsorted","type","button",3,"click",4,"ngIf"],["class","a-table__sort-button a-table__sort-button--sorted-desc","type","button",3,"click",4,"ngIf"],["class","a-table__sort-button a-table__sort-button--sorted-asc","type","button",3,"click",4,"ngIf"],["type","button",1,"a-table__sort-button","a-table__sort-button--unsorted",3,"click"],["type","button",1,"a-table__sort-button","a-table__sort-button--sorted-desc",3,"click"],["type","button",1,"a-table__sort-button","a-table__sort-button--sorted-asc",3,"click"],[3,"colSpan"],[1,"table-loading","u-text-center","u-margin-top-3xl","u-margin-bottom-3xl"],["role","alert",1,"a-spinner","u-margin-bottom-xs"],[1,"a-spinner__circle"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"component","columnClass","value"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"table",0),r.\u0275\u0275template(2,kF,3,1,"thead",1),r.\u0275\u0275elementStart(3,"tbody"),r.\u0275\u0275template(4,OF,7,2,"tr",1),r.\u0275\u0275template(5,RF,3,1,"tr",1),r.\u0275\u0275template(6,FF,3,2,"tr",1),r.\u0275\u0275template(7,VF,2,1,"ng-container",1),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction3(7,jF,i.responsive,i.fixedColumnLeft,i.fixedColumnRight)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(11,UF,i.striped,i.open)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.columns.length>0),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.loading),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.loading&&0===i.columns.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!(i.loading||i.rows&&0!==i.rows.length)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.loading&&i.columns.length>0))},dependencies:[Ne,bt,on,vF,CF],encapsulation:2,changeDetection:0})),t})(),$F=(()=>{class t{constructor(e){A(this,"datePipe",void 0),A(this,"columns",[{label:"#",value:"id",columnClass:(i,l,m)=>this.makeBold(i,l,m)},{label:"First Name",value:"firstName",columnClass:(i,l,m)=>this.makeBold(i,l,m)},{label:"Last Name",value:"lastName",columnClass:(i,l,m)=>this.makeBold(i,l,m)},{label:"Registered",value:"registeredAt",columnClass:(i,l,m)=>this.makeBold(i,l,m),format:i=>this.datePipe.transform(i,"dd/MM/yyyy")},{label:"Actions",component:hF}]),A(this,"rows",[{id:0,firstName:"Wyatt",lastName:"Cooper",registeredAt:"Sat Feb 07 1981 01:04:46 GMT+0000 (UTC)"},{id:1,firstName:"Mullen",lastName:"Ballard",registeredAt:"Fri Aug 31 2001 06:47:22 GMT+0000 (UTC)"},{id:2,firstName:"Sonia",lastName:"Bass",registeredAt:"Sat Jul 12 1975 16:00:43 GMT+0000 (UTC)"},{id:3,firstName:"Kristen",lastName:"Moore",registeredAt:"Mon Nov 09 2015 16:11:21 GMT+0000 (UTC)"},{id:4,firstName:"Moss",lastName:"Bowen",registeredAt:"Thu Aug 04 1977 05:52:52 GMT+0000 (UTC)"},{id:5,firstName:"Elaine",lastName:"Michael",registeredAt:"Wed Mar 30 1977 01:48:30 GMT+0000 (UTC)"},{id:6,firstName:"Jerri",lastName:"Hicks",registeredAt:"Wed Jul 10 2013 22:53:48 GMT+0000 (UTC)"},{id:7,firstName:"Sharron",lastName:"Castro",registeredAt:"Mon Sep 27 1976 07:55:10 GMT+0000 (UTC)"},{id:8,firstName:"Harriett",lastName:"Horton",registeredAt:"Wed Aug 18 2010 14:06:33 GMT+0000 (UTC)"},{id:9,firstName:"Griffin",lastName:"Navarro",registeredAt:"Tue Oct 24 2017 23:45:35 GMT+0000 (UTC)"}]),A(this,"importModule","import { TableModule } from '@acpaas-ui/ngx-table';\n\n@NgModule({\n\timports: [\n\t\tTableModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"exampleComp",'\nimport { Component } from \'@angular/core\';\nimport { Cell } from \'@acpaas-ui/ngx-table\';\n\n@Component({\n\ttemplate: `\n\t\t<button type="button" class="a-button has-icon" title="View {{ data?.firstName }}\'s profile">\n\t\t\t<aui-icon name="ai-view-1"></aui-icon>\n\t\t</button>\n\t`,\n})\nexport class TableActionComponent implements Cell {\n\tpublic data: any;\n}\n\t'),A(this,"exampleCols","\npublic columns: TableColumn[] = [\n\t{\n\t\tlabel: '#',\n\t\tvalue: 'id',\n\t\tcolumnClass: (index, col, row) => this.makeBold(index, col, row)\n\t},\n\t{\n\t\tlabel: 'First Name',\n\t\tvalue: 'firstName',\n\t\tcolumnClass: (index, col, row) => this.makeBold(index, col, row)\n\t},\n\t{\n\t\tlabel: 'Last Name',\n\t\tvalue: 'lastName',\n\t\tcolumnClass: (index, col, row) => this.makeBold(index, col, row)\n\t},\n\t{\n\t\tlabel: 'Registered',\n\t\tvalue: 'registeredAt',\n\t\tcolumnClass: (index, col, row) => this.makeBold(index, col, row)\n\t\tformat: (value) => this.datePipe.transform(value, 'dd/MM/yyyy'),\n\t},\n\t{\n\t\tlabel: 'Actions',\n\t\tcomponent: TableActionComponent,\n\t},\n];\n\npublic makeBold(index, col, row) {\n    return row.firstName === 'Sonia' ? 'u-text-bold' : '';\n  }\n\npublic rows = [\n\t{\n\t\t'id': 0,\n\t\t'firstName': 'Wyatt',\n\t\t'lastName': 'Cooper',\n\t\t'registeredAt': 'Sat Feb 07 1981 01:04:46 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 1,\n\t\t'firstName': 'Mullen',\n\t\t'lastName': 'Ballard',\n\t\t'registeredAt': 'Fri Aug 31 2001 06:47:22 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 2,\n\t\t'firstName': 'Sonia',\n\t\t'lastName': 'Bass',\n\t\t'registeredAt': 'Sat Jul 12 1975 16:00:43 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 3,\n\t\t'firstName': 'Kristen',\n\t\t'lastName': 'Moore',\n\t\t'registeredAt': 'Mon Nov 09 2015 16:11:21 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 4,\n\t\t'firstName': 'Moss',\n\t\t'lastName': 'Bowen',\n\t\t'registeredAt': 'Thu Aug 04 1977 05:52:52 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 5,\n\t\t'firstName': 'Elaine',\n\t\t'lastName': 'Michael',\n\t\t'registeredAt': 'Wed Mar 30 1977 01:48:30 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 6,\n\t\t'firstName': 'Jerri',\n\t\t'lastName': 'Hicks',\n\t\t'registeredAt': 'Wed Jul 10 2013 22:53:48 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 7,\n\t\t'firstName': 'Sharron',\n\t\t'lastName': 'Castro',\n\t\t'registeredAt': 'Mon Sep 27 1976 07:55:10 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 8,\n\t\t'firstName': 'Harriett',\n\t\t'lastName': 'Horton',\n\t\t'registeredAt': 'Wed Aug 18 2010 14:06:33 GMT+0000 (UTC)',\n\t},\n\t{\n\t\t'id': 9,\n\t\t'firstName': 'Griffin',\n\t\t'lastName': 'Navarro',\n\t\t'registeredAt': 'Tue Oct 24 2017 23:45:35 GMT+0000 (UTC)',\n\t},\n];\n\npublic loading = false;\n\nconstructor(\n\tprivate datePipe: DatePipe\n) { }\n\t"),A(this,"exampleHTML",'<aui-table\n    [open]="true"\n    [striped]="true"\n    [hasClickAction]="true"\n    [columns]="columns"\n    [loading]="loading"\n    [rows]="rows"\n    loadDataMessage="Loading..."\n    noColumsMessage="There are no columns!"\n    noDataMessage="There is no data!"\n  >\n  </aui-table>\n\t'),A(this,"loading",!1),this.datePipe=e}makeBold(e,i,l){return"Sonia"===l.firstName?"u-text-bold":""}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(dl))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],features:[r.\u0275\u0275ProvidersFeature([dl])],decls:15,vars:10,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"m-alert"],[1,"u-margin-bottom-3xl"],["loadDataMessage","Loading...","noColumsMessage","There are no columns!","noDataMessage","There is no data!",3,"open","striped","hasClickAction","columns","loading","rows"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Table"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1)(7,"div",3),r.\u0275\u0275text(8,"The TableActionComponent is used for actions in the table"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(9,"div",1),r.\u0275\u0275element(10,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"div",1),r.\u0275\u0275element(12,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",4),r.\u0275\u0275element(14,"aui-table",5),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.exampleCols),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.exampleComp),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.exampleHTML),r.\u0275\u0275advance(2),r.\u0275\u0275property("open",!0)("striped",!0)("hasClickAction",!0)("columns",i.columns)("loading",i.loading)("rows",i.rows))},dependencies:[tr,HF],encapsulation:2})),t})();var By=(()=>(function(t){t.Auto="auto",t.Small="small",t.Medium="medium",t.Large="large",t.Full="full"}(By||(By={})),By))(),hp=(()=>(function(t){t[t.OPEN=0]="OPEN",t[t.CLOSED=1]="CLOSED"}(hp||(hp={})),hp))();const r0=(t,n,e)=>!!t.code&&t.code.toLowerCase()===n&&(void 0===e||t.keyCode===e||t.which===e);let Tf=(()=>{class t{constructor(e){this.elementRef=e,this.class=!0,this.isExpanded=!1,this.element=this.elementRef.nativeElement}get flyoutZoneIsExpanded(){return this.isExpanded}contains(e){return!1!==this.auiFlyoutZone&&this.element.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyoutZone",""]],hostVars:3,hostBindings:function(e,i){2&e&&(r.\u0275\u0275attribute("aria-expanded",i.flyoutZoneIsExpanded),r.\u0275\u0275classProp("m-flyout__content",i.class))},inputs:{auiFlyoutZone:"auiFlyoutZone"},exportAs:["auiFlyoutZone"]}),t})(),QM=(()=>{class t{constructor(){this.state$=new pi.xQ}close(){this.state$.next(hp.CLOSED)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),od=(()=>{class t{constructor(e,i,l,m){this.document=e,this.flyoutService=i,this.cdr=l,this.ref=m,this.flyoutClass=!0,this.flyoutTabIndex="-1",this.flyoutAriaPop=!0,this.size=By.Auto,this.toggleClick=!0,this.activateOnFocus=!1,this.opened=new r.EventEmitter,this.closed=new r.EventEmitter,this.isOpened=!1,this.state$=new pi.xQ,this.destroyed$=new pi.xQ,this.handleKeyUp=this.handleKeyUp.bind(this),this.state$.next(hp.CLOSED),(0,ZM.T)(this.state$,this.flyoutService.state$).pipe(Nl(this.destroyed$),WM()).subscribe(C=>{this.isOpened=C===hp.OPEN,this.flyoutZone&&(this.flyoutZone.isExpanded=this.isOpened),this.isOpened?this.opened.emit():this.closed.emit()})}get flyoutAlignRight(){return"right"===this.align}get flyoutSmall(){return"small"===this.size}get flyoutMedium(){return"medium"===this.size}get flyoutLarge(){return"large"===this.size}get flyoutFull(){return"full"===this.size}get flyoutOpen(){return this.isOpened}ngOnDestroy(){this.destroyed$.next(!0)}open(){this.state$.next(hp.OPEN),this.document.addEventListener("keyup",this.handleKeyUp),this.cdr.detectChanges()}close(){this.state$.next(hp.CLOSED),this.cdr.markForCheck()}isInClosableZone(e){if(!e)return!1;const i=this.flyoutZone&&this.flyoutZone.contains(e),l=this.ref.nativeElement===e||this.ref.nativeElement.contains(e);return i||l}handleKeyUp(e){r0(e,"escape",27)&&(this.document.removeEventListener("keyup",this.handleKeyUp),this.close(),this.cdr.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(pe),r.\u0275\u0275directiveInject(QM),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.ElementRef))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyout",""]],contentQueries:function(e,i,l){if(1&e&&r.\u0275\u0275contentQuery(l,Tf,7),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.flyoutZone=m.first)}},hostVars:16,hostBindings:function(e,i){2&e&&(r.\u0275\u0275attribute("tabindex",i.flyoutTabIndex)("aria-haspopup",i.flyoutAriaPop),r.\u0275\u0275classProp("m-flyout",i.flyoutClass)("m-flyout--right",i.flyoutAlignRight)("m-flyout--s",i.flyoutSmall)("m-flyout--md",i.flyoutMedium)("m-flyout--l",i.flyoutLarge)("m-flyout--full",i.flyoutFull)("is-open",i.flyoutOpen))},inputs:{size:"size",align:"align",toggleClick:"toggleClick",activateOnFocus:"activateOnFocus"},outputs:{opened:"opened",closed:"closed"},exportAs:["auiFlyout"]}),t})(),Vy=(()=>{class t{constructor(e,i,l,m){this.flyout=e,this.document=l,this.elementRef=m,this.class=!0,this.openOnFocus=!0,this.destroyed$=new pi.xQ,this.isPlatformBrowser=Sa(i),this.closeIfInClosableZone=this.closeIfInClosableZone.bind(this),this.onBlur=this.onBlur.bind(this)}get tabIndex(){return this.disabled?"-1":"0"}ngOnInit(){this.flyout.state$.pipe(Nl(this.destroyed$)).subscribe(e=>{e===hp.OPEN?setTimeout(()=>{this.addEventListeners()},100):this.removeEventListeners()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.isPlatformBrowser&&this.document.removeEventListener("click",this.closeIfInClosableZone,!0)}onMousedown(e){e.stopImmediatePropagation(),this.flyout.isOpened&&this.flyout.toggleClick?this.close():this.open()}onFocus(){!this.openOnFocus||!this.isPlatformBrowser||this.flyout.isOpened||this.open()}onKeyDown(e){(r0(e,"space",32)||r0(e,"enter",13))&&this.open()}onBlur(e){this.isPlatformBrowser&&this.flyout.isOpened&&e.relatedTarget&&!this.flyout.isInClosableZone(e.relatedTarget)&&e.relatedTarget!==this.elementRef.nativeElement&&this.close()}open(){!this.isPlatformBrowser||this.flyout.isOpened||this.flyout.open()}close(){!this.isPlatformBrowser||!this.flyout.isOpened||this.flyout.close()}addEventListeners(){this.document.addEventListener("click",this.closeIfInClosableZone,!0),this.document.addEventListener("focusout",this.onBlur,!0)}removeEventListeners(){this.document.removeEventListener("click",this.closeIfInClosableZone,!0),this.document.removeEventListener("focusout",this.onBlur,!0)}checkIfInClosableZone(e){const i=this.flyout.isInClosableZone(e.target),l=e.target===this.elementRef.nativeElement,m=this.elementRef.nativeElement.contains(e.target);return!i&&!l&&!m}closeIfInClosableZone(e){this.isPlatformBrowser&&this.checkIfInClosableZone(e)&&this.close()}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(od,1),r.\u0275\u0275directiveInject(r.PLATFORM_ID),r.\u0275\u0275directiveInject(pe),r.\u0275\u0275directiveInject(r.ElementRef))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyoutAction",""]],hostVars:3,hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("mousedown",function(m){return i.onMousedown(m)})("focus",function(){return i.onFocus()})("keydown",function(m){return i.onKeyDown(m)}),2&e&&(r.\u0275\u0275attribute("tabindex",i.tabIndex),r.\u0275\u0275classProp("ngx-flyout-action",i.class))},inputs:{openOnFocus:"openOnFocus",disabled:"disabled"},exportAs:["auiFlyoutAction"]}),t})(),XM=(()=>{class t{constructor(e){this.flyout=e}onClick(){this.flyout.close()}onKeyDown(e){(r0(e,"space",32)||r0(e,"enter",13))&&this.flyout.close()}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(od,1))},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFlyoutClose",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("click",function(){return i.onClick()})("keydown",function(m){return i.onKeyDown(m)})},exportAs:["auiFlyoutClose"]}),t})(),jy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({providers:[QM],imports:[Ri]}),t})();function YF(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"button",2),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.login$.next())}),r.\u0275\u0275element(2,"aui-icon",3),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275attribute("aria-label",e.translations.login),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",e.translations.login," ")}}function KF(t,n){if(1&t&&r.\u0275\u0275element(0,"img",12),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("src",null==e.user?null:e.user.avatarUrl,r.\u0275\u0275sanitizeUrl),r.\u0275\u0275attribute("alt",e.translations.userAvatar)}}function QF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",13),r.\u0275\u0275element(1,"aui-icon",14),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",e.translations.userAvatar)}}function XF(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",15),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.notificationsCount?e.notificationsCount:0)}}function JF(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(l.logout$.next())}),r.\u0275\u0275element(1,"aui-icon",17),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275attribute("aria-label",e.translations.logout),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",e.translations.logout," ")}}function eN(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",4)(2,"button",5)(3,"span",6),r.\u0275\u0275template(4,KF,1,2,"img",7),r.\u0275\u0275template(5,QF,2,1,"span",8),r.\u0275\u0275template(6,XF,2,1,"span",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",10),r.\u0275\u0275projection(9),r.\u0275\u0275template(10,JF,3,2,"button",11),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275classMap(e.flyoutClassBuilder(e.direction,e.flyoutSize)),r.\u0275\u0275attribute("data-align",e.direction)("size",e.flyoutSize),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",null==e.user?null:e.user.avatarUrl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!(null!=e.user&&e.user.avatarUrl)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.notificationsCount>0),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate2(" ",null==e.user?null:e.user.firstName," ",null==e.user?null:e.user.lastName," "),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",e.showLogoutButton)}}const tN=["*"];let nN=(()=>{class t{constructor(){A(this,"user",null),A(this,"direction","right"),A(this,"flyoutSize",By.Small),A(this,"notificationsCount",null),A(this,"showLogoutButton",!0),A(this,"translations",{login:"Aanmelden",logout:"Afmelden",userAvatar:"Gebruiker avatar"}),A(this,"logout$",new r.EventEmitter),A(this,"login$",new r.EventEmitter)}flyoutClassBuilder(e,i){return`m-user-menu-flyout${"right"===e?" m-flyout--bottom-right":""}${i?` m-flyout--${i[0].toLowerCase()}`:""}`}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-user-menu"]],inputs:{user:"user",direction:"direction",flyoutSize:"flyoutSize",notificationsCount:"notificationsCount",showLogoutButton:"showLogoutButton",translations:"translations"},outputs:{logout$:"logout$",login$:"login$"},ngContentSelectors:tN,decls:3,vars:2,consts:[[1,"m-user-menu-container"],[4,"ngIf"],[1,"a-button","a-button-login","has-icon-left",3,"click"],["name","ai-single-neutral"],["auiFlyout",""],["auiFlyoutAction","",1,"a-button","primary","a-button-avatar"],[1,"a-avatar","u-margin-right-xs"],[3,"src",4,"ngIf"],["class","a-avatar__icon",4,"ngIf"],["class","a-badge a-badge-primary",4,"ngIf"],["auiFlyoutZone",""],["auiFlyoutClose","","class","a-button-logout a-button a-button--danger a-button--full has-icon-left",3,"click",4,"ngIf"],[3,"src"],[1,"a-avatar__icon"],["name","ai-single-neutral",3,"ariaLabel"],[1,"a-badge","a-badge-primary"],["auiFlyoutClose","",1,"a-button-logout","a-button","a-button--danger","a-button--full","has-icon-left",3,"click"],["name","ai-power-button"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,YF,4,2,"ng-container",1),r.\u0275\u0275template(2,eN,11,10,"ng-container",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.user),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.user))},dependencies:[on,To,Vy,XM,Tf,od],styles:['[_ngcontent-%COMP%]:root{--THEME1-800: var(--theme1-800, #002855);--THEME1-700: var(--theme1-700, #003865);--THEME1-600: var(--theme1-600, #0057b7);--THEME1-500: var(--theme1-500, #009cde);--THEME1-400: var(--theme1-400, #41b6e6);--THEME1-300: var(--theme1-300, #99d6ea);--THEME1-200: var(--theme1-200, #96b5e4);--THEME1-100: var(--theme1-100, #e0ebf6);--THEME2-800: var(--theme2-800,);--THEME2-700: var(--theme2-700,);--THEME2-600: var(--theme2-600, #7c2629);--THEME2-500: var(--theme2-500, #862633);--THEME2-400: var(--theme2-400, #cf0039);--THEME2-300: var(--theme2-300, #df4661);--THEME2-200: var(--theme2-200, #ffb1bb);--THEME2-100: var(--theme2-100, #f5dadf);--INFO-800: var(--info-800, var(--THEME1-800));--INFO-700: var(--info-700, var(--THEME1-700));--INFO-600: var(--info-600, var(--THEME1-600));--INFO-500: var(--info-500, var(--THEME1-500));--INFO-400: var(--info-400, var(--THEME1-400));--INFO-300: var(--info-300, var(--THEME1-300));--INFO-200: var(--info-200, var(--THEME1-200));--INFO-100: var(--info-100, var(--THEME1-100));--SUCCESS-800: var(--success-800, #004721);--SUCCESS-700: var(--success-700, #006e33);--SUCCESS-600: var(--success-600, #4c8d2b);--SUCCESS-500: var(--success-500, #6cc24a);--SUCCESS-400: var(--success-400, #97d700);--SUCCESS-300: var(--success-300, #bce194);--SUCCESS-200: var(--success-200, #d0debb);--SUCCESS-100: var(--success-100, #edf8e9);--WARNING-800: var(--warning-800,);--WARNING-700: var(--warning-700,);--WARNING-600: var(--warning-600,);--WARNING-500: var(--warning-500, #8f3400);--WARNING-400: var(--warning-400, #ce4c00);--WARNING-300: var(--warning-300,);--WARNING-200: var(--warning-200,);--WARNING-100: var(--warning-100, #ffe4d6);--DANGER-800: var(--danger-800,);--DANGER-700: var(--danger-700, #7c2629);--DANGER-600: var(--danger-600, #af272f);--DANGER-500: var(--danger-500, #e03c31);--DANGER-400: var(--danger-400, #e56a54);--DANGER-300: var(--danger-300, #e6baa8);--DANGER-200: var(--danger-200, #f3cfb3);--DANGER-100: var(--danger-100, #fbe8e6);--TEXT-COLOR: var(--text-color, #000);--TEXT-COLOR-LIGHT: var(--text-color-light, #6f6f6f);--TEXT-COLOR-INVERTED: var(--text-color-inverted, #fff);--TEXT-COLOR-XLIGHT: var(--text-color-xlight, var(--TEXT-COLOR-INVERTED));--BG-COLOR: var(--bg-color, #f3f3f3);--BG-COLOR-LIGHT: var(--bg-color-light, #fff);--BG-COLOR-INVERTED: var(--bg-color-inverted, #424242);--BORDER-COLOR: var(--border-color, #949494);--BORDER-COLOR-LIGHT: var(--border-color-light, #d8d8d8);--OVERLAY-COLOR: var(--overlay-color, rgba(0, 0, 0, .75));--BOX-SHADOW-COLOR: var(--box-shadow-color, rgba(20, 20, 20, .12));--LINK-COLOR: var(--link-color, var(--THEME1-600));--LINK-HOVER-COLOR: var(--link-hover-color, var(--THEME1-700));--STATE-INFO: var(--state-info, var(--INFO-600));--STATE-SUCCESS: var(--state-success, var(--SUCCESS-700));--STATE-WARNING: var(--state-warning, var(--WARNING-400));--STATE-DANGER: var(--state-danger, var(--DANGER-600));--STATE-DISABLED: var(--state-disabled, #6f6f6f);--SPACER: var(--spacer, 1.5rem);--SPACER-3XL: var(--spacer-3xl, calc(var(--SPACER) * 4));--SPACER-XXL: var(--spacer-xxl, calc(var(--SPACER) * 2.5));--SPACER-XL: var(--spacer-xl, calc(var(--SPACER) * 2));--SPACER-L: var(--spacer-l, calc(var(--SPACER) * 1.5));--SPACER-S: var(--spacer-s, calc(var(--SPACER) / 1.5));--SPACER-XS: var(--spacer-xs, calc(var(--SPACER) / 2));--SPACER-XXS: var(--spacer-xxs, calc(var(--SPACER) / 3));--SPACER-3XS: var(--spacer-3xs, calc(var(--SPACER) / 6));--SCREEN-XS: var(--screen-xs, 30rem);--SCREEN-S: var(--screen-s, 45rem);--SCREEN-L: var(--screen-l, 62rem);--SCREEN-XL: var(--screen-xl, 75rem);--SCREEN-XS-MAX: var(--screen-xs-max, 44.9375rem);--SCREEN-S-MAX: var(--screen-s-max, 61.9375rem);--SCREEN-L-MAX: var(--screen-l-max, 74.9375rem);--SCREEN-XL-MAX: var(--screen-xl-max, 89.9375rem);--SCREEN-XXL: var(--screen-xxl, calc(var(--SCREEN-XL) + calc(var(--SPACER-3XL) * 2) + calc(var(--SPACER) * 2)));--FONT-FAMILY-BASE: var(--font-family-base, "Sun Antwerpen", sans-serif);--FONT-FAMILY-HEADINGS: var(--font-family-headings, "Antwerpen Regular", sans-serif);--FONT-FAMILY-MONOSPACE: var(--font-family-monospace, "Menlo", "Monaco", "Consolas", "Courier New", monospace);--FONT-WEIGHT-LIGHT: var(--font-weight-light, 300);--FONT-WEIGHT-NORMAL: var(--font-weight-normal, 500);--FONT-WEIGHT-BOLD: var(--font-weight-bold, 700);--FONT-WEIGHT-EXTRA-BOLD: var(--font-weight-extra-bold, 800);--FONT-WEIGHT-H1: var(--font-weight-h1, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H2: var(--font-weight-h2, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H3: var(--font-weight-h3, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H4: var(--font-weight-h4, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H5: var(--font-weight-h5, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H6: var(--font-weight-h6, var(--FONT-WEIGHT-BOLD));--FONT-SIZE-BASE: var(--font-size-base, 16px);--FONT-SIZE-SMALL: var(--font-size-small, 14px);--FONT-SIZE-LARGE: var(--font-size-large, 18px);--FONT-SIZE-H1: var(--font-size-h1, 36px);--FONT-SIZE-H2: var(--font-size-h2, 28px);--FONT-SIZE-H3: var(--font-size-h3, 23px);--FONT-SIZE-H4: var(--font-size-h4, 21px);--FONT-SIZE-H5: var(--font-size-h5, 19px);--FONT-SIZE-H6: var(--font-size-h6, 17px);--LINE-HEIGHT-BASE: var(--line-height-base, 1);--LINE-HEIGHT-HEADING: var(--line-height-heading, 1.1);--LINE-HEIGHT-PARAGRAPH: var(--line-height-paragraph, 1.3);--BORDER-RADIUS: var(--border-radius, 0);--BORDER-WIDTH: var(--border-width, 1px);--ANIMATION-DURATION: var(--animation-duration, .2s);--ANIMATION-EASING: var(--animation-easing, ease-in-out);--ANIMATION-NORMAL: var(--animation-normal, var(--ANIMATION-DURATION) var(--ANIMATION-EASING));--BOX-SHADOW-BOTTOM-LEFT: var(--box-shadow-bottom-left, calc(var(--SPACER) / -2) calc(var(--SPACER) / 2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-BOTTOM-RIGHT: var(--box-shadow-bottom-right, calc(var(--SPACER) / 2) calc(var(--SPACER) / 2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-TOP-LEFT: var(--box-shadow-top-left, calc(var(--SPACER) / -2) calc(var(--SPACER) / -2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-TOP-RIGHT: var(--box-shadow-top-right, calc(var(--SPACER) / 2) calc(var(--SPACER) / -2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW: var(--box-shadow, var(--BOX-SHADOW-BOTTOM-RIGHT))}[_ngcontent-%COMP%]:root{--shared-avatar-size-s: var(--SPACER-L);--shared-avatar-size: var(--SPACER-XL);--shared-avatar-size-l: var(--SPACER-XXL);--shared-copyright-color: var(--TEXT-COLOR-INVERTED);--shared-copyright-height: var(--SPACER-L);--shared-header-height: var(--SPACER-XL);--shared-slideshow-footer-color-light: var(--TEXT-COLOR-INVERTED)}[_nghost-%COMP%]{display:inline-block}.a-button-avatar[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;padding-bottom:0;padding-left:0;padding-top:0}.a-button-avatar[_ngcontent-%COMP%]   .a-avatar[_ngcontent-%COMP%]{align-content:center;display:flex;flex-direction:row;justify-content:center;overflow:visible;position:relative}.a-button-avatar[_ngcontent-%COMP%]   .a-avatar[_ngcontent-%COMP%]   .a-badge[_ngcontent-%COMP%]{--badge-bg-color: var(--theme2-400);--badge-border-color: var(--theme2-400);bottom:calc(var(--badge-size) / -2);position:absolute;z-index:5}']})),t})(),iN=(()=>{class t{constructor(){A(this,"mockUser",{firstName:"John",lastName:"Doe",avatarUrl:"https://gravatar.com/avatar/66f865ee03bc019d2f06af6ec0c434ce?s=200"}),A(this,"translations",{login:"Login",logout:"Logout",userAvatar:"User avatar"}),A(this,"importModuleSnippet","import { UserMenuModule } from '@acpaas-ui/ngx-user-menu';\n\n@NgModule({\n\timports: [\n\t\tUserMenuModule\n\t]\n})\nexport class AppModule { }"),A(this,"componentInputs","public mockUser: UserMenu.IUser = {\n\tfirstName: 'John',\n\tlastName: 'Doe',\n\tavatarUrl: 'https://gravatar.com/avatar/66f865ee03bc019d2f06af6ec0c434ce?s=200'\n};\n\npublic translations: UserMenu.ITranslations = {\n\tlogin: 'Login',\n\tloginAlt: 'Click here to login',\n\tuserAvatar: 'User avatar'\n};\n\npublic logoutUser(){\n\talert('User is logged out!');\n}\n\npublic loginUser(){\n\talert('User is logged in!');\n}"),A(this,"useComponentTagSnippet",'<aui-user-menu [user]="userObject" flyoutSize="Small" [notificationsCount]="100"\n\t(logout$)="logoutUser()" (login$)="loginUser()" [translations]="translations" direction="left">\n\t<div class="u-margin-l u-text-center">\n\t\tYour Content Here\n\t</div>\n</aui-user-menu>')}logoutUser(){alert("User is logged out!")}loginUser(){alert("User is logged in!")}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:33,vars:7,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[3,"translations","login$"],[1,"u-margin-bottom-l"],["flyoutSize","Small","direction","left",3,"notificationsCount","translations","user","logout$"],[1,"u-margin-l","u-text-center"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"User Menu"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1)(9,"aui-user-menu",3),r.\u0275\u0275listener("login$",function(){return i.loginUser()}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",4)(11,"aui-user-menu",5),r.\u0275\u0275listener("logout$",function(){return i.logoutUser()}),r.\u0275\u0275elementStart(12,"div",6),r.\u0275\u0275text(13,"Your Content Here"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(14,"p",1),r.\u0275\u0275text(15," The User Menu component can be used on a webpage to provide visual login and logout buttons. If logged out, the component displays a single button enabling the user to login. If logged in, the component provides an avatar button, displaying a flyout where a logout button is featured.\n"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"p",1),r.\u0275\u0275text(17," This component uses content projection inside its tag, meaning whatever html is included between the "),r.\u0275\u0275elementStart(18,"code"),r.\u0275\u0275text(19,"aui-user-menu"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(20," tag will be inserted in the flyout section. The logout button is displayed by default but can be disabled if you wish to implement your custom logout button.\n"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",1)(22,"p"),r.\u0275\u0275text(23,"Two output events may be used to hook to login or logout functionality to the interface:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"ul")(25,"li")(26,"code"),r.\u0275\u0275text(27,"login$"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(28,"li")(29,"code"),r.\u0275\u0275text(30,"logout$"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(31,"p"),r.\u0275\u0275text(32," You are responsible for providing login and logout callback functionality, this component only provides visuals. "),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModuleSnippet),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.componentInputs),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.useComponentTagSnippet),r.\u0275\u0275advance(2),r.\u0275\u0275property("translations",i.translations),r.\u0275\u0275advance(2),r.\u0275\u0275property("notificationsCount",100)("translations",i.translations)("user",i.mockUser))},dependencies:[tr,nN],encapsulation:2})),t})();function rN(t,n){if(1&t&&r.\u0275\u0275element(0,"span",6),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("innerHTML",i.formatLabel(e),r.\u0275\u0275sanitizeHtml)}}function oN(t,n){}const sN=function(t){return{item:t}};function aN(t,n){if(1&t&&r.\u0275\u0275template(0,oN,0,0,"ng-template",7),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,sN,e))("ngTemplateOutlet",i.template)}}function lN(t,n){}const cN=function(t){return{$implicit:t}};function uN(t,n){if(1&t&&r.\u0275\u0275template(0,lN,0,0,"ng-template",7),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,cN,e))("ngTemplateOutlet",i.itemTemplate)}}function hN(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li",2),r.\u0275\u0275listener("click",function(){const m=r.\u0275\u0275restoreView(e).$implicit,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.selectItem(m))}),r.\u0275\u0275elementStart(1,"a",3),r.\u0275\u0275template(2,rN,1,1,"span",4),r.\u0275\u0275template(3,aN,1,4,null,5),r.\u0275\u0275template(4,uN,1,4,null,5),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.index,i=r.\u0275\u0275nextContext();r.\u0275\u0275attribute("aria-selected",e===i.index),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e===i.index?"is-active":""),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.template&&!i.itemTemplate),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.template),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.itemTemplate)}}let dN=(()=>{class t{constructor(){A(this,"items",void 0),A(this,"index",0),A(this,"search",void 0),A(this,"label",void 0),A(this,"itemTemplate",void 0),A(this,"selected",new r.EventEmitter),A(this,"template",void 0)}selectItem(e){this.selected.emit(e)}formatLabel(e){const i=this.label?e[this.label]:e;if(!this.search)return i;const l=new RegExp(this.search,"ig");return i.replace(l,"<strong>"+this.search+"</strong>")}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-selectable-list"]],contentQueries:function(e,i,l){if(1&e&&r.\u0275\u0275contentQuery(l,r.TemplateRef,7),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.template=m.first)}},inputs:{items:"items",index:"index",search:"search",label:"label",itemTemplate:"itemTemplate"},outputs:{selected:"selected"},decls:2,vars:1,consts:[[1,"aui-selectable-list","a-list","a-list--lined","a-list--flushed"],["class","a-list__item",3,"click",4,"ngFor","ngForOf"],[1,"a-list__item",3,"click"],[1,"a-list__content",3,"ngClass"],["class","a-list__text",3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"a-list__text",3,"innerHTML"],[3,"ngTemplateOutletContext","ngTemplateOutlet"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"ul",0),r.\u0275\u0275template(1,hN,5,5,"li",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",i.items))},dependencies:[Ne,bt,on,Es],encapsulation:2})),t})();function pN(t,n){if(1&t&&(r.\u0275\u0275text(0," Template for: "),r.\u0275\u0275elementStart(1,"strong"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()),2&t){const e=n.item;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.name)}}let fN=(()=>{class t{constructor(){A(this,"index",0),A(this,"heroes",[{name:"Spiderman"},{name:"Wolverine"},{name:"Iron man"}]),A(this,"activeHero",this.heroes[this.index]),A(this,"javascript1","import { SelectableListModule } from '@acpaas-ui/ngx-selectable-list';\n\n@NgModule({\n\timports: [\n\t\tSelectableListModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"javascript2","public index = 0;\n\npublic heroes = [\n\t{ name: 'spiderman' },\n\t{ name: 'wolverine' },\n\t{ name: 'ironman' }\n];\n\npublic activeHero = this.heroes[this.index];\n\npublic onSelect(item) {\n\tthis.index = this.heroes.findIndex(hero => hero.name === item.name);\n\tthis.activeHero = item;\n}"),A(this,"html",'<h4>Select your hero</h4>\n<aui-selectable-list [items]="heroes" [index]="index" (selected)="onSelect($event)">\n   <ng-template let-item="item">\n\t   Template for: <strong>{{ item.name }}</strong>\n   </ng-template>\n</aui-selectable-list>\n<p><strong>Active hero</strong>: {{ activeHero.name }}</p>')}onSelect(e){this.index=this.heroes.findIndex(i=>i.name===e.name),this.activeHero=e}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:17,vars:6,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-l"],[1,"h4","u-margin-bottom"],[3,"index","items","selected"],[1,"u-margin-top"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Selectable list"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",3),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1)(9,"h3",4),r.\u0275\u0275text(10,"Select your hero"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"aui-selectable-list",5),r.\u0275\u0275listener("selected",function(m){return i.onSelect(m)}),r.\u0275\u0275template(12,pN,3,1,"ng-template"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"p",6)(14,"strong"),r.\u0275\u0275text(15,"Active hero"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(16),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.javascript1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.javascript2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.html),r.\u0275\u0275advance(4),r.\u0275\u0275property("index",i.index)("items",i.heroes),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate1(": ",i.activeHero.name,""))},dependencies:[tr,dN],encapsulation:2})),t})(),mN=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"h3","u-margin-bottom"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Forms"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(2,"router-outlet"))},dependencies:[Ju],encapsulation:2})),t})();class gN extends Vg.w{constructor(n,e){super()}schedule(n,e=0){return this}}let JM=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,l){return new this.SchedulerAction(this,e).schedule(l,i)}}return t.now=()=>Date.now(),t})();class Df extends JM{constructor(n,e=JM.now){super(n,()=>Df.delegate&&Df.delegate!==this?Df.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,e=0,i){return Df.delegate&&Df.delegate!==this?Df.delegate.schedule(n,e,i):super.schedule(n,e,i)}flush(n){const{actions:e}=this;if(this.active)return void e.push(n);let i;this.active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this.active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const yN=new Df(class _N extends gN{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,l=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(l,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(l,this.id,e),this}requestAsyncId(n,e,i=0){return setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let l,i=!1;try{this.work(n)}catch(m){i=!0,l=!!m&&m||new Error(m)}if(i)return this.unsubscribe(),l}_unsubscribe(){const n=this.id,e=this.scheduler,i=e.actions,l=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==l&&i.splice(l,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null}});class bN{constructor(n,e){this.dueTime=n,this.scheduler=e}call(n,e){return e.subscribe(new xN(n,this.dueTime,this.scheduler))}}class xN extends ys.L{constructor(n,e,i){super(n),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(wN,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function wN(t){t.debouncedNext()}function Uy(t){var n=this.__data__=new P1(t);this.size=n.size}Uy.prototype.clear=function CN(){this.__data__=new P1,this.size=0},Uy.prototype.delete=function EN(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},Uy.prototype.get=function DN(t){return this.__data__.get(t)},Uy.prototype.has=function IN(t){return this.__data__.has(t)},Uy.prototype.set=function LN(t,n){var e=this.__data__;if(e instanceof P1){var i=e.__data__;if(!e0||i.length<199)return i.push([t,n]),this.size=++e.size,this;e=this.__data__=new L1(i)}return e.set(t,n),this.size=e.size,this};const j1=Uy;function U1(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new L1;++n<e;)this.add(t[n])}U1.prototype.add=U1.prototype.push=function RN(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},U1.prototype.has=function NN(t){return this.__data__.has(t)};const BN=U1,jN=function VN(t,n){for(var e=-1,i=null==t?0:t.length;++e<i;)if(n(t[e],e,t))return!0;return!1},HN=function UN(t,n){return t.has(n)};const eI=function ZN(t,n,e,i,l,m){var C=1&e,F=t.length,K=n.length;if(F!=K&&!(C&&K>F))return!1;var le=m.get(t),xe=m.get(n);if(le&&xe)return le==n&&xe==t;var Ae=-1,et=!0,Qe=2&e?new BN:void 0;for(m.set(t,n),m.set(n,t);++Ae<F;){var yt=t[Ae],At=n[Ae];if(i)var Nt=C?i(At,yt,Ae,n,t,m):i(yt,At,Ae,t,n,m);if(void 0!==Nt){if(Nt)continue;et=!1;break}if(Qe){if(!jN(n,function(Gt,Tn){if(!HN(Qe,Tn)&&(yt===Gt||l(yt,Gt,e,i,m)))return Qe.push(Tn)})){et=!1;break}}else if(yt!==At&&!l(yt,At,e,i,m)){et=!1;break}}return m.delete(t),m.delete(n),et},H1=hh.Uint8Array,YN=function qN(t){var n=-1,e=Array(t.size);return t.forEach(function(i,l){e[++n]=[l,i]}),e},QN=function KN(t){var n=-1,e=Array(t.size);return t.forEach(function(i){e[++n]=i}),e};var tI=rd?rd.prototype:void 0,DT=tI?tI.valueOf:void 0;const nI=function f3(t,n){for(var e=-1,i=n.length,l=t.length;++e<i;)t[l+e]=n[e];return t},iI=function m3(t,n,e){var i=n(t);return Cf(t)?i:nI(i,e(t))},rI=function y3(){return[]};var b3=Object.prototype.propertyIsEnumerable,oI=Object.getOwnPropertySymbols,x3=oI?function(t){return null==t?[]:(t=Object(t),function g3(t,n){for(var e=-1,i=null==t?0:t.length,l=0,m=[];++e<i;){var C=t[e];n(C,e,t)&&(m[l++]=C)}return m}(oI(t),function(n){return b3.call(t,n)}))}:rI;const MT=x3;const sI=function E3(t){return Sf(t)&&"[object Arguments]"==Oy(t)};var aI=Object.prototype,T3=aI.hasOwnProperty,D3=aI.propertyIsEnumerable,M3=sI(function(){return arguments}())?sI:function(t){return Sf(t)&&T3.call(t,"callee")&&!D3.call(t,"callee")};const I3=M3;var lI="object"==typeof exports&&exports&&!exports.nodeType&&exports,cI=lI&&"object"==typeof module&&module&&!module.nodeType&&module,uI=cI&&cI.exports===lI?hh.Buffer:void 0;const $1=(uI?uI.isBuffer:void 0)||function P3(){return!1};var Io={};Io["[object Float32Array]"]=Io["[object Float64Array]"]=Io["[object Int8Array]"]=Io["[object Int16Array]"]=Io["[object Int32Array]"]=Io["[object Uint8Array]"]=Io["[object Uint8ClampedArray]"]=Io["[object Uint16Array]"]=Io["[object Uint32Array]"]=!0,Io["[object Arguments]"]=Io["[object Array]"]=Io["[object ArrayBuffer]"]=Io["[object Boolean]"]=Io["[object DataView]"]=Io["[object Date]"]=Io["[object Error]"]=Io["[object Function]"]=Io["[object Map]"]=Io["[object Number]"]=Io["[object Object]"]=Io["[object RegExp]"]=Io["[object Set]"]=Io["[object String]"]=Io["[object WeakMap]"]=!1;const IT=function az(t){return function(n){return t(n)}};var hI="object"==typeof exports&&exports&&!exports.nodeType&&exports,o0=hI&&"object"==typeof module&&module&&!module.nodeType&&module,PT=o0&&o0.exports===hI&&PM.process;const Hy=function(){try{return o0&&o0.require&&o0.require("util").types||PT&&PT.binding&&PT.binding("util")}catch{}}();var dI=Hy&&Hy.isTypedArray;const pI=dI?IT(dI):function oz(t){return Sf(t)&&BM(t.length)&&!!Io[Oy(t)]};var dz=Object.prototype.hasOwnProperty;const fI=function pz(t,n){var e=Cf(t),i=!e&&I3(t),l=!e&&!i&&$1(t),m=!e&&!i&&!l&&pI(t),C=e||i||l||m,F=C?function w3(t,n){for(var e=-1,i=Array(t);++e<t;)i[e]=n(e);return i}(t.length,String):[],K=F.length;for(var le in t)(n||dz.call(t,le))&&(!C||!("length"==le||l&&("offset"==le||"parent"==le)||m&&("buffer"==le||"byteLength"==le||"byteOffset"==le)||VM(le,K)))&&F.push(le);return F};var fz=Object.prototype;const AT=function mz(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||fz)},mI=function gz(t,n){return function(e){return t(n(e))}},yz=mI(Object.keys,Object);var bz=Object.prototype.hasOwnProperty;const LT=function Cz(t){return bT(t)?fI(t):function xz(t){if(!AT(t))return yz(t);var n=[];for(var e in Object(t))bz.call(t,e)&&"constructor"!=e&&n.push(e);return n}(t)},kT=function Sz(t){return iI(t,LT,MT)};var Dz=Object.prototype.hasOwnProperty;const OT=bg(hh,"DataView"),RT=bg(hh,"Promise"),FT=bg(hh,"Set"),NT=bg(hh,"WeakMap");var gI="[object Map]",_I="[object Promise]",yI="[object Set]",vI="[object WeakMap]",bI="[object DataView]",Rz=vg(OT),Fz=vg(e0),Nz=vg(RT),zz=vg(FT),Bz=vg(NT),xg=Oy;(OT&&xg(new OT(new ArrayBuffer(1)))!=bI||e0&&xg(new e0)!=gI||RT&&xg(RT.resolve())!=_I||FT&&xg(new FT)!=yI||NT&&xg(new NT)!=vI)&&(xg=function(t){var n=Oy(t),e="[object Object]"==n?t.constructor:void 0,i=e?vg(e):"";if(i)switch(i){case Rz:return bI;case Fz:return gI;case Nz:return _I;case zz:return yI;case Bz:return vI}return n});const s0=xg;var xI="[object Arguments]",wI="[object Array]",G1="[object Object]",CI=Object.prototype.hasOwnProperty;const Hz=function Uz(t,n,e,i,l,m){var C=Cf(t),F=Cf(n),K=C?wI:s0(t),le=F?wI:s0(n),xe=(K=K==xI?G1:K)==G1,Ae=(le=le==xI?G1:le)==G1,et=K==le;if(et&&$1(t)){if(!$1(n))return!1;C=!0,xe=!1}if(et&&!xe)return m||(m=new j1),C||pI(t)?eI(t,n,e,i,l,m):function d3(t,n,e,i,l,m,C){switch(e){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=n.byteLength||!m(new H1(t),new H1(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return M1(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var F=YN;case"[object Set]":if(F||(F=QN),t.size!=n.size&&!(1&i))return!1;var le=C.get(t);if(le)return le==n;i|=2,C.set(t,n);var xe=eI(F(t),F(n),i,l,m,C);return C.delete(t),xe;case"[object Symbol]":if(DT)return DT.call(t)==DT.call(n)}return!1}(t,n,K,e,i,l,m);if(!(1&e)){var Qe=xe&&CI.call(t,"__wrapped__"),yt=Ae&&CI.call(n,"__wrapped__");if(Qe||yt){var At=Qe?t.value():t,Nt=yt?n.value():n;return m||(m=new j1),l(At,Nt,e,i,m)}}return!!et&&(m||(m=new j1),function Mz(t,n,e,i,l,m){var C=1&e,F=kT(t),K=F.length;if(K!=kT(n).length&&!C)return!1;for(var Ae=K;Ae--;){var et=F[Ae];if(!(C?et in n:Dz.call(n,et)))return!1}var Qe=m.get(t),yt=m.get(n);if(Qe&&yt)return Qe==n&&yt==t;var At=!0;m.set(t,n),m.set(n,t);for(var Nt=C;++Ae<K;){var Gt=t[et=F[Ae]],Tn=n[et];if(i)var Xi=C?i(Tn,Gt,et,n,t,m):i(Gt,Tn,et,t,n,m);if(!(void 0===Xi?Gt===Tn||l(Gt,Tn,e,i,m):Xi)){At=!1;break}Nt||(Nt="constructor"==et)}if(At&&!Nt){var Fi=t.constructor,Cr=n.constructor;Fi!=Cr&&"constructor"in t&&"constructor"in n&&!("function"==typeof Fi&&Fi instanceof Fi&&"function"==typeof Cr&&Cr instanceof Cr)&&(At=!1)}return m.delete(t),m.delete(n),At}(t,n,e,i,l,m))},$z=function SI(t,n,e,i,l){return t===n||(null==t||null==n||!Sf(t)&&!Sf(n)?t!=t&&n!=n:Hz(t,n,e,i,SI,l))},Zz=function Gz(t,n){return $z(t,n)};let EI=(()=>{class t{constructor(){A(this,"matchItemWithSearchString",(e,i)=>String(e).toLowerCase().indexOf(i.toLowerCase())>-1)}search(e,i={}){const l=i.hasOwnProperty("query")?i.query:"",m=i.hasOwnProperty("minLength")?i.minLength:0,C=i.hasOwnProperty("key")?i.key:"";return!l&&i.showAllByDefault||l.length<m?[...e]:[...e].filter(F=>C&&!F.hasOwnProperty(C)?console.error(`"${C}" does not exist in item ${JSON.stringify(F,null,2)}`):this.matchItemWithSearchString(C?F[C]:F,l))}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})();function Wz(t,n){if(1&t&&r.\u0275\u0275element(0,"span",6),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("innerHTML",i.formatLabel(e),r.\u0275\u0275sanitizeHtml)}}function qz(t,n){}const Yz=function(t){return{item:t}};function Kz(t,n){if(1&t&&r.\u0275\u0275template(0,qz,0,0,"ng-template",7),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,Yz,e))("ngTemplateOutlet",i.template)}}function Qz(t,n){}const Xz=function(t){return{$implicit:t}};function Jz(t,n){if(1&t&&r.\u0275\u0275template(0,Qz,0,0,"ng-template",7),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,Xz,e))("ngTemplateOutlet",i.itemTemplate)}}function eB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li",2),r.\u0275\u0275listener("click",function(){const m=r.\u0275\u0275restoreView(e).$implicit,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.selectItem(m))}),r.\u0275\u0275elementStart(1,"a",3),r.\u0275\u0275template(2,Wz,1,1,"span",4),r.\u0275\u0275template(3,Kz,1,4,null,5),r.\u0275\u0275template(4,Jz,1,4,null,5),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.index,i=r.\u0275\u0275nextContext();r.\u0275\u0275attribute("aria-selected",e===i.index),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",e===i.index?"is-active":""),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.template&&!i.itemTemplate),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.template),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.itemTemplate)}}let tB=(()=>{class t{constructor(){this.index=0,this.selected=new r.EventEmitter}selectItem(e){this.selected.emit(e)}formatLabel(e){const i=this.label?e[this.label]:e;if(!this.search)return i;const l=new RegExp(this.search,"ig");return i.replace(l,"<strong>"+this.search+"</strong>")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["aui-selectable-list"]],contentQueries:function(e,i,l){if(1&e&&r.\u0275\u0275contentQuery(l,r.TemplateRef,7),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.template=m.first)}},inputs:{items:"items",index:"index",search:"search",label:"label",itemTemplate:"itemTemplate"},outputs:{selected:"selected"},decls:2,vars:1,consts:[[1,"aui-selectable-list","a-list","a-list--lined","a-list--flushed"],["class","a-list__item",3,"click",4,"ngFor","ngForOf"],[1,"a-list__item",3,"click"],[1,"a-list__content",3,"ngClass"],["class","a-list__text",3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"a-list__text",3,"innerHTML"],[3,"ngTemplateOutletContext","ngTemplateOutlet"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"ul",0),r.\u0275\u0275template(1,eB,5,5,"li",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",i.items))},dependencies:[Ne,bt,on,Es],encapsulation:2}),t})(),nB=(()=>{class t{constructor(){this.keyArrowUp=new r.EventEmitter,this.keyArrowDown=new r.EventEmitter,this.keyEnter=new r.EventEmitter,this.keyEscape=new r.EventEmitter}onKeyDown(e){switch(e.key){case"ArrowUp":e.preventDefault(),this.keyArrowUp.emit(e);break;case"ArrowDown":e.preventDefault(),this.keyArrowDown.emit(e);break;case"Enter":this.keyEnter.emit(e);break;case"Escape":this.keyEscape.emit(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.\u0275\u0275defineDirective({type:t,selectors:[["","auiSelectableActions",""]],hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("keydown",function(m){return i.onKeyDown(m)})},outputs:{keyArrowUp:"keyArrowUp",keyArrowDown:"keyArrowDown",keyEnter:"keyEnter",keyEscape:"keyEscape"},exportAs:["auiSelectableActions"]}),t})(),iB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[Ri]}),t})();function rB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",7),r.\u0275\u0275element(1,"span",8),r.\u0275\u0275elementStart(2,"span",9),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(e.loadingText)}}function oB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",10),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.searchIncentiveText)}}function sB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",10),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.noResultsText)}}function aB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-selectable-list",11),r.\u0275\u0275listener("selected",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(m.onSelect(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("index",e.index)("itemTemplate",e.template)("items",e.results)("label",e.label)("search",e.query)}}function lB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",3),r.\u0275\u0275template(1,rB,4,1,"span",4),r.\u0275\u0275template(2,oB,2,1,"span",5),r.\u0275\u0275template(3,sB,2,1,"span",5),r.\u0275\u0275template(4,aB,1,5,"aui-selectable-list",6),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.focused&&e.loadingText&&e.searching),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.focused&&e.searchIncentiveText&&!e.searching&&!e.query&&!e.results.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.focused&&e.noResultsText&&!e.searching&&e.query&&!e.results.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.results.length>0&&!(e.focused&&e.loadingText&&e.searching))}}let cB=(()=>{class t{constructor(e,i){A(this,"ref",void 0),A(this,"searchService",void 0),A(this,"id",void 0),A(this,"placeholder",void 0),A(this,"description",void 0),A(this,"inputLabel",void 0),A(this,"results",[]),A(this,"data",[]),A(this,"remote",!1),A(this,"minCharacters",0),A(this,"clearInvalid",!1),A(this,"searchIncentiveText",void 0),A(this,"loadingText",void 0),A(this,"noResultsText",void 0),A(this,"showAllByDefault",!1),A(this,"autoComplete","off"),A(this,"label",void 0),A(this,"value",void 0),A(this,"search",new r.EventEmitter),A(this,"select",new r.EventEmitter),A(this,"flyout",void 0),A(this,"flyoutZone",void 0),A(this,"template",void 0),A(this,"query",""),A(this,"index",-1),A(this,"selectedItem",null),A(this,"searching",!1),A(this,"focused",!1),A(this,"isDisabled",!1),A(this,"remoteValue",!1),A(this,"updateModel",l=>{}),this.ref=e,this.searchService=i}writeValue(e=""){if(this.value){const i=this.data.find(l=>l[this.value]===e);if(i)return this.query=i[this.label];this.remote&&e&&(this.remoteValue=!0)}this.query=e}registerOnChange(e){this.updateModel=e}registerOnTouched(){}setDisabledState(e){this.isDisabled=e}ngOnInit(){Array.isArray(this.data)&&this.data.length>0&&!this.query&&this.showAllByDefault&&(this.results=[...this.data])}ngOnChanges(e){if(!e)return;const i=zl(e,"data.currentValue",[]);Zz(i,zl(e,"data.previousValue",[]))||(this.remote?this.remoteSearch():this.localSearch()),e.results&&e.results.currentValue&&(this.searching=!1)}propagateChange(e){if(this.query=null!==e?this.label?e[this.label]:e:"",this.select.emit(e),!e)return;const i=this.value?this.value:this.label?this.label:null;this.updateModel(i?e[i]||"":e),this.selectedItem=e}doSearch(){this.index=-1,this.searching=!0,this.remote?this.search.emit(this.query):this.localSearch(),this.openFlyout()}onSelect(e){this.propagateChange(e),this.closeFlyout()}onFlyoutClosed(){return this.index>=0&&1===this.results.length?this.onSelect(this.results[0]):!this.query&&this.index<0?this.onSelect(null):void(this.clearInvalid&&this.query&&!this.results.length&&this.index<0&&(this.query=this.selectedItem?this.label?this.selectedItem[this.label]:this.selectedItem:""))}onKeyArrowDown(){this.index<this.results.length-1&&this.scrollList(1),this.openFlyout()}onKeyArrowUp(){this.index>=0&&this.scrollList(-1)}onKeyEnter(e){e.preventDefault(),this.propagateChange(this.index>=0?this.results[this.index]:this.query),this.closeFlyout()}onKeyEscape(){this.closeFlyout()}onFocus(){this.focused=!0,this.openFlyout()}openFlyout(){this.flyout&&this.flyout.open()}closeFlyout(){this.flyout&&this.flyout.close(),this.focused=!1}localSearch(){this.results=this.searchService.search(this.data,{minLength:this.minCharacters,key:this.label,query:this.query,showAllByDefault:this.showAllByDefault}),1===this.results.length&&this.query===this.results[0][this.label]&&(this.index=0),this.searching=!1}remoteSearch(){if(!this.remoteValue||!this.data)return;const e=this.data.find(i=>this.value?i[this.value]===this.query:i===this.query);this.query=e?this.label?e[this.label]:e:"",this.remoteValue=!1}scrollList(e){if(this.index+=e,!this.flyoutZone)return;const i=this.flyoutZone.element.getElementsByTagName("li"),l=i[1]?i[1].offsetHeight:i[0].offsetHeight;this.flyoutZone.element.scrollTop=this.index*l-this.flyoutZone.element.offsetHeight/l/2*l}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(EI))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-auto-complete"]],contentQueries:function(e,i,l){if(1&e&&r.\u0275\u0275contentQuery(l,r.TemplateRef,7),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.template=m.first)}},viewQuery:function(e,i){if(1&e&&(r.\u0275\u0275viewQuery(od,7),r.\u0275\u0275viewQuery(Tf,7)),2&e){let l;r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.flyout=l.first),r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.flyoutZone=l.first)}},inputs:{id:"id",placeholder:"placeholder",description:"description",inputLabel:"inputLabel",results:"results",data:"data",remote:"remote",minCharacters:"minCharacters",clearInvalid:"clearInvalid",searchIncentiveText:"searchIncentiveText",loadingText:"loadingText",noResultsText:"noResultsText",showAllByDefault:"showAllByDefault",autoComplete:"autoComplete",label:"label",value:"value"},outputs:{search:"search",select:"select"},features:[r.\u0275\u0275ProvidersFeature([{provide:qo,useExisting:(0,r.forwardRef)(()=>t),multi:!0}]),r.\u0275\u0275NgOnChangesFeature],decls:3,vars:7,consts:[["aria-haspopup","listbox","auiFlyout","",1,"m-flyout","m-flyout--scrollable","m-flyout--full","o-auto-complete",3,"toggleClick","closed"],["aria-autocomplete","list","auiFlyoutAction","","auiSelectableActions","","type","text",1,"a-input",3,"ngModel","disabled","id","placeholder","autocomplete","focus","keyArrowDown","keyArrowUp","keyEnter","keyEscape","ngModelChange"],["auiFlyoutZone","",4,"ngIf"],["auiFlyoutZone",""],["class","a-spinner a-spinner--s u-margin-xs","role","alert",4,"ngIf"],["class","o-auto-complete__info u-text-light u-margin-xs",4,"ngIf"],[3,"index","itemTemplate","items","label","search","selected",4,"ngIf"],["role","alert",1,"a-spinner","a-spinner--s","u-margin-xs"],[1,"a-spinner__circle"],[1,"a-spinner__text"],[1,"o-auto-complete__info","u-text-light","u-margin-xs"],[3,"index","itemTemplate","items","label","search","selected"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275listener("closed",function(){return i.onFlyoutClosed()}),r.\u0275\u0275elementStart(1,"input",1),r.\u0275\u0275listener("focus",function(){return i.onFocus()})("keyArrowDown",function(){return i.onKeyArrowDown()})("keyArrowUp",function(){return i.onKeyArrowUp()})("keyEnter",function(m){return i.onKeyEnter(m)})("keyEscape",function(){return i.onKeyEscape()})("ngModelChange",function(m){return i.query=m})("ngModelChange",function(){return i.doSearch()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,lB,5,4,"div",2),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275property("toggleClick",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngModel",i.query)("disabled",!!i.isDisabled||null)("id",i.id)("placeholder",i.placeholder)("autocomplete",i.autoComplete),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.isDisabled))},dependencies:[on,cl,Os,oc,Vy,Tf,od,tB,nB],styles:[".o-auto-complete[_ngcontent-%COMP%], .o-auto-complete__info[_ngcontent-%COMP%]{display:block}"]})),t})();function uB(t,n){if(1&t&&r.\u0275\u0275element(0,"div",19),2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("innerHTML",i.formatLabel(e),r.\u0275\u0275sanitizeHtml)}}function hB(t,n){if(1&t&&r.\u0275\u0275element(0,"div",19),2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275property("innerHTML",i.formatLabel(e),r.\u0275\u0275sanitizeHtml)}}let dB=(()=>{class t{constructor(){A(this,"autocompleteImportExample","import { AutoCompleteModule } from '@acpaas-ui/ngx-forms';\n\n@NgModule({\n\timports: [\n\t\tAutoCompleteModule,\n\t]\n});\n\nexport class AppModule {};"),A(this,"autocompleteExampleJS1","public heroList = [\n\t{name: 'Batman'},\n\t{name: 'Wonder Woman'},\n\t{name: 'Wolverine'},\n\t{name: 'Iron Man'},\n\t{name: 'Deadpool'},\n];\n\npublic setSelectedUser(hero): void {\n\t// Do something\n}"),A(this,"autocompleteExampleHTML1",'\n\t\t<aui-auto-complete\n\t\t\tdata-id="hero-names"\n\t\t\tplaceholder="Choose your hero\u2026"\n      description="Description"\n\t\t\tinputLabel="Hero"\n\t\t\tvalue=""\n\t\t\tminCharacters = "3"\n\t\t\tclearInvalid="true"\n\t\t\tshowAllByDefault="true"\n\t\t\t[data]="heroList"\n\t\t\t(select)="setSelectedItem($event)">\n\t\t</aui-auto-complete>\n'),A(this,"autocompleteExampleJS2","public results = [];\npublic heroList = [\n\t{name: 'Batman'},\n\t{name: 'Wonder Woman'},\n\t{name: 'Wolverine'},\n\t{name: 'Iron Man'},\n\t{name: 'Deadpool'},\n];\npublic searchValue = '';\npublic selectedItem = '';\n\npublic searchItems(search: string): void {\n\tthis.searchValue = search;\n\t// Do search\n\tthis.debouncer.next(search);\n}\n\npublic setSelectedItem(hero: {name}): void {\n\tthis.selectedItem = hero;\n}\n\npublic formatLabel(input: any) {\n\tconst inputString = input.name;\n\n\tif (!this.searchValue) {\n\t\treturn inputString;\n\t}\n\n\t// Highlight searchValue in result\n\tconst regEx = new RegExp(this.searchValue, 'ig');\n\tconst inputStringHighlighted = (inputString.replace(regEx, '<strong>' + this.searchValue + '</strong>'));\n  return `<aui-icon name=\"ai-single-neutral\" className=\"u-text-light u-margin-right-xs\"></aui-icon>${inputStringHighlighted}`;\n}"),A(this,"autocompleteExampleHTML2",'\n\t\t<aui-auto-complete\n\t\t\tdata-id="hero"\n\t\t\tplaceholder="Choose your hero\u2026"\n      description="Description"\n\t\t\tremote="true"\n\t\t\t[results]="results"\n\t\t\tinputLabel="Hero"\n      label="name"\n\t\t\tkey="id"\n\t\t\tloadingText = "Loading\u2026"\n\t\t\tnoResultsText="No results found"\n\t\t\tsearchIncentiveText="Type one or more keywords to start searching"\n\t\t\t(search)="searchItems($event)"\n\t\t\t(select)="setSelectedItem($event)">\n\t\t\t<ng-template let-item >\n\t\t\t\t<div class="has-icon-left" [innerHTML]="formatLabel(item)"></div>\n\t\t\t</ng-template>\n\t\t</aui-auto-complete>\n'),A(this,"results",[]),A(this,"heroList",[{name:"Batman"},{name:"Wonder Woman"},{name:"Wolverine"},{name:"Iron Man"},{name:"Deadpool"}]),A(this,"disabledModel","Batman"),A(this,"isDisabled",!0),A(this,"searchValue",""),A(this,"selectedItem1","-"),A(this,"selectedItem2","-"),A(this,"debouncer",new pi.xQ),A(this,"componentDestroyed$",new pi.xQ)}ngOnInit(){this.debouncer.pipe(Nl(this.componentDestroyed$),function vN(t,n=yN){return e=>e.lift(new bN(t,n))}(1e3)).subscribe(e=>{this.results=e?this.heroList.filter(i=>i.name.localeCompare(e,"en",{sensitivity:"base"})):[]})}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}searchItems(e){this.searchValue=e,this.debouncer.next(e)}setSelectedItem1(e){this.selectedItem1=e&&e.name?e.name:"-"}setSelectedItem2(e){this.selectedItem2=e&&e.name?e.name:"-"}formatLabel(e){const i=e.name;if(!this.searchValue)return i;const l=new RegExp(this.searchValue,"ig");return`<aui-icon name="ai-single-neutral" className="u-text-light u-margin-right-xs"></aui-icon>${i.replace(l,"<strong>"+this.searchValue+"</strong>")}`}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:51,vars:13,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom-l"],[3,"codeSnippet"],[1,"h5","u-margin-bottom"],[1,"u-margin-bottom"],[1,"a-input"],["for","hero-names",1,"a-input__label"],[1,"a-input__wrapper"],["clearInvalid","true","data-id","hero-names","label","name","minCharacters","3","placeholder","Choose your hero\u2026","showAllByDefault","true","value","",3,"data","select"],[1,"u-margin-top"],["for","hero",1,"a-input__label"],["data-id","hero","key","id","label","name","loadingText","Loading\u2026","noResultsText","No results found","placeholder","Choose your hero\u2026","remote","true","searchIncentiveText","Type one or more keywords to start searching",3,"results","search","select"],[1,"u-margin-bottom-3xl"],[1,"a-input","u-margin-bottom"],["for","hero-disabled",1,"a-input__label"],["data-id","hero-disabled","key","id","label","name","loadingText","Loading\u2026","noResultsText","No results found","placeholder","Choose your hero...","remote","true","searchIncentiveText","Type one or more keywords to start searching",3,"ngModel","disabled","results","search","select","ngModelChange"],[1,"a-input__checkbox"],["id","isDisabled","type","checkbox",3,"ngModel","ngModelChange"],["for","isDisabled"],[1,"has-icon-left",3,"innerHTML"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Autocomplete"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"h4",3),r.\u0275\u0275text(5,"Local search"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",4),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",4),r.\u0275\u0275element(9,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",1)(11,"div",5)(12,"label",6),r.\u0275\u0275text(13,"Hero"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",7)(15,"aui-auto-complete",8),r.\u0275\u0275listener("select",function(m){return i.setSelectedItem1(m)}),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(16,"p",9)(17,"strong"),r.\u0275\u0275text(18,"Selected hero"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(19),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(20,"h4",3),r.\u0275\u0275text(21,"Remote search with template"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",4),r.\u0275\u0275element(23,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"div",4),r.\u0275\u0275element(25,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"div",4)(27,"div",5)(28,"label",10),r.\u0275\u0275text(29,"Hero"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(30,"div",7)(31,"aui-auto-complete",11),r.\u0275\u0275listener("search",function(m){return i.searchItems(m)})("select",function(m){return i.setSelectedItem2(m)}),r.\u0275\u0275template(32,uB,1,1,"ng-template"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(33,"p",9)(34,"strong"),r.\u0275\u0275text(35,"Selected hero"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(36),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(37,"h4",3),r.\u0275\u0275text(38,"Disabled state"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(39,"div",12)(40,"div",13)(41,"label",14),r.\u0275\u0275text(42,"Hero"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(43,"div",7)(44,"aui-auto-complete",15),r.\u0275\u0275listener("search",function(m){return i.searchItems(m)})("select",function(m){return i.setSelectedItem2(m)})("ngModelChange",function(m){return i.disabledModel=m}),r.\u0275\u0275template(45,hB,1,1,"ng-template"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(46,"div",5)(47,"div",16)(48,"input",17),r.\u0275\u0275listener("ngModelChange",function(m){return i.isDisabled=m}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(49,"label",18),r.\u0275\u0275text(50,"Toggle disabled state"),r.\u0275\u0275elementEnd()()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.autocompleteImportExample),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.autocompleteExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.autocompleteExampleHTML1),r.\u0275\u0275advance(6),r.\u0275\u0275property("data",i.heroList),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(": ",i.selectedItem1,""),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.autocompleteExampleJS2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.autocompleteExampleHTML2),r.\u0275\u0275advance(6),r.\u0275\u0275property("results",i.results),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate1(": ",i.selectedItem2,""),r.\u0275\u0275advance(8),r.\u0275\u0275property("ngModel",i.disabledModel)("disabled",i.isDisabled)("results",i.results),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngModel",i.isDisabled))},dependencies:[tr,cB,cs,Os,oc],encapsulation:2})),t})();const $y="CALENDAR_VIEW_MONTH",Z1="CALENDAR_VIEW_YEAR",W1="CALENDAR_VIEW_DECENNIA";let a0=(()=>{class t{constructor(){this.months={}}getMonth(e,i){if(i&&(this.currentYear!==i&&(this.months={}),this.currentYear=i),this.months.hasOwnProperty(e))return[...this.months[e]];const l=new Date;l.setMonth(e,1),i&&l.setFullYear(i);const m=id.generateMonth(l,{startOfWeek:1,padding:!0,generatePadding:!0});return this.months[e]=m,[...m]}getMonthForDate(e){return this.getMonth(e.getMonth(),e.getFullYear())}getRangeForDate(e,i){return id.generateRange(e,i,{startOfWeek:1})}getRangesForDate(e,i){const l={startOfWeek:1},m=$r.updateMonth(e,e.getMonth()-1),C=$r.updateMonth(e,e.getMonth()+1);return{before:id.generateRange(m,i,l),current:id.generateRange(e,i,l),after:id.generateRange(C,i,l)}}getClosestDateForRange(e=new Date,i){const l=this.getRangeForDate(e,i);return $r.dateOutOfRange(e,l)?e:$r.closestDateForRange(e,l)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Gy=["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"],Zy=["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],wg=new r.InjectionToken("weekdayLabels"),Cg=new r.InjectionToken("monthLabels"),fB=function(t,n){return{"is-current":t,"is-selected":n}};function mB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"td")(1,"button",3),r.\u0275\u0275listener("click",function(l){const C=r.\u0275\u0275restoreView(e).$implicit,F=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(F.pickDate(l,C))}),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(2,fB,e===i.current,e===i.selectedYear)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e," ")}}function gB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275template(1,mB,3,5,"td",2),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e)}}let _B=(()=>{class t{constructor(){this.selectDate=new r.EventEmitter,this.years=[],this.selectedYear=-1,this.current=-1}ngOnInit(){this.current=(new Date).getFullYear()}ngOnChanges(e){const i=zl(e,"activeDate.currentValue"),l=zl(e,"activeDate.previousValue"),m=i instanceof Date?i.getFullYear():-1,C=l instanceof Date?l.getFullYear():-1;m>=0&&(C>m||C+17<m)&&this.updateYears(),this.selectedYear=this.selectedDate instanceof Date?this.selectedDate.getFullYear():-1}pickDate(e,i){e.stopPropagation();const l=new Date(this.activeDate);l.setFullYear(i),this.selectDate.emit(l)}updateYears(){const e=[],i=this.activeDate.getFullYear();for(let l=i;l<i+18;l+=1)e.push(l);this.years=k1(e,3)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar-decennia"]],inputs:{selectedDate:"selectedDate",activeDate:"activeDate"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:4,vars:1,consts:[[1,"m-datepicker__list"],[1,"m-datepicker__list-body"],[4,"ngFor","ngForOf"],["type","button",3,"ngClass","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"table")(2,"tbody",1),r.\u0275\u0275template(3,gB,2,1,"tr",2),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",i.years))},dependencies:[Ne,bt],encapsulation:2,changeDetection:0}),t})();function yB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"th",5)(1,"span",6),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"slice"),r.\u0275\u0275elementEnd()()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("title",e),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind3(3,2,e,0,2))}}const vB=function(t,n,e,i){return{"is-faded":t,"is-selected":n,"is-current":e,"is-unavailable":i}};function bB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"td")(1,"button",7),r.\u0275\u0275listener("click",function(l){const C=r.\u0275\u0275restoreView(e).$implicit,F=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(F.pickDate(l,C))}),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("disabled",!e.available)("ngClass",r.\u0275\u0275pureFunction4(3,vB,!e.date||e.padding,!e.padding&&i.selectedDate&&e.date===i.selectedDay&&i.selectedDay&&i.selectedDate.getFullYear()===i.activeDate.getFullYear(),!e.padding&&e.date===i.current,!e.available)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.date," ")}}function xB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275template(1,bB,3,8,"td",4),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e)}}let wB=(()=>{class t{constructor(e=Gy,i){this.moduleWeekdayLabels=e,this.calendarService=i,this.weekdayLabels=Gy,this.selectDate=new r.EventEmitter,this.dates=[],this.selectedDay=-1}ngOnInit(){this.weekdayLabels=this.weekdayLabels||this.moduleWeekdayLabels}ngOnChanges(e){const i=this.hasChanged(e,"selectedDate"),l=!!e.interval&&e.interval.currentValue!==e.interval.previousValue,m=this.hasChanged(e,"activeDate"),C=m&&!$r.datesAreEqual([e.activeDate.currentValue,e.activeDate.previousValue],"M"),F=this.selectedDate&&this.activeDate.getMonth()===this.selectedDate.getMonth();this.current=this.getCurrentDate(),this.selectedDay=F?this.selectedDate.getDate():-1;let K=[];if(!(i||l||m&&C))return;K=this.calendarService.getMonthForDate(this.activeDate);const le=this.calendarService.getRangesForDate(this.activeDate,this.range);this.dates=K.map(xe=>xe.map(Ae=>{const et=new Date;this.activeDate.setHours(et.getHours(),et.getMinutes(),et.getSeconds());const Qe=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),Ae.date);Ae.padding&&Qe.setMonth(Ae.date>20?this.activeDate.getMonth()-1:this.activeDate.getMonth()+1),Qe.setDate(Ae.date);const yt=this.dayIsAvailableForRange(Ae,le)&&(!this.interval||!this.interval.isInRange(Qe));return{...Ae,available:yt}}))}pickDate(e,i){e.stopPropagation();let l=new Date(this.activeDate);if(i.padding){const m=i.date>20?-1:1;l=$r.updateMonth(l,l.getMonth()+m)}this.selectDate.emit($r.updateDate(l,i.date))}hasChanged(e,i){const l=zl(e,`${i}.currentValue`),m=zl(e,`${i}.previousValue`),C=l instanceof Date?l.valueOf():0,F=m instanceof Date?m.valueOf():0;return!!C&&C!==F}getCurrentDate(){const e=new Date;return $r.datesAreEqual([this.activeDate,e],["M","Y"])?e.getDate():-1}dayIsAvailableForRange(e,i){if(!i)return!0;let l=i.current;return e.padding&&(l=e.date>20?i.before:i.after),l.indexOf(e.date)<0}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(wg),r.\u0275\u0275directiveInject(a0))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar-month"]],inputs:{selectedDate:"selectedDate",activeDate:"activeDate",range:"range",interval:"interval",weekdayLabels:"weekdayLabels"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:7,vars:2,consts:[[1,"m-datepicker__grid"],[1,"m-datepicker__grid-head"],["scope","col",4,"ngFor","ngForOf"],[1,"m-datepicker__grid-body"],[4,"ngFor","ngForOf"],["scope","col"],[1,"u-text-capitalize",3,"title"],["type","button",3,"disabled","ngClass","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"table")(2,"thead")(3,"tr",1),r.\u0275\u0275template(4,yB,4,6,"th",2),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(5,"tbody",3),r.\u0275\u0275template(6,xB,2,1,"tr",4),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(4),r.\u0275\u0275property("ngForOf",i.weekdayLabels),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",i.dates))},dependencies:[Ne,bt,pc],encapsulation:2,changeDetection:0}),t})();const CB=function(t,n){return{"is-current":t,"is-selected":n}};function SB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"td")(1,"button",3),r.\u0275\u0275listener("click",function(l){const C=r.\u0275\u0275restoreView(e).$implicit,F=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(F.pickDate(l,C))}),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"titlecase"),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(4,CB,e===i.current,e===i.monthLabels[i.selectedMonth])),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(3,2,e)," ")}}function EB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275template(1,SB,4,7,"td",2),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e)}}let TB=(()=>{class t{constructor(e=Zy){this.moduleMonthLabels=e,this.monthLabels=Zy,this.selectDate=new r.EventEmitter,this.selectedMonth=-1,this.current="",this.months=[]}ngOnChanges(e){const i=zl(e,"activeDate.currentValue"),l=i instanceof Date?i.getFullYear():-1,m=this.selectedDate&&this.selectedDate.getFullYear()===this.activeDate.getFullYear(),C=new Date;this.current=l===C.getFullYear()?this.monthLabels[C.getMonth()]:"",this.selectedMonth=m?this.selectedDate.getMonth():-1,e.monthLabels&&(this.monthLabels=this.monthLabels||this.moduleMonthLabels,this.months=k1(this.monthLabels,2))}pickDate(e,i){e.stopPropagation();let l=new Date(this.activeDate);l=$r.updateMonth(l,this.monthLabels.indexOf(i)),this.selectDate.emit(l)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Cg))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar-year"]],inputs:{selectedDate:"selectedDate",activeDate:"activeDate",monthLabels:"monthLabels"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:4,vars:1,consts:[[1,"m-datepicker__list"],[1,"m-datepicker__list-body"],[4,"ngFor","ngForOf"],["type","button",3,"ngClass","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"table")(2,"tbody",1),r.\u0275\u0275template(3,EB,2,1,"tr",2),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",i.months))},dependencies:[Ne,bt,$n],encapsulation:2,changeDetection:0}),t})();function DB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-calendar-month",10),r.\u0275\u0275listener("selectDate",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.pickDate(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("activeDate",e.activeDate)("range",e.range)("interval",e.interval)("selectedDate",e.selectedDate)("weekdayLabels",e.weekdayLabels)}}function MB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-calendar-year",11),r.\u0275\u0275listener("selectDate",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.pickDate(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("activeDate",e.activeDate)("monthLabels",e.monthLabels)("selectedDate",e.selectedDate)}}function IB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-calendar-decennia",12),r.\u0275\u0275listener("selectDate",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.pickDate(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("activeDate",e.activeDate)("selectedDate",e.selectedDate)}}let PB=(()=>{class t{constructor(e=Zy,i=Gy,l){this.moduleMonthLabels=e,this.moduleWeekdayLabels=i,this.calendarService=l,this.role="application",this.ariahidden="false",this.ariaPreviousLabels=["Ga naar vorige maand","Ga naar vorig jaar","Ga naar vorige 18 jaren"],this.ariaNextLabels=["Ga naar volgende maand","Ga naar volgend jaar","Ga naar volgende 18 jaren"],this.selectDate=new r.EventEmitter,this.CALENDAR_VIEW_MONTH=$y,this.CALENDAR_VIEW_YEAR=Z1,this.CALENDAR_VIEW_DECENNIA=W1,this.activeView=$y,this.headerLabel="",this.ariaPreviousLabel=this.ariaPreviousLabels[0],this.ariaNextLabel=this.ariaNextLabels[0]}ngOnInit(){this.initControl()}ngOnChanges(e){const i=e.selectedDate&&e.selectedDate.currentValue?e.selectedDate:null;if(typeof this.monthLabels<"u"&&i&&!$r.datesAreEqual(i.currentValue,i.previousValue))this.activeDate=this.selectedDate,this.updateHeaderLabel();else{let l=new Date;this.interval&&this.interval.isInRange(l)&&(l=this.interval.min),this.activeDate=$r.parseDate(l),this.initControl()}}updateActiveDate(e=0){const i=this.activeDate?new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),1):new Date;switch(this.activeView){case $y:i.setMonth(i.getMonth()+e);break;case Z1:i.setFullYear(i.getFullYear()+e);break;case W1:i.setFullYear(i.getFullYear()+18*e)}this.activeDate=i,this.updateHeaderLabel()}switchView(e=1){const i=[$y,Z1,W1],l=i.indexOf(this.activeView);let m=l+e>=i.length?0:l+e;m=m<0?i.length-1:m,this.activeView=i[m],this.selectedDate&&0===m&&1===e&&(this.activeDate=this.selectedDate),this.updateHeaderLabel()}updateHeaderLabel(){switch(this.activeView){case $y:this.headerLabel=this.monthLabels[this.activeDate.getMonth()]+" "+this.activeDate.getFullYear(),this.ariaPreviousLabel=this.ariaPreviousLabels[0],this.ariaNextLabel=this.ariaNextLabels[0];break;case Z1:this.headerLabel=String(this.activeDate.getFullYear()),this.ariaPreviousLabel=this.ariaPreviousLabels[1],this.ariaNextLabel=this.ariaNextLabels[1];break;case W1:const e=this.activeDate.getFullYear();this.headerLabel=`${e} - ${e+17}`,this.ariaPreviousLabel=this.ariaPreviousLabels[2],this.ariaNextLabel=this.ariaNextLabels[2]}}pickDate(e){const i=this.activeView===$y;this.selectDate.emit({date:e,complete:i}),i||(this.activeDate=e,this.switchView(-1))}initControl(){this.weekdayLabels=this.weekdayLabels||this.moduleWeekdayLabels,this.monthLabels=this.monthLabels||this.moduleMonthLabels,this.activeDate=this.calendarService.getClosestDateForRange(this.activeDate,this.range),this.selectedDate&&(this.activeDate=this.selectedDate,this.updateActiveDate()),this.updateHeaderLabel()}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Cg),r.\u0275\u0275directiveInject(wg),r.\u0275\u0275directiveInject(a0))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["aui-calendar"]],hostVars:2,hostBindings:function(e,i){2&e&&r.\u0275\u0275attribute("role",i.role)("aria-hidden",i.ariahidden)},inputs:{ariaPreviousLabels:"ariaPreviousLabels",ariaNextLabels:"ariaNextLabels",selectedDate:"selectedDate",range:"range",interval:"interval",weekdayLabels:"weekdayLabels",monthLabels:"monthLabels"},outputs:{selectDate:"selectDate"},features:[r.\u0275\u0275NgOnChangesFeature],decls:13,vars:8,consts:[[1,"m-datepicker__nav"],["type","button",1,"m-datepicker__nav-title",3,"click"],["name","ai-arrow-down-1"],[1,"m-datepicker__nav-pagination"],["type","button",1,"a-button","a-button--text","a-button--primary","has-icon",3,"click"],["name","ai-arrow-left-1"],["name","ai-arrow-right-1"],[3,"activeDate","range","interval","selectedDate","weekdayLabels","selectDate",4,"ngIf"],[3,"activeDate","monthLabels","selectedDate","selectDate",4,"ngIf"],[3,"activeDate","selectedDate","selectDate",4,"ngIf"],[3,"activeDate","range","interval","selectedDate","weekdayLabels","selectDate"],[3,"activeDate","monthLabels","selectedDate","selectDate"],[3,"activeDate","selectedDate","selectDate"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"button",1),r.\u0275\u0275listener("click",function(){return i.switchView()}),r.\u0275\u0275text(2),r.\u0275\u0275pipe(3,"titlecase"),r.\u0275\u0275element(4,"aui-icon",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",3)(6,"button",4),r.\u0275\u0275listener("click",function(){return i.updateActiveDate(-1)}),r.\u0275\u0275element(7,"aui-icon",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"button",4),r.\u0275\u0275listener("click",function(){return i.updateActiveDate(1)}),r.\u0275\u0275element(9,"aui-icon",6),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275template(10,DB,1,5,"aui-calendar-month",7),r.\u0275\u0275template(11,MB,1,3,"aui-calendar-year",8),r.\u0275\u0275template(12,IB,1,2,"aui-calendar-decennia",9)),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(3,6,i.headerLabel)," "),r.\u0275\u0275advance(4),r.\u0275\u0275attribute("aria-label",i.ariaPreviousLabel),r.\u0275\u0275advance(2),r.\u0275\u0275attribute("aria-label",i.ariaNextLabel),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.activeView===i.CALENDAR_VIEW_MONTH),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.activeView===i.CALENDAR_VIEW_YEAR),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.activeView===i.CALENDAR_VIEW_DECENNIA))},dependencies:[on,To,_B,wB,TB,$n],encapsulation:2,changeDetection:0}),t})(),AB=(()=>{class t{static forChild(e,i){return{ngModule:t,providers:[a0,{provide:wg,useValue:e},{provide:Cg,useValue:i}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({providers:[a0,{provide:wg,useValue:Gy},{provide:Cg,useValue:Zy}],imports:[Ri,ls]}),t})();const zT=new r.InjectionToken("errorLabels"),TI={ERRORS_INVALID_DATE:"INVALID_DATE",ERRORS_INVALID_RANGE:"INVALID_RANGE"};function kB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"label",6),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275propertyInterpolate("for",e.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.label)}}function OB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"small",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.description,"")}}function RB(t,n){1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"aui-icon",8),r.\u0275\u0275elementContainerEnd())}function FB(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"aui-icon",9),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("openOnFocus",!1),r.\u0275\u0275attribute("aria-label",e.ariaOpenDatepickerLabel)}}function NB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",10)(2,"aui-calendar",11),r.\u0275\u0275listener("selectDate",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.selectDateFromCalendar(l))}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementContainerEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("range",e.range)("selectedDate",e.selectedDate)("interval",e.interval)("weekdayLabels",e.weekdayLabels)("monthLabels",e.monthLabels)}}let zB=(()=>{class t{constructor(e=Zy,i=Gy,l=TI,m,C,F){A(this,"moduleMonthLabels",void 0),A(this,"moduleWeekdayLabels",void 0),A(this,"errorLabels",void 0),A(this,"calendarService",void 0),A(this,"formBuilder",void 0),A(this,"ref",void 0),A(this,"flyout",void 0),A(this,"id",void 0),A(this,"name",void 0),A(this,"placeholder","dd/mm/yyyy"),A(this,"label",void 0),A(this,"description",void 0),A(this,"range",void 0),A(this,"min",void 0),A(this,"max",void 0),A(this,"autocomplete",void 0),A(this,"weekdayLabels",void 0),A(this,"monthLabels",void 0),A(this,"ariaOpenDatepickerLabel","Open kalender"),A(this,"blur",new r.EventEmitter),A(this,"formControl",void 0),A(this,"selectedDate",void 0),A(this,"isDisabled",!1),A(this,"interval",void 0),A(this,"componentDestroyed$",new pi.xQ),A(this,"onChange",()=>{}),A(this,"onTouched",()=>{}),this.moduleMonthLabels=e,this.moduleWeekdayLabels=i,this.errorLabels=l,this.calendarService=m,this.formBuilder=C,this.ref=F}ngOnInit(){this.weekdayLabels=this.weekdayLabels||this.moduleWeekdayLabels,this.monthLabels=this.monthLabels||this.moduleMonthLabels,this.createInterval(),this.formControl=this.formBuilder.control({value:"",disabled:this.isDisabled}),this.formControl.valueChanges.pipe(Nl(this.componentDestroyed$)).subscribe(e=>{if(e){const i=e.split("/").reverse().join("-"),l=$r.parseDate(i,"yyyy-MM-dd");l?(this.selectedDate=l,this.onChange(l.toISOString())):this.onChange(e)}else this.selectedDate=null,this.onChange("")})}ngOnChanges(e){(e.min||e.max)&&this.createInterval()}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}createInterval(){!this.min&&!this.max||(this.interval=Ly.dateInterval(this.min?new Date(this.min):null,this.max?new Date(this.max):null).not().build())}writeValue(e){this.selectedDate="string"==typeof e?this.isISODateFormat(e)?new Date(e):$r.parseDate(e,"dd/MM/yyyy"):e;const i=this.selectedDate?this.formatDate(this.selectedDate):"";this.formControl.setValue(i)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e,this.formControl&&(e&&this.formControl.enabled?this.formControl.disable():!e&&this.formControl.disabled&&this.formControl.enable()),this.ref.markForCheck()}selectDateFromCalendar(e){e.complete&&(this.formControl.setValue(this.formatDate(e.date)),this.flyout.close())}formatDate(e){return $r.formatDate(e,"DD/MM/YYYY",{leadingZero:!0,monthLabels:this.monthLabels,weekdayLabels:this.weekdayLabels})}validate(e){if(""===e.value||null===e.value)return null;const i=$r.parseDate(e.value);return i?this.range&&this.range.length&&this.calendarService.getRangeForDate(i,this.range).indexOf(i.getDate())>=0?{range:this.errorLabels.ERRORS_INVALID_RANGE}:null:{format:this.errorLabels.ERRORS_INVALID_DATE}}handleBlur(e){this.blur.emit(e),this.onTouched(e)}isISODateFormat(e){return"string"==typeof e&&e.match(/\d{4}-\d{2}-\d{2}T.*/)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Cg),r.\u0275\u0275directiveInject(wg),r.\u0275\u0275directiveInject(zT),r.\u0275\u0275directiveInject(a0),r.\u0275\u0275directiveInject(Xh),r.\u0275\u0275directiveInject(r.ChangeDetectorRef))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-datepicker"]],viewQuery:function(e,i){if(1&e&&r.\u0275\u0275viewQuery(od,7),2&e){let l;r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.flyout=l.first)}},inputs:{id:"id",name:"name",placeholder:"placeholder",label:"label",description:"description",range:"range",min:"min",max:"max",autocomplete:"autocomplete",weekdayLabels:"weekdayLabels",monthLabels:"monthLabels",ariaOpenDatepickerLabel:"ariaOpenDatepickerLabel"},outputs:{blur:"blur"},features:[r.\u0275\u0275ProvidersFeature([{provide:qo,useExisting:(0,r.forwardRef)(()=>t),multi:!0},{provide:zo,useExisting:(0,r.forwardRef)(()=>t),multi:!0}]),r.\u0275\u0275NgOnChangesFeature],decls:8,vars:11,consts:[["aria-haspopup","grid","auiFlyout","",1,"aui-datepicker","a-input","has-icon-right"],["class","a-input__label",3,"for",4,"ngIf"],["class","a-input__description",4,"ngIf"],[1,"a-input__wrapper"],["label","Pick date","description","Description","type","text",3,"autocomplete","formControl","id","name","placeholder","blur"],[4,"ngIf"],[1,"a-input__label",3,"for"],[1,"a-input__description"],["name","ai-calendar"],["auiFlyoutAction","","name","ai-calendar","className","is-clickable","role","button","tabindex","0",3,"openOnFocus"],["auiFlyoutZone","","role","dialog",1,"m-datepicker","m-datepicker--fixed"],[3,"range","selectedDate","interval","weekdayLabels","monthLabels","selectDate"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,kB,2,2,"label",1),r.\u0275\u0275template(2,OB,2,1,"small",2),r.\u0275\u0275elementStart(3,"div",3)(4,"input",4),r.\u0275\u0275listener("blur",function(m){return i.handleBlur(m)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,RB,2,0,"ng-container",5),r.\u0275\u0275template(6,FB,2,2,"ng-container",5),r.\u0275\u0275template(7,NB,3,5,"ng-container",5),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.label),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.description),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate("id",i.id),r.\u0275\u0275propertyInterpolate("name",i.name),r.\u0275\u0275propertyInterpolate("placeholder",i.placeholder),r.\u0275\u0275property("autocomplete",i.autocomplete)("formControl",i.formControl),r.\u0275\u0275attribute("disabled",!!i.isDisabled||null),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.isDisabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.isDisabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.isDisabled))},dependencies:[on,cl,Os,rh,PB,To,Vy,Tf,od],styles:["[_nghost-%COMP%], .aui-datepicker[_ngcontent-%COMP%]{display:block}.m-flyout.is-open[_ngcontent-%COMP%]   .m-datepicker[_ngcontent-%COMP%]{opacity:1;transform:translateY(calc(var(--BORDER-WIDTH) * -1));transition-delay:0s;visibility:visible}"],changeDetection:0})),t})();const BB=["datepicker"];function VB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.dateForm.controls.inputDate.errors.format)}}function jB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.dateForm.controls.inputDate.errors.range)}}function UB(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",14),r.\u0275\u0275template(1,VB,2,1,"p",15),r.\u0275\u0275template(2,jB,2,1,"p",15),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.dateForm.controls.inputDate.errors.format),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.dateForm.controls.inputDate.errors.range)}}const HB=function(t){return{"has-error":t}};let $B=(()=>{class t{constructor(e){A(this,"fb",void 0),A(this,"datepicker",void 0),A(this,"dateForm",void 0),A(this,"min",new Date),A(this,"max",function pB(t,n){return Yo(2,arguments),_T(t,7*ul(n))}(new Date,2)),A(this,"datepickerImportExample","import { DatepickerModule } from '@acpaas-ui/ngx-forms';\n\n@NgModule({\n\timports: [\n\t\tDatepickerModule.forChild([\n\t\t\t'Maandag', 'Dinsdag', 'Woensdag', 'Donderdag', 'Vrijdag', 'Zaterdag', 'Zondag',\n\t\t], [\n\t\t\t'Januari', 'Februari', 'Maart', 'April', 'Mei', 'Juni', 'Juli', 'Augustus', 'September', 'Oktober', 'November', 'December',\n\t\t], {\n\t\t\tERRORS_INVALID_DATE: 'Ongeldige datum',\n\t\t\tERRORS_INVALID_RANGE: 'Deze datum kan niet gekozen worden',\n\t\t}),\n\t],\n})\n\nexport class AppModule {};"),A(this,"datepickerExampleTypescript","import { FormBuilder, FormGroup } from '@angular/forms';\n\nimport { DateRange } from '@acpaas-ui/ngx-utils';\nimport { addWeeks } from 'date-fns'; // date-fns is an external library and can be replaced by a library of your choice\n\nconstructor(private fb: FormBuilder) { }\n\n// Since we only pass through a min date, the past will be disabled\npublic min = new Date();\npublic max = addWeeks(new Date(), 2);\npublic dateForm: FormGroup;\n\nthis.dateForm = this.fb.group({\n\tinputDate: [''],\n});"),A(this,"datepickerExampleHTML",'<form [formGroup]="dateForm">\n\t<div class="a-input has-icon-right" [ngClass]="{\'has-error\': dateForm.controls.inputDate.dirty && dateForm.controls.inputDate.invalid}">\n\t\t<label class="a-input__label" for="input-datepicker">Pick a date</label>\n\t\t<aui-datepicker\n\t\t\tdata-id="input-datepicker"\n\t\t\tname="input-datepicker"\n\t\t\tautocomplete="off"\n      label="Pick date"\n      description="description"\n\t\t\tplaceholder="dd/mm/jjjj"\n\t\t\tformControlName="inputDate"\n\t\t\t[min]="min"\n\t\t\t[max]="max">\n\t\t</aui-datepicker>\n\t\t<div *ngIf="dateForm.controls[\'inputDate\'].errors">\n\t\t\t<p *ngIf="dateForm.controls[\'inputDate\'].errors.format">{{ dateForm.controls[\'inputDate\'].errors.format }}</p>\n\t\t\t<p *ngIf="dateForm.controls[\'inputDate\'].errors.range">{{ dateForm.controls[\'inputDate\'].errors.range }}</p>\n\t\t</div>\n\t</div>\n</form>'),A(this,"destroyed$",new pi.xQ),this.fb=e}openFlyout(){this.datepicker?.flyout?.open()}ngOnInit(){this.dateForm=this.fb.group({inputDate:[(new Date).toISOString()],isDisabled:!1}),this.dateForm.get("isDisabled").valueChanges.pipe(Nl(this.destroyed$)).subscribe(e=>{e?this.dateForm.get("inputDate").disable():this.dateForm.get("inputDate").enable()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Xh))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],viewQuery:function(e,i){if(1&e&&r.\u0275\u0275viewQuery(BB,7),2&e){let l;r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.datepicker=l.first)}},decls:22,vars:13,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-datepicker"],[3,"formGroup"],[1,"a-input","has-icon-right","u-margin-bottom",3,"ngClass"],["autocomplete","off","label","Pick date","description","description","data-id","input-datepicker","formControlName","inputDate","name","input-datepicker","placeholder","dd/mm/jjjj",3,"min","max"],["datepicker",""],["class","u-text-danger u-margin-top-xs u-margin-bottom",4,"ngIf"],[1,"a-input","u-margin-bottom"],[1,"a-input__checkbox"],["formControlName","isDisabled","id","isDisabled","type","checkbox"],["for","isDisabled"],[1,"a-pre"],[1,"u-text-danger","u-margin-top-xs","u-margin-bottom"],[4,"ngIf"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Datepicker"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",3)(9,"div",4)(10,"div",5),r.\u0275\u0275element(11,"aui-datepicker",6,7),r.\u0275\u0275template(13,UB,3,2,"div",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",9)(15,"div",10),r.\u0275\u0275element(16,"input",11),r.\u0275\u0275elementStart(17,"label",12),r.\u0275\u0275text(18,"Toggle disabled state"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(19,"pre",13),r.\u0275\u0275text(20),r.\u0275\u0275pipe(21,"json"),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.datepickerImportExample),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.datepickerExampleTypescript),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.datepickerExampleHTML),r.\u0275\u0275advance(2),r.\u0275\u0275property("formGroup",i.dateForm),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(11,HB,i.dateForm.controls.inputDate.dirty&&i.dateForm.controls.inputDate.invalid)),r.\u0275\u0275advance(1),r.\u0275\u0275property("min",i.min)("max",i.max),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.dateForm.controls.inputDate.errors),r.\u0275\u0275advance(7),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(21,9,i.dateForm.controls.inputDate.value)))},dependencies:[tr,zB,Ne,on,cs,Os,sf,qh,hf,Ao],encapsulation:2})),t})();function GB(t,n){1&t&&r.\u0275\u0275element(0,"div",11)}function ZB(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"span",12),r.\u0275\u0275listener("blur",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.toggleFocus(!1,null,l))})("dragexit",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.onMouseUp(l))})("focus",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.toggleFocus(!0,"end",l))})("mousedown",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.onMouseDown("end"))})("touchstart",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.onMouseDown("end"))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275styleProp("left",e.endPercentage+"%"),r.\u0275\u0275attribute("aria-label",e.ariaLabelMax)}}let WB=(()=>{class t{constructor(e){A(this,"elRef",void 0),A(this,"coreBranding",!0),A(this,"min",0),A(this,"max",100),A(this,"minimalDistance",1),A(this,"step",0),A(this,"label",""),A(this,"labelBefore",""),A(this,"labelAfter",""),A(this,"ariaLabelMin","Minimum"),A(this,"ariaLabelMax","Maximum"),A(this,"start",0),A(this,"end",!1),A(this,"steps",[]),A(this,"startPercentage",void 0),A(this,"endPercentage",void 0),A(this,"active",null),A(this,"isDisabled",!1),A(this,"hasFocus",!1),A(this,"click",!1),A(this,"propagateChange",i=>{}),this.elRef=e}get disabledClass(){return this.isDisabled}ngOnInit(){if(this.step>0)for(let e=0;e<=this.max;e+=Number(this.step))this.steps.push(e);this.startPercentage=this.startToPercentage(),this.end&&(this.endPercentage=this.endToPercentage())}writeValue(e){e&&e.start?this.start=e.start:isNaN(e)||""===e?this.setStart(Number(this.min)):this.start=Number(e),this.startPercentage=this.startToPercentage(),e&&e.end&&(this.end=e.end,this.endPercentage=this.endToPercentage())}registerOnTouched(){}registerOnChange(e){this.propagateChange=e}setDisabledState(e){this.isDisabled=e}onMouseDown(e){this.isDisabled||(this.hasFocus=!0,this.active=e)}toggleFocus(e,i,l){this.isDisabled||(l.preventDefault(),this.hasFocus=e,this.active=i)}onKeyDown(e){if(!this.hasFocus)return;const i=e.keyCode,l={end:35,home:36,left:37,up:38,right:39,down:40};if(-1===Object.keys(l).map(F=>l[F]).indexOf(i))return;let m=this.minimalDistance;this.step>0&&(m=Number(this.step));const C=F=>{let K="start"===this.active?this.start:Number(this.end);"up"===F?K+=m:K-=m;let le=(K-this.min)/(this.max-this.min)*100;return le>100&&(le=100),le<0&&(le=0),le};switch(i){case l.right:case l.up:this.updateHandle(C("up")),e.preventDefault();break;case l.left:case l.down:this.updateHandle(C("down")),e.preventDefault();break;case l.end:this.updateHandle(100),e.preventDefault();break;case l.home:this.updateHandle(0),e.preventDefault()}}onMouseUp(e){"start"===this.active&&(this.setStart(this.round(this.start,this.step,0)),this.startPercentage=this.startToPercentage()),"end"===this.active&&(this.setEnd(this.round(this.end,this.step,0)),this.endPercentage=this.endToPercentage()),this.click=!1}mouseDown(e){this.click=!0}onMouseMove(e){if(!this.active||!this.click)return;e.preventDefault();const i=void 0!==e.x?e.x:e.targetTouches[0].pageX,l=this.elRef.nativeElement.getBoundingClientRect(),m=this.calcPercentage(i,l.width,l.left);this.updateHandle(m)}updateHandle(e){"start"===this.active&&(this.startPercentage=e,this.setStart(this.percentageToStart()),this.minimalDistanceNotRespected()&&(this.setStart(Number(this.end)-Number(this.minimalDistance)),this.startPercentage=this.startToPercentage())),"end"===this.active&&this.endPercentage&&(this.endPercentage=e,this.setEnd(this.percentageToEnd()),this.minimalDistanceNotRespected()&&(this.setEnd(Number(this.start)+Number(this.minimalDistance)),this.endPercentage=this.endToPercentage()))}setStart(e){this.start=e,this.propagateChange(this.end?{start:this.start,end:this.end}:this.start)}setEnd(e){this.end=e,this.propagateChange({start:this.start,end:this.end})}round(e,i,l){return i>0?Math.round((e-l)/i)*i+l:e}startToPercentage(){return Math.round((this.start-this.min)/(this.max-this.min)*100)}percentageToStart(){return Math.round(this.startPercentage/100*(this.max-this.min)+Number(this.min))}endToPercentage(){return Math.round((Number(this.end)-this.min)/(this.max-this.min)*100)}percentageToEnd(){return Math.round(this.endPercentage/100*(this.max-this.min)+Number(this.min))}minimalDistanceNotRespected(){return this.minimalDistance>=0&&this.end&&this.start>Number(this.end)-this.minimalDistance}calcPercentage(e,i,l){let C=Math.round((e-l)/i*100);return C>100&&(C=100),C<0&&(C=0),C}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-range-slider"]],hostVars:4,hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("keydown",function(m){return i.onKeyDown(m)},!1,r.\u0275\u0275resolveDocument)("touchend",function(m){return i.onMouseUp(m)})("mouseup",function(m){return i.onMouseUp(m)})("touchstart",function(m){return i.mouseDown(m)})("mousedown",function(m){return i.mouseDown(m)})("touchmove",function(m){return i.onMouseMove(m)})("mousemove",function(m){return i.onMouseMove(m)}),2&e&&r.\u0275\u0275classProp("m-range-slider",i.coreBranding)("is-disabled",i.disabledClass)},inputs:{min:"min",max:"max",minimalDistance:"minimalDistance",step:"step",label:"label",labelBefore:"labelBefore",labelAfter:"labelAfter",ariaLabelMin:"ariaLabelMin",ariaLabelMax:"ariaLabelMax"},features:[r.\u0275\u0275ProvidersFeature([{provide:qo,useExisting:(0,r.forwardRef)(()=>t),multi:!0}])],decls:15,vars:16,consts:[[1,"a-range-slider"],[1,"a-range-slider__labels"],[1,"a-range-slider__label"],[1,"a-range-slider__inner"],[1,"a-range-slider__tickmarks"],["class","a-range-slider__tickmark",4,"ngFor","ngForOf"],[1,"a-range-slider__bar"],["tabindex","0",1,"a-range-slider__handle",3,"blur","dragexit","focus","mousedown","touchstart"],["class","a-range-slider__handle","name","a-range-slider__handle__end","tabindex","0",3,"left","blur","dragexit","focus","mousedown","touchstart",4,"ngIf"],[1,"a-range-slider__descriptions"],[1,"a-range-slider__description","small"],[1,"a-range-slider__tickmark"],["name","a-range-slider__handle__end","tabindex","0",1,"a-range-slider__handle",3,"blur","dragexit","focus","mousedown","touchstart"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(4,"div",3)(5,"div",4),r.\u0275\u0275template(6,GB,1,0,"div",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(7,"div",6),r.\u0275\u0275elementStart(8,"span",7),r.\u0275\u0275listener("blur",function(m){return i.toggleFocus(!1,null,m)})("dragexit",function(m){return i.onMouseUp(m)})("focus",function(m){return i.toggleFocus(!0,"start",m)})("mousedown",function(){return i.onMouseDown("start")})("touchstart",function(){return i.onMouseDown("start")}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(9,ZB,1,3,"span",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",9)(11,"div",10),r.\u0275\u0275text(12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",10),r.\u0275\u0275text(14),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(i.label),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",i.steps),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("left",!!i.endPercentage&&i.startPercentage+"%")("width",i.endPercentage?i.endPercentage-i.startPercentage+"%":i.startPercentage+"%"),r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("left",i.startPercentage+"%"),r.\u0275\u0275attribute("aria-label",i.ariaLabelMin),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.end),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate3("",i.labelBefore,"",i.min,"",i.labelAfter,""),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate3("",i.labelBefore,"",i.max,"",i.labelAfter,""))},dependencies:[bt,on],styles:["[_nghost-%COMP%]{display:block;position:relative}.is-disabled[_nghost-%COMP%]{cursor:not-allowed}.is-disabled[_nghost-%COMP%]   .m-range-slider__handle[_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})),t})(),qB=(()=>{class t{constructor(){A(this,"mySlider",{start:400,end:500}),A(this,"rangesliderImportExample","import { RangeSliderModule } from '@acpaas-ui/ngx-forms';\nimport { FormsModule } from '@angular/forms';\n\t@NgModule({\n\t\timports: [\n\t\t\tRangeSliderModule,\n\t\t\tFormsModule,\n\t\t]\n\t});\nexport class AppModule {};"),A(this,"rangesliderExampleHTML1",'<aui-range-slider label="Basic"></aui-range-slider>'),A(this,"rangesliderExampleHTML2",'<aui-range-slider\n\tlabel="Change in increments of 20"\n\tstep="20"\n\tlabelAfter="%">\n</aui-range-slider>'),A(this,"rangesliderExampleTypescript3","public mySlider = {start: 400, end: 500};"),A(this,"rangesliderExampleHTML3",'<aui-range-slider\n\tlabel="Min/max"\n\t[(ngModel)]="mySlider"\n\tmin="300"\n\tmax="600"\n\tlabelBefore="\u20ac">\n</aui-range-slider>'),A(this,"isDisabled",!1),A(this,"disabledSlider",{start:350,end:450}),A(this,"range",{start:40})}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:34,vars:10,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom-l"],[3,"codeSnippet"],[1,"h5","u-margin-bottom"],["label","Basic"],["label","Step","labelAfter","%","step","20",3,"ngModel","ngModelChange"],[1,"u-margin-bottom"],[1,"u-margin-bottom","col-md-6","col-xs-12"],["label","Min/max","labelBefore","\u20ac","max","600","min","300",3,"ngModel","ngModelChange"],[1,"u-margin-bottom-3xl","col-md-6","col-xs-12"],["label","Disabled","labelBefore","\u20ac","max","600","min","300",3,"ngModel","disabled","ngModelChange"],[1,"a-input","u-margin-bottom"],[1,"a-input__checkbox"],["id","isDisabled","type","checkbox",3,"ngModel","ngModelChange"],["for","isDisabled"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Range slider"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"h4",3),r.\u0275\u0275text(5,"Basic"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1),r.\u0275\u0275element(9,"aui-range-slider",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"h4",3),r.\u0275\u0275text(11,"Step"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",1),r.\u0275\u0275element(13,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",1)(15,"aui-range-slider",5),r.\u0275\u0275listener("ngModelChange",function(m){return i.range=m}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(16,"h4",3),r.\u0275\u0275text(17,"Min/max"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"div",6),r.\u0275\u0275element(19,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"div",1),r.\u0275\u0275element(21,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",7)(23,"aui-range-slider",8),r.\u0275\u0275listener("ngModelChange",function(m){return i.mySlider=m}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(24,"h4",3),r.\u0275\u0275text(25,"Disabled"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"div",9)(27,"div",6)(28,"aui-range-slider",10),r.\u0275\u0275listener("ngModelChange",function(m){return i.disabledSlider=m}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(29,"div",11)(30,"div",12)(31,"input",13),r.\u0275\u0275listener("ngModelChange",function(m){return i.isDisabled=m}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(32,"label",14),r.\u0275\u0275text(33,"Toggle disabled state"),r.\u0275\u0275elementEnd()()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.rangesliderImportExample),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.rangesliderExampleHTML1),r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet",i.rangesliderExampleHTML2),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",i.range),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.rangesliderExampleTypescript3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.rangesliderExampleHTML3),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",i.mySlider),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngModel",i.disabledSlider)("disabled",i.isDisabled),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",i.isDisabled))},dependencies:[tr,WB,cs,Os,oc],encapsulation:2})),t})();const BT=function(){return hh.Date.now()};var QB=Math.max,XB=Math.min;const t4=function(t,n){return{"a-button--l":t,"a-button--s":n}};function n4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.clear())}),r.\u0275\u0275element(1,"aui-icon",13),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction2(2,t4,"large"===e.size,"small"===e.size)),r.\u0275\u0275attribute("disabled",e.isDisabled||e.closeDisabled?"":null)}}function i4(t,n){1&t&&r.\u0275\u0275element(0,"aui-icon",13)}function r4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"p",14),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.labelResults)}}function o4(t,n){1&t&&r.\u0275\u0275element(0,"div",15)}function s4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"li",19)(1,"p",20),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.labelNoResults)}}function a4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li",19)(1,"div",21)(2,"div",22)(3,"input",23),r.\u0275\u0275listener("change",function(){const m=r.\u0275\u0275restoreView(e).$implicit,C=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(C.toggleSelected(m.label))}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"label",24),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd()()()()}if(2&t){const e=n.$implicit,i=n.index,l=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275propertyInterpolate("id","checkbox--"+i+"--"+l.id),r.\u0275\u0275propertyInterpolate("name","checkbox--"+i+"--"+l.id),r.\u0275\u0275property("checked",l.selectedItems.indexOf(e.label)>=0),r.\u0275\u0275attribute("disabled",!!l.isDisabled||null),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("for","checkbox--"+i+"--"+l.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.label)}}function l4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"ul",16),r.\u0275\u0275template(1,s4,3,1,"li",17),r.\u0275\u0275template(2,a4,6,6,"li",18),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.filteredChoices.length),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.filteredChoices)}}const c4=function(t,n,e){return{"a-input--l":t,"a-input--s":n,"has-icon-right":e}};let u4=(()=>{class t{constructor(){A(this,"id",void 0),A(this,"name",void 0),A(this,"flyoutSize",By.Small),A(this,"flyoutAlign",void 0),A(this,"label",void 0),A(this,"description",void 0),A(this,"labelDeselect","Alles deselecteren"),A(this,"labelResults","Resultaten"),A(this,"labelNoResults","Geen resultaten gevonden."),A(this,"choices",[]),A(this,"remote",void 0),A(this,"inputDelay",150),A(this,"onSelect",()=>{}),A(this,"onClear",()=>{}),A(this,"size","default"),A(this,"search",new r.EventEmitter),A(this,"query",""),A(this,"selectedItems",[]),A(this,"filteredChoices",[]),A(this,"loading",!1),A(this,"isDisabled",!1),A(this,"closeDisabled",!1),A(this,"filterDataFromSearch",void 0),A(this,"updateModel",()=>{}),this.filterDataFromSearch=function JB(t,n,e){var i,l,m,C,F,K,le=0,xe=!1,Ae=!1,et=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function Qe(ui){var pr=i,Uo=l;return i=l=void 0,le=ui,C=t.apply(Uo,pr)}function Nt(ui){var pr=ui-K;return void 0===K||pr>=n||pr<0||Ae&&ui-le>=m}function Gt(){var ui=BT();if(Nt(ui))return Tn(ui);F=setTimeout(Gt,function At(ui){var ja=n-(ui-K);return Ae?XB(ja,m-(ui-le)):ja}(ui))}function Tn(ui){return F=void 0,et&&i?Qe(ui):(i=l=void 0,C)}function Cr(){var ui=BT(),pr=Nt(ui);if(i=arguments,l=this,K=ui,pr){if(void 0===F)return function yt(ui){return le=ui,F=setTimeout(Gt,n),xe?Qe(ui):C}(K);if(Ae)return clearTimeout(F),F=setTimeout(Gt,n),Qe(K)}return void 0===F&&(F=setTimeout(Gt,n)),C}return n=xT(n)||0,cp(e)&&(xe=!!e.leading,m=(Ae="maxWait"in e)?QB(xT(e.maxWait)||0,n):m,et="trailing"in e?!!e.trailing:et),Cr.cancel=function Xi(){void 0!==F&&clearTimeout(F),le=0,i=K=l=F=void 0},Cr.flush=function Fi(){return void 0===F?C:Tn(BT())},Cr}(this.filterData.bind(this),this.inputDelay)}writeValue(e){this.selectedItems=Array.isArray(e)?e:[]}registerOnChange(e){this.updateModel=e}registerOnTouched(){}setDisabledState(e){this.isDisabled=e}ngOnChanges(e){const i=zl(e,"choices.currentValue",null);i&&(this.remote?(this.filteredChoices=[...i],this.loading=!1):this.filterData())}filterData(){if(this.remote)return this.loading=!0,this.search.emit(this.query);this.filterChoices()}clear(){this.selectedItems=[],this.query="",this.filterData(),this.updateModel(this.selectedItems),this.onClear()}toggleSelected(e){const i=this.selectedItems.indexOf(e);this.selectedItems=i<0?this.selectedItems.concat(e):[...this.selectedItems.slice(0,i),...this.selectedItems.slice(i+1)],this.updateModel(this.selectedItems),this.onSelect()}filterChoices(){this.filteredChoices=this.choices.filter(e=>this.selectedItems.indexOf(e.value)<0&&e.label.toLowerCase().indexOf(this.query.toLowerCase())>=0)}hasClose(){return this.filteredChoices?.length&&this.query?.length>1}getSelectedLabels(){return this.selectedItems.length?(this.closeDisabled=!1,this.selectedItems.map(e=>e).join(", ")):(this.closeDisabled=!0,null)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-search-filter"]],inputs:{id:"id",name:"name",flyoutSize:"flyoutSize",flyoutAlign:"flyoutAlign",label:"label",description:"description",labelDeselect:"labelDeselect",labelResults:"labelResults",labelNoResults:"labelNoResults",choices:"choices",remote:"remote",inputDelay:"inputDelay",onSelect:"onSelect",onClear:"onClear",size:"size"},outputs:{search:"search"},features:[r.\u0275\u0275ProvidersFeature([{provide:qo,useExisting:(0,r.forwardRef)(()=>t),multi:!0}]),r.\u0275\u0275NgOnChangesFeature],decls:14,vars:22,consts:[["aria-haspopup","listbox","auiFlyout","",1,"m-search-filter",3,"align","size"],[1,"a-input",3,"ngClass"],[1,"a-input__label",3,"for"],[1,"a-input__description",3,"id"],[1,"m-search-filter__input"],["aria-autocomplete","list","type","text","auiFlyoutAction","",3,"ngModel","id","name","value","input","ngModelChange"],["class","a-button a-button--outlined has-icon m-search-filter__button a-button--danger","aria-label","Zoekopdracht wissen","type","button",3,"ngClass","click",4,"ngIf"],["name","ai-close",4,"ngIf"],["auiFlyoutZone","",1,"m-search-filter__search","m-search-filter__search--scroll"],["class","h6 m-search-filter__results-title u-margin-bottom-xs",4,"ngIf"],["class","u-text-center u-padding a-spinner",4,"ngIf"],["class","a-checkbox-list a-checkbox-list--flushed",4,"ngIf"],["aria-label","Zoekopdracht wissen","type","button",1,"a-button","a-button--outlined","has-icon","m-search-filter__button","a-button--danger",3,"ngClass","click"],["name","ai-close"],[1,"h6","m-search-filter__results-title","u-margin-bottom-xs"],[1,"u-text-center","u-padding","a-spinner"],[1,"a-checkbox-list","a-checkbox-list--flushed"],["class","a-checkbox-list__item",4,"ngIf"],["class","a-checkbox-list__item",4,"ngFor","ngForOf"],[1,"a-checkbox-list__item"],[1,"u-margin-xs"],[1,"a-input","a-checkbox-list__checkbox"],[1,"a-input__checkbox"],["type","checkbox",3,"checked","id","name","change"],[3,"for"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"label",2),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"small",3),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",4)(7,"input",5),r.\u0275\u0275listener("input",function(){return i.filterDataFromSearch()})("ngModelChange",function(m){return i.query=m}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,n4,2,5,"button",6),r.\u0275\u0275template(9,i4,1,0,"aui-icon",7),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",8),r.\u0275\u0275template(11,r4,2,1,"p",9),r.\u0275\u0275template(12,o4,1,0,"div",10),r.\u0275\u0275template(13,l4,3,2,"ul",11),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275property("align",i.flyoutAlign)("size",i.flyoutSize),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction3(18,c4,"large"===i.size,"small"===i.size,i.hasClose)),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("for",i.id+"-search"),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(i.label),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("id",i.id+"-description"),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(i.description),r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate("id",i.id+"-search"),r.\u0275\u0275propertyInterpolate("name",i.name+"-search"),r.\u0275\u0275propertyInterpolate("value",i.getSelectedLabels()),r.\u0275\u0275property("ngModel",i.query),r.\u0275\u0275attribute("aria-labelledby",i.id+"-label")("disabled",i.isDisabled?"":null),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.hasClose),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.hasClose),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.labelResults),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.loading),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.loading))},dependencies:[Ne,bt,on,Vy,Tf,od,cl,Os,oc,To],styles:[".m-search-filter[_ngcontent-%COMP%]{display:block}.m-search-filter__input[_ngcontent-%COMP%]{display:flex;padding:0}.m-search-filter__input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-right:none}.m-search-filter__button[_ngcontent-%COMP%]{display:inline-block;padding:0;position:relative;vertical-align:middle}.m-search-filter__button[_ngcontent-%COMP%]   .ai[_ngcontent-%COMP%]{position:relative;transform:none!important;top:0}"]})),t})(),h4=(()=>{class t{constructor(){A(this,"stuff",[{label:"First item",value:"one"},{label:"Second item",value:"two"},{label:"Third item",value:"three"},{label:"Fourth item",value:"four"}]),A(this,"selectedItems",[]),A(this,"isDisabled",!1),A(this,"searchfilterImportExample","import { SearchFilterModule } from '@acpaas-ui/ngx-forms';\n\n@NgModule({\n\timports: [\n\t\tSearchFilterModule,\n\t]\n});\n\nexport class AppModule {};"),A(this,"searchfilterExampleJS1",'import { SearchFilterChoice } from \'@acpaas-ui/ngx-forms\';\n\n\tpublic stuff: SearchFilterChoice[] = [{\n\t\tlabel: "First item",\n\t\tvalue: "one",\n\t}, {\n\t\tlabel: "Second item",\n\t\tvalue: "two",\n\t}, {\n\t\tlabel: "Third item",\n\t\tvalue: "three",\n\t}, {\n\t\tlabel: "Fourth item",\n\t\tvalue: "four",\n}];'),A(this,"searchfilterExampleHTML1",'<aui-search-filter\n\tid="test"\n\tname="test"\n\tlabel="Find stuff"\n\tlabelDeselect="Clear stuff"\n\tlabelResults=""\n\tlabelNoResults="Couldn\'t find stuff!"\n\tdescription="Look for stuff"\n\tinputDelay="0"\n\t[choices]="stuff"\n\t[showAllByDefault]="true">\n</aui-search-filter>')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:20,vars:7,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom-l"],[3,"codeSnippet"],[1,"h5","u-margin-bottom"],[1,"u-margin-bottom"],[1,"u-margin-bottom-xs"],["id","test","inputDelay","0","label","Find stuff","labelDeselect","Clear stuff","labelNoResults","Couldn't find stuff!","labelResults","","name","test","description","Look for stuff",3,"ngModel","choices","disabled","ngModelChange"],[1,"a-input"],[1,"a-input__checkbox"],["id","isDisabled","type","checkbox",3,"ngModel","ngModelChange"],["for","isDisabled"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Search filter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"h4",3),r.\u0275\u0275text(5,"Basic"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",4),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1),r.\u0275\u0275element(9,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",4)(11,"h4",5),r.\u0275\u0275text(12,"Normal search filter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",4)(14,"aui-search-filter",6),r.\u0275\u0275listener("ngModelChange",function(m){return i.selectedItems=m}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(15,"div",7)(16,"div",8)(17,"input",9),r.\u0275\u0275listener("ngModelChange",function(m){return i.isDisabled=m}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"label",10),r.\u0275\u0275text(19,"Toggle disabled state"),r.\u0275\u0275elementEnd()()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.searchfilterImportExample),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.searchfilterExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.searchfilterExampleHTML1),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngModel",i.selectedItems)("choices",i.stuff)("disabled",i.isDisabled),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",i.isDisabled))},dependencies:[tr,u4,cs,Os,oc],encapsulation:2})),t})();var q1=(()=>(function(t){t.Auto="auto",t.Small="small",t.Large="large"}(q1||(q1={})),q1))();function d4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"label",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.label)}}function p4(t,n){1&t&&r.\u0275\u0275element(0,"aui-icon",10)}const f4=function(t){return{"is-error":t}};function m4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"small",8),r.\u0275\u0275template(1,p4,1,0,"aui-icon",9),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(3,f4,e.hasError)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.hasError),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.description,"")}}const VT=function(t){return{"has-error":t}};function g4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",3),r.\u0275\u0275template(1,d4,2,1,"label",4),r.\u0275\u0275template(2,m4,3,5,"small",5),r.\u0275\u0275element(3,"input",6),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classMap("a-input--"+e.size),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(8,VT,e.hasError)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.label),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.description),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControl",e.timeControl)("id",e.id),r.\u0275\u0275attribute("aria-label",e.ariaLabelHours+":"+e.ariaLabelMinutes)}}function _4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"option",19),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275property("value",e),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e)}}function y4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"option",19),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275property("value",e),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e)}}function v4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"div",13)(3,"select",14)(4,"option",15),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(6,_4,2,2,"option",16),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(7,"aui-icon",17),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(8,"div",12)(9,"div",13)(10,"select",18)(11,"option",15),r.\u0275\u0275text(12),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(13,y4,2,2,"option",16),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(14,"aui-icon",17),r.\u0275\u0275elementEnd()()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",e.fallbackForm),r.\u0275\u0275advance(1),r.\u0275\u0275classMap("a-input--"+e.size),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(14,VT,e.hasError)),r.\u0275\u0275advance(2),r.\u0275\u0275property("id",e.id),r.\u0275\u0275attribute("aria-label",e.ariaLabelHours),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.hoursPlaceholder),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.hours),r.\u0275\u0275advance(2),r.\u0275\u0275classMap("a-input--"+e.size),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(16,VT,e.hasError)),r.\u0275\u0275advance(2),r.\u0275\u0275attribute("aria-label",e.ariaLabelMinutes),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.minutesPlaceholder),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.minutes)}}let b4=(()=>{class t{constructor(e,i){A(this,"formBuilder",void 0),A(this,"renderer",void 0),A(this,"id","aui-timepicker-"+Math.random().toString(36).substring(2)),A(this,"hoursPlaceholder","uu"),A(this,"minutesPlaceholder","mm"),A(this,"hasError",!1),A(this,"size",q1.Auto),A(this,"ariaLabelHours","Uur"),A(this,"ariaLabelMinutes","Minuten"),A(this,"label",void 0),A(this,"description",void 0),A(this,"shouldUseFallback",!1),A(this,"minutes",[]),A(this,"hours",[]),A(this,"updateModel",void 0),A(this,"timeControl",new O_),A(this,"fallbackForm",void 0),A(this,"componentDestroyed$",new pi.xQ),this.formBuilder=e,this.renderer=i}ngOnInit(){this.shouldUseFallback=this.supportsNativeTimepicker(),this.minutes=this.getMinutes(),this.hours=this.getHours(),this.fallbackForm=this.formBuilder.group({hours:null,minutes:null}),this.fallbackForm.valueChanges.pipe(Nl(this.componentDestroyed$)).subscribe(e=>{this.updateModel(e.hours&&e.minutes?`${e.hours}:${e.minutes}`:"")}),this.timeControl.valueChanges.pipe(Nl(this.componentDestroyed$)).subscribe(e=>{this.updateModel(e)})}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}writeValue(e){if(this.timeControl.setValue(e,{emitEvent:!1}),e){const i=e.split(":");this.fallbackForm.get("hours").setValue(i[0],{emitEvent:!1}),this.fallbackForm.get("minutes").setValue(i[1],{emitEvent:!1})}}registerOnChange(e){this.updateModel=e}registerOnTouched(){}setDisabledState(e){e?(this.timeControl.disable({emitEvent:!1}),this.fallbackForm.disable({emitEvent:!1})):(this.timeControl.enable({emitEvent:!1}),this.fallbackForm.enable({emitEvent:!1}))}supportsNativeTimepicker(){const e=this.renderer.createElement("input");return e.type="time","text"===e.type}getMinutes(){return Array(60).fill("").map((e,i)=>$r.addLeadingZero(i))}getHours(){return Array(24).fill("").map((e,i)=>$r.addLeadingZero(i))}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Xh),r.\u0275\u0275directiveInject(r.Renderer2))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-timepicker"]],inputs:{id:"id",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",hasError:"hasError",size:"size",ariaLabelHours:"ariaLabelHours",ariaLabelMinutes:"ariaLabelMinutes",label:"label",description:"description"},features:[r.\u0275\u0275ProvidersFeature([{provide:qo,useExisting:(0,r.forwardRef)(()=>t),multi:!0}])],decls:3,vars:2,consts:[[1,"m-timepicker"],["class","a-input",3,"class","ngClass",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"a-input",3,"ngClass"],["class","a-input__label","for","id",4,"ngIf"],["class","a-input__description","id","id",3,"ngClass",4,"ngIf"],["type","time",3,"formControl","id"],["for","id",1,"a-input__label"],["id","id",1,"a-input__description",3,"ngClass"],["name","ai-alert-triangle",4,"ngIf"],["name","ai-alert-triangle"],[3,"formGroup"],[1,"a-input","has-icon-right",3,"ngClass"],[1,"a-input__wrapper"],["formControlName","hours",3,"id"],["disabled","","value","null"],[3,"value",4,"ngFor","ngForOf"],["name","ai-arrow-down-1"],["formControlName","minutes"],[3,"value"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,g4,4,10,"div",1),r.\u0275\u0275template(2,v4,15,18,"div",2),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.shouldUseFallback),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.shouldUseFallback))},dependencies:[ep,Um,cl,oh,Os,sf,rh,qh,hf,Ne,bt,on,To],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})),t})();function x4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",1)(1,"pre",16),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.time1)}}function w4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",1)(1,"pre",16),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.time2)}}function C4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",4)(1,"pre",16),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.time3)}}function S4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",4)(1,"pre",16),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.time4)}}let E4=(()=>{class t{constructor(){A(this,"time1","10:30"),A(this,"time2","20:30"),A(this,"time3",""),A(this,"time4",""),A(this,"isDisabled",!1),A(this,"timepickerImportExample","import { TimepickerModule } from '@acpaas-ui/ngx-forms';\n\t@NgModule({\n\t\timports: [\n\t\t\tTimepickerModule,\n\t\t]\n\t});\nexport class AppModule {};"),A(this,"timepickerExampleTypescript",'public time1 = "10:30";'),A(this,"timepickerExampleHTML1",'<div class="a-input">\n\t<label class="a-input__label" for="timepicker1">Time</label>\n\t<aui-timepicker\n\t\tlabel="time" \n\t\tdescription="Pick a time"\n\t\tdata-id="timepicker1"\n\t\thoursPlaceholder="HH"\n\t\tariaLabelHours="Hours"\n\t\tariaLabelMinutes="Minutes"\n\t\t[(ngModel)]="time1">\n\t</aui-timepicker>\n</div>'),A(this,"timepickerExampleTypescript2",'public time2 = "20:30";'),A(this,"timepickerExampleHTML2",'<div class="a-input">\n\t<label class="a-input__label" for="timepicker2">Time</label>\n\t<aui-timepicker\n\t\tlabel="time" \n\t\tdescription="Pick a time"\n\t\tdata-id="timepicker2"\n\t\thoursPlaceholder="HH"\n\t\tariaLabelHours="Hours"\n\t\tariaLabelMinutes="Minutes"\n\t\tsize="small"\n\t\t[(ngModel)]="time2">\n\t</aui-timepicker>\n</div>'),A(this,"timepickerExampleHTML3",'<div class="a-input">\n\t<label class="a-input__label" for="timepicker3">Time</label>\n\t<aui-timepicker\n\t\tlabel="time" \n\t\tdescription="Pick a time"\n\t\tdata-id="timepicker3"\n\t\thoursPlaceholder="HH"\n\t\tariaLabelHours="Hours"\n\t\tariaLabelMinutes="Minutes"\n\t\thasError="true"\n\t\tsize="large"\n\t\t[(ngModel)]="time3">\n\t</aui-timepicker>\n</div>'),A(this,"timepickerExampleHTML4",'<div class="a-input u-margin-bottom">\n\t<label class="a-input__label" for="timepicker4">Time</label>\n\t<aui-timepicker\n\t\tlabel="time" \n\t\tdescription="Pick a time"\n\t\tdata-id="timepicker4"\n\t\thoursPlaceholder="HH"\n\t\tariaLabelHours="Hours"\n\t\tariaLabelMinutes="Minutes"\n\t\t[disabled]="isDisabled"\n\t\t[(ngModel)]="time4">\n\t</aui-timepicker>\n</div>\n<div class="a-input">\n\t<div class="a-input__checkbox">\n\t\t<input type="checkbox" id="isDisabled" [(ngModel)]="isDisabled" />\n\t\t<label for="isDisabled">Toggle disabled state</label>\n\t</div>\n</div>')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:43,vars:16,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom-l"],[3,"codeSnippet"],[1,"h5","u-margin-bottom"],[1,"u-margin-bottom"],[1,"a-input"],["label","time","description","Pick a time","ariaLabelHours","Hours","ariaLabelMinutes","Minutes","data-id","timepicker1","hoursPlaceholder","HH",3,"ngModel","ngModelChange"],["class","u-margin-bottom-l",4,"ngIf"],["label","time","description","Pick a time","ariaLabelHours","Hours","ariaLabelMinutes","Minutes","data-id","timepicker2","hoursPlaceholder","HH","size","small",3,"ngModel","ngModelChange"],["label","time","description","Pick a time","ariaLabelHours","Hours","ariaLabelMinutes","Minutes","data-id","timepicker3","hasError","true","hoursPlaceholder","HH","size","large",3,"ngModel","ngModelChange"],["class","u-margin-bottom",4,"ngIf"],[1,"a-input","u-margin-bottom"],["label","time","description","Pick a time","ariaLabelHours","Hours","ariaLabelMinutes","Minutes","data-id","timepicker4","hoursPlaceholder","HH",3,"ngModel","disabled","ngModelChange"],[1,"a-input__checkbox"],["id","isDisabled","type","checkbox",3,"ngModel","ngModelChange"],["for","isDisabled"],[1,"a-pre"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Timepicker"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"h4",3),r.\u0275\u0275text(5,"Basic"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",4),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",4),r.\u0275\u0275element(9,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",4)(11,"div",5)(12,"aui-timepicker",6),r.\u0275\u0275listener("ngModelChange",function(m){return i.time1=m}),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275template(13,x4,3,1,"div",7),r.\u0275\u0275elementStart(14,"h4",3),r.\u0275\u0275text(15,"Predefined hours and minutes"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"div",4),r.\u0275\u0275element(17,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"div",4),r.\u0275\u0275element(19,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"div",4)(21,"div",5)(22,"aui-timepicker",8),r.\u0275\u0275listener("ngModelChange",function(m){return i.time2=m}),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275template(23,w4,3,1,"div",7),r.\u0275\u0275elementStart(24,"h4",3),r.\u0275\u0275text(25,"Validation"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"div",4),r.\u0275\u0275element(27,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(28,"div",4)(29,"div",5)(30,"aui-timepicker",9),r.\u0275\u0275listener("ngModelChange",function(m){return i.time3=m}),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275template(31,C4,3,1,"div",10),r.\u0275\u0275elementStart(32,"h4",3),r.\u0275\u0275text(33,"Disabled"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"div",4)(35,"div",11)(36,"aui-timepicker",12),r.\u0275\u0275listener("ngModelChange",function(m){return i.time4=m}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(37,"div",5)(38,"div",13)(39,"input",14),r.\u0275\u0275listener("ngModelChange",function(m){return i.isDisabled=m}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(40,"label",15),r.\u0275\u0275text(41,"Toggle disabled state"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275template(42,S4,3,1,"div",10)),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.timepickerImportExample),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.timepickerExampleTypescript),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.timepickerExampleHTML1),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",i.time1),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.time1),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.timepickerExampleTypescript2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.timepickerExampleHTML2),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",i.time2),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.time2),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.timepickerExampleHTML3),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",i.time3),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.time3),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngModel",i.time4)("disabled",i.isDisabled),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",i.isDisabled),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.time4))},dependencies:[tr,b4,on,cs,Os,oc],encapsulation:2})),t})(),DI=(()=>{class t{static forChild(e,i,l){return{ngModule:t,providers:[{provide:wg,useValue:e},{provide:Cg,useValue:i},{provide:zT,useValue:l}]}}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[{provide:wg,useValue:Gy},{provide:Cg,useValue:Zy},{provide:zT,useValue:TI}],imports:[Ri,sc,tp,AB,ls,jy]})),t})();const MI={allowedMimeTypes:[],allowedFileTypes:[],autoUpload:!1,maxFileSize:0,queueLimit:0,type:"drop",url:""},jT=new r.InjectionToken("uploadValidationMessages");class II{constructor(n){A(this,"options",MI),this.setOptions(n)}setOptions(n){this.options=Object.assign({},this.options,n)}uploadFiles(n){const e=this.filesToFormData(n);return new jr.y(i=>{const l=new XMLHttpRequest;l.upload.addEventListener("progress",m=>{m.lengthComputable&&i.next({progress:m.loaded/m.total,data:null})}),l.onload=()=>{i.next({progress:1,data:l.response})},l.responseType="json",l.open("post",this.options.url),l.send(e)})}validateFiles(n){const e=[],i=[];if(n.length>0)for(const l of n){const m=[];this.validateFileType(l)||m.push("INVALID_FILE_TYPE"),this.validateFileSize(l)||m.push("INVALID_FILE_SIZE"),this.validateMimeType(l)||m.push("INVALID_MIME_TYPE"),0===m.length?e.push(l):i.push({reasons:m,file:l})}return{validFiles:e,invalidFiles:i}}filesToFormData(n){const e=new FormData;if(!this.options.url||""===this.options.url)throw new Error("Define the upload url.");for(const i of n)e.append("file",i);return e}getFileExtension(n){return n.name.split(".")[n.name.split(".").length-1]}validateFileType(n){const e=this.options.allowedFileTypes,i=this.getFileExtension(n);return!Array.isArray(e)||0===e.length||-1!==e.map(C=>C.toUpperCase()).lastIndexOf(i.toUpperCase())}validateFileSize(n){const e=this.options.maxFileSize;return!e||0===e||e>n.size}validateMimeType(n){const e=this.options.allowedMimeTypes;return!Array.isArray(e)||0===e.length||-1!==e.lastIndexOf(n.type)}}function T4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li"),r.\u0275\u0275element(1,"aui-icon",3),r.\u0275\u0275elementStart(2,"span",4),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"button",5),r.\u0275\u0275listener("click",function(){const m=r.\u0275\u0275restoreView(e).index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.remove(m))}),r.\u0275\u0275element(5,"aui-icon",6),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(e.name),r.\u0275\u0275advance(2),r.\u0275\u0275property("ariaLabel",i.ariaLabelRemove)}}function D4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",7),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.uploadFiles())}),r.\u0275\u0275text(1,"Upload"),r.\u0275\u0275elementEnd()}}let PI=(()=>{class t{constructor(){A(this,"files",void 0),A(this,"uploader",void 0),A(this,"ariaLabelRemove","Verwijder"),A(this,"uploadedFiles",new r.EventEmitter),A(this,"uploadProgress",0)}remove(e){this.files.splice(e,1)}uploadFiles(){this.uploader.uploadFiles(this.files).subscribe(l=>{l.progress&&(this.uploadProgress=Math.floor(100*l.progress)),l.data&&(this.uploadedFiles.emit(l.data),this.files=[])})}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-upload-queue"]],inputs:{files:"files",uploader:"uploader",ariaLabelRemove:"ariaLabelRemove"},outputs:{uploadedFiles:"uploadedFiles"},decls:3,vars:2,consts:[[1,"m-upload__files","u-margin-bottom-xs"],[4,"ngFor","ngForOf"],["class","a-button","type","button",3,"click",4,"ngIf"],["name","ai-common-file-empty"],[1,"m-upload__filename"],["type","button",1,"m-upload__delete","a-button","a-button--text","a-button--neutral","a-button--s","has-icon",3,"click"],["name","ai-close",3,"ariaLabel"],["type","button",1,"a-button",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"ul",0),r.\u0275\u0275template(1,T4,6,2,"li",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(2,D4,2,0,"button",2)),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",i.files),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.files.length>0))},dependencies:[bt,on,To],encapsulation:2})),t})();const M4=function(t){return{width:t}};let I4=(()=>{class t{constructor(){this.value=0,this.max=0}calcProgress(){return this.max>0&&this.value>0?Math.floor(this.value/this.max*100)+"%":0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["aui-progress-bar"]],inputs:{value:"value",max:"max"},decls:3,vars:5,consts:[[1,"aui-progress-bar","a-progress"],[1,"a-progress__inner"],["aria-valuemin","0","role","progressbar",1,"a-progress__bar",3,"ngStyle"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275element(2,"div",2),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction1(3,M4,i.calcProgress())),r.\u0275\u0275attribute("aria-valuemax",i.max)("aria-valuenow",i.value))},dependencies:[hl],encapsulation:2}),t})(),P4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[Ri]}),t})();const A4=["fileInput"];function L4(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",10)(1,"label",11),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"p",12),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("for",e.ariaId),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.label," "),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.uploadedFilesString)}}function k4(t,n){1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1,","),r.\u0275\u0275elementContainerEnd())}function O4(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275template(2,k4,2,0,"ng-container",8),r.\u0275\u0275elementContainerEnd()),2&t){const e=n.$implicit,i=n.last;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.name," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i)}}function R4(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"p",13),r.\u0275\u0275template(2,O4,3,2,"ng-container",14),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"aui-progress-bar",15),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.uploadingFiles),r.\u0275\u0275advance(1),r.\u0275\u0275property("value",e.uploadProgress)}}function F4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"div",4)(3,"input",5,6),r.\u0275\u0275listener("click",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.onFileClick(l))})("change",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.updateFiles())}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,L4,5,3,"div",7),r.\u0275\u0275template(6,R4,4,2,"ng-container",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"small",9),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd()()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("is-disabled",e.disabled),r.\u0275\u0275advance(3),r.\u0275\u0275property("id",e.id),r.\u0275\u0275attribute("aria-labelledby",e.ariaId),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!e.uploadProgress||0===e.uploadProgress),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.uploadProgress>0),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",e.description," ")}}function N4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.triggerFile())}),r.\u0275\u0275elementStart(1,"span",17),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"input",5,6),r.\u0275\u0275listener("click",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.onFileClick(l))})("change",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.updateFiles())}),r.\u0275\u0275elementEnd()()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("disabled",e.disabled),r.\u0275\u0275advance(1),r.\u0275\u0275property("id",e.ariaId),r.\u0275\u0275advance(2),r.\u0275\u0275property("id",e.id),r.\u0275\u0275attribute("aria-labelledby",e.ariaId)}}const z4=[[["",8,"m-upload__button"]]],B4=[".m-upload__button"];let AI=(()=>{class t{onDragOver(e){this.preventAndStop(e),this.hasDragOver=!0}onDragLeave(e){this.preventAndStop(e),this.hasDragOver=!1}onDrop(e){this.preventAndStop(e),this.hasDragOver=!1;const i=this.fileListToArray(e.dataTransfer.files);this.handleFiles(i)}constructor(e){A(this,"renderer",void 0),A(this,"fileInput",void 0),A(this,"uploader",void 0),A(this,"id",""),A(this,"accept",[]),A(this,"capture",""),A(this,"ariaId",""),A(this,"disabled",!1),A(this,"multiple",!0),A(this,"label",""),A(this,"description",""),A(this,"uploadedFiles",new r.EventEmitter),A(this,"queuedFiles",new r.EventEmitter),A(this,"invalidFiles",new r.EventEmitter),A(this,"hasDragOver",!1),A(this,"classNames",void 0),A(this,"uploadProgress",0),A(this,"uploadingFiles",void 0),A(this,"uploadedFilesString",void 0),this.renderer=e}triggerFile(){this.fileInput.nativeElement.click()}updateFiles(){const e=this.fileListToArray(this.fileInput.nativeElement.files);this.uploadedFilesString=e.map(i=>i.name).join(", "),this.handleFiles(e)}onFileClick(e){e.target.value=""}ngAfterViewInit(){!1!==this.multiple&&this.renderer.setProperty(this.fileInput.nativeElement,"multiple","multiple"),this.accept.length&&this.renderer.setProperty(this.fileInput.nativeElement,"accept",this.accept.join()),this.disabled&&this.renderer.setProperty(this.fileInput.nativeElement,"disabled","disabled"),""!==this.capture&&this.renderer.setAttribute(this.fileInput.nativeElement,"capture",this.capture)}handleFiles(e){const i=this.uploader.validateFiles(e);this.invalidFiles.emit(i.invalidFiles),this.uploader.options.autoUpload&&i.validFiles.length>0?this.uploadFiles(i.validFiles):this.queuedFiles.emit(i.validFiles)}uploadFiles(e){this.uploadProgress=0,this.uploadingFiles=e,this.uploader.uploadFiles(e).subscribe(i=>{i.progress&&(this.uploadProgress=Math.floor(100*i.progress)),i.data&&this.uploadedFiles.emit(i.data)},i=>{console.log(i)})}fileListToArray(e){return Array.from(e)}preventAndStop(e){e.preventDefault(),e.stopPropagation()}uploadedFilesToString(){return console.log("UPLOADS TO STRING"),this.fileInput.nativeElement.files.map(e=>e.name).join("")}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.Renderer2))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-upload-zone"]],viewQuery:function(e,i){if(1&e&&r.\u0275\u0275viewQuery(A4,5),2&e){let l;r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.fileInput=l.first)}},hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("dragover",function(m){return i.onDragOver(m)})("dragleave",function(m){return i.onDragLeave(m)})("drop",function(m){return i.onDrop(m)})},inputs:{uploader:"uploader",id:"id",accept:"accept",capture:"capture",ariaId:"ariaId",disabled:"disabled",multiple:"multiple",label:"label",description:"description"},outputs:{uploadedFiles:"uploadedFiles",queuedFiles:"queuedFiles",invalidFiles:"invalidFiles"},ngContentSelectors:B4,decls:2,vars:2,consts:[["class","m-upload",3,"is-disabled",4,"ngIf"],["class","a-button m-upload__button","type","button",3,"disabled","click",4,"ngIf"],[1,"m-upload"],[1,"m-upload__inner"],[1,"m-upload__dropzone"],["type","file",1,"m-upload__input",3,"id","click","change"],["fileInput",""],["class","m-upload__content",4,"ngIf"],[4,"ngIf"],[1,"m-upload__description"],[1,"m-upload__content"],[1,"m-upload__message",3,"for"],[1,"m-upload__uploads","u-text-bold"],[1,"m-upload__uploads","u-text-bold","u-margin-bottom-xs"],[4,"ngFor","ngForOf"],["max","100",3,"value"],["type","button",1,"a-button","m-upload__button",3,"disabled","click"],[3,"id"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(z4),r.\u0275\u0275template(0,F4,9,7,"div",0),r.\u0275\u0275template(1,N4,5,4,"button",1)),2&e&&(r.\u0275\u0275property("ngIf","drop"===i.uploader.options.type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","button"===i.uploader.options.type))},dependencies:[bt,on,I4],styles:[".m-upload__button[_ngcontent-%COMP%]{position:relative}"]})),t})(),LI=(()=>{class t{constructor(e){A(this,"initValues",void 0),A(this,"INVALID_FILE_TYPE","INVALID_FILE_TYPE"),A(this,"INVALID_FILE_SIZE","INVALID_FILE_SIZE"),A(this,"INVALID_MIME_TYPE","INVALID_MIME_TYPE"),this.initValues=e,e.INVALID_FILE_TYPE&&(this.INVALID_FILE_TYPE=e.INVALID_FILE_TYPE),e.INVALID_FILE_SIZE&&(this.INVALID_FILE_SIZE=e.INVALID_FILE_SIZE),e.INVALID_MIME_TYPE&&(this.INVALID_MIME_TYPE=e.INVALID_MIME_TYPE)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275inject(jT))}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})();function V4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"li",2),r.\u0275\u0275element(1,"aui-icon",3),r.\u0275\u0275elementStart(2,"span",4),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"span",5),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"button",6),r.\u0275\u0275listener("click",function(){const m=r.\u0275\u0275restoreView(e).index,C=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(C.remove(m))}),r.\u0275\u0275element(7,"aui-icon",7),r.\u0275\u0275elementEnd()()}if(2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(e.file.name),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(i.formatReasons(e.reasons)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ariaLabel",i.ariaLabelRemove)}}let j4=(()=>{class t{constructor(e){A(this,"messagesService",void 0),A(this,"invalidFiles",[]),A(this,"ariaLabelRemove","Verwijder"),this.messagesService=e}remove(e){this.invalidFiles.splice(e,1)}formatReasons(e){const i=[];for(const l of e)i.push(this.messagesService[l]);return i.join(", ")}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(LI))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-validation-list"]],inputs:{invalidFiles:"invalidFiles",ariaLabelRemove:"ariaLabelRemove"},decls:2,vars:1,consts:[[1,"m-upload__files"],["class","is-error",4,"ngFor","ngForOf"],[1,"is-error"],["name","ai-alert-triangle"],[1,"m-upload__filename"],[1,"m-upload__error"],["type","button",1,"m-upload__delete","a-button","a-button--text","a-button--danger","a-button--s","has-icon",3,"click"],["name","ai-close",3,"ariaLabel"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"ul",0),r.\u0275\u0275template(1,V4,8,3,"li",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",i.invalidFiles))},dependencies:[bt,To],encapsulation:2})),t})();function U4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"aui-upload-queue",5),r.\u0275\u0275listener("uploadedFiles",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.onUploadedFiles(l))}),r.\u0275\u0275elementEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ariaLabelRemove",e.ariaLabelRemove)("files",e.queuedFiles)("uploader",e.uploader)}}const H4=[[["",8,"m-upload__button"]]],$4=[".m-upload__button"];let G4=(()=>{class t{constructor(){A(this,"id",""),A(this,"accept",[]),A(this,"capture",""),A(this,"ariaLabelRemove","Verwijder"),A(this,"disabled",!1),A(this,"multiple",!0),A(this,"label",""),A(this,"description",""),A(this,"options",MI),A(this,"selectUploadedFiles",new r.EventEmitter),A(this,"uploader",void 0),A(this,"ariaId",void 0),A(this,"uploadedFiles",[]),A(this,"invalidFiles",[]),A(this,"queuedFiles",[])}ngOnInit(){this.id||(this.ariaId="aui-upload-"+Math.random().toString(36).substring(2),this.id=this.ariaId),this.uploader=new II(this.options)}onUploadedFiles(e){this.uploadedFiles=this.uploadedFiles.concat(e),this.selectUploadedFiles.emit(this.uploadedFiles)}onInvalidFiles(e){this.invalidFiles=e}onQueuedFiles(e){this.queuedFiles=this.queuedFiles.concat(e)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-upload"]],inputs:{id:"id",accept:"accept",capture:"capture",ariaLabelRemove:"ariaLabelRemove",disabled:"disabled",multiple:"multiple",label:"label",description:"description",options:"options"},outputs:{selectUploadedFiles:"selectUploadedFiles"},ngContentSelectors:$4,decls:6,vars:12,consts:[[1,"m-upload","aui-upload"],[3,"id","accept","capture","ariaId","disabled","multiple","uploader","label","description","invalidFiles","queuedFiles","uploadedFiles"],[1,"m-upload__button"],[3,"ariaLabelRemove","invalidFiles"],[3,"ariaLabelRemove","files","uploader","uploadedFiles",4,"ngIf"],[3,"ariaLabelRemove","files","uploader","uploadedFiles"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(H4),r.\u0275\u0275elementStart(0,"div",0)(1,"aui-upload-zone",1),r.\u0275\u0275listener("invalidFiles",function(m){return i.onInvalidFiles(m)})("queuedFiles",function(m){return i.onQueuedFiles(m)})("uploadedFiles",function(m){return i.onUploadedFiles(m)}),r.\u0275\u0275elementStart(2,"div",2),r.\u0275\u0275projection(3),r.\u0275\u0275elementEnd()(),r.\u0275\u0275element(4,"aui-validation-list",3),r.\u0275\u0275template(5,U4,1,3,"aui-upload-queue",4),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("id",i.id)("accept",i.accept)("capture",i.capture)("ariaId",i.ariaId)("disabled",i.disabled)("multiple",i.multiple)("uploader",i.uploader)("label",i.label)("description",i.description),r.\u0275\u0275advance(3),r.\u0275\u0275property("ariaLabelRemove",i.ariaLabelRemove)("invalidFiles",i.invalidFiles),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!(null!=i.options&&i.options.autoUpload)))},dependencies:[on,PI,AI,j4],styles:[".m-upload__button[_ngcontent-%COMP%]{position:relative}"]})),t})(),kI=(()=>{class t{static forChild(e={}){return{ngModule:t,providers:[{provide:jT,useValue:e}]}}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[LI,{provide:jT,useValue:{}}],imports:[Ri,P4,sc,ls]})),t})();function Z4(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",14)(1,"ul",15)(2,"li",16),r.\u0275\u0275element(3,"aui-icon",17),r.\u0275\u0275elementStart(4,"span",18),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"span",19),r.\u0275\u0275text(7,"This file extension is not allowed."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"button",20),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.reloadErrors())}),r.\u0275\u0275element(9,"aui-icon",21),r.\u0275\u0275elementEnd()()()()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(e.fileName)}}let W4=(()=>{class t{constructor(){A(this,"files",[]),A(this,"accept",["image/*"]),A(this,"capture","environment"),A(this,"invalidFiles",[]),A(this,"queuedFiles",[]),A(this,"uploadedFiles",[]),A(this,"uploader",new II({allowedFileTypes:["jpg","jpeg","png"],type:"drop"})),A(this,"showError",!1),A(this,"fileName",""),A(this,"dropzone1",{allowedMimeTypes:["image/jpeg","image/gif","image/png"],maxFileSize:1e7,queueLimit:2,type:"drop"}),A(this,"dropzone2",{type:"button",allowedFileTypes:[".jpg","jpeg","png"],autoUpload:!0,maxFileSize:2e6}),A(this,"uploadImportExample","import { UploadModule } from '@acpaas-ui/ngx-forms';\n\n@NgModule({\n\timports: [\n\t\tUploadModule,\n\t]\n});\n\nexport class AppModule {};"),A(this,"uploadExampleJS1","public accept = ['image/*'];\npublic dropzone1: UploadOptions = {\n\tallowedMimeTypes: ['image/jpeg', 'image/gif', 'image/png'],\n\tmaxFileSize: 10000000,\n\tqueueLimit: 2,\n\ttype: 'drop',\n\turl: 'api/upload',\n};"),A(this,"uploadExampleHTML1",'<label class="a-input__label" for="my-upload">Upload files</label>\n<aui-upload\n  (selectUploadedFiles)="onUpload($event)"\n  [options]="dropzone1"\n  data-id="my-upload"\n  [accept]="accept"\n  label="Drag your files here or click upload"\n  description="Optional description message"\n>\n</aui-upload>'),A(this,"uploadExampleJS2","public dropzone2: UploadOptions = {\n\ttype: 'button',\n\tallowedFileTypes: ['.jpg', 'jpeg', 'png'],\n\tautoUpload: true,\n\tmaxFileSize: 2000000,\n\turl: 'api/upload',\n};"),A(this,"uploadExampleHTML2",'<aui-upload\n\t[options]="dropzone2"\n\t(selectUploadedFiles)="onUpload($event)">\n\t<div class="m-upload__button">\n\t\tSelect your files to upload\n\t</div>\n</aui-upload>'),A(this,"uploadExampleJS3","public files = [];\npublic invalidFiles: InvalidFile[] = [];\npublic queuedFiles: File[] = [];\npublic uploadedFiles: File[] = [];\n// Pass created options into new instance of Uploader\npublic uploader = new Uploader({\n\tallowedFileTypes: ['jpg', 'jpeg', 'png'],\n\ttype: 'drop',\n\turl: 'api/upload',\n});\npublic showError = false;\npublic fileName = '';\npublic capture = 'environment';\n});"),A(this,"uploadExampleJS4","public onQueuedFiles(files: File[]) {\n\tif (!files.length) {\n\t\treturn;\n\t}\n\n\tthis.queuedFiles = this.queuedFiles.concat(files);\n}\n\npublic onUploadedFiles(files) {\n\tthis.uploadedFiles = this.uploadedFiles.concat(files);\n}\n\npublic onInvalidFiles(errorFiles: InvalidFile[]) {\n\tthis.invalidFiles = errorFiles;\n\tif (errorFiles.length > 0) {\n\t\tthis.fileName = this.invalidFiles[0]['file'].name;\n\t\tthis.showError = true;\n\t\tthis.invalidFiles = [];\n\t} else {\n\t\tthis.showError = false;\n\t}\n}\n\npublic reloadErrors() {\n\tthis.showError = false;\n\tif (!this.queuedFiles.length) {\n\t\treturn;\n\t}\n}\n\n/**\n* Using the uploader url option\n*/\n\npublic uploadFiles(): void {\n// Upload files returns an obervable\nthis.uploader.uploadFiles(this.queuedFiles).subscribe(\n\t(response) => {\n\t\t// Response has a progress property to use with a progress bar\n\t\tif (response.progress) {\n\t\t\tconsole.log('response.progress = ', response.progress);\n\t\t}\n\t\t// Response had a data property with an array of uploaded files: UploadedFile[]\n\t\tif (response.data) {\n\t\t\tconsole.log('response.data = ', response.data);\n\t\t}\n\t\tthis.uploadedFiles = response.data;\n\t},\n\t(err) => {\n\t\tconsole.log('HTTP Error', err);\n\t});\n}\n\n/**\n * Using a custom upload service\n */\n\npublic uploadFiles(): void {\n\tif (!this.queuedFiles.length) {\n\t\treturn;\n\t}\n\tthis.customService.postFile(this.queuedFiles).subscribe(res => {\n\t\tthis.result = res;\n\t}, (error) => {\n\t\tconsole.log(error);\n\t});\n}"),A(this,"uploadExampleSCSS","// don't display the default upload button\n::ng-deep .a-upload-queue__wrapper {\n\t.a-button {\n\t\tdisplay: none;\n\t}\n}"),A(this,"uploadExampleHTML3",'<aui-upload-zone\n  (invalidFiles)="onInvalidFiles($event)"\n  (queuedFiles)="onQueuedFiles($event)"\n  (uploadedFiles)="onUploadedFiles($event)"\n  [uploader]="uploader"\n  ariaId="my-other-upload"\n  multiple="false"\n  [capture]="capture"\n  label="Drag your files here or click to upload"\n  description="Maximum filesize: 10 MB, File extension: jps, jpeg, png"\n>\n</aui-upload-zone>\n<aui-upload-queue [files]="queuedFiles" class="a-upload-queue__wrapper"></aui-upload-queue>\n<div *ngIf="showError" class="m-upload u-margin-bottom">\n  <ul class="m-upload__files">\n    <li class="is-error">\n      <aui-icon name="ai-alert-triangle"></aui-icon>\n      <span class="m-upload__filename">{{ fileName }}</span>\n      <span class="m-upload__error">This file extension is not allowed.</span>\n      <button\n        (click)="reloadErrors()"\n        class="m-upload__delete a-button a-button--text a-button--danger a-button--s has-icon"\n        type="button"\n      >\n        <aui-icon name="ai-close" ariaLabel="Remove"></aui-icon>\n      </button>\n    </li>\n  </ul>\n</div>')}onUpload(e){this.files=this.files.concat(e)}onQueuedFiles(e){e.length&&(this.queuedFiles=this.queuedFiles.concat(e))}onUploadedFiles(e){this.uploadedFiles=this.uploadedFiles.concat(e)}onInvalidFiles(e){this.invalidFiles=e,e.length>0?(this.fileName=this.invalidFiles[0].file.name,this.showError=!0,this.invalidFiles=[]):this.showError=!1}reloadErrors(){this.showError=!1}uploadFiles(){this.uploader.uploadFiles(this.queuedFiles).subscribe(e=>{e.progress&&console.log("response.progress = ",e.progress),e.data&&console.log("response.data = ",e.data),this.uploadedFiles=e.data},e=>{console.log("HTTP Error",e)})}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:42,vars:17,consts:[[1,"h4","u-margin-bottom"],[1,"m-alert","u-margin-bottom"],[1,"u-margin-bottom-l"],[3,"codeSnippet"],[1,"h5","u-margin-bottom"],[1,"u-margin-bottom"],["for","my-upload",1,"a-input__label"],["data-id","my-upload","label","Drag your files here or click upload","description","Optional description message",3,"options","accept","selectUploadedFiles"],[3,"options","selectUploadedFiles"],[1,"m-upload__button"],["ariaId","my-other-upload","multiple","false","label","Drag your files here or click to upload","description","Maximum filesize: 10 MB, File extension: jps, jpeg, png",3,"uploader","capture","invalidFiles","queuedFiles","uploadedFiles"],[1,"a-upload-queue__wrapper",3,"files"],["class","m-upload u-margin-bottom",4,"ngIf"],["id","uploadButton","type","button",1,"a-button",3,"disabled","click"],[1,"m-upload","u-margin-bottom"],[1,"m-upload__files"],[1,"is-error"],["name","ai-alert-triangle"],[1,"m-upload__filename"],[1,"m-upload__error"],["type","button",1,"m-upload__delete","a-button","a-button--text","a-button--danger","a-button--s","has-icon",3,"click"],["name","ai-close","ariaLabel","Remove"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Upload"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1)(3,"p"),r.\u0275\u0275text(4,"The following examples only have a visual purpose since they don't have a backend to talk to."),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(5,"div",2),r.\u0275\u0275element(6,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"h4",4),r.\u0275\u0275text(8,"Basic upload"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",5),r.\u0275\u0275element(10,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"div",5),r.\u0275\u0275element(12,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",2)(14,"label",6),r.\u0275\u0275text(15,"Upload files"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"aui-upload",7),r.\u0275\u0275listener("selectUploadedFiles",function(m){return i.onUpload(m)}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(17,"h4",4),r.\u0275\u0275text(18,"Upload as a button"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",5),r.\u0275\u0275element(20,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",5),r.\u0275\u0275element(22,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"div",2)(24,"aui-upload",8),r.\u0275\u0275listener("selectUploadedFiles",function(m){return i.onUpload(m)}),r.\u0275\u0275elementStart(25,"div",9),r.\u0275\u0275text(26,"Select your files to upload"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(27,"h4",4),r.\u0275\u0275text(28,"Custom upload"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"div",5),r.\u0275\u0275element(30,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",5),r.\u0275\u0275element(32,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(33,"div",5),r.\u0275\u0275element(34,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(35,"div",5),r.\u0275\u0275element(36,"aui-code-snippet",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(37,"aui-upload-zone",10),r.\u0275\u0275listener("invalidFiles",function(m){return i.onInvalidFiles(m)})("queuedFiles",function(m){return i.onQueuedFiles(m)})("uploadedFiles",function(m){return i.onUploadedFiles(m)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(38,"aui-upload-queue",11),r.\u0275\u0275template(39,Z4,10,1,"div",12),r.\u0275\u0275elementStart(40,"button",13),r.\u0275\u0275listener("click",function(){return i.uploadFiles()}),r.\u0275\u0275text(41," Send\n"),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet",i.uploadImportExample),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.uploadExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.uploadExampleHTML1),r.\u0275\u0275advance(4),r.\u0275\u0275property("options",i.dropzone1)("accept",i.accept),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.uploadExampleJS2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.uploadExampleHTML2),r.\u0275\u0275advance(2),r.\u0275\u0275property("options",i.dropzone2),r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet",i.uploadExampleJS3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.uploadExampleJS4),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.uploadExampleSCSS),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.uploadExampleHTML3),r.\u0275\u0275advance(1),r.\u0275\u0275property("uploader",i.uploader)("capture",i.capture),r.\u0275\u0275advance(1),r.\u0275\u0275property("files",i.queuedFiles),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.showError),r.\u0275\u0275advance(1),r.\u0275\u0275property("disabled",0===i.queuedFiles.length))},dependencies:[tr,Ef,G4,PI,AI,on],encapsulation:2})),t})(),q4=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"h3","u-margin-bottom"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Layout"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(2,"router-outlet"))},dependencies:[Ju],encapsulation:2})),t})(),OI=(()=>{class t{constructor(){A(this,"domain",void 0),A(this,"currentYear",(new Date).getFullYear())}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-copyright"]],inputs:{domain:"domain"},decls:2,vars:2,template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"span"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate2("\xa9 ",i.currentYear," ",i.domain,""))},encapsulation:2,changeDetection:0})),t})(),UT=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFooterContent",""]]})),t})();const Y4=[[["","auiFooterContent",""]],[["","auiFooterBottom",""]]],K4=function(t){return{extended:t}},Q4=["[auiFooterContent]","[auiFooterBottom]"];let RI=(()=>{class t{constructor(e){A(this,"ref",void 0),A(this,"footerContent",void 0),A(this,"isExtended",!1),this.ref=e}ngAfterContentChecked(){const e=void 0!==this.footerContent;e!==this.isExtended&&(this.isExtended=e,this.ref.markForCheck())}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-footer"]],contentQueries:function(e,i,l){if(1&e&&r.\u0275\u0275contentQuery(l,UT,7),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.footerContent=m.first)}},ngContentSelectors:Q4,decls:3,vars:3,consts:[[1,"aui-footer",3,"ngClass"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(Y4),r.\u0275\u0275elementStart(0,"footer",0),r.\u0275\u0275projection(1),r.\u0275\u0275projection(2,1),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(1,K4,i.isExtended))},dependencies:[Ne],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})),t})();const X4=["*"];let FI=(()=>{class t{constructor(){A(this,"ariaGoUpLabel","Ga terug naar boven")}goToTop(){window.scrollTo(0,0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-subfooter"]],inputs:{ariaGoUpLabel:"ariaGoUpLabel"},ngContentSelectors:X4,decls:5,vars:1,consts:[[1,"o-footer"],[1,"o-footer__label"],["type","button",1,"o-footer__button","a-button","a-button--secondary","has-icon",3,"click"],["name","ai-arrow-up-1"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"button",2),r.\u0275\u0275listener("click",function(){return i.goToTop()}),r.\u0275\u0275element(4,"aui-icon",3),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275attribute("aria-label",i.ariaGoUpLabel))},dependencies:[To],encapsulation:2,changeDetection:0})),t})(),NI=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiFooterBottom",""]]})),t})(),J4=(()=>{class t{constructor(){A(this,"footer1","import { FooterModule } from '@acpaas-ui/ngx-layout';\n\n@NgModule({\n\timports: [\n\t\tFooterModule,\n\t]\n});\n\nexport class AppModule {};"),A(this,"footer2",'<aui-footer isExtended="false">\n\t<div class="u-margin-bottom u-margin-top">\n\t\t<div auiFooterContent>\n\t\t\tFooter content goes here\n\t\t</div>\n\t\t<div auiFooterBottom>\n\t\t\t<aui-subfooter ariaGoUpLabel="Go back to top">\n\t\t\t\t<aui-copyright domain="Digipolis"></aui-copyright>\n\t\t\t</aui-subfooter>\n\t\t</div>\n\t</div>\n</aui-footer>')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:14,vars:2,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-3xl"],["isExtended","false"],[1,"u-margin-bottom","u-margin-top"],["auiFooterContent",""],["auiFooterBottom",""],["domain","Digipolis"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Footer"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",3)(7,"aui-footer",4)(8,"div",5)(9,"div",6),r.\u0275\u0275text(10,"Footer content goes here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"div",7)(12,"aui-subfooter"),r.\u0275\u0275element(13,"aui-copyright",8),r.\u0275\u0275elementEnd()()()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.footer1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.footer2))},dependencies:[OI,RI,FI,NI,UT,tr],encapsulation:2})),t})(),eV=(()=>{class t{constructor(){A(this,"header1","import { HeaderModule } from '@acpaas-ui/ngx-layout';\n\n@NgModule({\n\timports: [\n\t\tHeaderModule,\n\t]\n});\n\nexport class AppModule {};"),A(this,"header2",'<aui-header>\n\t<div auiHeaderLogo>\n\t\t<aui-logo title="Antwerp logo." src="./assets/a-logo.svg" [link]="\'/\'"></aui-logo>\n\t</div>\n\t<div auiHeaderContent>\x3c!-- Optional --\x3e</div>\n\t<div auiHeaderMenuItem>\n    <a class="a-button--text o-header__button has-icon-left" href="http://github.com/digipolisantwerp/antwerp-ui_angular">\n      <aui-icon name="ai-developer-community-github-1"></aui-icon>GitHub\n    </a>\n  </div>\n</aui-header>\n')}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:10,vars:2,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-3xl"],[1,"m-alert"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Header"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",3)(7,"div",4)(8,"p"),r.\u0275\u0275text(9,"The header on this page is a working example of the demo code."),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.header1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.header2))},dependencies:[tr],encapsulation:2})),t})();class zI{constructor(n){A(this,"modalService",void 0),A(this,"ref",null),this.modalService=n}closeModal(){this.modalService.closeModal(this.ref)}}var iV=function(){try{var t=bg(Object,"defineProperty");return t({},"",{}),t}catch{}}();const BI=iV,VI=function rV(t,n,e){"__proto__"==n&&BI?BI(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e};var sV=Object.prototype.hasOwnProperty;const jI=function aV(t,n,e){var i=t[n];(!sV.call(t,n)||!M1(i,e)||void 0===e&&!(n in t))&&VI(t,n,e)},Y1=function lV(t,n,e,i){var l=!e;e||(e={});for(var m=-1,C=n.length;++m<C;){var F=n[m],K=i?i(e[F],t[F],F,e,t):void 0;void 0===K&&(K=t[F]),l?VI(e,F,K):jI(e,F,K)}return e};var fV=Object.prototype.hasOwnProperty;const gV=function mV(t){if(!cp(t))return function hV(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=AT(t),e=[];for(var i in t)"constructor"==i&&(n||!fV.call(t,i))||e.push(i);return e},HT=function _V(t){return bT(t)?fI(t,!0):gV(t)};var UI="object"==typeof exports&&exports&&!exports.nodeType&&exports,HI=UI&&"object"==typeof module&&module&&!module.nodeType&&module,$I=HI&&HI.exports===UI?hh.Buffer:void 0,GI=$I?$I.allocUnsafe:void 0;const ZI=mI(Object.getPrototypeOf,Object);var IV=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)nI(n,MT(t)),t=ZI(t);return n}:rI;const WI=IV,kV=function LV(t){return iI(t,HT,WI)};var RV=Object.prototype.hasOwnProperty;const $T=function zV(t){var n=new t.constructor(t.byteLength);return new H1(n).set(new H1(t)),n};var jV=/\w*$/;var qI=rd?rd.prototype:void 0,YI=qI?qI.valueOf:void 0;const f5=function p5(t,n,e){var i=t.constructor;switch(n){case"[object ArrayBuffer]":return $T(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function BV(t,n){var e=n?$T(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function ZV(t,n){var e=n?$T(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function UV(t){var n=new t.constructor(t.source,jV.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Symbol]":return function $V(t){return YI?Object(YI.call(t)):{}}(t)}};var KI=Object.create,m5=function(){function t(){}return function(n){if(!cp(n))return{};if(KI)return KI(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const g5=m5;var QI=Hy&&Hy.isMap;const C5=QI?IT(QI):function b5(t){return Sf(t)&&"[object Map]"==s0(t)};var XI=Hy&&Hy.isSet;const M5=XI?IT(XI):function E5(t){return Sf(t)&&"[object Set]"==s0(t)};var JI="[object Arguments]",eP="[object Function]",tP="[object Object]",yo={};yo[JI]=yo["[object Array]"]=yo["[object ArrayBuffer]"]=yo["[object DataView]"]=yo["[object Boolean]"]=yo["[object Date]"]=yo["[object Float32Array]"]=yo["[object Float64Array]"]=yo["[object Int8Array]"]=yo["[object Int16Array]"]=yo["[object Int32Array]"]=yo["[object Map]"]=yo["[object Number]"]=yo[tP]=yo["[object RegExp]"]=yo["[object Set]"]=yo["[object String]"]=yo["[object Symbol]"]=yo["[object Uint8Array]"]=yo["[object Uint8ClampedArray]"]=yo["[object Uint16Array]"]=yo["[object Uint32Array]"]=!0,yo["[object Error]"]=yo[eP]=yo["[object WeakMap]"]=!1;const tj=function K1(t,n,e,i,l,m){var C,F=1&n,K=2&n,le=4&n;if(e&&(C=l?e(t,i,l,m):e(t)),void 0!==C)return C;if(!cp(t))return t;var xe=Cf(t);if(xe){if(C=function FV(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&RV.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!F)return function CV(t,n){var e=-1,i=t.length;for(n||(n=Array(i));++e<i;)n[e]=t[e];return n}(t,C)}else{var Ae=s0(t),et=Ae==eP||"[object GeneratorFunction]"==Ae;if($1(t))return function xV(t,n){if(n)return t.slice();var e=t.length,i=GI?GI(e):new t.constructor(e);return t.copy(i),i}(t,F);if(Ae==tP||Ae==JI||et&&!l){if(C=K||et?{}:function _5(t){return"function"!=typeof t.constructor||AT(t)?{}:g5(ZI(t))}(t),!F)return K?function PV(t,n){return Y1(t,WI(t),n)}(t,function yV(t,n){return t&&Y1(n,HT(n),t)}(C,t)):function EV(t,n){return Y1(t,MT(t),n)}(t,function cV(t,n){return t&&Y1(n,LT(n),t)}(C,t))}else{if(!yo[Ae])return l?t:{};C=f5(t,Ae,F)}}m||(m=new j1);var Qe=m.get(t);if(Qe)return Qe;m.set(t,C),M5(t)?t.forEach(function(Nt){C.add(K1(Nt,n,e,Nt,t,m))}):C5(t)&&t.forEach(function(Nt,Gt){C.set(Gt,K1(Nt,n,e,Gt,t,m))});var At=xe?void 0:(le?K?kV:kT:K?HT:LT)(t);return function tV(t,n){for(var e=-1,i=null==t?0:t.length;++e<i&&!1!==n(t[e],e,t););}(At||t,function(Nt,Gt){At&&(Nt=t[Gt=Nt]),jI(C,Gt,K1(Nt,n,e,Gt,t,m))}),C};const lj=["*"];let cj=(()=>{class t{constructor(e){A(this,"ref",void 0),A(this,"mouseDownInsideOverlay",void 0),A(this,"theme","dark"),A(this,"title","Modal"),A(this,"modal",void 0),this.ref=e}get overlayClass(){return`m-overlay m-overlay--${this.theme} is-active`}get ariaLabel(){return this.title}mouseDownHandler(e){const i=this.ref.nativeElement.querySelector(".m-modal");this.mouseDownInsideOverlay=i&&(e.target===i||i.contains(e.target))}mouseUpHandler(e){const i=this.ref.nativeElement.querySelector(".m-modal");i&&(e.target===i||i.contains(e.target))||this.mouseDownInsideOverlay||this.modal.instance.closeModal()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(r.ElementRef))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-modal-overlay"]],hostVars:3,hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("touchstart",function(m){return i.mouseDownHandler(m)})("mousedown",function(m){return i.mouseDownHandler(m)})("touchend",function(m){return i.mouseUpHandler(m)})("mouseup",function(m){return i.mouseUpHandler(m)}),2&e&&(r.\u0275\u0275attribute("aria-label",i.ariaLabel),r.\u0275\u0275classMap(i.overlayClass))},ngContentSelectors:lj,decls:2,vars:0,consts:[[1,"m-overlay__inner"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"section",0),r.\u0275\u0275projection(1),r.\u0275\u0275elementEnd())},encapsulation:2})),t})(),Q1=(()=>{class t{constructor(e,i,l){A(this,"injector",void 0),A(this,"resolver",void 0),A(this,"appRef",void 0),A(this,"activeModals",[]),this.injector=e,this.resolver=i,this.appRef=l}openModal(e,i,l,m={}){const C=this.createRef(e);C.instance.ref=C,C.instance.modalData=function rj(t){return tj(t,5)}(i),C.instance.modalActions=l;const F=this.createRef(cj,[[C.location.nativeElement]]);return F.instance.modal=C,F.instance.title=C.instance.modalData&&C.instance.modalData.title?C.instance.modalData.title:"Modal",F.instance.theme=m.theme||"dark",this.activeModals.push({modal:C,overlay:F}),this.appendRefs(F),C}closeModal(e){const i=this.activeModals.findIndex(m=>m.modal===e);if(i<0)return;const l=this.activeModals[i];l.modal.destroy(),l.overlay.destroy(),this.activeModals.splice(i,1)}closeLast(){const e=function sj(t){var n=null==t?0:t.length;return n?t[n-1]:void 0}(this.activeModals);e&&this.closeModal(e.modal)}createRef(e,i){const m=this.resolver.resolveComponentFactory(e).create(this.injector,i);return this.appRef.attachView(m.hostView),m.onDestroy(()=>this.appRef.detachView(m.hostView)),m}appendRefs(...e){const i=zl(this.appRef,"components[0].location.nativeElement",null);i&&e.forEach(l=>{i.appendChild(l.location.nativeElement)})}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275inject(r.Injector),r.\u0275\u0275inject(r.ComponentFactoryResolver),r.\u0275\u0275inject(r.ApplicationRef))}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})(),uj=(()=>{class t extends zI{constructor(e){super(e),A(this,"modalService",void 0),A(this,"modalData",void 0),this.modalService=e}submitAndCloseModal(){console.log("Submit!"),this.closeModal()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Q1))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-modal"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:15,vars:2,consts:[["role","dialog","aria-modal","true","aria-labelledby","myModalTitle","aria-describedby","myModelDesc",1,"m-modal"],[1,"m-modal__content"],[1,"m-modal__header","u-margin-bottom-xs"],["type","button",1,"m-modal__close","a-button","a-button--text","a-button--neutral","has-icon",3,"click"],["name","ai-close"],["id","myModalTitle"],[1,"u-margin-bottom"],["id","myModelDesc"],[1,"m-modal__footer"],["type","button",1,"a-button",3,"click"],["type","button",1,"a-button","a-button--outlined",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),r.\u0275\u0275listener("click",function(){return i.closeModal()}),r.\u0275\u0275element(4,"aui-icon",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"h6",5),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(7,"div",6)(8,"p",7),r.\u0275\u0275text(9),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",8)(11,"button",9),r.\u0275\u0275listener("click",function(){return i.submitAndCloseModal()}),r.\u0275\u0275text(12,"Close Modal"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"button",10),r.\u0275\u0275listener("click",function(){return i.closeModal()}),r.\u0275\u0275text(14,"Cancel"),r.\u0275\u0275elementEnd()()()()),2&e&&(r.\u0275\u0275advance(6),r.\u0275\u0275textInterpolate(i.modalData.title),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(i.modalData.text))},dependencies:[Ef],encapsulation:2})),t})();const hj=["titleContainer"];let dj=(()=>{class t extends zI{constructor(e){super(e),A(this,"modalService",void 0),A(this,"titleContainer",void 0),A(this,"modalData",void 0),A(this,"modalActions",void 0),A(this,"titleId",void 0),A(this,"descId",void 0),A(this,"closeButtonAriaLabel","Sluiten"),A(this,"headerElement",void 0),A(this,"headerTag","h4"),A(this,"headerTags",{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"}),this.modalService=e}ngOnInit(){this.titleId="aui-modal-"+Math.random().toString(36).substring(2),this.descId="aui-modal-"+Math.random().toString(36).substring(2),this.modalData=this.modalData||{question:"Vraag?",description:"Beschrijving\u2026",approve:"OK",reject:"Annuleren",closeButtonAriaLabel:"Sluiten",headerTag:"h4"},this.header(this.headerTags[this.modalData.headerTag||this.headerTag])}submit(){this.verifyAction("approve").then(()=>this.closeModal())}close(){this.verifyAction("reject").then(()=>this.closeModal())}verifyAction(e){return zl(this.modalActions,e)?this.modalActions[e]():Promise.resolve()}header(e){this.headerElement=document.createElement(e),this.headerElement.id=this.titleId,this.headerElement.innerHTML=this.modalData.question,this.titleContainer.nativeElement.appendChild(this.headerElement)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Q1))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-approve-modal"]],viewQuery:function(e,i){if(1&e&&r.\u0275\u0275viewQuery(hj,7),2&e){let l;r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.titleContainer=l.first)}},features:[r.\u0275\u0275InheritDefinitionFeature],decls:14,vars:8,consts:[["aria-modal","true","role","dialog",1,"m-modal"],[1,"m-modal__content"],[1,"m-modal__header","u-margin-bottom-xs"],["titleContainer",""],["type","button",1,"m-modal__close","a-button","a-button--text","a-button--neutral","has-icon",3,"click"],["name","ai-close",3,"ariaLabel"],[1,"u-margin-bottom"],[3,"id"],[1,"m-modal__footer"],["type","button",1,"a-button",3,"click"],["type","button",1,"a-button","a-button--outlined",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2,3)(4,"button",4),r.\u0275\u0275listener("click",function(){return i.close()}),r.\u0275\u0275element(5,"aui-icon",5),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(6,"div",6)(7,"p",7),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(9,"div",8)(10,"button",9),r.\u0275\u0275listener("click",function(){return i.close()}),r.\u0275\u0275text(11),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"button",10),r.\u0275\u0275listener("click",function(){return i.submit()}),r.\u0275\u0275text(13),r.\u0275\u0275elementEnd()()()()),2&e&&(r.\u0275\u0275attribute("aria-describedby",i.descId)("aria-labelledby",i.titleId),r.\u0275\u0275advance(4),r.\u0275\u0275attribute("aria-label",i.modalData.closeButtonAriaLabel||i.closeButtonAriaLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("ariaLabel",i.modalData.reject),r.\u0275\u0275advance(2),r.\u0275\u0275property("id",i.descId),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(i.modalData.description),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(i.modalData.reject),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(i.modalData.approve))},dependencies:[To],encapsulation:2})),t})(),pj=(()=>{class t{constructor(e){A(this,"modalService",void 0),A(this,"modal1",'import { Component, Input } from \'@angular/core\';\nimport { ModalAbstract, ModalService } from \'@acpaas-ui/ngx-layout\';\n\n@Component({\n  selector: \'aui-modal\',\n  template: `<div class="m-modal" role="dialog" aria-modal="true" aria-labelledby="myModalTitle" aria-describedby="myModelDesc">\n    <div class="m-modal__content">\n      <div class="m-modal__header u-margin-bottom-xs">\n        <button type="button" class="m-modal__close a-button a-button--text a-button--neutral has-icon" (click)="closeModal()">\n          <aui-icon name="ai-close" ariaLabel="Close"></aui-icon>\n        </button>\n        <h4 id="myModalTitle" class="h6">{{ modalData.title }}</h4>\n      </div>\n      <div class="u-margin-bottom">\n        <p id="myModalDesc">{{ modalData.text }}</p>\n      </div>\n      <div class="m-modal__footer">\n        <button type="button" class="a-button" (click)="submitAndCloseModal()">Close Modal</button>\n        <button type="button" class="a-button a-button a-button--outlined" (click)="closeModal()">Cancel</button>\n      </div>\n    </div>\n  </div>`,\n})\nexport class AUIDemoModalComponent extends ModalAbstract {\n  public modalData: any;\n\n  constructor(\n    public modalService: ModalService\n  ) {\n    super(modalService);\n  }\n\n   public submitAndCloseModal() {\n     console.log(\'Submit!\');\n     this.closeModal();\n   }\n}\n'),A(this,"modal2","constructor(\n  private modalService: ModalService\n) {}\n\npublic openModal() {\n  this.modalService.openModal(\n    AUIDemoModalComponent,\n    {\n      title: 'Modal demo',\n      text: 'Are you sure you want to see a demo of this modal?',\n    }, {\n      confirm: () => this.doSomething(),\n    }\n  );\n}\n\nprivate doSomething() {\n  return new Promise((resolve, reject) => {\n    return resolve();\n  });\n}"),A(this,"modal3",'<button type="button" class="a-button"\n  (click)="openModal()">\n  Open modal\n</button>'),A(this,"modal4","import { ApproveModalComponent } from '@acpaas-ui/ngx-layout';"),A(this,"modal5","public openApproveModal() {\n  this.modalService.openModal(ApproveModalComponent, {\n    question: 'Are you sure you want to close this demo modal?',\n    description: 'This action can be undone.',\n    approve: 'Close demo modal',\n    reject: 'Cancel'\n  }, {\n    approve: () => this.doSomething(),\n    reject: () => this.doSomethingElse()\n  });\n\n  private doSomething() {\n    return new Promise((resolve, reject) => {\n      return resolve();\n    });\n  }\n\n  private doSomethingElse() {\n    return new Promise((resolve, reject) => {\n      return resolve();\n    });\n  }\n}"),A(this,"modal6",'<button type="button" class="a-button"\n  (click)="openApproveModal()">\n  Open approve modal\n</button>'),this.modalService=e}openModal(){this.modalService.openModal(uj,{title:"Modal demo",text:"Are you sure you want to see a demo of this modal?"},{confirm:()=>this.doSomething()})}openApproveModal(){this.modalService.openModal(dj,{question:"Are you sure you want to close this demo modal?",description:"This action can be undone.",approve:"Close demo modal",reject:"Cancel",closeButtonAriaLabel:"Sluiten",headerTag:"h6"},{approve:()=>this.doSomething(),reject:()=>this.doSomethingElse()})}doSomething(){return new Promise((e,i)=>e(null))}doSomethingElse(){return new Promise((e,i)=>e(null))}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Q1))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:34,vars:6,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-l"],["type","button",1,"a-button",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Modal"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1)(3,"p"),r.\u0275\u0275text(4,"First, create a separate modal controller."),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(5,"div",1),r.\u0275\u0275element(6,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",1)(8,"p"),r.\u0275\u0275text(9,"Then, integrate the modal into your page."),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",1),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",1),r.\u0275\u0275element(13,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",3)(15,"button",4),r.\u0275\u0275listener("click",function(){return i.openModal()}),r.\u0275\u0275text(16,"Open modal"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(17,"h3",0),r.\u0275\u0275text(18,"Approve modal"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",1)(20,"p"),r.\u0275\u0275text(21,"In your controller:"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(22,"div",1),r.\u0275\u0275element(23,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"div",1),r.\u0275\u0275element(25,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"div",1)(27,"p"),r.\u0275\u0275text(28,"In your template:"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(29,"div",1),r.\u0275\u0275element(30,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",1)(32,"button",4),r.\u0275\u0275listener("click",function(){return i.openApproveModal()}),r.\u0275\u0275text(33,"Open approve modal"),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(6),r.\u0275\u0275property("codeSnippet",i.modal1),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.modal2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.modal3),r.\u0275\u0275advance(10),r.\u0275\u0275property("codeSnippet",i.modal4),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.modal5),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.modal6))},dependencies:[tr],encapsulation:2})),t})(),fj=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"h3","u-margin-bottom"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Utils"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(2,"router-outlet"))},dependencies:[Ju],encapsulation:2})),t})(),nP=(()=>{class t{filterData(e,i){return i.forEach(l=>{e=l.parseData(e)}),e}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})(),iP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[nP],imports:[Ri,ls,sc,tp]})),t})();class GT{constructor(){A(this,"id",void 0),A(this,"name",void 0),A(this,"options",void 0),A(this,"value",void 0),A(this,"parse",void 0)}parseData(n){return this.parse(n,this.value)}}const rP=(t,n)=>{if(!n)return t;const i=new RegExp(`%{(${Object.keys(n).map(l=>l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")).join("|")})}`,"g");return t.replace(i,(l,m)=>n[m]?String(n[m]):"")};let oP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({})),t})();const sP=new r.InjectionToken("WindowToken");class ZT{get nativeWindow(){throw new Error("Not implemented.")}}const yj={provide:sP,useFactory:function gj(t,n){return Sa(n)?t.nativeWindow:{}},deps:[ZT,r.PLATFORM_ID]},vj=[{provide:ZT,useClass:class mj extends ZT{constructor(){super()}get nativeWindow(){return window}}},yj];let aP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[vj]})),t})();function bj(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"li",3)(1,"form",4)(2,"div",5)(3,"div",6),r.\u0275\u0275element(4,"input",7),r.\u0275\u0275elementStart(5,"label",8),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd()()()()()),2&t){const e=n.$implicit,i=n.index,l=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("formGroup",l.form),r.\u0275\u0275advance(3),r.\u0275\u0275property("formControl",e)("id",l.filter.options[i].id)("name",l.filter.options[i].name),r.\u0275\u0275advance(1),r.\u0275\u0275property("for",l.filter.options[i].id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(l.filter.options[i].name)}}function xj(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"ul",1),r.\u0275\u0275template(1,bj,7,6,"li",2),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.options.controls)}}let wj=(()=>{class t{constructor(e){A(this,"formBuilder",void 0),A(this,"filter",void 0),A(this,"update",new r.EventEmitter),A(this,"form",void 0),A(this,"value",void 0),A(this,"destroy$",new pi.xQ),this.formBuilder=e}ngOnInit(){this.form=this.formBuilder.group({options:this.buildCheckboxes(this.filter.options)}),this.filter&&(this.value=this.filter.value),this.options.valueChanges.pipe((0,Qn.U)(e=>e.map((i,l)=>!0===i?this.filter.options[l]:null)),(0,Qn.U)(e=>e.filter(i=>null!==i)),ar(e=>this.value=e),ar(e=>this.update.next(e)),Nl(this.destroy$)).subscribe()}buildCheckboxes(e){return new mx([...e.map(i=>this.formBuilder.control(i.checked))])}get options(){return this.form.get("options")}onFilter(e){this.update.emit(e)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(Xh))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-checkbox-filter"]],inputs:{filter:"filter"},outputs:{update:"update"},decls:1,vars:1,consts:[["class","a-checkbox-list aui-checkbox-filter",4,"ngIf"],[1,"a-checkbox-list","aui-checkbox-filter"],["class","a-checkbox-list__item",4,"ngFor","ngForOf"],[1,"a-checkbox-list__item"],[3,"formGroup"],[1,"a-input","a-checkbox-list__checkbox"],[1,"a-input__checkbox"],["type","checkbox",3,"formControl","id","name"],[3,"for"]],template:function(e,i){1&e&&r.\u0275\u0275template(0,xj,2,1,"ul",0),2&e&&r.\u0275\u0275property("ngIf",i.filter&&i.filter.options&&i.filter.id)},dependencies:[bt,on,N_,cs,Os,sf,rh,qh],encapsulation:2})),t})();function Cj(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",2)(2,"input",3),r.\u0275\u0275listener("ngModelChange",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.onFilter(l.value))})("ngModelChange",function(l){r.\u0275\u0275restoreView(e);const m=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(m.value=l)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"aui-icon",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",e.value)("id",e.filter.id)("placeholder",e.filter.name),r.\u0275\u0275attribute("aria-label",e.filter.name)}}let Sj=(()=>{class t{constructor(){A(this,"filter",void 0),A(this,"update",new r.EventEmitter),A(this,"value",void 0)}ngOnInit(){this.filter&&(this.value=this.filter.value)}onFilter(e){this.update.emit(e)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-input-filter"]],inputs:{filter:"filter"},outputs:{update:"update"},decls:2,vars:1,consts:[[1,"a-input","has-icon-right","aui-input-filter"],[4,"ngIf"],[1,"a-input__wrapper"],["type","text",3,"ngModel","id","placeholder","ngModelChange"],["name","ai-search"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,Cj,4,4,"ng-container",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.filter))},dependencies:[on,To,cl,Os,oc],encapsulation:2})),t})();function Ej(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"option",7),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit;r.\u0275\u0275property("value",e.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.name)}}function Tj(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"label",2),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",3)(4,"select",4),r.\u0275\u0275template(5,Ej,2,2,"option",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(6,"aui-icon",6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("for",e.filter.id),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("",e.filter.name,": "),r.\u0275\u0275advance(2),r.\u0275\u0275property("formControl",e.select)("id",e.filter.id)("name",e.filter.id),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.filter.options)}}let Dj=(()=>{class t{constructor(){A(this,"filter",void 0),A(this,"update",new r.EventEmitter),A(this,"select",new O_),A(this,"value",void 0),A(this,"destroy$",new pi.xQ)}ngOnInit(){this.filter&&this.filter.value&&(this.value=this.filter.value,this.select.setValue(this.filter.value.id)),this.select.valueChanges.pipe((0,Qn.U)(e=>this.filter.options.find(i=>i.id===e)),ar(e=>this.update.next(e)),Nl(this.destroy$)).subscribe()}onFilter(e){this.update.emit(e)}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-select-filter"]],inputs:{filter:"filter"},outputs:{update:"update"},decls:2,vars:1,consts:[[1,"a-input","has-icon-right","aui-select-filter"],[4,"ngIf"],[1,"a-input__label","a-input__label--inline",3,"for"],[1,"a-input__wrapper","a-input__wrapper--inline"],[3,"formControl","id","name"],[3,"value",4,"ngFor","ngForOf"],["name","ai-arrow-down-1"],[3,"value"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,Tj,7,6,"ng-container",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.filter&&i.filter.options&&i.filter.id))},dependencies:[bt,on,To,ep,Um,oh,Os,rh],encapsulation:2})),t})(),Mj=(()=>{class t{constructor(e){A(this,"filterService",void 0),A(this,"searchFilter",new GT),A(this,"checkFilter",new GT),A(this,"selectFilter",new GT),A(this,"searchResults",[]),A(this,"checkResults",[]),A(this,"selectResults",[]),A(this,"heroList",[{id:"id1",name:"Batman"},{id:"id2",name:"Wonder Woman"},{id:"id3",name:"Wolverine"},{id:"id4",name:"Iron Man"},{id:"id5",name:"Deadpool"}]),A(this,"importModule","import { FilterModule } from '@acpaas-ui/ngx-utils';\n\n\t@NgModule({\n\t\timports: [\n\t\t\tFilterModule\n\t\t]\n\t})"),A(this,"codeExampleJS1","import { Filter, FilterService } from '@acpaas-ui/ngx-utils';\n\n\tpublic searchFilter = new Filter();\n\tpublic checkFilter = new Filter();\n\tpublic selectFilter = new Filter();\n\tpublic heroList = [\n\t\t{ id: 'id1', name: 'Batman' },\n\t\t{ id: 'id2', name: 'Wonder Woman' },\n\t\t{ id: 'id3', name: 'Wolverine' },\n\t\t{ id: 'id4', name: 'Iron Man' },\n\t\t{ id: 'id5', name: 'Deadpool' },\n\t];"),A(this,"codeExampleJS2","constructor(public filterService: FilterService) {}"),A(this,"codeExampleJS3","this.checkFilter.id = 'checkFilter';\nthis.checkFilter.name = 'Checkbox filter';\nthis.checkFilter.options = this.heroList;\nthis.checkFilter.value = [];\nthis.checkFilter.parse = (data, value) => {\n\tif (!value || value.length === 0) {\n\t\t\treturn;\n\t}\n\tconst result = [];\n\tdata.filter((o) => {\n\t\tvalue.forEach( i => {\n\t\t\tif ((o.id.toLowerCase()).indexOf(i.id.toLowerCase()) !== -1) {\n\t\t\t\tresult.push(i);\n\t\t\t}\n\t\t});\n\t});\n\treturn result;\n};\n\npublic changeCheckFilter(value) {\n\t// Update filter value\n\tthis.checkFilter.value = value;\n\t// Filter data\n\tthis.checkResults = this.filterService.filterData(this.heroList, [this.checkFilter]);\n}"),A(this,"codeExampleJS4","this.searchFilter.id = 'searchFilter';\nthis.searchFilter.name = 'Search here...';\nthis.searchFilter.value = '';\nthis.searchFilter.parse = (data, value) => {\n\tif (!value || value.length === 0) {\n\t\treturn ;\n\t\t}\n\t\treturn data.filter((o) => {\n\t\t\treturn (o.name.toLowerCase()).indexOf(value.toLowerCase()) !== -1;\n\t\t});\n};\n\npublic changeSearchFilter(value) {\n\tthis.searchFilter.value = value;\n\tthis.searchResults = this.filterService.filterData(this.heroList, [this.searchFilter]);\n}"),A(this,"codeExampleJS5","this.selectFilter.id = 'selectFilter';\nthis.selectFilter.name = 'Select your hero';\nthis.selectFilter.options = this.heroList;\nthis.selectFilter.value = [];\nthis.selectFilter.parse = (data, value) => {\n\tif (!value || value.length === 0) {\n\t\treturn;\n\t}\n\n\treturn data.filter((o) => {\n\t\treturn (o.id.toLowerCase()).indexOf(value.id.toLowerCase()) !== -1;\n\t});\n};\n\npublic changeSelectFilter(value) {\n\tthis.selectFilter.value = value;\n\tthis.selectResults = this.filterService.filterData(this.heroList, [this.selectFilter]);\n}"),A(this,"codeExampleHTML1",'<aui-checkbox-filter [filter]="checkFilter" (update)="changeCheckFilter($event)"></aui-checkbox-filter>'),A(this,"codeExampleHTML2",'<aui-input-filter [filter]="searchFilter" (update)="changeSearchFilter($event)"></aui-input-filter>'),A(this,"codeExampleHTML3",'<aui-select-filter [filter]="selectFilter" (update)="changeSelectFilter($event)"></aui-select-filter>'),this.filterService=e}ngOnInit(){this.checkFilter.id="checkFilter",this.checkFilter.name="Checkbox filter",this.checkFilter.options=this.heroList,this.checkFilter.value=[],this.checkFilter.parse=(e,i)=>{if(!i||0===i.length)return;const l=[];return e.filter(m=>{i.forEach(C=>{-1!==m.id.toLowerCase().indexOf(C.id.toLowerCase())&&l.push(C)})}),l},this.searchFilter.id="searchFilter",this.searchFilter.name="Search here...",this.searchFilter.value="",this.searchFilter.parse=(e,i)=>{if(i&&0!==i.length)return e.filter(l=>-1!==l.name.toLowerCase().indexOf(i.toLowerCase()))},this.selectFilter.id="selectFilter",this.selectFilter.name="Select your hero",this.selectFilter.options=this.heroList,this.selectFilter.value=[],this.selectFilter.parse=(e,i)=>{if(i&&0!==i.length)return e.filter(l=>-1!==l.id.toLowerCase().indexOf(i.id.toLowerCase()))}}changeSearchFilter(e){this.searchFilter.value=e,this.searchResults=this.filterService.filterData(this.heroList,[this.searchFilter])}changeCheckFilter(e){this.checkFilter.value=e,this.checkResults=this.filterService.filterData(this.heroList,[this.checkFilter])}changeSelectFilter(e){this.selectFilter.value=e,this.selectResults=this.filterService.filterData(this.heroList,[this.selectFilter])}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(nP))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:44,vars:21,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"h5","u-margin-bottom"],[3,"filter","update"],[1,"a-pre","a-pre--scrollable"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Filter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"h4",3),r.\u0275\u0275text(9,"Checkbox filter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",1),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",1),r.\u0275\u0275element(13,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",1)(15,"aui-checkbox-filter",4),r.\u0275\u0275listener("update",function(m){return i.changeCheckFilter(m)}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(16,"div",1)(17,"pre",5),r.\u0275\u0275text(18),r.\u0275\u0275pipe(19,"json"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(20,"h4",3),r.\u0275\u0275text(21,"Input filter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"div",1),r.\u0275\u0275element(23,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"div",1),r.\u0275\u0275element(25,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"div",1)(27,"aui-input-filter",4),r.\u0275\u0275listener("update",function(m){return i.changeSearchFilter(m)}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(28,"div",1)(29,"pre",5),r.\u0275\u0275text(30),r.\u0275\u0275pipe(31,"json"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(32,"h4",3),r.\u0275\u0275text(33,"Select filter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"div",1),r.\u0275\u0275element(35,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(36,"div",1),r.\u0275\u0275element(37,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(38,"div",1)(39,"aui-select-filter",4),r.\u0275\u0275listener("update",function(m){return i.changeSelectFilter(m)}),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(40,"div",1)(41,"pre",5),r.\u0275\u0275text(42),r.\u0275\u0275pipe(43,"json"),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS2),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.codeExampleJS3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML1),r.\u0275\u0275advance(2),r.\u0275\u0275property("filter",i.checkFilter),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(19,15,i.checkResults)),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExampleJS4),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML2),r.\u0275\u0275advance(2),r.\u0275\u0275property("filter",i.searchFilter),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(31,17,i.searchResults)),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExampleJS5),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML3),r.\u0275\u0275advance(2),r.\u0275\u0275property("filter",i.selectFilter),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(43,19,i.selectResults)))},dependencies:[tr,wj,Sj,Dj,Ao],encapsulation:2})),t})(),Ij=(()=>{class t{transform(e,i){return e&&"string"!=typeof e?1===i?e.singular:e.plural:e}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275pipe",r.\u0275\u0275definePipe({name:"pluralizeLabel",type:t,pure:!0})),t})(),Pj=(()=>{class t{transform(e,i){return i&&e?rP(e,i):e}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275pipe",r.\u0275\u0275definePipe({name:"interpolateLabel",type:t,pure:!0})),t})(),Aj=(()=>{class t{constructor(){A(this,"interpolateMessage","This %{text} requires your attention."),A(this,"interpolateString",{text:"message"}),A(this,"pluralizeMessage",{singular:"This %{text} requires your attention.",plural:"These %{text}s require your attention."}),A(this,"pluralizeMail",{singular:"This mail requires your attention.",plural:"These mails require your attention."}),A(this,"remainingMessages",{remaining:3}),A(this,"toggle",!0),A(this,"importModule","import { LabelsModule } from '@acpaas-ui/ngx-utils';\n\n@NgModule({\n\timports: [\n\t\tLabelsModule\n\t],\n})\n\nexport class AppModule {};"),A(this,"codeExampleJS1","import { Label, interpolate } from '@acpaas-ui/ngx-utils';"),A(this,"codeExampleJS2","public interpolateValue() {\n\tconst interpolatedValue = interpolate('This is number %{number} of an interpolated %{text}.', {text: 'message', number: 1});\n\treturn interpolatedValue;\n}"),A(this,"codeExampleJS3","public interpolateMessage = 'This %{text} requires your attention.';\n\npublic interpolateString = {\n\ttext: 'message',\n};"),A(this,"codeExampleJS4","public pluralizeMail: Label = {\n\tsingular: 'This mail requires your attention.',\n\tplural: 'These mails require your attention.',\n};\n\npublic get amount() { return this.toggle ? { value: 1 } : { value: 0 }; }\n\npublic toggleAmount() { this.toggle = !this.toggle; }"),A(this,"codeExampleJS5","public interpolateString = {\n\ttext: 'message',\n};\n\npublic pluralizeMessage: Label = {\n\tsingular: 'This %{text} requires your attention.',\n\tplural: 'These %{text}s require your attention.',\n};\n\npublic remainingMessages = {\n\tremaining: 3,\n};"),A(this,"codeExampleHTML1","{{ interpolateValue() }}"),A(this,"codeExampleHTML2",'<span [innerHTML]="interpolateMessage | interpolateLabel:interpolateString "></span>'),A(this,"codeExampleHTML3",'<button type="button" class="a-button" (click)="toggleAmount()">Toggle amount</button>\n\n{{ pluralizeMail | pluralizeLabel:amount.value }}'),A(this,"codeExampleHTML4","{{ pluralizeMessage | pluralizeLabel:remainingMessages.remaining | interpolateLabel:interpolateString }}")}get amount(){return this.toggle?{description:"singular",value:1}:{description:"plural",value:0}}interpolateValue(){return rP("This is number %{number} of an interpolated %{text}.",{text:"message",number:1})}toggleAmount(){this.toggle=!this.toggle}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:56,vars:27,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-l"],[1,"h5","u-margin-bottom"],[1,"u-text-bold"],[1,"a-pre","a-pre--scrollable"],[3,"innerHTML"],["type","button",1,"a-button","u-margin-bottom",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Labels"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",3),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"h4",4),r.\u0275\u0275text(7,"Interpolate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1),r.\u0275\u0275element(9,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",1),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",3)(13,"p",5),r.\u0275\u0275text(14,"String interpolated through function:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"pre",6),r.\u0275\u0275text(16),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(17,"h4",4),r.\u0275\u0275text(18,"InterpolateLabelPipe"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",1),r.\u0275\u0275element(20,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",1),r.\u0275\u0275element(22,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(23,"div",3)(24,"p",5),r.\u0275\u0275text(25,"String interpolated through pipe:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"pre",6),r.\u0275\u0275element(27,"span",7),r.\u0275\u0275pipe(28,"interpolateLabel"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(29,"h4",4),r.\u0275\u0275text(30,"PluralizeLabelPipe"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",1),r.\u0275\u0275element(32,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(33,"div",1),r.\u0275\u0275element(34,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(35,"button",8),r.\u0275\u0275listener("click",function(){return i.toggleAmount()}),r.\u0275\u0275text(36,"Toggle amount"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(37,"div",3)(38,"p",5),r.\u0275\u0275text(39),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(40,"pre",6),r.\u0275\u0275text(41),r.\u0275\u0275pipe(42,"pluralizeLabel"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(43,"h4",4),r.\u0275\u0275text(44,"Combine label pipes"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(45,"div",1),r.\u0275\u0275element(46,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(47,"div",1),r.\u0275\u0275element(48,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(49,"div",1)(50,"p",5),r.\u0275\u0275text(51,"Interpolated and pluralized string:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(52,"pre",6),r.\u0275\u0275text(53),r.\u0275\u0275pipe(54,"interpolateLabel"),r.\u0275\u0275pipe(55,"pluralizeLabel"),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.codeExampleJS2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML1),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(i.interpolateValue()),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.codeExampleJS3),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML2),r.\u0275\u0275advance(5),r.\u0275\u0275property("innerHTML",r.\u0275\u0275pipeBind2(28,15,i.interpolateMessage,i.interpolateString),r.\u0275\u0275sanitizeHtml),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExampleJS4),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML3),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate1("Interpolated string in ",i.amount.description,":"),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(42,18,i.pluralizeMail,i.amount.value)),r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.codeExampleJS5),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML4),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(54,21,r.\u0275\u0275pipeBind2(55,24,i.pluralizeMessage,i.remainingMessages.remaining),i.interpolateString)))},dependencies:[tr,Ij,Pj],encapsulation:2})),t})(),Lj=(()=>{class t{constructor(e){A(this,"window",void 0),A(this,"importModule","import { WindowModule, WINDOW_PROVIDERS } from '@acpaas-ui/ngx-utils';\n\n@NgModule({\n\timports: [\n\t\tWindowModule\n\t],\n\tproviders: [WINDOW_PROVIDERS],\n})\n\nexport class AppModule {};"),A(this,"codeExampleJS1","import { WINDOW } from '@acpaas-ui/ngx-utils';"),A(this,"codeExampleJS2","constructor(\n\t@Inject(WINDOW) public window\n) {}"),A(this,"codeExampleHTML",'<dl>\n\t<dt>Height:</dt>\n\t\t<dd><pre class="a-pre a-pre--scrollable">{{ window.innerHeight }}</pre></dd>\n\t<dt>Width:</dt>\n\t\t<dd><pre class="a-pre a-pre--scrollable">{{ window.innerWidth }}</pre></dd>\n</dl>'),this.window=e}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(sP))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:25,vars:6,consts:[[1,"h4","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-bottom-xs"],[1,"a-definition-list","u-margin-bottom"],[1,"a-pre","a-pre--scrollable"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Window"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"p",1),r.\u0275\u0275text(3," Utility to reference the global window object indirectly.\n"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1),r.\u0275\u0275element(9,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",1),r.\u0275\u0275element(11,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"p",3),r.\u0275\u0275text(13," These are the window's current height and width:\n"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"dl",4)(15,"dt"),r.\u0275\u0275text(16,"Height:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"dd")(18,"pre",5),r.\u0275\u0275text(19),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(20,"dt"),r.\u0275\u0275text(21,"Width:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"dd")(23,"pre",5),r.\u0275\u0275text(24),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(5),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML),r.\u0275\u0275advance(8),r.\u0275\u0275textInterpolate(null==i.window?null:i.window.innerHeight),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(null==i.window?null:i.window.innerWidth))},dependencies:[tr],encapsulation:2})),t})();var kj=Me(407),Oj=Me(912);Me(690);let Rj=(()=>{class t{constructor(e){A(this,"platformId",void 0),A(this,"L",null),A(this,"esri",null),this.platformId=e,this.requireMap()}requireMap(){Sa(this.platformId)&&(this.L=kj,this.esri=Oj)}isAvailable(){return!!Sa(this.platformId)}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275inject(r.PLATFORM_ID))}),A(t,"\u0275prov",r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})),t})();var Fj=Me(858);class Nj{constructor(n,e){A(this,"options",void 0),A(this,"mapService",void 0),A(this,"map",void 0),A(this,"locating",!1),A(this,"fullScreen",!1),A(this,"onInit",new r.EventEmitter),A(this,"modes",{DRAGGING:0,DRAWING_POLYGON:1,DRAWING_LINE:2}),A(this,"mode",this.modes.DRAGGING),A(this,"initialized",!1),A(this,"polygonDrawer",void 0),A(this,"lineDrawer",void 0),A(this,"editingLayer",void 0),A(this,"switchToDragging",()=>{this.mapService.isAvailable()&&(this.mode=this.modes.DRAGGING,this.polygonDrawer&&(this.polygonDrawer.disable(),this.polygonDrawer=void 0),this.lineDrawer&&(this.lineDrawer.disable(),this.lineDrawer=void 0),this.map.off(this.mapService.L.Draw.Event.CREATED),this.map.off(this.mapService.L.Draw.Event.DRAWSTOP))}),A(this,"handleDrawPolygon",i=>{this.map.addLayer(i.layer),this.options.onAddPolygon(i.layer),this.switchToDragging()}),A(this,"handleDrawLine",i=>{this.map.addLayer(i.layer),this.options.onAddLine(i.layer),this.switchToDragging()}),A(this,"stopEditLayer",()=>{this.editingLayer&&(this.editingLayer.editing.disable(),this.editingLayer.off("edit")),this.map.off("click",this.stopEditLayer)}),this.options=n,this.mapService=e}init(n){this.mapService.isAvailable()&&(this.initialized=!0,this.map=this.mapService.L.map(n,{center:this.options.center,zoom:this.options.zoom,attributionControl:!1,zoomControl:!1,scrollWheelZoom:!1}),this.onInit.emit())}addTileLayer(n){if(this.mapService.isAvailable()){const e=this.mapService.L.tileLayer(n.url,n.options);return this.map.addLayer(e),e}}addVectorLayer(n){if(this.mapService.isAvailable()){const e=(0,Fj.vectorTileLayer)(n.url,n.options);return this.map.addLayer(e),e}}addFeatureLayer(n){if(this.mapService.isAvailable()){const e=new this.mapService.esri.featureLayer(n);return this.map.addLayer(e),e}}addGeoJSON(n,e){if(this.mapService.isAvailable()){const i=this.mapService.L.geoJSON(n,e);return i.addTo(this.map),i}}fitFeatureLayers(n){if(this.mapService.isAvailable()){const e=this.mapService.L.latLngBounds([]);let i=0;n.forEach(l=>{l.once("load",()=>{i++,l.eachFeature(m=>{e.extend(m.getBounds())}),i===n.length&&e.isValid()&&this.map.fitBounds(e)})})}}removeLayer(n){this.map.removeLayer(n)}toggleFullScreen(){this.fullScreen=!this.fullScreen,setTimeout(()=>{this.update()})}update(){this.initialized&&this.map.invalidateSize()}zoomIn(){this.initialized&&this.map.zoomIn()}zoomInDisabled(){return!this.initialized||this.map.getMaxZoom()<=this.map.getZoom()}zoomOut(){this.initialized&&this.map.zoomOut()}zoomOutDisabled(){return!this.initialized||this.map.getMinZoom()>=this.map.getZoom()}locate(n){!this.locating&&this.initialized&&(this.locating=!0,this.map.locate(),this.map.on("locationfound",e=>{this.locating=!1,this.map.setView(e.latlng,n),this.map.off("locationfound")}))}setView(n,e){this.initialized&&this.map.setView(n,e)}switchToPolygon(){this.mapService.isAvailable()&&(this.switchToDragging(),this.mode=this.modes.DRAWING_POLYGON,this.polygonDrawer||(this.polygonDrawer=new this.mapService.L.Draw.Polygon(this.map,{shapeOptions:this.options.polygonColor?{color:this.options.polygonColor}:{}}),this.polygonDrawer.enable(),this.map.on(this.mapService.L.Draw.Event.CREATED,this.handleDrawPolygon),this.map.on(this.mapService.L.Draw.Event.DRAWSTOP,this.switchToDragging)))}switchToLine(){this.mapService.isAvailable()&&(this.switchToDragging(),this.mode=this.modes.DRAWING_LINE,this.lineDrawer||(this.lineDrawer=new this.mapService.L.Draw.Polyline(this.map,{shapeOptions:this.options.lineColor?{color:this.options.lineColor}:{}}),this.lineDrawer.enable(),this.map.on(this.mapService.L.Draw.Event.CREATED,this.handleDrawLine),this.map.on(this.mapService.L.Draw.Event.DRAWSTOP,this.switchToDragging)))}startEditLayer(n){this.stopEditLayer(),this.editingLayer=n,this.editingLayer.options.editing=this.editingLayer.options.editing||(this.editingLayer.options.editing={}),this.editingLayer.editing.enable(),this.map.on("click",this.stopEditLayer),this.editingLayer.on("edit",()=>{this.editingLayer.feature=this.editingLayer.toGeoJSON(),this.options.onEditFeature(this.editingLayer.toGeoJSON())})}addMarker(n,e){if(this.mapService.isAvailable())return this.mapService.L.marker(n,e).addTo(this.map)}addHtmlMarker(n,e){if(this.mapService.isAvailable()){const i=this.mapService.L.divIcon({html:e,className:"aui-leaflet__html-icon"});return this.mapService.L.marker(n,{icon:i}).addTo(this.map)}}}const zj={name:"Base world gray",url:"https://{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{subdomains:["server","services"],maxNativeZoom:16}},Bj={name:"Base antwerp",url:"https://basemap.antwerpen.be/tile/{z}/{y}/{x}",options:{minZoom:13,maxNativeZoom:19,maxZoom:21}};let lP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,sc,tp,ls,jy]})),t})(),X1=(()=>{class t{constructor(){A(this,"icon",void 0),A(this,"disabled",void 0),A(this,"ariaLabel","")}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-leaflet-control"]],inputs:{icon:"icon",disabled:"disabled",ariaLabel:"ariaLabel"},decls:2,vars:3,consts:[["type","button",1,"o-leaflet__control","a-button","a-button--small","has-icon",3,"disabled"],[3,"name"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"button",0),r.\u0275\u0275element(1,"aui-icon",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275property("disabled",i.disabled),r.\u0275\u0275attribute("aria-label",i.ariaLabel),r.\u0275\u0275advance(1),r.\u0275\u0275property("name",i.icon))},dependencies:[To],encapsulation:2})),t})(),cP=(()=>{class t{constructor(){A(this,"map",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-leaflet-drag-control"]],decls:1,vars:0,consts:[["icon","ai-direction-button-arrows","ariaLabel","Sleepmodus (de)activeren",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"aui-leaflet-control",0),r.\u0275\u0275listener("click",function(){return null==i.map?null:i.map.switchToDragging()}),r.\u0275\u0275elementEnd())},dependencies:[X1],encapsulation:2})),t})(),uP=(()=>{class t{constructor(){A(this,"map",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-leaflet-draw-control"]],decls:11,vars:0,consts:[["auiFlyout",""],["auiFlyoutAction","","type","button","aria-label","Tekenen",1,"a-button","a-button--small","has-icon"],["name","ai-pencil-1","ariaLabel","Tekenen"],["auiFlyoutZone",""],[1,"a-list","a-list--lined"],["auiFlyoutClose","",1,"a-list__item"],[1,"a-list__content",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"button",1),r.\u0275\u0275element(2,"aui-icon",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),r.\u0275\u0275listener("click",function(){return null==i.map?null:i.map.switchToPolygon()}),r.\u0275\u0275text(7,"Vorm intekenen"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(8,"li",5)(9,"a",6),r.\u0275\u0275listener("click",function(){return null==i.map?null:i.map.switchToLine()}),r.\u0275\u0275text(10,"Lijn/route intekenen"),r.\u0275\u0275elementEnd()()()()())},dependencies:[To,Vy,XM,Tf,od],encapsulation:2})),t})(),hP=(()=>{class t{constructor(){A(this,"map",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-leaflet-fullscreen-control"]],decls:1,vars:0,consts:[["icon","ai-expand-1","ariaLabel","Volledig scherm (de)activeren",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"aui-leaflet-control",0),r.\u0275\u0275listener("click",function(){return null==i.map?null:i.map.toggleFullScreen()}),r.\u0275\u0275elementEnd())},dependencies:[X1],encapsulation:2})),t})(),dP=(()=>{class t{constructor(){A(this,"zoomLevel",19),A(this,"map",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-leaflet-locate-control"]],inputs:{zoomLevel:"zoomLevel"},decls:1,vars:1,consts:[["icon","ai-location-target-1","ariaLabel","Huidige positie",3,"disabled","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"aui-leaflet-control",0),r.\u0275\u0275listener("click",function(){return null==i.map?null:i.map.locate(i.zoomLevel)}),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("disabled",null==i.map?null:i.map.locating)},dependencies:[X1],encapsulation:2})),t})(),pP=(()=>{class t{constructor(){A(this,"map",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-leaflet-zoom-control"]],decls:2,vars:2,consts:[["icon","ai-add","ariaLabel","Inzoomen",1,"o-leaflet__zoom-control",3,"disabled","click"],["icon","ai-subtract","ariaLabel","Uitzoomen",1,"o-leaflet__zoom-control",3,"disabled","click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"aui-leaflet-control",0),r.\u0275\u0275listener("click",function(){return null==i.map?null:i.map.zoomIn()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(1,"aui-leaflet-control",1),r.\u0275\u0275listener("click",function(){return null==i.map?null:i.map.zoomOut()}),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275property("disabled",null==i.map?null:i.map.zoomInDisabled()),r.\u0275\u0275advance(1),r.\u0275\u0275property("disabled",null==i.map?null:i.map.zoomOutDisabled()))},dependencies:[X1],encapsulation:2})),t})();const Vj=["map"],jj=["content"],Uj=["*",[["","controls","","top","","left",""]],[["","controls","","top","","right",""]],[["","controls","","bottom","","right",""]],[["","controls","","bottom","","left",""]]],Hj=function(t){return{"is-full-screen":t}},$j=function(t){return{"has-content":t}},Gj=["*","[controls][top][left]","[controls][top][right]","[controls][bottom][right]","[controls][bottom][left]"];let Zj=(()=>{class t{constructor(){A(this,"map",void 0),A(this,"content",void 0),A(this,"fullScreenControl",void 0),A(this,"zoomControl",void 0),A(this,"locateControl",void 0),A(this,"dragControl",void 0),A(this,"drawControl",void 0),A(this,"leafletMap",void 0),A(this,"hasSidebar",!1)}ngAfterViewInit(){setTimeout(()=>{this.leafletMap.init(this.map.nativeElement)})}ngAfterContentInit(){[this.fullScreenControl,this.zoomControl,this.locateControl,this.dragControl,this.drawControl].forEach(e=>e?e.map=this.leafletMap:null)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-leaflet"]],contentQueries:function(e,i,l){if(1&e&&(r.\u0275\u0275contentQuery(l,hP,5),r.\u0275\u0275contentQuery(l,pP,5),r.\u0275\u0275contentQuery(l,dP,5),r.\u0275\u0275contentQuery(l,cP,5),r.\u0275\u0275contentQuery(l,uP,5)),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.fullScreenControl=m.first),r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.zoomControl=m.first),r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.locateControl=m.first),r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.dragControl=m.first),r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.drawControl=m.first)}},viewQuery:function(e,i){if(1&e&&(r.\u0275\u0275viewQuery(Vj,7),r.\u0275\u0275viewQuery(jj,7)),2&e){let l;r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.map=l.first),r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.content=l.first)}},inputs:{leafletMap:"leafletMap",hasSidebar:"hasSidebar"},ngContentSelectors:Gj,decls:15,vars:6,consts:[[1,"aui-leaflet","o-leaflet",3,"ngClass"],[1,"o-leaflet__content",3,"ngClass"],["content",""],[1,"o-leaflet__wrapper"],[1,"o-leaflet__map"],["map",""],[1,"o-leaflet__controls","o-leaflet__controls--top-left"],[1,"o-leaflet__controls","o-leaflet__controls--top-right"],[1,"o-leaflet__controls","o-leaflet__controls--bottom-right"],[1,"o-leaflet__controls","o-leaflet__controls--bottom-left"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(Uj),r.\u0275\u0275elementStart(0,"div",0)(1,"div",1,2),r.\u0275\u0275projection(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",3),r.\u0275\u0275element(5,"div",4,5),r.\u0275\u0275elementStart(7,"div",6),r.\u0275\u0275projection(8,1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",7),r.\u0275\u0275projection(10,2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"div",8),r.\u0275\u0275projection(12,3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"div",9),r.\u0275\u0275projection(14,4),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,Hj,i.leafletMap.fullScreen)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(4,$j,i.hasSidebar)))},dependencies:[Ne],styles:[":host{display:flex}\n"],encapsulation:2})),t})(),Wj=(()=>{class t{constructor(){A(this,"importModule","import { LeafletModule } from '@acpaas-ui/ngx-leaflet';\n\n@NgModule({\n\timports: [\n\t\tLeafletModule\n\t]\n});\n\nexport class AppModule {};"),A(this,"codeExampleJS1",'"styles": [\n\t"node_modules/leaflet/dist/leaflet.css",\n\t"node_modules/leaflet-draw/dist/leaflet.draw.css"\n]'),A(this,"codeExampleJS2","import { LeafletMap, baseMapWorldGray, baseMapAntwerp, MapService } from '@acpaas-ui/ngx-leaflet';\n\nconstructor(public mapService: MapService) {\n}\n\npublic leafletMap: LeafletMap = new LeafletMap({\n\tzoom: 13, // default zoom level\n\tcenter: [51.215, 4.425], // default center point\n\tonAddPolygon: (layer) => {},\n\tonAddLine: (layer) => {},\n\tonEditFeature: (feature) => {},\n}, this.mapService);\n\npublic ngOnInit(): void {\n\tthis.leafletMap.onInit.subscribe(() => {\n\t\tthis.leafletMap.addTileLayer(baseMapWorldGray);\n\t\tthis.leafletMap.addTileLayer(baseMapAntwerp);\n });\n}"),A(this,"codeExampleHTML1",'<aui-leaflet [leafletMap]="leafletMap" [hasSidebar]="true">\n\t<div controls top left>\n\t\t<aui-leaflet-drag-control></aui-leaflet-drag-control>\n\t\t<aui-leaflet-draw-control></aui-leaflet-draw-control>\n\t</div>\n\t<div controls top right>\n\t\t<aui-leaflet-fullscreen-control></aui-leaflet-fullscreen-control>\n\t</div>\n\t<div controls bottom left>\n\t\t<aui-leaflet-locate-control zoomLevel="16"></aui-leaflet-locate-control>\n\t</div>\n\t<div controls bottom right>\n\t\t<aui-leaflet-zoom-control></aui-leaflet-zoom-control>\n\t</div>\n\t<div>\n\t\tContent displayed in sidebar\n\t</div>\n</aui-leaflet>'),A(this,"mapMockService",new Rj("browser")),A(this,"leafletMap",new Nj({zoom:13,center:[51.215,4.425],onAddPolygon:e=>{},onAddLine:e=>{},onEditFeature:e=>{}},this.mapMockService))}ngOnInit(){this.leafletMap.onInit.subscribe(()=>{this.leafletMap.addTileLayer(zj),this.leafletMap.addTileLayer(Bj)})}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:23,vars:6,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[3,"leafletMap","hasSidebar"],["controls","","top","","left",""],["controls","","top","","right",""],["controls","","bottom","","left",""],["zoomLevel","16"],["controls","","bottom","","right",""]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Map"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",1),r.\u0275\u0275element(5,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",1),r.\u0275\u0275element(7,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",1),r.\u0275\u0275element(9,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",1)(11,"aui-leaflet",3)(12,"div",4),r.\u0275\u0275element(13,"aui-leaflet-drag-control")(14,"aui-leaflet-draw-control"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"div",5),r.\u0275\u0275element(16,"aui-leaflet-fullscreen-control"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"div",6),r.\u0275\u0275element(18,"aui-leaflet-locate-control",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",8),r.\u0275\u0275element(20,"aui-leaflet-zoom-control"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div"),r.\u0275\u0275text(22," Content displayed in sidebar "),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS1),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleJS2),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.codeExampleHTML1),r.\u0275\u0275advance(2),r.\u0275\u0275property("leafletMap",i.leafletMap)("hasSidebar",!0))},dependencies:[tr,cP,uP,hP,dP,pP,Zj],encapsulation:2})),t})(),qj=(()=>{class t{constructor(){A(this,"createInterval","\n  import { IntervalBuilder } from '@acpaas-ui/ngx-utils';\n\n  const interval = IntervalBuilder.numberInterval(0, 10)\n                                  .closedInterval()\n                                  .bounded()\n                                  .build();\n"),A(this,"dateInterval","\n  import { IntervalBuilder } from '@acpaas-ui/ngx-utils';\n  import { subDays } from 'date-fns';\n\n  const today = new Date();\n  const yesterday = subDays(new Date(), 1);\n  const interval = IntervalBuilder.dateInterval(yesterday, today)\n                                  .openInterval()\n                                  .build();\n  "),A(this,"notThePast","\n  import { IntervalBuilder } from '@acpaas-ui/ngx-utils';\n\n  const today = new Date();\n\n  // This interval amounts to ]-infinity, today], so the past will be disabled\n  const interval = IntervalBuilder.dateInterval(null, today)\n                                  .leftOpenInterval()\n                                  .unbounded()\n                                  .not()\n                                  .build();\n  ")}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["app-interval-page"]],decls:22,vars:3,consts:[[1,"h4","u-margin-bottom"],["target","_blank","href","https://en.wikipedia.org/wiki/Interval_(mathematics)"],[1,"u-margin-bottom","u-margin-top"],[1,"u-margin-bottom"],[3,"codeSnippet"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h3",0),r.\u0275\u0275text(1,"Interval"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"blockquote"),r.\u0275\u0275text(3," For more information about the theoretical approach of intervals, see "),r.\u0275\u0275elementStart(4,"a",1),r.\u0275\u0275text(5,"here"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(6,".\n"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",2),r.\u0275\u0275text(8," The utils package allows you to create intervals which can be used in other packages. Ao: "),r.\u0275\u0275elementStart(9,"ul")(10,"li"),r.\u0275\u0275text(11,"ngx-calendar"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"li"),r.\u0275\u0275text(13,"ngx-forms Datepicker"),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(14,"div",3),r.\u0275\u0275element(15,"aui-code-snippet",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(16,"div",3),r.\u0275\u0275element(17,"aui-code-snippet",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"p",3),r.\u0275\u0275text(19," The IntervalBuilder supports left and right open intervals, bounded and unbounded intervals and interval inversion by using the not() method.\n"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"div",3),r.\u0275\u0275element(21,"aui-code-snippet",4),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(15),r.\u0275\u0275property("codeSnippet",i.createInterval),r.\u0275\u0275advance(2),r.\u0275\u0275property("codeSnippet",i.dateInterval),r.\u0275\u0275advance(4),r.\u0275\u0275property("codeSnippet",i.notThePast))},dependencies:[tr],encapsulation:2})),t})();class fP{}class Yj{}const dp="*";function mP(t,n){return{type:7,name:t,definitions:n,options:{}}}function J1(t,n=null){return{type:4,styles:n,timings:t}}function gP(t,n=null){return{type:2,steps:t,options:n}}function sd(t){return{type:6,styles:t,offset:null}}function eC(t,n,e){return{type:0,name:t,styles:n,options:e}}function _P(t){return{type:5,steps:t}}function tC(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}function yP(t){Promise.resolve().then(t)}class l0{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){yP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class vP{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,l=0;const m=this.players.length;0==m?yP(()=>this._onFinish()):this.players.forEach(C=>{C.onDone(()=>{++e==m&&this._onFinish()}),C.onDestroy(()=>{++i==m&&this._onDestroy()}),C.onStart(()=>{++l==m&&this._onStart()})}),this.totalTime=this.players.reduce((C,F)=>Math.max(C,F.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const l=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(l)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const WT="!",bP=["toast-component",""];function Kj(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",5),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.remove())}),r.\u0275\u0275elementStart(1,"span",6),r.\u0275\u0275text(2,"\xd7"),r.\u0275\u0275elementEnd()()}}function Qj(t,n){if(1&t&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&t){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("[",e.duplicatesCount+1,"]")}}function Xj(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1),r.\u0275\u0275template(2,Qj,2,1,"ng-container",4),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classMap(e.options.titleClass),r.\u0275\u0275attribute("aria-label",e.title),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.title," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.duplicatesCount)}}function Jj(t,n){if(1&t&&r.\u0275\u0275element(0,"div",7),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classMap(e.options.messageClass),r.\u0275\u0275property("innerHTML",e.message,r.\u0275\u0275sanitizeHtml)}}function eU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classMap(e.options.messageClass),r.\u0275\u0275attribute("aria-label",e.message),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.message," ")}}function tU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275element(1,"div",9),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275styleProp("width",e.width+"%")}}class lU{constructor(n,e){this.component=n,this.injector=e}attach(n,e){return this._attachedHost=n,n.attach(this,e)}detach(){const n=this._attachedHost;if(n)return this._attachedHost=void 0,n.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class cU{attach(n,e){return this._attachedPortal=n,this.attachComponentPortal(n,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(n){this._disposeFn=n}}class uU{constructor(n){this._overlayRef=n,this.duplicatesCount=0,this._afterClosed=new pi.xQ,this._activate=new pi.xQ,this._manualClose=new pi.xQ,this._resetTimeout=new pi.xQ,this._countDuplicate=new pi.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(n,e){n&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class nC{constructor(n,e,i,l,m,C){this.toastId=n,this.config=e,this.message=i,this.title=l,this.toastType=m,this.toastRef=C,this._onTap=new pi.xQ,this._onAction=new pi.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(n){this._onAction.next(n)}onAction(){return this._onAction.asObservable()}}const wP=new r.InjectionToken("ToastConfig");class hU extends cU{constructor(n,e,i){super(),this._hostDomElement=n,this._componentFactoryResolver=e,this._appRef=i}attachComponentPortal(n,e){const i=this._componentFactoryResolver.resolveComponentFactory(n.component);let l;return l=i.create(n.injector),this._appRef.attachView(l.hostView),this.setDisposeFn(()=>{this._appRef.detachView(l.hostView),l.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(l),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(l)),l}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let dU=(()=>{class t{constructor(){this._document=(0,r.inject)(pe)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class pU{constructor(n){this._portalHost=n}attach(n,e=!0){return this._portalHost.attach(n,e)}detach(){return this._portalHost.detach()}}let fU=(()=>{class t{constructor(){this._overlayContainer=(0,r.inject)(dU),this._componentFactoryResolver=(0,r.inject)(r.ComponentFactoryResolver),this._appRef=(0,r.inject)(r.ApplicationRef),this._document=(0,r.inject)(pe),this._paneElements=new Map}create(e,i){return this._createOverlayRef(this.getPaneElement(e,i))}getPaneElement(e="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[e]||(this._paneElements.get(i)[e]=this._createPaneElement(e,i)),this._paneElements.get(i)[e]}_createPaneElement(e,i){const l=this._document.createElement("div");return l.id="toast-container",l.classList.add(e),l.classList.add("toast-container"),i?i.getContainerElement().appendChild(l):this._overlayContainer.getContainerElement().appendChild(l),l}_createPortalHost(e){return new hU(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new pU(this._createPortalHost(e))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qT=(()=>{class t{constructor(e,i,l,m,C){this.overlay=i,this._injector=l,this.sanitizer=m,this.ngZone=C,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...e.default,...e.config},e.config.iconClasses&&(this.toastrConfig.iconClasses={...e.default.iconClasses,...e.config.iconClasses})}show(e,i,l={},m=""){return this._preBuildNotification(m,e,i,this.applyConfig(l))}success(e,i,l={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,i,this.applyConfig(l))}error(e,i,l={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,i,this.applyConfig(l))}info(e,i,l={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,i,this.applyConfig(l))}warning(e,i,l={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,i,this.applyConfig(l))}clear(e){for(const i of this.toasts)if(void 0!==e){if(i.toastId===e)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(e){const i=this._findToast(e);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const l=this.toasts[this.currentlyActive].toastRef;l.isInactive()||(this.currentlyActive=this.currentlyActive+1,l.activate())}return!0}findDuplicate(e="",i="",l,m){const{includeTitleDuplicates:C}=this.toastrConfig;for(const F of this.toasts)if((!C||C&&F.title===e)&&F.message===i)return F.toastRef.onDuplicate(l,m),F;return null}applyConfig(e={}){return{...this.toastrConfig,...e}}_findToast(e){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===e)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(e,i,l,m){return m.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,i,l,m)):this._buildNotification(e,i,l,m)}_buildNotification(e,i,l,m){if(!m.toastComponent)throw new Error("toastComponent required");const C=this.findDuplicate(l,i,this.toastrConfig.resetTimeoutOnDuplicate&&m.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&l||i)&&this.toastrConfig.preventDuplicates&&null!==C)return C;this.previousToastMessage=i;let F=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(F=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const K=this.overlay.create(m.positionClass,this.overlayContainer);this.index=this.index+1;let le=i;i&&m.enableHtml&&(le=this.sanitizer.sanitize(r.SecurityContext.HTML,i));const xe=new uU(K),Ae=new nC(this.index,m,le,l,e,xe),Qe=r.Injector.create({providers:[{provide:nC,useValue:Ae}],parent:this._injector}),yt=new lU(m.toastComponent,Qe),At=K.attach(yt,m.newestOnTop);xe.componentInstance=At.instance;const Nt={toastId:this.index,title:l||"",message:i||"",toastRef:xe,onShown:xe.afterActivate(),onHidden:xe.afterClosed(),onTap:Ae.onTap(),onAction:Ae.onAction(),portal:At};return F||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Nt.toastRef.activate()})),this.toasts.push(Nt),Nt}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(wP),r.\u0275\u0275inject(fU),r.\u0275\u0275inject(r.Injector),r.\u0275\u0275inject(St),r.\u0275\u0275inject(r.NgZone))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),YT=(()=>{class t{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(e,i,l){this.toastrService=e,this.toastPackage=i,this.ngZone=l,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(m=>{this.duplicatesCount=m})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),i)):this.timeout=setTimeout(()=>e(),i)}outsideInterval(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),i)):this.intervalId=setInterval(()=>e(),i)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(qT),r.\u0275\u0275directiveInject(nC),r.\u0275\u0275directiveInject(r.NgZone))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(e,i){1&e&&r.\u0275\u0275listener("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&e&&(r.\u0275\u0275syntheticHostProperty("@flyInOut",i.state),r.\u0275\u0275classMap(i.toastClasses),r.\u0275\u0275styleProp("display",i.displayStyle))},standalone:!0,features:[r.\u0275\u0275StandaloneFeature],attrs:bP,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(e,i){1&e&&(r.\u0275\u0275template(0,Kj,3,0,"button",0),r.\u0275\u0275template(1,Xj,3,5,"div",1),r.\u0275\u0275template(2,Jj,1,3,"div",2),r.\u0275\u0275template(3,eU,2,4,"div",3),r.\u0275\u0275template(4,tU,2,2,"div",4)),2&e&&(r.\u0275\u0275property("ngIf",i.options.closeButton),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.title),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.message&&i.options.enableHtml),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.message&&!i.options.enableHtml),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.options.progressBar))},dependencies:[on],encapsulation:2,data:{animation:[mP("flyInOut",[eC("inactive",sd({opacity:0})),eC("active",sd({opacity:1})),eC("removed",sd({opacity:0})),tC("inactive => active",J1("{{ easeTime }}ms {{ easing }}")),tC("active => removed",J1("{{ easeTime }}ms {{ easing }}"))])]}}),t})();const mU={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:YT},gU=(t={})=>(0,r.makeEnvironmentProviders)([{provide:wP,useValue:{default:mU,config:t}}]);let _U=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[gU(e)]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[YT]}),t})();const KT=[{path:"",pathMatch:"full",redirectTo:"modules/avatar"},{path:"modules/avatar",component:RC,data:{meta:{title:"Avatar"}}},{path:"modules/calendar",component:RR,data:{meta:{title:"Calendar"}}},{path:"modules/code-snippet",component:LC,data:{meta:{title:"Code Snippets"}}},{path:"modules/context",component:FR,data:{meta:{title:"Context"}}},{path:"modules/flyout",component:GR,data:{meta:{title:"Flyout"}}},{component:mN,path:"modules/forms",data:{meta:{title:"Forms"}},children:[{path:"",pathMatch:"full",redirectTo:"autocomplete"},{path:"autocomplete",pathMatch:"full",component:dB,data:{meta:{title:"Autocomplete"}}},{path:"datepicker",pathMatch:"full",component:$B,data:{meta:{title:"Datepicker"}}},{path:"range-slider",pathMatch:"full",component:qB,data:{meta:{title:"Range Slider"}}},{path:"search-filter",pathMatch:"full",component:h4,data:{meta:{title:"Search Filter"}}},{path:"timepicker",pathMatch:"full",component:E4,data:{meta:{title:"Timepicker"}}},{path:"upload",pathMatch:"full",component:W4,data:{meta:{title:"Upload"}}}]},{path:"modules/icon",component:WR,data:{meta:{title:"Icon"}}},{component:q4,path:"modules/layout",data:{meta:{title:"Layout"}},children:[{path:"",pathMatch:"full",redirectTo:"footer"},{path:"footer",pathMatch:"full",component:J4,data:{meta:{title:"Footer"}}},{path:"header",pathMatch:"full",component:eV,data:{meta:{title:"Header"}}},{path:"modal",pathMatch:"full",component:pj,data:{meta:{title:"Modal"}}}]},{path:"modules/leaflet",component:Wj,data:{meta:{title:"Leaflet"}}},{path:"modules/logo",component:AC,data:{meta:{title:"Logo"}}},{path:"modules/notifications",component:(()=>{class t{constructor(e){A(this,"notificationsService",void 0),A(this,"importModule","import { NotificationsModule } from '@acpaas-ui/ngx-notifications';\n\n@NgModule({\n  imports: [ NotificationsModule, BrowserAnimationsModule ]\n})\nexport class AppModule { }\n  "),A(this,"showNotification","import { NotificationsService } from '@acpaas-ui/ngx-notifications';\n\n@Component({...})\nexport class Component {\n\n    constructor(private service: NotificationsService) {}\n\n    showInfoNotification() {\n      this.notificationsService.info('This is the body of an info notification.', 'Info', { /* Extra options */ });\n    }\n\n    showSuccessNotification() {\n      this.notificationsService.success('This is the body of a success notification.', 'Success', { /* Extra options */ });\n    }\n\n    showWarningNotification() {\n      this.notificationsService.warning('This is the body of a warning notification', 'Warning', { /* Extra options */ });\n    }\n\n    showErrorNotification() {\n      this.notificationsService.error('This is the body of an error notification', 'Error', { /* Extra options */ });\n    }\n}\n  "),this.notificationsService=e}showInfoNotification(){this.notificationsService.info("This is the body of an info notification.","Info")}showSuccessNotification(){this.notificationsService.success("This is the body of a success notification.","Success")}showWarningNotification(){this.notificationsService.warning("This is the body of a warning notification","Warning")}showErrorNotification(){this.notificationsService.error("This is the body of an error notification","Error")}}return A(t,"\u0275fac",function(e){return new(e||t)(r.\u0275\u0275directiveInject(qT))}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["app-notifications-demo"]],decls:32,vars:2,consts:[[1,"h3","u-margin-bottom"],[1,"u-margin-bottom"],[3,"codeSnippet"],[1,"u-margin-top","u-margin-bottom","m-alert"],[1,"u-margin-top","u-margin-bottom"],["href","https://www.npmjs.com/package/ngx-toastr#options","target","_blank",1,"has-icon-right"],["name","ai-navigation-next","ariaLabel"," (external)"],[1,"u-margin-bottom-xs"],[1,"a-button",3,"click"],[1,"a-button","a-button--success",3,"click"],[1,"a-button","a-button--warning",3,"click"],[1,"a-button","a-button--danger",3,"click"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"h2",0),r.\u0275\u0275text(1,"Notifications"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275element(3,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",3)(5,"p")(6,"strong"),r.\u0275\u0275text(7,"Note:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(8," For this package to work properly, it is important to import the "),r.\u0275\u0275elementStart(9,"code"),r.\u0275\u0275text(10,"BrowserAnimationsModule"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(11," in the root module of your application. "),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(12,"div",1),r.\u0275\u0275element(13,"aui-code-snippet",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",4)(15,"p"),r.\u0275\u0275text(16,"Our notifications package is built on ngx-toastr. All available options are listed on the "),r.\u0275\u0275elementStart(17,"a",5),r.\u0275\u0275text(18,"ngx-toastr NPM page"),r.\u0275\u0275element(19,"aui-icon",6),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(20,"div",7)(21,"button",8),r.\u0275\u0275listener("click",function(){return i.showInfoNotification()}),r.\u0275\u0275text(22,"Show info notification"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(23,"div",7)(24,"button",9),r.\u0275\u0275listener("click",function(){return i.showSuccessNotification()}),r.\u0275\u0275text(25,"Show success notification"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(26,"div",7)(27,"button",10),r.\u0275\u0275listener("click",function(){return i.showWarningNotification()}),r.\u0275\u0275text(28,"Show warning notification"),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(29,"div",1)(30,"button",11),r.\u0275\u0275listener("click",function(){return i.showErrorNotification()}),r.\u0275\u0275text(31,"Show error notification"),r.\u0275\u0275elementEnd()()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("codeSnippet",i.importModule),r.\u0275\u0275advance(10),r.\u0275\u0275property("codeSnippet",i.showNotification))},dependencies:[tr,Ef],encapsulation:2})),t})(),data:{meta:{title:"Notifications"}}},{path:"modules/pagination",component:aF,data:{meta:{title:"Pagination"}}},{path:"modules/progress-bar",component:uF,data:{meta:{title:"Progress Bar"}}},{path:"modules/selectable-list",component:fN,data:{meta:{title:"Selectable List"}}},{path:"modules/table",component:$F,data:{meta:{title:"Table"}}},{path:"modules/user-menu",component:iN,data:{meta:{title:"User Menu"}}},{component:fj,path:"modules/utils",data:{meta:{title:"Utils"}},children:[{path:"",pathMatch:"full",redirectTo:"filter"},{path:"filter",pathMatch:"full",component:Mj,data:{meta:{title:"Filter"}}},{path:"labels",pathMatch:"full",component:Aj,data:{meta:{title:"Labels"}}},{path:"window",pathMatch:"full",component:Lj,data:{meta:{title:"Window"}}},{path:"interval",pathMatch:"full",component:qj,data:{meta:{title:"Interval"}}}]}];let yU=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["guide-footer"]],decls:57,vars:0,consts:[["auiFooterContent",""],[1,"u-container"],[1,"row"],[1,"col-xs-12","col-sm-6","col-md-4","u-margin-bottom-xs","u-margin-top-xs"],[1,"h4"],[1,"a-list","u-margin-top-xs"],[1,"a-list__item"],["href","https://digitalehuisstijl.antwerpen.be","target","_blank",1,"a-list__content","has-icon-right"],["name","ai-navigation-next","ariaLabel"," (external)"],["href","https://www.github.com/a-ui/core_branding_scss","target","_blank",1,"a-list__content","has-icon-right"],["href","https://www.github.com/a-ui/core_components_react","target","_blank",1,"a-list__content","has-icon-right"],["href","https://github.com/digipolisantwerp/smart-widgets","target","_blank",1,"a-list__content","has-icon-right"],["href","https://www.digipolisantwerpen.be","target","_blank",1,"a-list__content","has-icon-right"],["href","https://antwerpen.digipolis.be/nl/opdrachten","target","_blank",1,"a-list__content","has-icon-right"],["href","https://jobs.digipolis.be","target","_blank",1,"a-list__content","has-icon-right"],["href","https://onstage.digipolis.be","target","_blank",1,"a-list__content","has-icon-right"],[1,"col-xs-12","col-md-4","u-margin-bottom-xs","u-margin-top-xs"],["href","https://www.facebook.com/DigipolisAntwerpen","aria-label","Facebook","target","_blank",1,"a-button","a-button--social","a-button--negative","has-icon"],["name","ai-social-media-facebook"],["href","https://twitter.com/Dgplsantwerpen","aria-label","Twitter","target","_blank",1,"a-button","a-button--social","a-button--negative","has-icon"],["name","ai-social-media-twitter"],["href","https://www.linkedin.com/company/digipolisantwerpen","aria-label","LinkedIn","target","_blank",1,"a-button","a-button--social","a-button--negative","has-icon"],["name","ai-professional-network-linkedin"],["auiFooterBottom",""],["ariaGoUpLabel","Go back to top"],["domain","Digipolis Antwerpen"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"aui-footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h3",4),r.\u0275\u0275text(6,"Antwerp UI"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"ul",5)(8,"li",6)(9,"a",7),r.\u0275\u0275text(10,"Digital branding guidelines"),r.\u0275\u0275element(11,"aui-icon",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(12,"li",6)(13,"a",9),r.\u0275\u0275text(14,"Core branding"),r.\u0275\u0275element(15,"aui-icon",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(16,"li",6)(17,"a",10),r.\u0275\u0275text(18,"React components"),r.\u0275\u0275element(19,"aui-icon",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(20,"li",6)(21,"a",11),r.\u0275\u0275text(22,"Smart widgets"),r.\u0275\u0275element(23,"aui-icon",8),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(24,"div",3)(25,"h3",4),r.\u0275\u0275text(26,"Digital city of tomorrow"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(27,"ul",5)(28,"li",6)(29,"a",12),r.\u0275\u0275text(30,"Digipolis Antwerp"),r.\u0275\u0275element(31,"aui-icon",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(32,"li",6)(33,"a",13),r.\u0275\u0275text(34,"Digital Antwerp"),r.\u0275\u0275element(35,"aui-icon",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(36,"li",6)(37,"a",14),r.\u0275\u0275text(38,"Vacancies"),r.\u0275\u0275element(39,"aui-icon",8),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(40,"li",6)(41,"a",15),r.\u0275\u0275text(42,"Internships"),r.\u0275\u0275element(43,"aui-icon",8),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275elementStart(44,"div",16)(45,"h3",4),r.\u0275\u0275text(46,"Social media"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(47,"div",5)(48,"a",17),r.\u0275\u0275element(49,"aui-icon",18),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(50,"a",19),r.\u0275\u0275element(51,"aui-icon",20),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(52,"a",21),r.\u0275\u0275element(53,"aui-icon",22),r.\u0275\u0275elementEnd()()()()()(),r.\u0275\u0275elementStart(54,"div",23)(55,"aui-subfooter",24),r.\u0275\u0275element(56,"aui-copyright",25),r.\u0275\u0275elementEnd()()())},dependencies:[OI,RI,FI,NI,UT,Ef],encapsulation:2})),t})(),CP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiHeaderLogo",""]]})),t})(),vU=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiHeaderContent",""]]})),t})();const bU=[[["","auiHeaderLogo",""]],[["","auiHeaderContent",""]],[["","auiHeaderMenuItem",""]]],xU=["[auiHeaderLogo]","[auiHeaderContent]","[auiHeaderMenuItem]"];let wU=(()=>{class t{constructor(){A(this,"logo",void 0),A(this,"content",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-header"]],contentQueries:function(e,i,l){if(1&e&&(r.\u0275\u0275contentQuery(l,CP,7),r.\u0275\u0275contentQuery(l,vU,7)),2&e){let m;r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.logo=m.first),r.\u0275\u0275queryRefresh(m=r.\u0275\u0275loadQuery())&&(i.content=m.first)}},ngContentSelectors:xU,decls:7,vars:0,consts:[[1,"o-header","aui-header"],[1,"o-header__content-wrapper"],[1,"o-header__content"],[1,"o-header__menu-items"]],template:function(e,i){1&e&&(r.\u0275\u0275projectionDef(bU),r.\u0275\u0275elementStart(0,"div",0)(1,"div",1),r.\u0275\u0275projection(2),r.\u0275\u0275elementStart(3,"div",2),r.\u0275\u0275projection(4,1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",3),r.\u0275\u0275projection(6,2),r.\u0275\u0275elementEnd()()())},encapsulation:2})),t})(),CU=(()=>{class t{constructor(){A(this,"class","o-header__menu-item")}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275dir",r.\u0275\u0275defineDirective({type:t,selectors:[["","auiHeaderMenuItem",""]],hostVars:2,hostBindings:function(e,i){2&e&&r.\u0275\u0275classMap(i.class)}})),t})(),SU=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["guide-header"]],decls:7,vars:1,consts:[["auiHeaderLogo",""],["src","https://cdn.antwerpen.be/core_branding_scss/6.6.6/assets/images/a-logo.svg","title","Antwerp logo.",3,"link"],["auiHeaderMenuItem",""],["href","http://github.com/digipolisantwerp/antwerp-ui_angular",1,"a-button","a-button--text","a-button--neutral","o-header__button","has-icon-left"],["name","ai-developer-community-github-1"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"aui-header")(1,"div",0),r.\u0275\u0275element(2,"aui-logo",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",2)(4,"a",3),r.\u0275\u0275element(5,"aui-icon",4),r.\u0275\u0275text(6,"GitHub "),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("link","/"))},dependencies:[g_,wU,CP,CU,Ef],encapsulation:2})),t})();function EU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"p",4),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.description)}}let TU=(()=>{class t{constructor(){A(this,"title",void 0),A(this,"description",void 0)}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["guide-hero"]],inputs:{title:"title",description:"description"},decls:6,vars:2,consts:[[1,"o-hero"],[1,"u-text-xlight"],[1,"h3"],["class","u-margin-top-xxs u-text-bold",4,"ngIf"],[1,"u-margin-top-xxs","u-text-bold"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,EU,2,1,"p",3),r.\u0275\u0275elementEnd()()()),2&e&&(r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(i.title),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.description))},dependencies:[on],styles:['[_ngcontent-%COMP%]:root{--THEME1-800: var(--theme1-800, #002855);--THEME1-700: var(--theme1-700, #003865);--THEME1-600: var(--theme1-600, #0057b7);--THEME1-500: var(--theme1-500, #009cde);--THEME1-400: var(--theme1-400, #41b6e6);--THEME1-300: var(--theme1-300, #99d6ea);--THEME1-200: var(--theme1-200, #96b5e4);--THEME1-100: var(--theme1-100, #e0ebf6);--THEME2-800: var(--theme2-800,);--THEME2-700: var(--theme2-700,);--THEME2-600: var(--theme2-600, #7c2629);--THEME2-500: var(--theme2-500, #862633);--THEME2-400: var(--theme2-400, #cf0039);--THEME2-300: var(--theme2-300, #df4661);--THEME2-200: var(--theme2-200, #ffb1bb);--THEME2-100: var(--theme2-100, #f5dadf);--INFO-800: var(--info-800, var(--THEME1-800));--INFO-700: var(--info-700, var(--THEME1-700));--INFO-600: var(--info-600, var(--THEME1-600));--INFO-500: var(--info-500, var(--THEME1-500));--INFO-400: var(--info-400, var(--THEME1-400));--INFO-300: var(--info-300, var(--THEME1-300));--INFO-200: var(--info-200, var(--THEME1-200));--INFO-100: var(--info-100, var(--THEME1-100));--SUCCESS-800: var(--success-800, #004721);--SUCCESS-700: var(--success-700, #006e33);--SUCCESS-600: var(--success-600, #4c8d2b);--SUCCESS-500: var(--success-500, #6cc24a);--SUCCESS-400: var(--success-400, #97d700);--SUCCESS-300: var(--success-300, #bce194);--SUCCESS-200: var(--success-200, #d0debb);--SUCCESS-100: var(--success-100, #edf8e9);--WARNING-800: var(--warning-800,);--WARNING-700: var(--warning-700,);--WARNING-600: var(--warning-600,);--WARNING-500: var(--warning-500, #8f3400);--WARNING-400: var(--warning-400, #ce4c00);--WARNING-300: var(--warning-300,);--WARNING-200: var(--warning-200,);--WARNING-100: var(--warning-100, #ffe4d6);--DANGER-800: var(--danger-800,);--DANGER-700: var(--danger-700, #7c2629);--DANGER-600: var(--danger-600, #af272f);--DANGER-500: var(--danger-500, #e03c31);--DANGER-400: var(--danger-400, #e56a54);--DANGER-300: var(--danger-300, #e6baa8);--DANGER-200: var(--danger-200, #f3cfb3);--DANGER-100: var(--danger-100, #fbe8e6);--TEXT-COLOR: var(--text-color, #000);--TEXT-COLOR-LIGHT: var(--text-color-light, #6f6f6f);--TEXT-COLOR-INVERTED: var(--text-color-inverted, #fff);--TEXT-COLOR-XLIGHT: var(--text-color-xlight, var(--TEXT-COLOR-INVERTED));--BG-COLOR: var(--bg-color, #f3f3f3);--BG-COLOR-LIGHT: var(--bg-color-light, #fff);--BG-COLOR-INVERTED: var(--bg-color-inverted, #424242);--BORDER-COLOR: var(--border-color, #949494);--BORDER-COLOR-LIGHT: var(--border-color-light, #d8d8d8);--OVERLAY-COLOR: var(--overlay-color, rgba(0, 0, 0, .75));--BOX-SHADOW-COLOR: var(--box-shadow-color, rgba(20, 20, 20, .12));--LINK-COLOR: var(--link-color, var(--THEME1-600));--LINK-HOVER-COLOR: var(--link-hover-color, var(--THEME1-700));--STATE-INFO: var(--state-info, var(--INFO-600));--STATE-SUCCESS: var(--state-success, var(--SUCCESS-700));--STATE-WARNING: var(--state-warning, var(--WARNING-400));--STATE-DANGER: var(--state-danger, var(--DANGER-600));--STATE-DISABLED: var(--state-disabled, #6f6f6f);--SPACER: var(--spacer, 1.5rem);--SPACER-3XL: var(--spacer-3xl, calc(var(--SPACER) * 4));--SPACER-XXL: var(--spacer-xxl, calc(var(--SPACER) * 2.5));--SPACER-XL: var(--spacer-xl, calc(var(--SPACER) * 2));--SPACER-L: var(--spacer-l, calc(var(--SPACER) * 1.5));--SPACER-S: var(--spacer-s, calc(var(--SPACER) / 1.5));--SPACER-XS: var(--spacer-xs, calc(var(--SPACER) / 2));--SPACER-XXS: var(--spacer-xxs, calc(var(--SPACER) / 3));--SPACER-3XS: var(--spacer-3xs, calc(var(--SPACER) / 6));--SCREEN-XS: var(--screen-xs, 30rem);--SCREEN-S: var(--screen-s, 45rem);--SCREEN-L: var(--screen-l, 62rem);--SCREEN-XL: var(--screen-xl, 75rem);--SCREEN-XS-MAX: var(--screen-xs-max, 44.9375rem);--SCREEN-S-MAX: var(--screen-s-max, 61.9375rem);--SCREEN-L-MAX: var(--screen-l-max, 74.9375rem);--SCREEN-XL-MAX: var(--screen-xl-max, 89.9375rem);--SCREEN-XXL: var(--screen-xxl, calc(var(--SCREEN-XL) + calc(var(--SPACER-3XL) * 2) + calc(var(--SPACER) * 2)));--FONT-FAMILY-BASE: var(--font-family-base, "Sun Antwerpen", sans-serif);--FONT-FAMILY-HEADINGS: var(--font-family-headings, "Antwerpen Regular", sans-serif);--FONT-FAMILY-MONOSPACE: var(--font-family-monospace, "Menlo", "Monaco", "Consolas", "Courier New", monospace);--FONT-WEIGHT-LIGHT: var(--font-weight-light, 300);--FONT-WEIGHT-NORMAL: var(--font-weight-normal, 500);--FONT-WEIGHT-BOLD: var(--font-weight-bold, 700);--FONT-WEIGHT-EXTRA-BOLD: var(--font-weight-extra-bold, 800);--FONT-WEIGHT-H1: var(--font-weight-h1, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H2: var(--font-weight-h2, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H3: var(--font-weight-h3, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H4: var(--font-weight-h4, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H5: var(--font-weight-h5, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H6: var(--font-weight-h6, var(--FONT-WEIGHT-BOLD));--FONT-SIZE-BASE: var(--font-size-base, 16px);--FONT-SIZE-SMALL: var(--font-size-small, 14px);--FONT-SIZE-LARGE: var(--font-size-large, 18px);--FONT-SIZE-H1: var(--font-size-h1, 36px);--FONT-SIZE-H2: var(--font-size-h2, 28px);--FONT-SIZE-H3: var(--font-size-h3, 23px);--FONT-SIZE-H4: var(--font-size-h4, 21px);--FONT-SIZE-H5: var(--font-size-h5, 19px);--FONT-SIZE-H6: var(--font-size-h6, 17px);--LINE-HEIGHT-BASE: var(--line-height-base, 1);--LINE-HEIGHT-HEADING: var(--line-height-heading, 1.1);--LINE-HEIGHT-PARAGRAPH: var(--line-height-paragraph, 1.3);--BORDER-RADIUS: var(--border-radius, 0);--BORDER-WIDTH: var(--border-width, 1px);--ANIMATION-DURATION: var(--animation-duration, .2s);--ANIMATION-EASING: var(--animation-easing, ease-in-out);--ANIMATION-NORMAL: var(--animation-normal, var(--ANIMATION-DURATION) var(--ANIMATION-EASING));--BOX-SHADOW-BOTTOM-LEFT: var(--box-shadow-bottom-left, calc(var(--SPACER) / -2) calc(var(--SPACER) / 2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-BOTTOM-RIGHT: var(--box-shadow-bottom-right, calc(var(--SPACER) / 2) calc(var(--SPACER) / 2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-TOP-LEFT: var(--box-shadow-top-left, calc(var(--SPACER) / -2) calc(var(--SPACER) / -2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-TOP-RIGHT: var(--box-shadow-top-right, calc(var(--SPACER) / 2) calc(var(--SPACER) / -2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW: var(--box-shadow, var(--BOX-SHADOW-BOTTOM-RIGHT))}[_ngcontent-%COMP%]:root{--shared-avatar-size-s: var(--SPACER-L);--shared-avatar-size: var(--SPACER-XL);--shared-avatar-size-l: var(--SPACER-XXL);--shared-copyright-color: var(--TEXT-COLOR-INVERTED);--shared-copyright-height: var(--SPACER-L);--shared-header-height: var(--SPACER-XL);--shared-slideshow-footer-color-light: var(--TEXT-COLOR-INVERTED)}.o-hero[_ngcontent-%COMP%]{background-color:#0057b7;height:auto;min-height:4.5rem;padding-left:1.5rem}.o-hero[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:2.25rem}.u-margin-top-xxs[_ngcontent-%COMP%]{margin-top:.25rem}']})),t})();const DU=["mainContent"],MU=["skipContent"],IU=function(t){return[t]};function PU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"a",22)(1,"span",23),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()()),2&t){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction1(2,IU,e.path)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(null==e.data||null==e.data.meta?null:e.data.meta.title)}}function AU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"span",24)(1,"span",23),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"aui-icon",25),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(null==e.data||null==e.data.meta?null:e.data.meta.title)}}const LU=function(t,n){return[t,n]};function kU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"li",18)(1,"a",22)(2,"span",23),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd()()()),2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext(2).$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("routerLink",r.\u0275\u0275pureFunction2(2,LU,i.path,e.path)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(null==e.data||null==e.data.meta?null:e.data.meta.title)}}function OU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"ul",26),r.\u0275\u0275template(1,kU,4,5,"li",7),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext().$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",i.getChildrenRoutes(e))}}function RU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"li",18),r.\u0275\u0275template(1,PU,3,4,"a",19),r.\u0275\u0275template(2,AU,4,1,"span",20),r.\u0275\u0275template(3,OU,2,1,"ul",21),r.\u0275\u0275elementEnd()),2&t){const e=n.$implicit,i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.shouldDisplaySubMenu(e)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.shouldDisplaySubMenu(e)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.shouldDisplaySubMenu(e))}}let FU=(()=>{class t{constructor(){A(this,"mainContent",void 0),A(this,"skipContent",void 0),A(this,"packages",KT.splice(0,1));const e=[...KT];this.packages=e}shouldDisplaySubMenu(e){return e&&e.children&&e.children.length>=1}getChildrenRoutes(e){const i=[...e.children];return i.splice(0,1),i}goToMainContent(e){e.preventDefault(),e.stopPropagation();const l=this.skipContent.nativeElement;this.mainContent.nativeElement.focus(),l.blur()}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["app-root"]],viewQuery:function(e,i){if(1&e&&(r.\u0275\u0275viewQuery(DU,7),r.\u0275\u0275viewQuery(MU,7)),2&e){let l;r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.mainContent=l.first),r.\u0275\u0275queryRefresh(l=r.\u0275\u0275loadQuery())&&(i.skipContent=l.first)}},decls:30,vars:1,consts:[["aria-label","Main header","role","banner"],["href","#main-content",1,"a-button--text","o-header__button","o-header__button-skip",3,"click"],["skipContent",""],["title","Angular core components"],[1,"u-main"],[1,"u-main-menu"],[1,"a-list","a-list--lined","a-list--flushed"],["class","a-list__item",4,"ngFor","ngForOf"],[1,"u-container","u-margin-top","u-margin-bottom","p-antwerp-ui"],[1,"row"],[1,"col-xs-12"],["role","alertdialog","aria-labelledby","alert-warning",1,"m-alert","m-alert--warning","u-margin-bottom-l"],["className","m-alert__icon","name","ai-alert-circle"],["id","alert-warning",1,"h5","u-margin-bottom-xs"],[1,"u-margin-bottom-xs"],["href","https://digitalehuisstijl.antwerpen.be","rel","external"],["id","main-content","tabindex","-1",1,"col-xs-12"],["mainContent",""],[1,"a-list__item"],["class","a-list__content","routerLinkActive","is-active",3,"routerLink",4,"ngIf"],["class","a-list__content",4,"ngIf"],["class","a-list a-list--lined",4,"ngIf"],["routerLinkActive","is-active",1,"a-list__content",3,"routerLink"],[1,"a-list__text"],[1,"a-list__content"],["name","ai-arrow-down-1"],[1,"a-list","a-list--lined"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"header",0)(1,"a",1,2),r.\u0275\u0275listener("click",function(m){return i.goToMainContent(m)}),r.\u0275\u0275text(3,"Skip to main content"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(4,"guide-header")(5,"guide-hero",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",4)(7,"div",5)(8,"ul",6),r.\u0275\u0275template(9,RU,4,3,"li",7),r.\u0275\u0275elementEnd()(),r.\u0275\u0275elementStart(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),r.\u0275\u0275element(14,"aui-icon",12),r.\u0275\u0275elementStart(15,"h4",13),r.\u0275\u0275text(16,"Deprecation notice"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"p",14),r.\u0275\u0275text(18," As of October 2022 we deprecated the use of Angular as a frontend solution. This means that new frontend solutions should always be built using React.js. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"p",14),r.\u0275\u0275text(20," Existing projects can still do a one-time upgrade to the latest version of Angular (and accompanying components), but should migrate, as described in the Digipolis Antwerpen Application Stack (DAAS). "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"p"),r.\u0275\u0275text(22," Always check "),r.\u0275\u0275elementStart(23,"a",15),r.\u0275\u0275text(24,"https://digitalehuisstijl.antwerpen.be"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(25," for the latest news and guidelines concerning Antwerp's digital branding guidelines. "),r.\u0275\u0275elementEnd()()(),r.\u0275\u0275elementStart(26,"main",16,17),r.\u0275\u0275element(28,"router-outlet"),r.\u0275\u0275elementEnd()()()(),r.\u0275\u0275element(29,"guide-footer")),2&e&&(r.\u0275\u0275advance(9),r.\u0275\u0275property("ngForOf",i.packages))},dependencies:[bt,on,Ju,va,Qp,Ef,yU,SU,TU],styles:['[_ngcontent-%COMP%]:root{--THEME1-800: var(--theme1-800, #002855);--THEME1-700: var(--theme1-700, #003865);--THEME1-600: var(--theme1-600, #0057b7);--THEME1-500: var(--theme1-500, #009cde);--THEME1-400: var(--theme1-400, #41b6e6);--THEME1-300: var(--theme1-300, #99d6ea);--THEME1-200: var(--theme1-200, #96b5e4);--THEME1-100: var(--theme1-100, #e0ebf6);--THEME2-800: var(--theme2-800,);--THEME2-700: var(--theme2-700,);--THEME2-600: var(--theme2-600, #7c2629);--THEME2-500: var(--theme2-500, #862633);--THEME2-400: var(--theme2-400, #cf0039);--THEME2-300: var(--theme2-300, #df4661);--THEME2-200: var(--theme2-200, #ffb1bb);--THEME2-100: var(--theme2-100, #f5dadf);--INFO-800: var(--info-800, var(--THEME1-800));--INFO-700: var(--info-700, var(--THEME1-700));--INFO-600: var(--info-600, var(--THEME1-600));--INFO-500: var(--info-500, var(--THEME1-500));--INFO-400: var(--info-400, var(--THEME1-400));--INFO-300: var(--info-300, var(--THEME1-300));--INFO-200: var(--info-200, var(--THEME1-200));--INFO-100: var(--info-100, var(--THEME1-100));--SUCCESS-800: var(--success-800, #004721);--SUCCESS-700: var(--success-700, #006e33);--SUCCESS-600: var(--success-600, #4c8d2b);--SUCCESS-500: var(--success-500, #6cc24a);--SUCCESS-400: var(--success-400, #97d700);--SUCCESS-300: var(--success-300, #bce194);--SUCCESS-200: var(--success-200, #d0debb);--SUCCESS-100: var(--success-100, #edf8e9);--WARNING-800: var(--warning-800,);--WARNING-700: var(--warning-700,);--WARNING-600: var(--warning-600,);--WARNING-500: var(--warning-500, #8f3400);--WARNING-400: var(--warning-400, #ce4c00);--WARNING-300: var(--warning-300,);--WARNING-200: var(--warning-200,);--WARNING-100: var(--warning-100, #ffe4d6);--DANGER-800: var(--danger-800,);--DANGER-700: var(--danger-700, #7c2629);--DANGER-600: var(--danger-600, #af272f);--DANGER-500: var(--danger-500, #e03c31);--DANGER-400: var(--danger-400, #e56a54);--DANGER-300: var(--danger-300, #e6baa8);--DANGER-200: var(--danger-200, #f3cfb3);--DANGER-100: var(--danger-100, #fbe8e6);--TEXT-COLOR: var(--text-color, #000);--TEXT-COLOR-LIGHT: var(--text-color-light, #6f6f6f);--TEXT-COLOR-INVERTED: var(--text-color-inverted, #fff);--TEXT-COLOR-XLIGHT: var(--text-color-xlight, var(--TEXT-COLOR-INVERTED));--BG-COLOR: var(--bg-color, #f3f3f3);--BG-COLOR-LIGHT: var(--bg-color-light, #fff);--BG-COLOR-INVERTED: var(--bg-color-inverted, #424242);--BORDER-COLOR: var(--border-color, #949494);--BORDER-COLOR-LIGHT: var(--border-color-light, #d8d8d8);--OVERLAY-COLOR: var(--overlay-color, rgba(0, 0, 0, .75));--BOX-SHADOW-COLOR: var(--box-shadow-color, rgba(20, 20, 20, .12));--LINK-COLOR: var(--link-color, var(--THEME1-600));--LINK-HOVER-COLOR: var(--link-hover-color, var(--THEME1-700));--STATE-INFO: var(--state-info, var(--INFO-600));--STATE-SUCCESS: var(--state-success, var(--SUCCESS-700));--STATE-WARNING: var(--state-warning, var(--WARNING-400));--STATE-DANGER: var(--state-danger, var(--DANGER-600));--STATE-DISABLED: var(--state-disabled, #6f6f6f);--SPACER: var(--spacer, 1.5rem);--SPACER-3XL: var(--spacer-3xl, calc(var(--SPACER) * 4));--SPACER-XXL: var(--spacer-xxl, calc(var(--SPACER) * 2.5));--SPACER-XL: var(--spacer-xl, calc(var(--SPACER) * 2));--SPACER-L: var(--spacer-l, calc(var(--SPACER) * 1.5));--SPACER-S: var(--spacer-s, calc(var(--SPACER) / 1.5));--SPACER-XS: var(--spacer-xs, calc(var(--SPACER) / 2));--SPACER-XXS: var(--spacer-xxs, calc(var(--SPACER) / 3));--SPACER-3XS: var(--spacer-3xs, calc(var(--SPACER) / 6));--SCREEN-XS: var(--screen-xs, 30rem);--SCREEN-S: var(--screen-s, 45rem);--SCREEN-L: var(--screen-l, 62rem);--SCREEN-XL: var(--screen-xl, 75rem);--SCREEN-XS-MAX: var(--screen-xs-max, 44.9375rem);--SCREEN-S-MAX: var(--screen-s-max, 61.9375rem);--SCREEN-L-MAX: var(--screen-l-max, 74.9375rem);--SCREEN-XL-MAX: var(--screen-xl-max, 89.9375rem);--SCREEN-XXL: var(--screen-xxl, calc(var(--SCREEN-XL) + calc(var(--SPACER-3XL) * 2) + calc(var(--SPACER) * 2)));--FONT-FAMILY-BASE: var(--font-family-base, "Sun Antwerpen", sans-serif);--FONT-FAMILY-HEADINGS: var(--font-family-headings, "Antwerpen Regular", sans-serif);--FONT-FAMILY-MONOSPACE: var(--font-family-monospace, "Menlo", "Monaco", "Consolas", "Courier New", monospace);--FONT-WEIGHT-LIGHT: var(--font-weight-light, 300);--FONT-WEIGHT-NORMAL: var(--font-weight-normal, 500);--FONT-WEIGHT-BOLD: var(--font-weight-bold, 700);--FONT-WEIGHT-EXTRA-BOLD: var(--font-weight-extra-bold, 800);--FONT-WEIGHT-H1: var(--font-weight-h1, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H2: var(--font-weight-h2, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H3: var(--font-weight-h3, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H4: var(--font-weight-h4, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H5: var(--font-weight-h5, var(--FONT-WEIGHT-BOLD));--FONT-WEIGHT-H6: var(--font-weight-h6, var(--FONT-WEIGHT-BOLD));--FONT-SIZE-BASE: var(--font-size-base, 16px);--FONT-SIZE-SMALL: var(--font-size-small, 14px);--FONT-SIZE-LARGE: var(--font-size-large, 18px);--FONT-SIZE-H1: var(--font-size-h1, 36px);--FONT-SIZE-H2: var(--font-size-h2, 28px);--FONT-SIZE-H3: var(--font-size-h3, 23px);--FONT-SIZE-H4: var(--font-size-h4, 21px);--FONT-SIZE-H5: var(--font-size-h5, 19px);--FONT-SIZE-H6: var(--font-size-h6, 17px);--LINE-HEIGHT-BASE: var(--line-height-base, 1);--LINE-HEIGHT-HEADING: var(--line-height-heading, 1.1);--LINE-HEIGHT-PARAGRAPH: var(--line-height-paragraph, 1.3);--BORDER-RADIUS: var(--border-radius, 0);--BORDER-WIDTH: var(--border-width, 1px);--ANIMATION-DURATION: var(--animation-duration, .2s);--ANIMATION-EASING: var(--animation-easing, ease-in-out);--ANIMATION-NORMAL: var(--animation-normal, var(--ANIMATION-DURATION) var(--ANIMATION-EASING));--BOX-SHADOW-BOTTOM-LEFT: var(--box-shadow-bottom-left, calc(var(--SPACER) / -2) calc(var(--SPACER) / 2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-BOTTOM-RIGHT: var(--box-shadow-bottom-right, calc(var(--SPACER) / 2) calc(var(--SPACER) / 2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-TOP-LEFT: var(--box-shadow-top-left, calc(var(--SPACER) / -2) calc(var(--SPACER) / -2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW-TOP-RIGHT: var(--box-shadow-top-right, calc(var(--SPACER) / 2) calc(var(--SPACER) / -2) 0 var(--BOX-SHADOW-COLOR));--BOX-SHADOW: var(--box-shadow, var(--BOX-SHADOW-BOTTOM-RIGHT))}[_ngcontent-%COMP%]:root{--shared-avatar-size-s: var(--SPACER-L);--shared-avatar-size: var(--SPACER-XL);--shared-avatar-size-l: var(--SPACER-XXL);--shared-copyright-color: var(--TEXT-COLOR-INVERTED);--shared-copyright-height: var(--SPACER-L);--shared-header-height: var(--SPACER-XL);--shared-slideshow-footer-color-light: var(--TEXT-COLOR-INVERTED)}body[_ngcontent-%COMP%]{display:flex;min-height:100vh}app-root[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;max-width:100%}.u-main[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]:focus{outline:none}#main-content[_ngcontent-%COMP%] > ng-component[_ngcontent-%COMP%]{width:100%}.p-antwerp-ui[_ngcontent-%COMP%]{flex:1 1 auto;overflow:auto}.a-pre.hljs[_ngcontent-%COMP%]{border:1px solid #f3f3f3}.m-button-group--inline[_ngcontent-%COMP%]{display:inline-flex}@media screen and (min-width: 45rem){.u-show-on-mobile[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 44.9375rem){.u-hide-on-mobile[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 61.9375rem){.u-hide-on-tablet[_ngcontent-%COMP%]{display:none}}pre[_ngcontent-%COMP%]{tab-size:2}.u-text-readable[_ngcontent-%COMP%]{max-width:28rem}.aui-footer[_ngcontent-%COMP%]{background:#141414}.aui-footer[_ngcontent-%COMP%]   .u-container[_ngcontent-%COMP%]{padding-bottom:1.5rem;padding-top:1.5rem}.aui-footer[_ngcontent-%COMP%]   .a-list[_ngcontent-%COMP%]{list-style:none;padding-left:0}.aui-footer[_ngcontent-%COMP%]   .a-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{--LINK-COLOR: #fff;--LINK-HOVER-COLOR: #fff}.aui-footer[_ngcontent-%COMP%]   .a-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ai[_ngcontent-%COMP%]   .ai[_ngcontent-%COMP%]{padding-left:0}.aui-footer[_ngcontent-%COMP%]   h3.h4[_ngcontent-%COMP%]{color:#f3f3f3}.m-nav-tabs__layout[_ngcontent-%COMP%]{box-shadow:0 -1px #6f6f6f inset}.aui-code-snippet[_ngcontent-%COMP%]{display:block;overflow-x:auto}.o-leaflet__wrapper[_ngcontent-%COMP%]{overflow:visible!important}.o-leaflet__map[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px Highlight;box-shadow:0 0 0 3px -webkit-focus-ring-color}.p-fix-position[_ngcontent-%COMP%]   .o-header__logo[_ngcontent-%COMP%]{position:static}.u-datepicker[_ngcontent-%COMP%]{margin-bottom:15rem}.u-main[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width: 45rem){.u-main[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{flex-direction:row}}@media screen and (max-width: 44.9375rem){.u-main-menu[_ngcontent-%COMP%]{border-bottom:1px solid #6f6f6f;height:50vh;overflow:auto}}@media screen and (min-width: 45rem){.u-main-menu[_ngcontent-%COMP%]{border-right:1px solid #6f6f6f;flex:0 1 320px}}']})),t})();const NU=[{path:"",redirectTo:"modules",pathMatch:"full"}];let iC=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,ls]})),t})(),SP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,m_]})),t})(),rC=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri]})),t})(),EP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[Lf.vp],imports:[Ri,Lf.n6]})),t})(),TP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,ls]})),t})(),DP=(()=>{class t{static forChild(e,i){return{ngModule:t,providers:[T1,{provide:w1,useValue:e},{provide:C1,useValue:i}]}}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[T1,{provide:w1,useValue:b1},{provide:C1,useValue:x1}],imports:[Ri,ls]})),t})(),QT=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[qM],imports:[Ri]})),t})(),MP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,QT,ls]})),t})(),IP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri]})),t})();const PP=new r.InjectionToken("paginationLabels"),zU={PAGINATION_LABEL:"%{currentPage} of %{total}"};let AP=(()=>{class t{static forChild(e){return{ngModule:t,providers:[{provide:PP,useValue:e}]}}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[{provide:PP,useValue:zU}],imports:[Ri,ls]})),t})(),LP=(()=>{class t{static forChild(e,i){return{ngModule:t,providers:[{provide:ST,useValue:e},{provide:ET,useValue:i}]}}}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[{provide:ST,useValue:void 0},{provide:ET,useValue:void 0}],imports:[Ri,sc,ls,CL]})),t})(),kP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri]})),t})(),OP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[TT],imports:[Ri,ls,sc]})),t})(),RP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,ls,jy]})),t})(),FP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri]})),t})(),NP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[EI],imports:[Ri,sc,jy,iB]})),t})(),zP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,sc]})),t})(),BP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,jy,sc,ls]})),t})(),VP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[tp,Ri,ls]})),t})(),jP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({providers:[Q1],imports:[ls]})),t})();function BU(t,n){if(1&t){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",5),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const l=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(l.remove())}),r.\u0275\u0275element(1,"aui-icon",6),r.\u0275\u0275elementEnd()}}function VU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"h1"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classMap(e.options.titleClass+" h5 u-margin-bottom-xs"),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.title," ")}}function jU(t,n){if(1&t&&r.\u0275\u0275element(0,"div",7),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classMap(e.options.messageClass),r.\u0275\u0275property("innerHTML",e.message,r.\u0275\u0275sanitizeHtml)}}function UU(t,n){if(1&t&&(r.\u0275\u0275elementStart(0,"p",8),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&t){const e=r.\u0275\u0275nextContext();r.\u0275\u0275classMap(e.options.messageClass),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.message," ")}}let HU=(()=>{class t extends YT{}return A(t,"\u0275fac",function(){let n;return function(i){return(n||(n=r.\u0275\u0275getInheritedFactory(t)))(i||t)}}()),A(t,"\u0275cmp",r.\u0275\u0275defineComponent({type:t,selectors:[["aui-notification"]],features:[r.\u0275\u0275InheritDefinitionFeature],decls:5,vars:6,consts:[[1,"m-alert"],["class","a-button a-button--text has-icon m-alert__close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[1,"a-button","a-button--text","has-icon","m-alert__close",3,"click"],["name","ai-close","ariaLabel","Sluiten"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"]],template:function(e,i){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,BU,2,0,"button",1),r.\u0275\u0275template(2,VU,2,3,"h1",2),r.\u0275\u0275template(3,jU,1,3,"div",3),r.\u0275\u0275template(4,UU,2,3,"p",4),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275styleProp("display","inactive"===i.state.value?"none":""),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.options.closeButton),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.title),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.message&&i.options.enableHtml),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.message&&!i.options.enableHtml))},dependencies:[on,To],styles:[".toast-center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.toast-top-center[_ngcontent-%COMP%]{top:0;right:0;width:100%}.toast-bottom-center[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.toast-top-full-width[_ngcontent-%COMP%]{top:0;right:0;width:100%}.toast-bottom-full-width[_ngcontent-%COMP%]{bottom:0;right:0;width:100%}.toast-top-left[_ngcontent-%COMP%]{top:12px;left:12px}.toast-top-right[_ngcontent-%COMP%]{top:12px;right:12px}.toast-bottom-right[_ngcontent-%COMP%]{right:12px;bottom:12px}.toast-bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}.toast-title[_ngcontent-%COMP%]{font-weight:700}.toast-message[_ngcontent-%COMP%]{word-wrap:break-word}.toast-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .toast-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.toast-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc;text-decoration:none}.toast-close-button[_ngcontent-%COMP%]{position:relative;right:-.3em;top:-.3em;float:right;font-size:20px;font-weight:700;color:#fff;text-shadow:0 1px 0 #ffffff}.toast-close-button[_ngcontent-%COMP%]:hover, .toast-close-button[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toast-close-button[_ngcontent-%COMP%]{padding:0;cursor:pointer;background:transparent;border:0}.toast-container[_ngcontent-%COMP%]{pointer-events:none;position:fixed;z-index:999999}.toast-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.toast-container[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:0 0 6px;padding:15px 15px 15px 50px;width:300px;border-radius:3px;background-position:15px center;background-repeat:no-repeat;background-size:24px;box-shadow:0 0 12px #999;color:#fff}.toast-container[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}.toast-info[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTI1NiA4QzExOS4wNDMgOCA4IDExOS4wODMgOCAyNTZjMCAxMzYuOTk3IDExMS4wNDMgMjQ4IDI0OCAyNDhzMjQ4LTExMS4wMDMgMjQ4LTI0OEM1MDQgMTE5LjA4MyAzOTIuOTU3IDggMjU2IDh6bTAgMTEwYzIzLjE5NiAwIDQyIDE4LjgwNCA0MiA0MnMtMTguODA0IDQyLTQyIDQyLTQyLTE4LjgwNC00Mi00MiAxOC44MDQtNDIgNDItNDJ6bTU2IDI1NGMwIDYuNjI3LTUuMzczIDEyLTEyIDEyaC04OGMtNi42MjcgMC0xMi01LjM3My0xMi0xMnYtMjRjMC02LjYyNyA1LjM3My0xMiAxMi0xMmgxMnYtNjRoLTEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0yNGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDY0YzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MTAwaDEyYzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MjR6Jy8+PC9zdmc+)}.toast-error[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTI1NiA4QzExOSA4IDggMTE5IDggMjU2czExMSAyNDggMjQ4IDI0OCAyNDgtMTExIDI0OC0yNDhTMzkzIDggMjU2IDh6bTEyMS42IDMxMy4xYzQuNyA0LjcgNC43IDEyLjMgMCAxN0wzMzggMzc3LjZjLTQuNyA0LjctMTIuMyA0LjctMTcgMEwyNTYgMzEybC02NS4xIDY1LjZjLTQuNyA0LjctMTIuMyA0LjctMTcgMEwxMzQuNCAzMzhjLTQuNy00LjctNC43LTEyLjMgMC0xN2w2NS42LTY1LTY1LjYtNjUuMWMtNC43LTQuNy00LjctMTIuMyAwLTE3bDM5LjYtMzkuNmM0LjctNC43IDEyLjMtNC43IDE3IDBsNjUgNjUuNyA2NS4xLTY1LjZjNC43LTQuNyAxMi4zLTQuNyAxNyAwbDM5LjYgMzkuNmM0LjcgNC43IDQuNyAxMi4zIDAgMTdMMzEyIDI1Nmw2NS42IDY1LjF6Jy8+PC9zdmc+)}.toast-success[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTE3My44OTggNDM5LjQwNGwtMTY2LjQtMTY2LjRjLTkuOTk3LTkuOTk3LTkuOTk3LTI2LjIwNiAwLTM2LjIwNGwzNi4yMDMtMzYuMjA0YzkuOTk3LTkuOTk4IDI2LjIwNy05Ljk5OCAzNi4yMDQgMEwxOTIgMzEyLjY5IDQzMi4wOTUgNzIuNTk2YzkuOTk3LTkuOTk3IDI2LjIwNy05Ljk5NyAzNi4yMDQgMGwzNi4yMDMgMzYuMjA0YzkuOTk3IDkuOTk3IDkuOTk3IDI2LjIwNiAwIDM2LjIwNGwtMjk0LjQgMjk0LjQwMWMtOS45OTggOS45OTctMjYuMjA3IDkuOTk3LTM2LjIwNC0uMDAxeicvPjwvc3ZnPg==)}.toast-warning[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1NzYgNTEyJyB3aWR0aD0nNTc2JyBoZWlnaHQ9JzUxMic+PHBhdGggZmlsbD0ncmdiKDI1NSwyNTUsMjU1KScgZD0nTTU2OS41MTcgNDQwLjAxM0M1ODcuOTc1IDQ3Mi4wMDcgNTY0LjgwNiA1MTIgNTI3Ljk0IDUxMkg0OC4wNTRjLTM2LjkzNyAwLTU5Ljk5OS00MC4wNTUtNDEuNTc3LTcxLjk4N0wyNDYuNDIzIDIzLjk4NWMxOC40NjctMzIuMDA5IDY0LjcyLTMxLjk1MSA4My4xNTQgMGwyMzkuOTQgNDE2LjAyOHpNMjg4IDM1NGMtMjUuNDA1IDAtNDYgMjAuNTk1LTQ2IDQ2czIwLjU5NSA0NiA0NiA0NiA0Ni0yMC41OTUgNDYtNDYtMjAuNTk1LTQ2LTQ2LTQ2em0tNDMuNjczLTE2NS4zNDZsNy40MTggMTM2Yy4zNDcgNi4zNjQgNS42MDkgMTEuMzQ2IDExLjk4MiAxMS4zNDZoNDguNTQ2YzYuMzczIDAgMTEuNjM1LTQuOTgyIDExLjk4Mi0xMS4zNDZsNy40MTgtMTM2Yy4zNzUtNi44NzQtNS4wOTgtMTIuNjU0LTExLjk4Mi0xMi42NTRoLTYzLjM4M2MtNi44ODQgMC0xMi4zNTYgNS43OC0xMS45ODEgMTIuNjU0eicvPjwvc3ZnPg==)}.toast-container.toast-top-center[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%], .toast-container.toast-bottom-center[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{width:300px;margin-left:auto;margin-right:auto}.toast-container.toast-top-full-width[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%], .toast-container.toast-bottom-full-width[_ngcontent-%COMP%]   .ngx-toastr[_ngcontent-%COMP%]{width:96%;margin-left:auto;margin-right:auto}.ngx-toastr[_ngcontent-%COMP%]{background-color:#030303;pointer-events:auto}.toast-success[_ngcontent-%COMP%]{background-color:#51a351}.toast-error[_ngcontent-%COMP%]{background-color:#bd362f}.toast-info[_ngcontent-%COMP%]{background-color:#2f96b4}.toast-warning[_ngcontent-%COMP%]{background-color:#f89406}.toast-progress[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width: 240px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:11em}.toast-container[_ngcontent-%COMP%]   .toast-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width: 241px) and (max-width: 480px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:8px 8px 8px 50px;width:18em}.toast-container[_ngcontent-%COMP%]   .toast-close-button[_ngcontent-%COMP%]{right:-.2em;top:-.2em}}@media all and (min-width: 481px) and (max-width: 768px){.toast-container[_ngcontent-%COMP%]   .ngx-toastr.div[_ngcontent-%COMP%]{padding:15px 15px 15px 50px;width:25em}}  .toast-container{display:flex;flex-direction:column-reverse;max-width:18.5rem;position:fixed;right:.75rem;top:3rem;z-index:8}[_nghost-%COMP%]{margin-top:.75rem}.toast-success[_nghost-%COMP%]   .m-alert[_ngcontent-%COMP%]{--alert-color: var(--alert-success-color);--alert-border-color: var(--alert-success-border-color)}.toast-success[_nghost-%COMP%]   .m-alert[_ngcontent-%COMP%]   .a-button--text[_ngcontent-%COMP%]{--btn-color: var(--btn-text-success-color);--btn-hover-color: var(--btn-text-success-hover-color);--btn-hover-bg-color: var(--btn-text-success-hover-bg-color)}.toast-warning[_nghost-%COMP%]   .m-alert[_ngcontent-%COMP%]{--alert-color: var(--alert-warning-color);--alert-border-color: var(--alert-warning-border-color)}.toast-warning[_nghost-%COMP%]   .m-alert[_ngcontent-%COMP%]   .a-button--text[_ngcontent-%COMP%]{--btn-color: var(--btn-text-warning-color);--btn-hover-color: var(--btn-text-warning-hover-color);--btn-hover-bg-color: var(--btn-text-warning-hover-bg-color)}.toast-error[_nghost-%COMP%]   .m-alert[_ngcontent-%COMP%]{--alert-color: var(--alert-danger-color);--alert-border-color: var(--alert-danger-border-color)}.toast-error[_nghost-%COMP%]   .m-alert[_ngcontent-%COMP%]   .a-button--text[_ngcontent-%COMP%]{--btn-color: var(--btn-text-danger-color);--btn-hover-color: var(--btn-text-danger-hover-color);--btn-hover-bg-color: var(--btn-text-danger-hover-bg-color)}"],data:{animation:[mP("flyInOut",[eC("inactive",sd({opacity:0})),tC("inactive => active",J1("250ms ease-in-out",_P([sd({transform:"translate(100%, 0)",opacity:0}),sd({transform:"none",opacity:1})]))),tC("active => removed",J1("300ms ease-in-out",_P([sd({opacity:1}),sd({transform:"translate(100%, 0)",opacity:0})])))])]}})),t})(),UP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[Ri,ls,_U.forRoot({toastComponent:HU,closeButton:!0})]})),t})(),HP=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[iC,SP,rC,EP,TP,DP,GM,QT,MP,IP,AP,LP,kP,OP,RP,FP,NP,DI.forChild(["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"],["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],{ERRORS_INVALID_DATE:"Ongeldige datum.",ERRORS_INVALID_RANGE:"Deze datum kan niet gekozen worden."}),zP,BP,VP,kI,iC,rC,jP,iP,oP,aP,lP,UP,iC,EP,SP,rC,TP,DP,GM,QT,MP,IP,AP,LP,kP,OP,RP,FP,NP,DI,zP,BP,VP,kI,iC,rC,jP,iP,oP,aP,lP,UP]})),t})();function $P(t){return new r.\u0275RuntimeError(3e3,!1)}function SH(){return typeof window<"u"&&typeof window.document<"u"}function XT(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Mf(t){switch(t.length){case 0:return new l0;case 1:return t[0];default:return new vP(t)}}function GP(t,n,e,i,l=new Map,m=new Map){const C=[],F=[];let K=-1,le=null;if(i.forEach(xe=>{const Ae=xe.get("offset"),et=Ae==K,Qe=et&&le||new Map;xe.forEach((yt,At)=>{let Nt=At,Gt=yt;if("offset"!==At)switch(Nt=n.normalizePropertyName(Nt,C),Gt){case WT:Gt=l.get(At);break;case dp:Gt=m.get(At);break;default:Gt=n.normalizeStyleValue(At,Nt,Gt,C)}Qe.set(Nt,Gt)}),et||F.push(Qe),le=Qe,K=Ae}),C.length)throw function dH(t){return new r.\u0275RuntimeError(3502,!1)}();return F}function JT(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&eD(e,"start",t)));break;case"done":t.onDone(()=>i(e&&eD(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&eD(e,"destroy",t)))}}function eD(t,n,e){const m=tD(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),C=t._data;return null!=C&&(m._data=C),m}function tD(t,n,e,i,l="",m=0,C){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:l,totalTime:m,disabled:!!C}}function Bc(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function ZP(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}let nD=(t,n)=>!1,WP=(t,n,e)=>[],qP=null;function iD(t){const n=t.parentNode||t.host;return n===qP?null:n}(XT()||typeof Element<"u")&&(SH()?(qP=(()=>document.documentElement)(),nD=(t,n)=>{for(;n;){if(n===t)return!0;n=iD(n)}return!1}):nD=(t,n)=>t.contains(n),WP=(t,n,e)=>{if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]});let Sg=null,YP=!1;const KP=nD,QP=WP;let XP=(()=>{class t{validateStyleProperty(e){return function TH(t){Sg||(Sg=function DH(){return typeof document<"u"?document.body:null}()||{},YP=!!Sg.style&&"WebkitAppearance"in Sg.style);let n=!0;return Sg.style&&!function EH(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in Sg.style,!n&&YP&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Sg.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return KP(e,i)}getParentElement(e){return iD(e)}query(e,i,l){return QP(e,i,l)}computeStyle(e,i,l){return l||""}animate(e,i,l,m,C,F=[],K){return new l0(l,m)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),rD=(()=>{class t{}return t.NOOP=new XP,t})();const MH=1e3,oD="ng-enter",oC="ng-leave",sC="ng-trigger",aC=".ng-trigger",eA="ng-animating",sD=".ng-animating";function pp(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:aD(parseFloat(n[1]),n[2])}function aD(t,n){return"s"===n?t*MH:t}function lC(t,n,e){return t.hasOwnProperty("duration")?t:function PH(t,n,e){let l,m=0,C="";if("string"==typeof t){const F=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===F)return n.push($P()),{duration:0,delay:0,easing:""};l=aD(parseFloat(F[1]),F[2]);const K=F[3];null!=K&&(m=aD(parseFloat(K),F[4]));const le=F[5];le&&(C=le)}else l=t;if(!e){let F=!1,K=n.length;l<0&&(n.push(function $U(){return new r.\u0275RuntimeError(3100,!1)}()),F=!0),m<0&&(n.push(function GU(){return new r.\u0275RuntimeError(3101,!1)}()),F=!0),F&&n.splice(K,0,$P())}return{duration:l,delay:m,easing:C}}(t,n,e)}function c0(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function tA(t){const n=new Map;return Object.keys(t).forEach(e=>{n.set(e,t[e])}),n}function If(t,n=new Map,e){if(e)for(let[i,l]of e)n.set(i,l);for(let[i,l]of t)n.set(i,l);return n}function iA(t,n,e){return e?n+":"+e+";":""}function rA(t){let n="";for(let e=0;e<t.style.length;e++){const i=t.style.item(e);n+=iA(0,i,t.style.getPropertyValue(i))}for(const e in t.style)t.style.hasOwnProperty(e)&&!e.startsWith("_")&&(n+=iA(0,OH(e),t.style[e]));t.setAttribute("style",n)}function ad(t,n,e){t.style&&(n.forEach((i,l)=>{const m=cD(l);e&&!e.has(l)&&e.set(l,t.style[m]),t.style[m]=i}),XT()&&rA(t))}function Eg(t,n){t.style&&(n.forEach((e,i)=>{const l=cD(i);t.style[l]=""}),XT()&&rA(t))}function u0(t){return Array.isArray(t)?1==t.length?t[0]:gP(t):t}const lD=new RegExp("{{\\s*(.+?)\\s*}}","g");function oA(t){let n=[];if("string"==typeof t){let e;for(;e=lD.exec(t);)n.push(e[1]);lD.lastIndex=0}return n}function h0(t,n,e){const i=t.toString(),l=i.replace(lD,(m,C)=>{let F=n[C];return null==F&&(e.push(function WU(t){return new r.\u0275RuntimeError(3003,!1)}()),F=""),F.toString()});return l==i?t:l}function cC(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const kH=/-+([a-z0-9])/g;function cD(t){return t.replace(kH,(...n)=>n[1].toUpperCase())}function OH(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vc(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw function qU(t){return new r.\u0275RuntimeError(3004,!1)}()}}function sA(t,n){return window.getComputedStyle(t)[n]}const dC="*";function VH(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function jH(t,n,e){if(":"==t[0]){const K=function UH(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function lH(t){return new r.\u0275RuntimeError(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof K)return void n.push(K);t=K}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function aH(t){return new r.\u0275RuntimeError(3015,!1)}()),n;const l=i[1],m=i[2],C=i[3];n.push(aA(l,C));"<"==m[0]&&!(l==dC&&C==dC)&&n.push(aA(C,l))}(i,e,n)):e.push(t),e}const pC=new Set(["true","1"]),fC=new Set(["false","0"]);function aA(t,n){const e=pC.has(t)||fC.has(t),i=pC.has(n)||fC.has(n);return(l,m)=>{let C=t==dC||t==l,F=n==dC||n==m;return!C&&e&&"boolean"==typeof l&&(C=l?pC.has(t):fC.has(t)),!F&&i&&"boolean"==typeof m&&(F=m?pC.has(n):fC.has(n)),C&&F}}const HH=new RegExp("s*:selfs*,?","g");function uD(t,n,e,i){return new $H(t).build(n,e,i)}class $H{constructor(n){this._driver=n}build(n,e,i){const l=new WH(e);return this._resetContextStyleTimingState(l),Vc(this,u0(n),l)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,l=e.depCount=0;const m=[],C=[];return"@"==n.name.charAt(0)&&e.errors.push(function KU(){return new r.\u0275RuntimeError(3006,!1)}()),n.definitions.forEach(F=>{if(this._resetContextStyleTimingState(e),0==F.type){const K=F,le=K.name;le.toString().split(/\s*,\s*/).forEach(xe=>{K.name=xe,m.push(this.visitState(K,e))}),K.name=le}else if(1==F.type){const K=this.visitTransition(F,e);i+=K.queryCount,l+=K.depCount,C.push(K)}else e.errors.push(function QU(){return new r.\u0275RuntimeError(3007,!1)}())}),{type:7,name:n.name,states:m,transitions:C,queryCount:i,depCount:l,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),l=n.options&&n.options.params||null;if(i.containsDynamicStyles){const m=new Set,C=l||{};i.styles.forEach(F=>{F instanceof Map&&F.forEach(K=>{oA(K).forEach(le=>{C.hasOwnProperty(le)||m.add(le)})})}),m.size&&(cC(m.values()),e.errors.push(function XU(t,n){return new r.\u0275RuntimeError(3008,!1)}()))}return{type:0,name:n.name,style:i,options:l?{params:l}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=Vc(this,u0(n.animation),e);return{type:1,matchers:VH(n.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Tg(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(i=>Vc(this,i,e)),options:Tg(n.options)}}visitGroup(n,e){const i=e.currentTime;let l=0;const m=n.steps.map(C=>{e.currentTime=i;const F=Vc(this,C,e);return l=Math.max(l,e.currentTime),F});return e.currentTime=l,{type:3,steps:m,options:Tg(n.options)}}visitAnimate(n,e){const i=function YH(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return hD(lC(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(m=>"{"==m.charAt(0)&&"{"==m.charAt(1))){const m=hD(0,0,"");return m.dynamic=!0,m.strValue=e,m}const l=lC(e,n);return hD(l.duration,l.delay,l.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let l,m=n.styles?n.styles:sd({});if(5==m.type)l=this.visitKeyframes(m,e);else{let C=n.styles,F=!1;if(!C){F=!0;const le={};i.easing&&(le.easing=i.easing),C=sd(le)}e.currentTime+=i.duration+i.delay;const K=this.visitStyle(C,e);K.isEmptyStep=F,l=K}return e.currentAnimateTimings=null,{type:4,timings:i,style:l,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],l=Array.isArray(n.styles)?n.styles:[n.styles];for(let F of l)"string"==typeof F?F===dp?i.push(F):e.errors.push(new r.\u0275RuntimeError(3002,!1)):i.push(tA(F));let m=!1,C=null;return i.forEach(F=>{if(F instanceof Map&&(F.has("easing")&&(C=F.get("easing"),F.delete("easing")),!m))for(let K of F.values())if(K.toString().indexOf("{{")>=0){m=!0;break}}),{type:6,styles:i,easing:C,offset:n.offset,containsDynamicStyles:m,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let l=e.currentTime,m=e.currentTime;i&&m>0&&(m-=i.duration+i.delay),n.styles.forEach(C=>{"string"!=typeof C&&C.forEach((F,K)=>{const le=e.collectedStyles.get(e.currentQuerySelector),xe=le.get(K);let Ae=!0;xe&&(m!=l&&m>=xe.startTime&&l<=xe.endTime&&(e.errors.push(function eH(t,n,e,i,l){return new r.\u0275RuntimeError(3010,!1)}()),Ae=!1),m=xe.startTime),Ae&&le.set(K,{startTime:m,endTime:l}),e.options&&function LH(t,n,e){const i=n.params||{},l=oA(t);l.length&&l.forEach(m=>{i.hasOwnProperty(m)||e.push(function ZU(t){return new r.\u0275RuntimeError(3001,!1)}())})}(F,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function tH(){return new r.\u0275RuntimeError(3011,!1)}()),i;let m=0;const C=[];let F=!1,K=!1,le=0;const xe=n.steps.map(Gt=>{const Tn=this._makeStyleAst(Gt,e);let Xi=null!=Tn.offset?Tn.offset:function qH(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(Tn.styles),Fi=0;return null!=Xi&&(m++,Fi=Tn.offset=Xi),K=K||Fi<0||Fi>1,F=F||Fi<le,le=Fi,C.push(Fi),Tn});K&&e.errors.push(function nH(){return new r.\u0275RuntimeError(3012,!1)}()),F&&e.errors.push(function iH(){return new r.\u0275RuntimeError(3200,!1)}());const Ae=n.steps.length;let et=0;m>0&&m<Ae?e.errors.push(function rH(){return new r.\u0275RuntimeError(3202,!1)}()):0==m&&(et=1/(Ae-1));const Qe=Ae-1,yt=e.currentTime,At=e.currentAnimateTimings,Nt=At.duration;return xe.forEach((Gt,Tn)=>{const Xi=et>0?Tn==Qe?1:et*Tn:C[Tn],Fi=Xi*Nt;e.currentTime=yt+At.delay+Fi,At.duration=Fi,this._validateStyleAst(Gt,e),Gt.offset=Xi,i.styles.push(Gt)}),i}visitReference(n,e){return{type:8,animation:Vc(this,u0(n.animation),e),options:Tg(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:Tg(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:Tg(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,l=n.options||{};e.queryCount++,e.currentQuery=n;const[m,C]=function GH(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(HH,"")),t=t.replace(/@\*/g,aC).replace(/@\w+/g,e=>aC+"-"+e.slice(1)).replace(/:animating/g,sD),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+m:m,Bc(e.collectedStyles,e.currentQuerySelector,new Map);const F=Vc(this,u0(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:m,limit:l.limit||0,optional:!!l.optional,includeSelf:C,animation:F,originalSelector:n.selector,options:Tg(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function oH(){return new r.\u0275RuntimeError(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:lC(n.timings,e.errors,!0);return{type:12,animation:Vc(this,u0(n.animation),e),timings:i,options:null}}}class WH{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Tg(t){return t?(t=c0(t)).params&&(t.params=function ZH(t){return t?c0(t):null}(t.params)):t={},t}function hD(t,n,e){return{duration:t,delay:n,easing:e}}function dD(t,n,e,i,l,m,C=null,F=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:l,delay:m,totalTime:l+m,easing:C,subTimeline:F}}class mC{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const XH=new RegExp(":enter","g"),e6=new RegExp(":leave","g");function pD(t,n,e,i,l,m=new Map,C=new Map,F,K,le=[]){return(new t6).buildKeyframes(t,n,e,i,l,m,C,F,K,le)}class t6{buildKeyframes(n,e,i,l,m,C,F,K,le,xe=[]){le=le||new mC;const Ae=new fD(n,e,le,l,m,xe,[]);Ae.options=K;const et=K.delay?pp(K.delay):0;Ae.currentTimeline.delayNextStep(et),Ae.currentTimeline.setStyles([C],null,Ae.errors,K),Vc(this,i,Ae);const Qe=Ae.timelines.filter(yt=>yt.containsAnimation());if(Qe.length&&F.size){let yt;for(let At=Qe.length-1;At>=0;At--){const Nt=Qe[At];if(Nt.element===e){yt=Nt;break}}yt&&!yt.allowOnlyTimelineStyles()&&yt.setStyles([F],null,Ae.errors,K)}return Qe.length?Qe.map(yt=>yt.buildKeyframes()):[dD(e,[],[],[],0,et,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const l=e.createSubContext(n.options),m=e.currentTimeline.currentTime,C=this._visitSubInstructions(i,l,l.options);m!=C&&e.transformIntoNewTimeline(C)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const l of n){const m=l?.delay;if(m){const C="number"==typeof m?m:pp(h0(m,l?.params??{},e.errors));i.delayNextStep(C)}}}_visitSubInstructions(n,e,i){let m=e.currentTimeline.currentTime;const C=null!=i.duration?pp(i.duration):null,F=null!=i.delay?pp(i.delay):null;return 0!==C&&n.forEach(K=>{const le=e.appendInstructionToTimeline(K,C,F);m=Math.max(m,le.duration+le.delay)}),m}visitReference(n,e){e.updateOptions(n.options,!0),Vc(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let l=e;const m=n.options;if(m&&(m.params||m.delay)&&(l=e.createSubContext(m),l.transformIntoNewTimeline(),null!=m.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=gC);const C=pp(m.delay);l.delayNextStep(C)}n.steps.length&&(n.steps.forEach(C=>Vc(this,C,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>i&&l.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let l=e.currentTimeline.currentTime;const m=n.options&&n.options.delay?pp(n.options.delay):0;n.steps.forEach(C=>{const F=e.createSubContext(n.options);m&&F.delayNextStep(m),Vc(this,C,F),l=Math.max(l,F.currentTimeline.currentTime),i.push(F.currentTimeline)}),i.forEach(C=>e.currentTimeline.mergeTimelineCollectedStyles(C)),e.transformIntoNewTimeline(l),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return lC(e.params?h0(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),l=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),l.snapshotCurrentStyles());const m=n.style;5==m.type?this.visitKeyframes(m,e):(e.incrementTime(i.duration),this.visitStyle(m,e),l.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,l=e.currentAnimateTimings;!l&&i.hasCurrentStyleProperties()&&i.forwardFrame();const m=l&&l.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(m):i.setStyles(n.styles,m,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,l=e.currentTimeline.duration,m=i.duration,F=e.createSubContext().currentTimeline;F.easing=i.easing,n.styles.forEach(K=>{F.forwardTime((K.offset||0)*m),F.setStyles(K.styles,K.easing,e.errors,e.options),F.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(F),e.transformIntoNewTimeline(l+m),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,l=n.options||{},m=l.delay?pp(l.delay):0;m&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gC);let C=i;const F=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!l.optional,e.errors);e.currentQueryTotal=F.length;let K=null;F.forEach((le,xe)=>{e.currentQueryIndex=xe;const Ae=e.createSubContext(n.options,le);m&&Ae.delayNextStep(m),le===e.element&&(K=Ae.currentTimeline),Vc(this,n.animation,Ae),Ae.currentTimeline.applyStylesToKeyframe(),C=Math.max(C,Ae.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(C),K&&(e.currentTimeline.mergeTimelineCollectedStyles(K),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,l=e.currentTimeline,m=n.timings,C=Math.abs(m.duration),F=C*(e.currentQueryTotal-1);let K=C*e.currentQueryIndex;switch(m.duration<0?"reverse":m.easing){case"reverse":K=F-K;break;case"full":K=i.currentStaggerTime}const xe=e.currentTimeline;K&&xe.delayNextStep(K);const Ae=xe.currentTime;Vc(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=l.currentTime-Ae+(l.startTime-i.currentTimeline.startTime)}}const gC={};class fD{constructor(n,e,i,l,m,C,F,K){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=l,this._leaveClassName=m,this.errors=C,this.timelines=F,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=K||new _C(this._driver,e,0),F.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let l=this.options;null!=i.duration&&(l.duration=pp(i.duration)),null!=i.delay&&(l.delay=pp(i.delay));const m=i.params;if(m){let C=l.params;C||(C=this.options.params={}),Object.keys(m).forEach(F=>{(!e||!C.hasOwnProperty(F))&&(C[F]=h0(m[F],C,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(l=>{i[l]=e[l]})}}return n}createSubContext(n=null,e,i){const l=e||this.element,m=new fD(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,i||0));return m.previousNode=this.previousNode,m.currentAnimateTimings=this.currentAnimateTimings,m.options=this._copyOptions(),m.updateOptions(n),m.currentQueryIndex=this.currentQueryIndex,m.currentQueryTotal=this.currentQueryTotal,m.parentContext=this,this.subContextCount++,m}transformIntoNewTimeline(n){return this.previousNode=gC,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const l={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},m=new n6(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,l,n.stretchStartingKeyframe);return this.timelines.push(m),l}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,l,m,C){let F=[];if(l&&F.push(this.element),n.length>0){n=(n=n.replace(XH,"."+this._enterClassName)).replace(e6,"."+this._leaveClassName);let le=this._driver.query(this.element,n,1!=i);0!==i&&(le=i<0?le.slice(le.length+i,le.length):le.slice(0,i)),F.push(...le)}return!m&&0==F.length&&C.push(function sH(t){return new r.\u0275RuntimeError(3014,!1)}()),F}}class _C{constructor(n,e,i,l){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=l,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new _C(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||dp),this._currentKeyframe.set(e,dp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,l){e&&this._previousKeyframe.set("easing",e);const m=l&&l.params||{},C=function i6(t,n){const e=new Map;let i;return t.forEach(l=>{if("*"===l){i=i||n.keys();for(let m of i)e.set(m,dp)}else If(l,e)}),e}(n,this._globalTimelineStyles);for(let[F,K]of C){const le=h0(K,m,i);this._pendingStyles.set(F,le),this._localTimelineStyles.has(F)||this._backFill.set(F,this._globalTimelineStyles.get(F)??dp),this._updateStyle(F,le)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const l=this._styleSummary.get(i);(!l||e.time>l.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((F,K)=>{const le=If(F,new Map,this._backFill);le.forEach((xe,Ae)=>{xe===WT?n.add(Ae):xe===dp&&e.add(Ae)}),i||le.set("offset",K/this.duration),l.push(le)});const m=n.size?cC(n.values()):[],C=e.size?cC(e.values()):[];if(i){const F=l[0],K=new Map(F);F.set("offset",0),K.set("offset",1),l=[F,K]}return dD(this.element,l,m,C,this.duration,this.startTime,this.easing,!1)}}class n6 extends _C{constructor(n,e,i,l,m,C,F=!1){super(n,e,C.delay),this.keyframes=i,this.preStyleProps=l,this.postStyleProps=m,this._stretchStartingKeyframe=F,this.timings={duration:C.duration,delay:C.delay,easing:C.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:l}=this.timings;if(this._stretchStartingKeyframe&&e){const m=[],C=i+e,F=e/C,K=If(n[0]);K.set("offset",0),m.push(K);const le=If(n[0]);le.set("offset",uA(F)),m.push(le);const xe=n.length-1;for(let Ae=1;Ae<=xe;Ae++){let et=If(n[Ae]);const Qe=et.get("offset");et.set("offset",uA((e+Qe*i)/C)),m.push(et)}i=C,e=0,l="",n=m}return dD(this.element,n,this.preStyleProps,this.postStyleProps,i,e,l,!0)}}function uA(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class mD{}const r6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class o6 extends mD{normalizePropertyName(n,e){return cD(n)}normalizeStyleValue(n,e,i,l){let m="";const C=i.toString().trim();if(r6.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)m="px";else{const F=i.match(/^[+-]?[\d\.]+([a-z]*)$/);F&&0==F[1].length&&l.push(function YU(t,n){return new r.\u0275RuntimeError(3005,!1)}())}return C+m}}function hA(t,n,e,i,l,m,C,F,K,le,xe,Ae,et){return{type:0,element:t,triggerName:n,isRemovalTransition:l,fromState:e,fromStyles:m,toState:i,toStyles:C,timelines:F,queriedElements:K,preStyleProps:le,postStyleProps:xe,totalTime:Ae,errors:et}}const gD={};class dA{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,l){return function s6(t,n,e,i,l){return t.some(m=>m(n,e,i,l))}(this.ast.matchers,n,e,i,l)}buildStyles(n,e,i){let l=this._stateStyles.get("*");return void 0!==n&&(l=this._stateStyles.get(n?.toString())||l),l?l.buildStyles(e,i):new Map}build(n,e,i,l,m,C,F,K,le,xe){const Ae=[],et=this.ast.options&&this.ast.options.params||gD,yt=this.buildStyles(i,F&&F.params||gD,Ae),At=K&&K.params||gD,Nt=this.buildStyles(l,At,Ae),Gt=new Set,Tn=new Map,Xi=new Map,Fi="void"===l,Cr={params:a6(At,et),delay:this.ast.options?.delay},ui=xe?[]:pD(n,e,this.ast.animation,m,C,yt,Nt,Cr,le,Ae);let pr=0;if(ui.forEach(ja=>{pr=Math.max(ja.duration+ja.delay,pr)}),Ae.length)return hA(e,this._triggerName,i,l,Fi,yt,Nt,[],[],Tn,Xi,pr,Ae);ui.forEach(ja=>{const jc=ja.element,qy=Bc(Tn,jc,new Set);ja.preStyleProps.forEach(dh=>qy.add(dh));const fp=Bc(Xi,jc,new Set);ja.postStyleProps.forEach(dh=>fp.add(dh)),jc!==e&&Gt.add(jc)});const Uo=cC(Gt.values());return hA(e,this._triggerName,i,l,Fi,yt,Nt,ui,Uo,Tn,Xi,pr)}}function a6(t,n){const e=c0(n);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(e[i]=t[i]);return e}class l6{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,l=c0(this.defaultParams);return Object.keys(n).forEach(m=>{const C=n[m];null!==C&&(l[m]=C)}),this.styles.styles.forEach(m=>{"string"!=typeof m&&m.forEach((C,F)=>{C&&(C=h0(C,l,e));const K=this.normalizer.normalizePropertyName(F,e);C=this.normalizer.normalizeStyleValue(F,K,C,e),i.set(F,C)})}),i}}class u6{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(l=>{this.states.set(l.name,new l6(l.style,l.options&&l.options.params||{},i))}),pA(this.states,"true","1"),pA(this.states,"false","0"),e.transitions.forEach(l=>{this.transitionFactories.push(new dA(n,l,this.states))}),this.fallbackTransition=function h6(t,n,e){return new dA(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(C,F)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,l){return this.transitionFactories.find(C=>C.match(n,e,i,l))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function pA(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const d6=new mC;class p6{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],l=[],m=uD(this._driver,e,i,l);if(i.length)throw function pH(t){return new r.\u0275RuntimeError(3503,!1)}();this._animations.set(n,m)}_buildPlayer(n,e,i){const l=n.element,m=GP(0,this._normalizer,0,n.keyframes,e,i);return this._driver.animate(l,m,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const l=[],m=this._animations.get(n);let C;const F=new Map;if(m?(C=pD(this._driver,e,m,oD,oC,new Map,new Map,i,d6,l),C.forEach(xe=>{const Ae=Bc(F,xe.element,new Map);xe.postStyleProps.forEach(et=>Ae.set(et,null))})):(l.push(function fH(){return new r.\u0275RuntimeError(3300,!1)}()),C=[]),l.length)throw function mH(t){return new r.\u0275RuntimeError(3504,!1)}();F.forEach((xe,Ae)=>{xe.forEach((et,Qe)=>{xe.set(Qe,this._driver.computeStyle(Ae,Qe,dp))})});const le=Mf(C.map(xe=>{const Ae=F.get(xe.element);return this._buildPlayer(xe,new Map,Ae)}));return this._playersById.set(n,le),le.onDestroy(()=>this.destroy(n)),this.players.push(le),le}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function gH(t){return new r.\u0275RuntimeError(3301,!1)}();return e}listen(n,e,i,l){const m=tD(e,"","","");return JT(this._getPlayer(n),i,m,l),()=>{}}command(n,e,i,l){if("register"==i)return void this.register(n,l[0]);if("create"==i)return void this.create(n,e,l[0]||{});const m=this._getPlayer(n);switch(i){case"play":m.play();break;case"pause":m.pause();break;case"reset":m.reset();break;case"restart":m.restart();break;case"finish":m.finish();break;case"init":m.init();break;case"setPosition":m.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(n)}}}const fA="ng-animate-queued",_D="ng-animate-disabled",y6=[],mA={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},v6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Iu="__ng_removed";class yD{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function C6(t){return t??null}(i?n.value:n),i){const m=c0(n);delete m.value,this.options=m}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(l=>{null==i[l]&&(i[l]=e[l])})}}}const d0="void",vD=new yD(d0);class b6{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Pu(e,this._hostClassName)}listen(n,e,i,l){if(!this._triggers.has(e))throw function _H(t,n){return new r.\u0275RuntimeError(3302,!1)}();if(null==i||0==i.length)throw function yH(t){return new r.\u0275RuntimeError(3303,!1)}();if(!function S6(t){return"start"==t||"done"==t}(i))throw function vH(t,n){return new r.\u0275RuntimeError(3400,!1)}();const m=Bc(this._elementListeners,n,[]),C={name:e,phase:i,callback:l};m.push(C);const F=Bc(this._engine.statesByElement,n,new Map);return F.has(e)||(Pu(n,sC),Pu(n,sC+"-"+e),F.set(e,vD)),()=>{this._engine.afterFlush(()=>{const K=m.indexOf(C);K>=0&&m.splice(K,1),this._triggers.has(e)||F.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function bH(t){return new r.\u0275RuntimeError(3401,!1)}();return e}trigger(n,e,i,l=!0){const m=this._getTrigger(e),C=new bD(this.id,e,n);let F=this._engine.statesByElement.get(n);F||(Pu(n,sC),Pu(n,sC+"-"+e),this._engine.statesByElement.set(n,F=new Map));let K=F.get(e);const le=new yD(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&K&&le.absorbOptions(K.options),F.set(e,le),K||(K=vD),le.value!==d0&&K.value===le.value){if(!function D6(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let l=0;l<e.length;l++){const m=e[l];if(!n.hasOwnProperty(m)||t[m]!==n[m])return!1}return!0}(K.params,le.params)){const At=[],Nt=m.matchStyles(K.value,K.params,At),Gt=m.matchStyles(le.value,le.params,At);At.length?this._engine.reportError(At):this._engine.afterFlush(()=>{Eg(n,Nt),ad(n,Gt)})}return}const et=Bc(this._engine.playersByElement,n,[]);et.forEach(At=>{At.namespaceId==this.id&&At.triggerName==e&&At.queued&&At.destroy()});let Qe=m.matchTransition(K.value,le.value,n,le.params),yt=!1;if(!Qe){if(!l)return;Qe=m.fallbackTransition,yt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:Qe,fromState:K,toState:le,player:C,isFallbackTransition:yt}),yt||(Pu(n,fA),C.onStart(()=>{Wy(n,fA)})),C.onDone(()=>{let At=this.players.indexOf(C);At>=0&&this.players.splice(At,1);const Nt=this._engine.playersByElement.get(n);if(Nt){let Gt=Nt.indexOf(C);Gt>=0&&Nt.splice(Gt,1)}}),this.players.push(C),et.push(C),C}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(l=>l.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,aC,!0);i.forEach(l=>{if(l[Iu])return;const m=this._engine.fetchNamespacesByElement(l);m.size?m.forEach(C=>C.triggerLeaveAnimation(l,e,!1,!0)):this.clearElementCache(l)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(l=>this.clearElementCache(l)))}triggerLeaveAnimation(n,e,i,l){const m=this._engine.statesByElement.get(n),C=new Map;if(m){const F=[];if(m.forEach((K,le)=>{if(C.set(le,K.value),this._triggers.has(le)){const xe=this.trigger(n,le,d0,l);xe&&F.push(xe)}}),F.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,C),i&&Mf(F).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const l=new Set;e.forEach(m=>{const C=m.name;if(l.has(C))return;l.add(C);const K=this._triggers.get(C).fallbackTransition,le=i.get(C)||vD,xe=new yD(d0),Ae=new bD(this.id,C,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:C,transition:K,fromState:le,toState:xe,player:Ae,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let l=!1;if(i.totalAnimations){const m=i.players.length?i.playersByQueriedElement.get(n):[];if(m&&m.length)l=!0;else{let C=n;for(;C=C.parentNode;)if(i.statesByElement.get(C)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(n),l)i.markElementAsRemoved(this.id,n,!1,e);else{const m=n[Iu];(!m||m===mA)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){Pu(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const l=i.player;if(l.destroyed)return;const m=i.element,C=this._elementListeners.get(m);C&&C.forEach(F=>{if(F.name==i.triggerName){const K=tD(m,i.triggerName,i.fromState.value,i.toState.value);K._data=n,JT(i.player,F.phase,K,F.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):e.push(i)}),this._queue=[],e.sort((i,l)=>{const m=i.transition.ast.depCount,C=l.transition.ast.depCount;return 0==m||0==C?m-C:this._engine.driver.containsElement(i.element,l.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let e=!1;return this._elementListeners.has(n)&&(e=!0),e=!!this._queue.find(i=>i.element===n)||e,e}}class x6{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(l,m)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new b6(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,l=this.namespacesByHostElement;if(i.length-1>=0){let C=!1,F=this.driver.getParentElement(e);for(;F;){const K=l.get(F);if(K){const le=i.indexOf(K);i.splice(le+1,0,n),C=!0;break}F=this.driver.getParentElement(F)}C||i.unshift(n)}else i.push(n);return l.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let l=this._namespaceLookup[n];l&&l.register(e,i)&&this.totalAnimations++}destroy(n,e){if(!n)return;const i=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[n];const l=this._namespaceList.indexOf(i);l>=0&&this._namespaceList.splice(l,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let l of i.values())if(l.namespaceId){const m=this._fetchNamespace(l.namespaceId);m&&e.add(m)}return e}trigger(n,e,i,l){if(yC(e)){const m=this._fetchNamespace(n);if(m)return m.trigger(e,i,l),!0}return!1}insertNode(n,e,i,l){if(!yC(e))return;const m=e[Iu];if(m&&m.setForRemoval){m.setForRemoval=!1,m.setForMove=!0;const C=this.collectedLeaveElements.indexOf(e);C>=0&&this.collectedLeaveElements.splice(C,1)}if(n){const C=this._fetchNamespace(n);C&&C.insertNode(e,i)}l&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Pu(n,_D)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Wy(n,_D))}removeNode(n,e,i,l){if(yC(e)){const m=n?this._fetchNamespace(n):null;if(m?m.removeNode(e,l):this.markElementAsRemoved(n,e,!1,l),i){const C=this.namespacesByHostElement.get(e);C&&C.id!==n&&C.removeNode(e,l)}}else this._onRemovalComplete(e,l)}markElementAsRemoved(n,e,i,l,m){this.collectedLeaveElements.push(e),e[Iu]={namespaceId:n,setForRemoval:l,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:m}}listen(n,e,i,l,m){return yC(e)?this._fetchNamespace(n).listen(e,i,l,m):()=>{}}_buildInstruction(n,e,i,l,m){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,l,n.fromState.options,n.toState.options,e,m)}destroyInnerAnimations(n){let e=this.driver.query(n,aC,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,sD,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Mf(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Iu];if(e&&e.setForRemoval){if(n[Iu]=mA,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(_D)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,l)=>this._balanceNamespaceList(i,l)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Pu(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let l=0;l<i.length;l++)i[l]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Mf(e).onDone(()=>{i.forEach(l=>l())}):i.forEach(l=>l())}}reportError(n){throw function xH(t){return new r.\u0275RuntimeError(3402,!1)}()}_flushAnimations(n,e){const i=new mC,l=[],m=new Map,C=[],F=new Map,K=new Map,le=new Map,xe=new Set;this.disabledNodes.forEach(En=>{xe.add(En);const Wn=this.driver.query(En,".ng-animate-queued",!0);for(let ai=0;ai<Wn.length;ai++)xe.add(Wn[ai])});const Ae=this.bodyNode,et=Array.from(this.statesByElement.keys()),Qe=yA(et,this.collectedEnterElements),yt=new Map;let At=0;Qe.forEach((En,Wn)=>{const ai=oD+At++;yt.set(Wn,ai),En.forEach(cr=>Pu(cr,ai))});const Nt=[],Gt=new Set,Tn=new Set;for(let En=0;En<this.collectedLeaveElements.length;En++){const Wn=this.collectedLeaveElements[En],ai=Wn[Iu];ai&&ai.setForRemoval&&(Nt.push(Wn),Gt.add(Wn),ai.hasAnimation?this.driver.query(Wn,".ng-star-inserted",!0).forEach(cr=>Gt.add(cr)):Tn.add(Wn))}const Xi=new Map,Fi=yA(et,Array.from(Gt));Fi.forEach((En,Wn)=>{const ai=oC+At++;Xi.set(Wn,ai),En.forEach(cr=>Pu(cr,ai))}),n.push(()=>{Qe.forEach((En,Wn)=>{const ai=yt.get(Wn);En.forEach(cr=>Wy(cr,ai))}),Fi.forEach((En,Wn)=>{const ai=Xi.get(Wn);En.forEach(cr=>Wy(cr,ai))}),Nt.forEach(En=>{this.processLeaveNode(En)})});const Cr=[],ui=[];for(let En=this._namespaceList.length-1;En>=0;En--)this._namespaceList[En].drainQueuedTransitions(e).forEach(ai=>{const cr=ai.player,Rs=ai.element;if(Cr.push(cr),this.collectedEnterElements.length){const Ss=Rs[Iu];if(Ss&&Ss.setForMove){if(Ss.previousTriggersValues&&Ss.previousTriggersValues.has(ai.triggerName)){const vo=Ss.previousTriggersValues.get(ai.triggerName),Gi=this.statesByElement.get(ai.element);if(Gi&&Gi.has(ai.triggerName)){const Ua=Gi.get(ai.triggerName);Ua.value=vo,Gi.set(ai.triggerName,Ua)}}return void cr.destroy()}}const uc=!Ae||!this.driver.containsElement(Ae,Rs),Xs=Xi.get(Rs),ph=yt.get(Rs),Gr=this._buildInstruction(ai,i,ph,Xs,uc);if(Gr.errors&&Gr.errors.length)return void ui.push(Gr);if(uc)return cr.onStart(()=>Eg(Rs,Gr.fromStyles)),cr.onDestroy(()=>ad(Rs,Gr.toStyles)),void l.push(cr);if(ai.isFallbackTransition)return cr.onStart(()=>Eg(Rs,Gr.fromStyles)),cr.onDestroy(()=>ad(Rs,Gr.toStyles)),void l.push(cr);const p0=[];Gr.timelines.forEach(Ss=>{Ss.stretchStartingKeyframe=!0,this.disabledNodes.has(Ss.element)||p0.push(Ss)}),Gr.timelines=p0,i.append(Rs,Gr.timelines),C.push({instruction:Gr,player:cr,element:Rs}),Gr.queriedElements.forEach(Ss=>Bc(F,Ss,[]).push(cr)),Gr.preStyleProps.forEach((Ss,vo)=>{if(Ss.size){let Gi=K.get(vo);Gi||K.set(vo,Gi=new Set),Ss.forEach((Ua,Pf)=>Gi.add(Pf))}}),Gr.postStyleProps.forEach((Ss,vo)=>{let Gi=le.get(vo);Gi||le.set(vo,Gi=new Set),Ss.forEach((Ua,Pf)=>Gi.add(Pf))})});if(ui.length){const En=[];ui.forEach(Wn=>{En.push(function wH(t,n){return new r.\u0275RuntimeError(3505,!1)}())}),Cr.forEach(Wn=>Wn.destroy()),this.reportError(En)}const pr=new Map,Uo=new Map;C.forEach(En=>{const Wn=En.element;i.has(Wn)&&(Uo.set(Wn,Wn),this._beforeAnimationBuild(En.player.namespaceId,En.instruction,pr))}),l.forEach(En=>{const Wn=En.element;this._getPreviousPlayers(Wn,!1,En.namespaceId,En.triggerName,null).forEach(cr=>{Bc(pr,Wn,[]).push(cr),cr.destroy()})});const ja=Nt.filter(En=>bA(En,K,le)),jc=new Map;_A(jc,this.driver,Tn,le,dp).forEach(En=>{bA(En,K,le)&&ja.push(En)});const fp=new Map;Qe.forEach((En,Wn)=>{_A(fp,this.driver,new Set(En),K,WT)}),ja.forEach(En=>{const Wn=jc.get(En),ai=fp.get(En);jc.set(En,new Map([...Array.from(Wn?.entries()??[]),...Array.from(ai?.entries()??[])]))});const dh=[],xC=[],Yy={};C.forEach(En=>{const{element:Wn,player:ai,instruction:cr}=En;if(i.has(Wn)){if(xe.has(Wn))return ai.onDestroy(()=>ad(Wn,cr.toStyles)),ai.disabled=!0,ai.overrideTotalTime(cr.totalTime),void l.push(ai);let Rs=Yy;if(Uo.size>1){let Xs=Wn;const ph=[];for(;Xs=Xs.parentNode;){const Gr=Uo.get(Xs);if(Gr){Rs=Gr;break}ph.push(Xs)}ph.forEach(Gr=>Uo.set(Gr,Rs))}const uc=this._buildAnimation(ai.namespaceId,cr,pr,m,fp,jc);if(ai.setRealPlayer(uc),Rs===Yy)dh.push(ai);else{const Xs=this.playersByElement.get(Rs);Xs&&Xs.length&&(ai.parentPlayer=Mf(Xs)),l.push(ai)}}else Eg(Wn,cr.fromStyles),ai.onDestroy(()=>ad(Wn,cr.toStyles)),xC.push(ai),xe.has(Wn)&&l.push(ai)}),xC.forEach(En=>{const Wn=m.get(En.element);if(Wn&&Wn.length){const ai=Mf(Wn);En.setRealPlayer(ai)}}),l.forEach(En=>{En.parentPlayer?En.syncPlayerEvents(En.parentPlayer):En.destroy()});for(let En=0;En<Nt.length;En++){const Wn=Nt[En],ai=Wn[Iu];if(Wy(Wn,oC),ai&&ai.hasAnimation)continue;let cr=[];if(F.size){let uc=F.get(Wn);uc&&uc.length&&cr.push(...uc);let Xs=this.driver.query(Wn,sD,!0);for(let ph=0;ph<Xs.length;ph++){let Gr=F.get(Xs[ph]);Gr&&Gr.length&&cr.push(...Gr)}}const Rs=cr.filter(uc=>!uc.destroyed);Rs.length?E6(this,Wn,Rs):this.processLeaveNode(Wn)}return Nt.length=0,dh.forEach(En=>{this.players.push(En),En.onDone(()=>{En.destroy();const Wn=this.players.indexOf(En);this.players.splice(Wn,1)}),En.play()}),dh}elementContainsData(n,e){let i=!1;const l=e[Iu];return l&&l.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(n).elementContainsData(e)||i}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,l,m){let C=[];if(e){const F=this.playersByQueriedElement.get(n);F&&(C=F)}else{const F=this.playersByElement.get(n);if(F){const K=!m||m==d0;F.forEach(le=>{le.queued||!K&&le.triggerName!=l||C.push(le)})}}return(i||l)&&(C=C.filter(F=>!(i&&i!=F.namespaceId||l&&l!=F.triggerName))),C}_beforeAnimationBuild(n,e,i){const m=e.element,C=e.isRemovalTransition?void 0:n,F=e.isRemovalTransition?void 0:e.triggerName;for(const K of e.timelines){const le=K.element,xe=le!==m,Ae=Bc(i,le,[]);this._getPreviousPlayers(le,xe,C,F,e.toState).forEach(Qe=>{const yt=Qe.getRealPlayer();yt.beforeDestroy&&yt.beforeDestroy(),Qe.destroy(),Ae.push(Qe)})}Eg(m,e.fromStyles)}_buildAnimation(n,e,i,l,m,C){const F=e.triggerName,K=e.element,le=[],xe=new Set,Ae=new Set,et=e.timelines.map(yt=>{const At=yt.element;xe.add(At);const Nt=At[Iu];if(Nt&&Nt.removedBeforeQueried)return new l0(yt.duration,yt.delay);const Gt=At!==K,Tn=function T6(t){const n=[];return vA(t,n),n}((i.get(At)||y6).map(pr=>pr.getRealPlayer())).filter(pr=>!!pr.element&&pr.element===At),Xi=m.get(At),Fi=C.get(At),Cr=GP(0,this._normalizer,0,yt.keyframes,Xi,Fi),ui=this._buildPlayer(yt,Cr,Tn);if(yt.subTimeline&&l&&Ae.add(At),Gt){const pr=new bD(n,F,At);pr.setRealPlayer(ui),le.push(pr)}return ui});le.forEach(yt=>{Bc(this.playersByQueriedElement,yt.element,[]).push(yt),yt.onDone(()=>function w6(t,n,e){let i=t.get(n);if(i){if(i.length){const l=i.indexOf(e);i.splice(l,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,yt.element,yt))}),xe.forEach(yt=>Pu(yt,eA));const Qe=Mf(et);return Qe.onDestroy(()=>{xe.forEach(yt=>Wy(yt,eA)),ad(K,e.toStyles)}),Ae.forEach(yt=>{Bc(l,yt,[]).push(Qe)}),Qe}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new l0(n.duration,n.delay)}}class bD{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new l0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(l=>JT(n,i,void 0,l))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Bc(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function yC(t){return t&&1===t.nodeType}function gA(t,n){const e=t.style.display;return t.style.display=n??"none",e}function _A(t,n,e,i,l){const m=[];e.forEach(K=>m.push(gA(K)));const C=[];i.forEach((K,le)=>{const xe=new Map;K.forEach(Ae=>{const et=n.computeStyle(le,Ae,l);xe.set(Ae,et),(!et||0==et.length)&&(le[Iu]=v6,C.push(le))}),t.set(le,xe)});let F=0;return e.forEach(K=>gA(K,m[F++])),C}function yA(t,n){const e=new Map;if(t.forEach(F=>e.set(F,[])),0==n.length)return e;const i=1,l=new Set(n),m=new Map;function C(F){if(!F)return i;let K=m.get(F);if(K)return K;const le=F.parentNode;return K=e.has(le)?le:l.has(le)?i:C(le),m.set(F,K),K}return n.forEach(F=>{const K=C(F);K!==i&&e.get(K).push(F)}),e}function Pu(t,n){t.classList?.add(n)}function Wy(t,n){t.classList?.remove(n)}function E6(t,n,e){Mf(e).onDone(()=>t.processLeaveNode(n))}function vA(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof vP?vA(i.players,n):n.push(i)}}function bA(t,n,e){const i=e.get(t);if(!i)return!1;let l=n.get(t);return l?i.forEach(m=>l.add(m)):n.set(t,i),e.delete(t),!0}class vC{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(l,m)=>{},this._transitionEngine=new x6(n,e,i),this._timelineEngine=new p6(n,e,i),this._transitionEngine.onRemovalComplete=(l,m)=>this.onRemovalComplete(l,m)}registerTrigger(n,e,i,l,m){const C=n+"-"+l;let F=this._triggerCache[C];if(!F){const K=[],le=[],xe=uD(this._driver,m,K,le);if(K.length)throw function hH(t,n){return new r.\u0275RuntimeError(3404,!1)}();F=function c6(t,n,e){return new u6(t,n,e)}(l,xe,this._normalizer),this._triggerCache[C]=F}this._transitionEngine.registerTrigger(e,l,F)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,l){this._transitionEngine.insertNode(n,e,i,l)}onRemove(n,e,i,l){this._transitionEngine.removeNode(n,e,l||!1,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,l){if("@"==i.charAt(0)){const[m,C]=ZP(i);this._timelineEngine.command(m,e,C,l)}else this._transitionEngine.trigger(n,e,i,l)}listen(n,e,i,l,m){if("@"==i.charAt(0)){const[C,F]=ZP(i);return this._timelineEngine.listen(C,e,F,m)}return this._transitionEngine.listen(n,e,i,l,m)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let I6=(()=>{class t{constructor(e,i,l){this._element=e,this._startStyles=i,this._endStyles=l,this._state=0;let m=t.initialStylesByElement.get(e);m||t.initialStylesByElement.set(e,m=new Map),this._initialStyles=m}start(){this._state<1&&(this._startStyles&&ad(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ad(this._element,this._initialStyles),this._endStyles&&(ad(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Eg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Eg(this._element,this._endStyles),this._endStyles=null),ad(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function xD(t){let n=null;return t.forEach((e,i)=>{(function P6(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class xA{constructor(n,e,i,l){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,l)=>{"offset"!==l&&n.set(l,this._finished?i:sA(this.element,l))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class A6{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return KP(n,e)}getParentElement(n){return iD(n)}query(n,e,i){return QP(n,e,i)}computeStyle(n,e,i){return window.getComputedStyle(n)[e]}animate(n,e,i,l,m,C=[]){const K={duration:i,delay:l,fill:0==l?"both":"forwards"};m&&(K.easing=m);const le=new Map,xe=C.filter(Qe=>Qe instanceof xA);(function RH(t,n){return 0===t||0===n})(i,l)&&xe.forEach(Qe=>{Qe.currentSnapshot.forEach((yt,At)=>le.set(At,yt))});let Ae=function AH(t){return t.length?t[0]instanceof Map?t:t.map(n=>tA(n)):[]}(e).map(Qe=>If(Qe));Ae=function FH(t,n,e){if(e.size&&n.length){let i=n[0],l=[];if(e.forEach((m,C)=>{i.has(C)||l.push(C),i.set(C,m)}),l.length)for(let m=1;m<n.length;m++){let C=n[m];l.forEach(F=>C.set(F,sA(t,F)))}}return n}(n,Ae,le);const et=function M6(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=xD(n[0]),n.length>1&&(i=xD(n[n.length-1]))):n instanceof Map&&(e=xD(n)),e||i?new I6(t,e,i):null}(n,Ae);return new xA(n,Ae,K,et)}}let L6=(()=>{class t extends fP{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:r.ViewEncapsulation.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(e)?gP(e):e;return wA(this._renderer,null,i,"register",[l]),new k6(i,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(r.RendererFactory2),r.\u0275\u0275inject(pe))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class k6 extends Yj{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new O6(this._id,n,e||{},this._renderer)}}class O6{constructor(n,e,i,l){this.id=n,this.element=e,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return wA(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function wA(t,n,e,i,l){return t.setProperty(n,`@@${e}:${i}`,l)}const CA="@.disabled";let R6=(()=>{class t{constructor(e,i,l){this.delegate=e,this.engine=i,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(m,C)=>{const F=C?.parentNode(m);F&&C.removeChild(F,m)}}createRenderer(e,i){const m=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let xe=this._rendererCache.get(m);return xe||(xe=new SA("",m,this.engine,()=>this._rendererCache.delete(m)),this._rendererCache.set(m,xe)),xe}const C=i.id,F=i.id+"-"+this._currentId;this._currentId++,this.engine.register(F,e);const K=xe=>{Array.isArray(xe)?xe.forEach(K):this.engine.registerTrigger(C,F,e,xe.name,xe)};return i.data.animation.forEach(K),new F6(this,F,m,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,l){e>=0&&e<this._microtaskId?this._zone.run(()=>i(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(m=>{const[C,F]=m;C(F)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(r.RendererFactory2),r.\u0275\u0275inject(vC),r.\u0275\u0275inject(r.NgZone))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class SA{constructor(n,e,i,l){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=l,this.destroyNode=this.delegate.destroyNode?m=>e.destroyNode(m):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,l=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,l)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,l){this.delegate.setAttribute(n,e,i,l)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,l){this.delegate.setStyle(n,e,i,l)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==CA?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class F6 extends SA{constructor(n,e,i,l,m){super(e,i,l,m),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==CA?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const l=function N6(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let m=e.slice(1),C="";return"@"!=m.charAt(0)&&([m,C]=function z6(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(m)),this.engine.listen(this.namespaceId,l,m,C,F=>{this.factory.scheduleListenerCallback(F._data||-1,i,F)})}return this.delegate.listen(n,e,i)}}let B6=(()=>{class t extends vC{constructor(e,i,l,m){super(e.body,i,l)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(pe),r.\u0275\u0275inject(rD),r.\u0275\u0275inject(mD),r.\u0275\u0275inject(r.ApplicationRef))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const EA=[{provide:fP,useClass:L6},{provide:mD,useFactory:function V6(){return new o6}},{provide:vC,useClass:B6},{provide:r.RendererFactory2,useFactory:function j6(t,n,e){return new R6(t,n,e)},deps:[wt,vC,r.NgZone]}],wD=[{provide:rD,useFactory:()=>new A6},{provide:r.ANIMATION_MODULE_TYPE,useValue:"BrowserAnimations"},...EA],TA=[{provide:rD,useClass:XP},{provide:r.ANIMATION_MODULE_TYPE,useValue:"NoopAnimations"},...EA];let U6=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?TA:wD}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({providers:wD,imports:[nu]}),t})(),H6=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[HP,U6,m_.forChild(KT),nu,sc,tp]})),t})(),$6=(()=>{class t{}return A(t,"\u0275fac",function(e){return new(e||t)}),A(t,"\u0275mod",r.\u0275\u0275defineNgModule({type:t,bootstrap:[FU]})),A(t,"\u0275inj",r.\u0275\u0275defineInjector({imports:[nu,m_.forRoot(NU),HP,H6]})),t})();(0,r.enableProdMode)(),tu().bootstrapModule($6).catch(t=>console.error(t))},583:(fi,Ot,Me)=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});var r=Me(62),V=Me(62),q=function(){function y(Ve,pe){this.elementRef=Ve,this.zone=pe}return y.prototype.ngOnInit=function(){this.useBr&&hljs.configure({useBR:!0})},y.prototype.ngAfterViewChecked=function(){if(this.elementRef.nativeElement.innerHTML&&this.elementRef.nativeElement.querySelector){var pe=this.elementRef.nativeElement.querySelectorAll(this.highlightSelector||"code");this.zone.runOutsideAngular(function(){for(var lt=0,Ce=pe;lt<Ce.length;lt++)hljs.highlightBlock(Ce[lt])})}},y.\u0275fac=function(pe){return new(pe||y)(V.\u0275\u0275directiveInject(V.ElementRef),V.\u0275\u0275directiveInject(V.NgZone))},y.\u0275dir=V.\u0275\u0275defineDirective({type:y,selectors:[["","highlight-js-content",""]],inputs:{useBr:"useBr",highlightSelector:["highlight-js-content","highlightSelector"]}}),y}();q.ctorParameters=function(){return[{type:r.ElementRef},{type:r.NgZone}]},q.propDecorators={useBr:[{type:r.Input}],highlightSelector:[{type:r.Input,args:["highlight-js-content"]}]},Ot.HighlightJsContentDirective=q},153:(fi,Ot,Me)=>{"use strict";Me(62),Me(583);var y=Me(62),pe=(Me(583),function(){function Ce(){}return Ce.\u0275fac=function(We){return new(We||Ce)},Ce.\u0275mod=y.\u0275\u0275defineNgModule({type:Ce}),Ce.\u0275inj=y.\u0275\u0275defineInjector({}),Ce}());pe.ctorParameters=function(){return[]},Ot.n6=pe;var lt=Me(753);Ot.vp=lt.HighlightJsService},753:(fi,Ot,Me)=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0}),Me(62);var V=Me(62),q=function(){function y(){}return y.prototype.highlight=function(Ve,pe){pe&&hljs.configure({useBR:!0}),hljs.highlightBlock(Ve)},y.\u0275fac=function(pe){return new(pe||y)},y.\u0275prov=V.\u0275\u0275defineInjectable({token:y,factory:function(Ve){return y.\u0275fac(Ve)}}),y}();q.ctorParameters=function(){return[]},Ot.HighlightJsService=q},858:function(fi,Ot,Me){!function(r,V,q,y){"use strict";function Ve(Ke){return Ke&&"object"==typeof Ke&&"default"in Ke?Ke:{default:Ke}}var pe=Ve(y);function hn(Ke,dt,ze){/^https?:\/\//.test(Ke)&&/\/VectorTileServer\/?$/.test(Ke)?Ii(Ke,dt,ze):function xn(Ke,dt,ze){const kt=dt.portalUrl+"/sharing/rest/content/items/"+Ke+"/resources/styles/root.json";qn(kt,dt,function(xi,Dn){!function wa(Ke,dt,ze){V.request(dt.portalUrl+"/sharing/rest/content/items/"+Ke,dt.token?{token:dt.token}:{},ze)}(Ke,dt,xi?function(an,Gn){an?ze(an):Ii(Gn.url,dt,ze)}:function(an,Gn){an?ze(an):Un(Gn.url,dt,function(kr,Or){ze(kr,Dn,kt,Or,Gn.url)})})})}(Ke,dt,ze)}function Un(Ke,dt,ze){V.request(Ke,dt.token?{token:dt.token}:{},ze)}function Ii(Ke,dt,ze){Un(Ke,dt,function(kt,xi){if(kt)return void ze(kt);let an,Dn=Ke;"/"===Ke.charAt(Ke.length-1)&&(Dn=Ke.slice(0,Ke.length-1)),an="/"===xi.defaultStyles.charAt(0)?Dn+xi.defaultStyles+"/root.json":Dn+"/"+xi.defaultStyles+"/root.json",qn(an,dt,function(Gn,kr){Gn?ze(Gn):ze(null,kr,an,xi,Ke)})})}function qn(Ke,dt,ze){V.request(Ke,dt.token?{token:dt.token}:{},ze)}function ji(Ke,dt){return new URL(Ke).hostname===new URL(dt).hostname}function Ji(Ke,dt,ze,kt){const xi=Object.keys(Ke.sources);for(let an=0;an<xi.length;an++){const Gn=Ke.sources[xi[an]];-1===Gn.url.indexOf("http")&&(Gn.url=dt.replace("/resources/styles/root.json","")),"/"===Gn.url.charAt(Gn.url.length-1)&&(Gn.url=Gn.url.slice(0,Gn.url.length-1)),Gn.tiles||(ze.tiles&&"/"!==ze.tiles[0].charAt(0)&&(ze.tiles[0]="/"+ze.tiles[0]),Gn.tiles=[Gn.url+ze.tiles[0]]),Gn.url+="?f=json",Gn.url+=kt?"&token="+kt:"",Gn.tiles[0]+=kt?"?token="+kt:"",Gn.minzoom=ze.minLOD||ze.tileInfo.lods[0].level,Gn.maxzoom=ze.maxLOD||ze.tileInfo.lods[ze.tileInfo.lods.length-1].level}const Dn=Ke.sources[xi[xi.length-1]];Dn.attribution=ze.copyrightText||"",Dn.copyrightText=ze.copyrightText||"";for(let an=0;an<Ke.layers.length;an++){const Gn=Ke.layers[an];Gn.layout&&Gn.layout["text-font"]&&Gn.layout["text-font"].length>1&&(Gn.layout["text-font"]=[Gn.layout["text-font"][0]])}return Ke.sprite&&-1===Ke.sprite.indexOf("http")&&(Ke.sprite=dt.replace("styles/root.json",Ke.sprite.replace("../",""))),Ke.sprite&&kt&&(ji(dt,Ke.sprite)?Ke.sprite+="?token="+kt:console.warn("Passing a token but sprite URL is not on same base URL, so you must pass the token manually.")),Ke.glyphs&&-1===Ke.glyphs.indexOf("http")&&(Ke.glyphs=dt.replace("styles/root.json",Ke.glyphs.replace("../",""))),Ke.glyphs&&kt&&(ji(dt,Ke.glyphs)?Ke.glyphs+="?token="+kt:console.warn("Passing a token but glyph URL is not on same base URL, so you must pass the token manually.")),Ke}function Ci(Ke,dt){V.Support.cors&&V.request(Ke,{},function(ze,kt){if(!ze){dt._esriAttributions=dt._esriAttributions||[];for(let Dn=0;Dn<kt.contributors.length;Dn++){const an=kt.contributors[Dn];for(let Gn=0;Gn<an.coverageAreas.length;Gn++){const kr=an.coverageAreas[Gn],Or=q.latLng(kr.bbox[0],kr.bbox[1]),Mn=q.latLng(kr.bbox[2],kr.bbox[3]);dt._esriAttributions.push({attribution:an.attribution,score:kr.score,bounds:q.latLngBounds(Or,Mn),minZoom:kr.zoomMin,maxZoom:kr.zoomMax})}}dt._esriAttributions.sort(function(Dn,an){return an.score-Dn.score}),V.Util._updateMapAttribution({target:dt})}})}const Si=[3857,102100,102113];var _r={formatStyle:Ji};var Yn=q.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(Ke){q.setOptions(this,Ke),this._throttledUpdate=q.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(Ke){this._container||this._initContainer();const dt=this.getPaneName();Ke.getPane(dt).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),Ke.options.zoomAnimation&&q.DomEvent.on(Ke._proxy,q.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(Ke){this._map._proxy&&this._map.options.zoomAnimation&&q.DomEvent.off(this._map._proxy,q.DomUtil.TRANSITION_END,this._transitionEnd,this);const dt=this.getPaneName();Ke.getPane(dt).removeChild(this._container),this._container=null,this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getOpacity:function(){return this.options.opacity},setOpacity:function(Ke){this.options.opacity=Ke,this._container.style.opacity=Ke},getBounds:function(){const Ke=this.getSize().multiplyBy(.5),dt=this._map.latLngToContainerPoint(this._map.getCenter());return q.latLngBounds(this._map.containerPointToLatLng(dt.subtract(Ke)),this._map.containerPointToLatLng(dt.add(Ke)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_resize:function(){return this._glMap._resize},_initContainer:function(){if(this._container)return;this._container=q.DomUtil.create("div","leaflet-gl-layer");const Ke=this.getSize(),dt=this._map.getSize().multiplyBy(this.options.padding);this._container.style.width=Ke.x+"px",this._container.style.height=Ke.y+"px";const ze=this._map.containerPointToLayerPoint([0,0]).subtract(dt);q.DomUtil.setPosition(this._container,ze)},_initGL:function(){if(this._glMap)return;const Ke=this._map.getCenter(),dt=q.extend({},this.options,{container:this._container,center:[Ke.lng,Ke.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new pe.default.Map(dt),this._glMap.once("styledata",function(kt){this.fire("styleLoaded")}.bind(this)),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._actualCanvas=this._glMap._canvas.canvas?this._glMap._canvas.canvas:this._glMap._canvas;const ze=this._glMap._actualCanvas;q.DomUtil.addClass(ze,"leaflet-image-layer"),q.DomUtil.addClass(ze,"leaflet-zoom-animated"),this.options.interactive&&q.DomUtil.addClass(ze,"leaflet-interactive"),this.options.className&&q.DomUtil.addClass(ze,this.options.className)},_update:function(Ke){if(this._offset=this._map.containerPointToLayerPoint([0,0]),this._zooming)return;const dt=this.getSize(),ze=this._container,kt=this._glMap,xi=this._map.getSize().multiplyBy(this.options.padding),Dn=this._map.containerPointToLayerPoint([0,0]).subtract(xi);q.DomUtil.setPosition(ze,Dn),this._transformGL(kt),kt.transform.width!==dt.x||kt.transform.height!==dt.y?(ze.style.width=dt.x+"px",ze.style.height=dt.y+"px",null!=kt._resize?kt._resize():kt.resize()):null!=kt._update?kt._update():kt.update()},_transformGL:function(Ke){const dt=this._map.getCenter(),ze=Ke.transform;ze.center=pe.default.LngLat.convert([dt.lng,dt.lat]),ze.zoom=this._map.getZoom()-1},_pinchZoom:function(Ke){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(Ke){const dt=this._map.getZoomScale(Ke.zoom),ze=this._map.getSize().multiplyBy(this.options.padding*dt),kt=this.getSize()._divideBy(2),xi=this._map.project(Ke.center,Ke.zoom)._subtract(kt)._add(this._map._getMapPanePos().add(ze))._round(),Dn=this._map.project(this._map.getBounds().getNorthWest(),Ke.zoom)._subtract(xi);q.DomUtil.setTransform(this._glMap._actualCanvas,Dn.subtract(this._offset),dt)},_zoomStart:function(Ke){this._zooming=!0},_zoomEnd:function(){const Ke=this._map.getZoomScale(this._map.getZoom());q.DomUtil.setTransform(this._glMap._actualCanvas,null,Ke),this._zooming=!1,this._update()},_transitionEnd:function(Ke){q.Util.requestAnimFrame(function(){const dt=this._map.getZoom(),ze=this._map.getCenter(),kt=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());q.DomUtil.setTransform(this._glMap._actualCanvas,kt,1),this._glMap.once("moveend",q.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:ze,zoom:dt-1})},this)}});function Zr(Ke){return new Yn(Ke)}var Ho=q.Layer.extend({options:{portalUrl:"https://www.arcgis.com",preserveDrawingBuffer:!1},initialize:function(Ke,dt){if(dt&&q.setOptions(this,dt),this.options.apiKey&&(this.options.apikey=this.options.apiKey),this.options.apikey?this.options.token=this.options.apikey:this.options.token&&(this.options.apikey=this.options.token),!Ke)throw new Error("An ITEM ID or SERVICE URL is required for vectorTileLayer.");Ke&&(this.options.key=Ke),this._createLayer()},_createLayer:function(){hn(this.options.key,this.options,function(Ke,dt,ze,kt){Ke?this.fire("load-error",{value:Ke}):(function Er(Ke){return Si.indexOf(Ke)>=0}(kt.tileInfo.spatialReference.wkid)||console.warn('This layer is not guaranteed to display properly because its service does not use the Web Mercator projection. The "tileInfo.spatialReference" property is:',kt.tileInfo.spatialReference,"\nMore information is available at https://github.com/maplibre/maplibre-gl-js/issues/168 and https://github.com/Esri/esri-leaflet-vector/issues/94."),dt=Ji(dt,ze,kt,this.options.token),this._createMaplibreLayer(dt))}.bind(this))},_setupAttribution:function(){if(!this.getAttribution()){const Ke=this._maplibreGL.getMaplibreMap().style.stylesheet.sources,dt=Object.keys(Ke);this.options.attribution=Ke[dt[dt.length-1]].attribution,this._map&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution())}},_createMaplibreLayer:function(Ke){this._maplibreGL=Zr({style:Ke,pane:this.options.pane,opacity:this.options.opacity,preserveDrawingBuffer:this.options.preserveDrawingBuffer}),this._ready=!0,this.fire("ready",{},!0),this._maplibreGL.on("styleLoaded",function(){this._setupAttribution(),this.options.style&&"function"==typeof this.options.style&&this._maplibreGL._glMap.setStyle(this.options.style(this._maplibreGL._glMap.getStyle()))}.bind(this))},onAdd:function(Ke){this._map=Ke,this._ready?this._asyncAdd():this.once("ready",function(){this._asyncAdd()},this)},onRemove:function(Ke){Ke.removeLayer(this._maplibreGL)},_asyncAdd:function(){this._maplibreGL.addTo(this._map,this)}});var Wi=Ho.extend({initialize:function(Ke,dt){if(dt.version||(dt.version=Ke.includes("/")?2:1),Ke||(Ke=1===dt.version?"ArcGIS:Streets":"arcgis/streets"),!(dt.apikey||dt.apiKey||dt.token))throw new Error("An API Key or token is required for vectorBasemapLayer.");if(2!==dt.version){if(dt.language)throw new Error("The language parameter is only supported by the basemap styles service v2. Provide a v2 style enumeration to use this option.");if(dt.worldview)throw new Error("The worldview parameter is only supported by the basemap styles service v2. Provide a v2 style enumeration to use this option.");if(dt.places)throw new Error("The places parameter is only supported by the basemap styles service v2. Provide a v2 style enumeration to use this option.")}dt.pane||(dt.pane=Ke.includes(":Label")||Ke.includes("/label")?"esri-labels":Ke.includes(":Detail")||Ke.includes("/detail")?"esri-detail":"tilePane"),Ho.prototype.initialize.call(this,Ke,dt)},_createLayer:function(){let Ke;Ke=this.options.version&&2===this.options.version?function gn(Ke,dt,ze){if(Ke.includes(":"))throw new Error(Ke+" is a v1 style enumeration. Set version:1 to request this style");let kt="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/";if(Ke.startsWith("osm/")||Ke.startsWith("arcgis/")||32!==Ke.length)kt+=Ke;else if(kt=kt+"items/"+Ke,ze.language)throw new Error("The 'language' parameter is not supported for custom basemap styles");if(!dt)throw new Error("A token is required to access basemap styles.");return kt=kt+"?token="+dt,ze.language&&(kt=kt+"&language="+ze.language),ze.worldview&&(kt=kt+"&worldview="+ze.worldview),ze.places&&(kt=kt+"&places="+ze.places),kt}(this.options.key,this.options.apikey,{language:this.options.language,worldview:this.options.worldview,places:this.options.places}):function Fn(Ke,dt){if(Ke.includes("/"))throw new Error(Ke+" is a v2 style enumeration. Set version:2 to request this style");let ze="https://basemaps-api.arcgis.com/arcgis/rest/services/styles/"+Ke+"?type=style";return dt&&(ze=ze+"&token="+dt),ze}(this.options.key,this.options.apikey),this._createMaplibreLayer(Ke)},_setupAttribution:function(){if(V.Util.setEsriAttribution(this._map),32===this.options.key.length){const Ke=this._maplibreGL.getMaplibreMap().style.stylesheet.sources,dt=[];Object.keys(Ke).forEach(function(ze){dt.push(Ke[ze].attribution),Ke[ze].copyrightText&&Ke[ze].copyrightText&&""!==Ke[ze].copyrightText&&Ke[ze].attribution!==Ke[ze].copyrightText&&dt.push(Ke[ze].copyrightText)}),this._map.attributionControl.addAttribution('<span class="">'+dt.join(", ")+"</span>")}else if(this.options.attributionUrls||(this.options.attributionUrls=this._getAttributionUrls(this.options.key)),this._map&&this.options.attributionUrls){if(this._map.attributionControl){for(let Ke=0;Ke<this.options.attributionUrls.length;Ke++)Ci(this.options.attributionUrls[Ke],this._map);this._map.attributionControl.addAttribution('<span class="esri-dynamic-attribution"></span>')}V.Util._updateMapAttribution({target:this._map})}},_getAttributionUrls:function(Ke){return 0===Ke.indexOf("OSM:")||0===Ke.indexOf("osm/")?["https://static.arcgis.com/attribution/Vector/OpenStreetMap_v2"]:0===Ke.indexOf("ArcGIS:Imagery")||0===Ke.indexOf("arcgis/imagery")?["https://static.arcgis.com/attribution/World_Imagery","https://static.arcgis.com/attribution/Vector/World_Basemap_v2"]:["https://static.arcgis.com/attribution/Vector/World_Basemap_v2"]},_initPane:function(){if(!this._map.getPane(this.options.pane)){const Ke=this._map.createPane(this.options.pane);Ke.style.pointerEvents="none";let dt=500;"esri-detail"===this.options.pane?dt=250:"esri-labels"===this.options.pane&&(dt=300),Ke.style.zIndex=dt}},onRemove:function(Ke){if(Ke.off("moveend",V.Util._updateMapAttribution),Ke.removeLayer(this._maplibreGL),Ke.attributionControl){const dt=document.getElementsByClassName("esri-dynamic-attribution");dt&&dt.length>0&&Ke.attributionControl.removeAttribution(dt[0].outerHTML)}},_asyncAdd:function(){const Ke=this._map;this._initPane(),Ke.on("moveend",V.Util._updateMapAttribution),this._maplibreGL.addTo(Ke,this)}});r.MaplibreGLJSLayer=Yn,r.Util=_r,r.VERSION="4.2.3",r.VectorBasemapLayer=Wi,r.VectorTileLayer=Ho,r.maplibreGLJSLayer=Zr,r.setRTLTextPlugin=(Ke,dt,ze)=>{pe.default.setRTLTextPlugin(Ke,dt,ze)},r.vectorBasemapLayer=function Po(Ke,dt){return new Wi(Ke,dt)},r.vectorTileLayer=function $o(Ke,dt){return new Ho(Ke,dt)},Object.defineProperty(r,"__esModule",{value:!0})}(Ot,Me(912),Me(407),Me(943))},912:(fi,Ot,Me)=>{"use strict";Me.r(Ot),Me.d(Ot,{BasemapLayer:()=>ht,DynamicMapLayer:()=>ci,FeatureLayer:()=>Ca,FeatureLayerService:()=>Ge,FeatureManager:()=>Js,Find:()=>qi,Identify:()=>It,IdentifyFeatures:()=>Qo,IdentifyImage:()=>Yt,ImageMapLayer:()=>mi,ImageService:()=>me,MapService:()=>we,Query:()=>kr,RasterLayer:()=>Vt,Service:()=>bo,Support:()=>y,Task:()=>Dn,TiledMapLayer:()=>Kt,Util:()=>kt,VERSION:()=>Pi,basemapLayer:()=>ut,dynamicMapLayer:()=>ir,featureLayer:()=>ea,featureLayerService:()=>Oe,find:()=>Cn,get:()=>Zt,identify:()=>Ko,identifyFeatures:()=>Rr,identifyImage:()=>Ln,imageMapLayer:()=>di,imageService:()=>ve,mapService:()=>ie,options:()=>pe,post:()=>ct,query:()=>Or,request:()=>Mt,service:()=>Nn,task:()=>an,tiledMapLayer:()=>sn});var V=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,q=""===document.documentElement.style.pointerEvents,y={cors:V,pointerEvents:q},pe={attributionWidthOffset:55},Ce=Me(407),Ue=0;function We(z){var Z="";for(var te in z.f=z.f||"json",z)if(Object.prototype.hasOwnProperty.call(z,te)){var Be,se=z[te],fe=Object.prototype.toString.call(se);Z.length&&(Z+="&"),Be="[object Array]"===fe?"[object Object]"===Object.prototype.toString.call(se[0])?JSON.stringify(se):se.join(","):"[object Object]"===fe?JSON.stringify(se):"[object Date]"===fe?se.valueOf():se,Z+=encodeURIComponent(te)+"="+encodeURIComponent(Be)}return Z}function Ye(z,Z){var te=new window.XMLHttpRequest;return te.onerror=function(se){te.onreadystatechange=Ce.Util.falseFn,z.call(Z,{error:{code:500,message:"XMLHttpRequest error"}},null)},te.onreadystatechange=function(){var se,fe;if(4===te.readyState){try{se=JSON.parse(te.responseText)}catch{se=null,fe={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!fe&&se.error&&(fe=se.error,se=null),te.onerror=Ce.Util.falseFn,z.call(Z,fe,se)}},te.ontimeout=function(){this.onerror()},te}function ct(z,Z,te,se){var fe=Ye(te,se);return fe.open("POST",z),typeof se<"u"&&null!==se&&typeof se.options<"u"&&(fe.timeout=se.options.timeout),fe.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),fe.send(We(Z)),fe}function it(z,Z,te,se){var fe=Ye(te,se);return fe.open("GET",z+"?"+We(Z),!0),typeof se<"u"&&null!==se&&typeof se.options<"u"&&(fe.timeout=se.options.timeout,se.options.withCredentials&&(fe.withCredentials=!0)),fe.send(null),fe}function Mt(z,Z,te,se){var fe=We(Z),Be=Ye(te,se),Ne=(z+"?"+fe).length;if(Ne<=2e3&&y.cors?Be.open("GET",z+"?"+fe):Ne>2e3&&y.cors&&(Be.open("POST",z),Be.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof se<"u"&&null!==se&&typeof se.options<"u"&&(Be.timeout=se.options.timeout,se.options.withCredentials&&(Be.withCredentials=!0)),Ne<=2e3&&y.cors)Be.send(null);else{if(!(Ne>2e3&&y.cors))return Ne<=2e3&&!y.cors?Rn(z,Z,te,se):void gt("a request to "+z+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");Be.send(fe)}return Be}function Rn(z,Z,te,se){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var fe="c"+Ue;Z.callback="window._EsriLeafletCallbacks."+fe,window._EsriLeafletCallbacks[fe]=function(Ne){if(!0!==window._EsriLeafletCallbacks[fe]){var Tt,ln=Object.prototype.toString.call(Ne);"[object Object]"===ln||"[object Array]"===ln||(Tt={error:{code:500,message:"Expected array or object as JSONP response"}},Ne=null),!Tt&&Ne.error&&(Tt=Ne,Ne=null),te.call(se,Tt,Ne),window._EsriLeafletCallbacks[fe]=!0}};var Be=Ce.DomUtil.create("script",null,document.body);return Be.type="text/javascript",Be.src=z+"?"+We(Z),Be.id=fe,Be.onerror=function(Ne){Ne&&!0!==window._EsriLeafletCallbacks[fe]&&(te.call(se,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[fe]=!0)},Ce.DomUtil.addClass(Be,"esri-leaflet-jsonp"),Ue++,{id:fe,url:Be.src,abort:function(){window._EsriLeafletCallbacks._callback[fe]({code:0,message:"Request aborted."})}}}var Zt=y.cors?it:Rn;function gt(){console&&console.warn&&console.warn.apply(console,arguments)}Zt.CORS=it,Zt.JSONP=Rn;const ni={request:Mt,get:Zt,post:ct};var Sr=function(Z,te,se,fe){var Tt=(fe[1]-se[1])*(te[0]-Z[0])-(fe[0]-se[0])*(te[1]-Z[1]);if(0!==Tt){var ln=((fe[0]-se[0])*(Z[1]-se[1])-(fe[1]-se[1])*(Z[0]-se[0]))/Tt,vn=((te[0]-Z[0])*(Z[1]-se[1])-(te[1]-Z[1])*(Z[0]-se[0]))/Tt;if(ln>=0&&ln<=1&&vn>=0&&vn<=1)return!0}return!1},hi=function(Z,te){for(var se=0;se<Z.length-1;se++)for(var fe=0;fe<te.length-1;fe++)if(Sr(Z[se],Z[se+1],te[fe],te[fe+1]))return!0;return!1},In=function(Z){return function(Z,te){for(var se=0;se<Z.length;se++)if(Z[se]!==te[se])return!1;return!0}(Z[0],Z[Z.length-1])||Z.push(Z[0]),Z},bn=function(Z){for(var Ne,te=0,se=0,fe=Z.length,Be=Z[se];se<fe-1;se++)te+=((Ne=Z[se+1])[0]-Be[0])*(Ne[1]+Be[1]),Be=Ne;return te>=0},Ti=function(Z){var te={};for(var se in Z)Z.hasOwnProperty(se)&&(te[se]=Z[se]);return te},Di=function(Z,te){var se=hi(Z,te),fe=function(Z,te){for(var se=!1,fe=-1,Be=Z.length,Ne=Be-1;++fe<Be;Ne=fe)(Z[fe][1]<=te[1]&&te[1]<Z[Ne][1]||Z[Ne][1]<=te[1]&&te[1]<Z[fe][1])&&te[0]<(Z[Ne][0]-Z[fe][0])*(te[1]-Z[fe][1])/(Z[Ne][1]-Z[fe][1])+Z[fe][0]&&(se=!se);return se}(Z,te[0]);return!(se||!fe)},gn=function z(Z,te){var se={};if(Z.features){se.type="FeatureCollection",se.features=[];for(var fe=0;fe<Z.features.length;fe++)se.features.push(z(Z.features[fe],te))}if("number"==typeof Z.x&&"number"==typeof Z.y&&(se.type="Point",se.coordinates=[Z.x,Z.y],"number"==typeof Z.z&&se.coordinates.push(Z.z)),Z.points&&(se.type="MultiPoint",se.coordinates=Z.points.slice(0)),Z.paths&&(1===Z.paths.length?(se.type="LineString",se.coordinates=Z.paths[0].slice(0)):(se.type="MultiLineString",se.coordinates=Z.paths.slice(0))),Z.rings&&(se=function(Z){for(var fe,Ne,te=[],se=[],Tt=0;Tt<Z.length;Tt++){var ln=In(Z[Tt].slice(0));if(!(ln.length<4))if(bn(ln)){var vn=[ln.slice().reverse()];te.push(vn)}else se.push(ln.slice().reverse())}for(var dn=[];se.length;){Ne=se.pop();var bt=!1;for(fe=te.length-1;fe>=0;fe--)if(Di(te[fe][0],Ne)){te[fe].push(Ne),bt=!0;break}bt||dn.push(Ne)}for(;dn.length;){Ne=dn.pop();var ft=!1;for(fe=te.length-1;fe>=0;fe--)if(hi(te[fe][0],Ne)){te[fe].push(Ne),ft=!0;break}ft||te.push([Ne.reverse()])}return 1===te.length?{type:"Polygon",coordinates:te[0]}:{type:"MultiPolygon",coordinates:te}}(Z.rings.slice(0))),"number"==typeof Z.xmin&&"number"==typeof Z.ymin&&"number"==typeof Z.xmax&&"number"==typeof Z.ymax&&(se.type="Polygon",se.coordinates=[[[Z.xmax,Z.ymax],[Z.xmin,Z.ymax],[Z.xmin,Z.ymin],[Z.xmax,Z.ymin],[Z.xmax,Z.ymax]]]),(Z.geometry||Z.attributes)&&(se.type="Feature",se.geometry=Z.geometry?z(Z.geometry):null,se.properties=Z.attributes?Ti(Z.attributes):null,Z.attributes))try{se.id=function(Z,te){for(var se=te?[te,"OBJECTID","FID"]:["OBJECTID","FID"],fe=0;fe<se.length;fe++){var Be=se[fe];if(Be in Z&&("string"==typeof Z[Be]||"number"==typeof Z[Be]))return Z[Be]}throw Error("No valid id attribute found")}(Z.attributes,te)}catch{}return JSON.stringify(se.geometry)===JSON.stringify({})&&(se.geometry=null),Z.spatialReference&&Z.spatialReference.wkid&&4326!==Z.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(Z.spatialReference)),se},hn=function(Z){var te=[],se=Z.slice(0),fe=In(se.shift().slice(0));if(fe.length>=4){bn(fe)||fe.reverse(),te.push(fe);for(var Be=0;Be<se.length;Be++){var Ne=In(se[Be].slice(0));Ne.length>=4&&(bn(Ne)&&Ne.reverse(),te.push(Ne))}}return te},wa=function z(Z,te){te=te||"OBJECTID";var Be,se={wkid:4326},fe={};switch(Z.type){case"Point":fe.x=Z.coordinates[0],fe.y=Z.coordinates[1],null!=Z.coordinates[2]&&(fe.z=Z.coordinates[2]),fe.spatialReference=se;break;case"MultiPoint":fe.points=Z.coordinates.slice(0),null!=Z.coordinates[0][2]&&(fe.hasZ=!0),fe.spatialReference=se;break;case"LineString":fe.paths=[Z.coordinates.slice(0)],null!=Z.coordinates[0][2]&&(fe.hasZ=!0),fe.spatialReference=se;break;case"MultiLineString":fe.paths=Z.coordinates.slice(0),null!=Z.coordinates[0][0][2]&&(fe.hasZ=!0),fe.spatialReference=se;break;case"Polygon":fe.rings=hn(Z.coordinates.slice(0)),null!=Z.coordinates[0][0][2]&&(fe.hasZ=!0),fe.spatialReference=se;break;case"MultiPolygon":fe.rings=function(Z){for(var te=[],se=0;se<Z.length;se++)for(var fe=hn(Z[se]),Be=fe.length-1;Be>=0;Be--){var Ne=fe[Be].slice(0);te.push(Ne)}return te}(Z.coordinates.slice(0)),null!=Z.coordinates[0][0][0][2]&&(fe.hasZ=!0),fe.spatialReference=se;break;case"Feature":Z.geometry&&(fe.geometry=z(Z.geometry,te)),fe.attributes=Z.properties?Ti(Z.properties):{},Z.id&&(fe.attributes[te]=Z.id);break;case"FeatureCollection":for(fe=[],Be=0;Be<Z.features.length;Be++)fe.push(z(Z.features[Be],te));break;case"GeometryCollection":for(fe=[],Be=0;Be<Z.geometries.length;Be++)fe.push(z(Z.geometries[Be],te))}return fe},xn='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>',Ii='Powered by <a href="https://www.esri.com">Esri</a>';function qn(z,Z){return wa(z,Z)}function ji(z,Z){return gn(z,Z)}function Ji(z){if("NaN"!==z.xmin&&"NaN"!==z.ymin&&"NaN"!==z.xmax&&"NaN"!==z.ymax){var Z=(0,Ce.latLng)(z.ymin,z.xmin),te=(0,Ce.latLng)(z.ymax,z.xmax);return(0,Ce.latLngBounds)(Z,te)}return null}function Ci(z){return{xmin:(z=(0,Ce.latLngBounds)(z)).getSouthWest().lng,ymin:z.getSouthWest().lat,xmax:z.getNorthEast().lng,ymax:z.getNorthEast().lat,spatialReference:{wkid:4326}}}var Si=/^(OBJECTID|FID|OID|ID)$/i;function Er(z){var Z;if(z.objectIdFieldName)Z=z.objectIdFieldName;else if(z.fields){for(var te=0;te<=z.fields.length-1;te++)if("esriFieldTypeOID"===z.fields[te].type){Z=z.fields[te].name;break}if(!Z)for(te=0;te<=z.fields.length-1;te++)if(z.fields[te].name.match(Si)){Z=z.fields[te].name;break}}return Z}function _r(z){for(var Z in z.attributes)if(Z.match(Si))return Z}function ii(z,Z){var te,se=z.features||z.results,fe=se&&se.length;te=Z||Er(z);var Be={type:"FeatureCollection",features:[]};if(fe)for(var Ne=se.length-1;Ne>=0;Ne--){var Tt=ji(se[Ne],te||_r(se[Ne]));Be.features.push(Tt)}return Be}function Yn(z){return"/"!==(z=Ce.Util.trim(z))[z.length-1]&&(z+="/"),z}function Zr(z){if(-1!==z.url.indexOf("?")){z.requestParams=z.requestParams||{};var Z=z.url.substring(z.url.indexOf("?")+1);z.url=z.url.split("?")[0],z.requestParams=JSON.parse('{"'+decodeURI(Z).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return z.url=Yn(z.url.split("?")[0]),z}function Ho(z){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(z)}function $o(z){var Z;switch(z){case"Point":Z="esriGeometryPoint";break;case"MultiPoint":Z="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":Z="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":Z="esriGeometryPolygon"}return Z}function Wi(z){return z.getSize().x-pe.attributionWidthOffset+"px"}function Po(z){if(z.attributionControl){if(z.attributionControl._esriAttributionLayerCount||(z.attributionControl._esriAttributionLayerCount=0),0===z.attributionControl._esriAttributionLayerCount){if(!z.attributionControl._esriAttributionAddedOnce){var Z=document.createElement("style");Z.type="text/css",Z.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(Z);var te=document.createElement("style");te.type="text/css",te.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+Wi(z)+";}",document.getElementsByTagName("head")[0].appendChild(te),z.on("resize",function(se){z.attributionControl&&(z.attributionControl._container.style.maxWidth=Wi(se.target))}),z.attributionControl._esriAttributionAddedOnce=!0}z.attributionControl.setPrefix(xn+" | "+Ii),Ce.DomUtil.addClass(z.attributionControl._container,"esri-truncated-attribution:hover"),Ce.DomUtil.addClass(z.attributionControl._container,"esri-truncated-attribution")}z.attributionControl._esriAttributionLayerCount=z.attributionControl._esriAttributionLayerCount+1}}function Br(z){z.attributionControl&&(z.attributionControl._esriAttributionLayerCount&&1===z.attributionControl._esriAttributionLayerCount&&(z.attributionControl.setPrefix(xn),Ce.DomUtil.removeClass(z.attributionControl._container,"esri-truncated-attribution:hover"),Ce.DomUtil.removeClass(z.attributionControl._container,"esri-truncated-attribution")),z.attributionControl._esriAttributionLayerCount=z.attributionControl._esriAttributionLayerCount-1)}function Ke(z){var Z={geometry:null,geometryType:null};return z instanceof Ce.LatLngBounds?(Z.geometry=Ci(z),Z.geometryType="esriGeometryEnvelope",Z):(z.getLatLng&&(z=z.getLatLng()),z instanceof Ce.LatLng&&(z={type:"Point",coordinates:[z.lng,z.lat]}),z instanceof Ce.GeoJSON&&(z=z.getLayers()[0].feature.geometry,Z.geometry=qn(z),Z.geometryType=$o(z.type)),z.toGeoJSON&&(z=z.toGeoJSON()),"Feature"===z.type&&(z=z.geometry),"Point"===z.type||"LineString"===z.type||"Polygon"===z.type||"MultiPolygon"===z.type?(Z.geometry=qn(z),Z.geometryType=$o(z.type),Z):void gt("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function dt(z,Z){y.cors&&Mt(z,{},Ce.Util.bind(function(te,se){if(!te){Z._esriAttributions=[];for(var fe=0;fe<se.contributors.length;fe++)for(var Be=se.contributors[fe],Ne=0;Ne<Be.coverageAreas.length;Ne++){var Tt=Be.coverageAreas[Ne],ln=(0,Ce.latLng)(Tt.bbox[0],Tt.bbox[1]),vn=(0,Ce.latLng)(Tt.bbox[2],Tt.bbox[3]);Z._esriAttributions.push({attribution:Be.attribution,score:Tt.score,bounds:(0,Ce.latLngBounds)(ln,vn),minZoom:Tt.zoomMin,maxZoom:Tt.zoomMax})}Z._esriAttributions.sort(function(bt,ft){return ft.score-bt.score}),ze({target:Z})}},this))}function ze(z){var Z=z.target,te=Z._esriAttributions;if(Z&&Z.attributionControl){var se=Z.attributionControl._container.querySelector(".esri-dynamic-attribution");if(se&&te){for(var fe="",Be=Z.getBounds(),Ne=(0,Ce.latLngBounds)(Be.getSouthWest().wrap(),Be.getNorthEast().wrap()),Tt=Z.getZoom(),ln=0;ln<te.length;ln++){var vn=te[ln],dn=vn.attribution;!fe.match(dn)&&vn.bounds.intersects(Ne)&&Tt>=vn.minZoom&&Tt<=vn.maxZoom&&(fe+=", "+dn)}fe=fe.substr(2),se.innerHTML=fe,se.style.maxWidth=Wi(Z),Z.fire("attributionupdated",{attribution:fe})}}}var kt={warn:gt,cleanUrl:Yn,getUrlParams:Zr,isArcgisOnline:Ho,geojsonTypeToArcGIS:$o,responseToFeatureCollection:ii,geojsonToArcGIS:qn,arcgisToGeoJSON:ji,boundsToExtent:Ci,extentToBounds:Ji,calcAttributionWidth:Wi,setEsriAttribution:Po,_setGeometry:Ke,_getAttributionData:dt,_updateMapAttribution:ze,_findIdAttributeFromFeature:_r,_findIdAttributeFromResponse:Er},Dn=Ce.Class.extend({options:{proxy:!1,useCors:V},generateSetter:function(z,Z){return Ce.Util.bind(function(te){return this.params[z]=te,this},Z)},initialize:function(z){if(z.request&&z.options?(this._service=z,Ce.Util.setOptions(this,z.options)):(Ce.Util.setOptions(this,z),this.options.url=Yn(z.url)),this.params=Ce.Util.extend({},this.params||{}),this.setters)for(var Z in this.setters)this[Z]=this.generateSetter(this.setters[Z],this)},token:function(z){return this._service?this._service.authenticate(z):this.params.token=z,this},apikey:function(z){return this.token(z)},format:function(z){return this.params.returnUnformattedValues=!z,this},request:function(z,Z){return this.options.requestParams&&Ce.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,z,Z):this._request("request",this.path,this.params,z,Z)},_request:function(z,Z,te,se,fe){var Be=this.options.proxy?this.options.proxy+"?"+this.options.url+Z:this.options.url+Z;return"get"!==z&&"request"!==z||this.options.useCors?ni[z](Be,te,se,fe):ni.get.JSONP(Be,te,se,fe)}});function an(z){return z=Zr(z),new Dn(z)}var kr=Dn.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(z){return this._setGeometryParams(z),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(z,Z){return z=(0,Ce.latLng)(z),this.params.geometry=[z.lng,z.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=Z,this.params.inSR=4326,this},where:function(z){return this.params.where=z,this},between:function(z,Z){return this.params.time=[z.valueOf(),Z.valueOf()],this},simplify:function(z,Z){var te=Math.abs(z.getBounds().getWest()-z.getBounds().getEast());return this.params.maxAllowableOffset=te/z.getSize().y*Z,this},orderBy:function(z,Z){return Z=Z||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[z,Z].join(" "),this},run:function(z,Z){return this._cleanParams(),this.options.isModern||Ho(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request(function(te,se){this._trapSQLerrors(te),z.call(Z,te,se,se)},this)):this.request(function(te,se){this._trapSQLerrors(te),z.call(Z,te,se&&ii(se),se)},this)},count:function(z,Z){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(te,se){z.call(this,te,se&&se.count,se)},Z)},ids:function(z,Z){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(te,se){z.call(this,te,se&&se.objectIds,se)},Z)},bounds:function(z,Z){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(te,se){se&&se.extent&&Ji(se.extent)?z.call(Z,te,Ji(se.extent),se):z.call(Z,te={message:"Invalid Bounds"},null,se)},Z)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(z){var Z=(0,Ce.point)(z);return this.params.pixelSize=[Z.x,Z.y],this},layer:function(z){return this.path=z+"/query",this},_trapSQLerrors:function(z){z&&"400"===z.code&&gt("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(z){this.params.inSR=4326;var Z=Ke(z);this.params.geometry=Z.geometry,this.params.geometryType=Z.geometryType}});function Or(z){return new kr(z)}const Mn=Or;var qi=Dn.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(z,Z){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[z,Z].join(":"),this},simplify:function(z,Z){var te=Math.abs(z.getBounds().getWest()-z.getBounds().getEast());return this.params.maxAllowableOffset=te/z.getSize().y*Z,this},run:function(z,Z){return this.request(function(te,se){z.call(Z,te,se&&ii(se),se)},Z)}});function Cn(z){return new qi(z)}const yn=Cn;var It=Dn.extend({path:"identify",between:function(z,Z){return this.params.time=[z.valueOf(),Z.valueOf()],this}});function Ko(z){return new It(z)}var Qo=It.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(z){var Z=Ci(z.getBounds()),te=z.getSize();return this.params.imageDisplay=[te.x,te.y,96],this.params.mapExtent=[Z.xmin,Z.ymin,Z.xmax,Z.ymax],this},at:function(z){return 2===z.length&&(z=(0,Ce.latLng)(z)),this._setGeometryParams(z),this},layerDef:function(z,Z){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[z,Z].join(":"),this},simplify:function(z,Z){var te=Math.abs(z.getBounds().getWest()-z.getBounds().getEast());return this.params.maxAllowableOffset=te/z.getSize().y*Z,this},run:function(z,Z){return this.request(function(te,se){if(te)z.call(Z,te,void 0,se);else{var fe=ii(se);se.results=se.results.reverse();for(var Be=0;Be<fe.features.length;Be++)fe.features[Be].layerId=se.results[Be].layerId;z.call(Z,void 0,fe,se)}})},_setGeometryParams:function(z){var Z=Ke(z);this.params.geometry=Z.geometry,this.params.geometryType=Z.geometryType}});function Rr(z){return new Qo(z)}const Lt=Rr;var Yt=It.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(z){return z=(0,Ce.latLng)(z),this.params.geometry=JSON.stringify({x:z.lng,y:z.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(z,Z){return this.request(function(te,se){z.call(Z,te,se&&this._responseToGeoJSON(se),se)},this)},_responseToGeoJSON:function(z){var Z=z.location,te=z.catalogItems,se=z.catalogItemVisibilities,fe={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[Z.x,Z.y]},crs:{type:"EPSG",properties:{code:Z.spatialReference.wkid}},properties:{OBJECTID:z.objectId,name:z.name,value:z.value},id:z.objectId}};if(z.properties&&z.properties.Values&&(fe.pixel.properties.values=z.properties.Values),te&&te.features&&(fe.catalogItems=ii(te),se&&se.length===fe.catalogItems.features.length))for(var Be=se.length-1;Be>=0;Be--)fe.catalogItems.features[Be].properties.catalogItemVisibility=se[Be];return fe}});function Ln(z){return new Yt(z)}const ei=Ln;var bo=Ce.Evented.extend({options:{proxy:!1,useCors:V,timeout:0},initialize:function(z){z=z||{},this._requestQueue=[],this._authenticating=!1,Ce.Util.setOptions(this,z),this.options.url=Yn(this.options.url)},get:function(z,Z,te,se){return this._request("get",z,Z,te,se)},post:function(z,Z,te,se){return this._request("post",z,Z,te,se)},request:function(z,Z,te,se){return this._request("request",z,Z,te,se)},metadata:function(z,Z){return this._request("get","",{},z,Z)},authenticate:function(z){return this._authenticating=!1,this.options.token=z,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(z){this.options.timeout=z},_request:function(z,Z,te,se,fe){this.fire("requeststart",{url:this.options.url+Z,params:te,method:z},!0);var Be=this._createServiceCallback(z,Z,te,se,fe);if(this.options.token&&(te.token=this.options.token),this.options.requestParams&&Ce.Util.extend(te,this.options.requestParams),!this._authenticating){var Ne=this.options.proxy?this.options.proxy+"?"+this.options.url+Z:this.options.url+Z;return"get"!==z&&"request"!==z||this.options.useCors?ni[z](Ne,te,Be,fe):ni.get.JSONP(Ne,te,Be,fe)}this._requestQueue.push([z,Z,te,se,fe])},_createServiceCallback:function(z,Z,te,se,fe){return Ce.Util.bind(function(Be,Ne){Be&&(499===Be.code||498===Be.code)&&(this._authenticating=!0,this._requestQueue.push([z,Z,te,se,fe]),this.fire("authenticationrequired",{authenticate:Ce.Util.bind(this.authenticate,this)},!0),Be.authenticate=Ce.Util.bind(this.authenticate,this)),se.call(fe,Be,Ne),Be?this.fire("requesterror",{url:this.options.url+Z,params:te,message:Be.message,code:Be.code,method:z},!0):this.fire("requestsuccess",{url:this.options.url+Z,params:te,response:Ne,method:z},!0),this.fire("requestend",{url:this.options.url+Z,params:te,method:z},!0)},this)},_runQueue:function(){for(var z=this._requestQueue.length-1;z>=0;z--){var Z=this._requestQueue[z];this[Z.shift()].apply(this,Z)}this._requestQueue=[]}});function Nn(z){return z=Zr(z),new bo(z)}var we=bo.extend({identify:function(){return Lt(this)},find:function(){return yn(this)},query:function(){return Mn(this)}});function ie(z){return new we(z)}const oe=ie;var me=bo.extend({query:function(){return Mn(this)},identify:function(){return ei(this)}});function ve(z){return new me(z)}const De=ve;var Ge=bo.extend({options:{idAttribute:"OBJECTID"},query:function(){return Mn(this)},addFeature:function(z,Z,te){this.addFeatures(z,Z,te)},addFeatures:function(z,Z,te){for(var se=z.features?z.features:[z],fe=se.length-1;fe>=0;fe--)delete se[fe].id;return z=qn(z),this.post("addFeatures",{features:z=se.length>1?z:[z]},function(Be,Ne){Z&&Z.call(te,Be||Ne.addResults[0].error,Ne&&Ne.addResults?Ne.addResults.length>1?Ne.addResults:Ne.addResults[0]:void 0)},te)},updateFeature:function(z,Z,te){this.updateFeatures(z,Z,te)},updateFeatures:function(z,Z,te){var se=z.features?z.features:[z];return z=qn(z,this.options.idAttribute),this.post("updateFeatures",{features:z=se.length>1?z:[z]},function(fe,Be){Z&&Z.call(te,fe||Be.updateResults[0].error,Be&&Be.updateResults?Be.updateResults.length>1?Be.updateResults:Be.updateResults[0]:void 0)},te)},deleteFeature:function(z,Z,te){this.deleteFeatures(z,Z,te)},deleteFeatures:function(z,Z,te){return this.post("deleteFeatures",{objectIds:z},function(se,fe){Z&&Z.call(te,se||fe.deleteResults[0].error,fe&&fe.deleteResults?fe.deleteResults.length>1?fe.deleteResults:fe.deleteResults[0]:void 0)},te)}});function Oe(z){return new Ge(z)}const Le=Oe;var Re="https:"!==window.location.protocol?"http:":"https:",ht=Ce.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Re+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Re+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:q?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:q?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:q?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:q?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:q?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:q?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:q?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Re+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Re+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Re+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Re+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(z,Z){var te;if("object"==typeof z&&z.urlTemplate&&z.options)te=z;else{if("string"!=typeof z||!ht.TILES[z])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');te=ht.TILES[z]}var se=Ce.Util.extend(te.options,Z);Ce.Util.setOptions(this,se),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&-1===te.urlTemplate.indexOf("token=")&&(te.urlTemplate+="?token="+this.options.token),this.options.proxy&&(te.urlTemplate=this.options.proxy+"?"+te.urlTemplate),Ce.TileLayer.prototype.initialize.call(this,te.urlTemplate,se)},onAdd:function(z){Po(z),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&dt((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,z),z.on("moveend",ze),Ce.TileLayer.prototype.onAdd.call(this,z)},onRemove:function(z){Br(z),z.off("moveend",ze),Ce.TileLayer.prototype.onRemove.call(this,z)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var z=this._map.createPane(this.options.pane);z.style.pointerEvents="none",z.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var z='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return z}});function ut(z,Z){return new ht(z,Z)}var Kt=Ce.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(z){z=Zr(z=Ce.Util.setOptions(this,z)),this.tileUrl=(z.proxy?z.proxy+"?":"")+z.url+"tile/{z}/{y}/{x}"+(z.requestParams&&Object.keys(z.requestParams).length>0?Ce.Util.getParamString(z.requestParams):""),-1!==z.url.indexOf("{s}")&&z.subdomains&&(z.url=z.url.replace("{s}",z.subdomains[0])),this.service=oe(z),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(z.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),z.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),Ce.TileLayer.prototype.initialize.call(this,this.tileUrl,z)},getTileUrl:function(z){var Z=this._getZoomForUrl();return Ce.Util.template(this.tileUrl,Ce.Util.extend({s:this._getSubdomain(z),x:z.x,y:z.y,z:this._lodMap&&this._lodMap[Z]?this._lodMap[Z]:Z},this.options))},createTile:function(z,Z){var te=document.createElement("img");return Ce.DomEvent.on(te,"load",Ce.Util.bind(this._tileOnLoad,this,Z,te)),Ce.DomEvent.on(te,"error",Ce.Util.bind(this._tileOnError,this,Z,te)),this.options.crossOrigin&&(te.crossOrigin=""),te.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?te.src=this.getTileUrl(z):this.once("lodmap",function(){te.src=this.getTileUrl(z)},this),te},onAdd:function(z){Po(z),this._lodMap||this.metadata(function(Z,te){if(!Z&&te.spatialReference){var se=te.spatialReference.latestWkid||te.spatialReference.wkid;if(!this.options.attribution&&z.attributionControl&&te.copyrightText&&(this.options.attribution=te.copyrightText,z.attributionControl.addAttribution(this.getAttribution())),z.options.crs!==Ce.CRS.EPSG3857||102100!==se&&3857!==se)z.options.crs&&z.options.crs.code&&z.options.crs.code.indexOf(se)>-1||gt("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/");else{this._lodMap={};for(var fe=te.tileInfo.lods,Be=Kt.MercatorZoomLevels,Ne=0;Ne<fe.length;Ne++){var Tt=fe[Ne];for(var ln in Be)if(this._withinPercentage(Tt.resolution,Be[ln],this.options.zoomOffsetAllowance)){this._lodMap[ln]=Tt.level;break}}this.fire("lodmap")}}},this),Ce.TileLayer.prototype.onAdd.call(this,z)},onRemove:function(z){Br(z),Ce.TileLayer.prototype.onRemove.call(this,z)},metadata:function(z,Z){return this.service.metadata(z,Z),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(z){var Z="?token="+z;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,Z):this.tileUrl+Z,this.options.token=z,this.service.authenticate(z),this},_withinPercentage:function(z,Z,te){return Math.abs(z/Z-1)<te}});function sn(z,Z){return new Kt(z,Z)}var Qt=Ce.ImageOverlay.extend({onAdd:function(z){this._topLeft=z.getPixelBounds().min,Ce.ImageOverlay.prototype.onAdd.call(this,z)},_reset:function(){this._map.options.crs===Ce.CRS.EPSG3857?Ce.ImageOverlay.prototype._reset.call(this):Ce.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),Vt=Ce.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:V,attribution:null,interactive:!1,alt:""},onAdd:function(z){Po(z),this.options.zIndex&&(this.options.position=null),this._update=Ce.Util.throttle(this._update,this.options.updateInterval,this),z.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?z.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(Z,te){!Z&&!this.options.attribution&&z.attributionControl&&te.copyrightText&&(this.options.attribution=te.copyrightText,z.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(z){Br(z),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(z,Z){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=(0,Ce.popup)(Z),this._popupFunction=z,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(z){return this.options.zIndex=z,this._currentImage&&this._currentImage.setZIndex(z),this},_setAutoZIndex:function(z){if(this._currentImage){for(var Be,Z=this._currentImage.getPane().children,te=-z(-1/0,1/0),se=0,fe=Z.length;se<fe;se++)Be=Z[se].style.zIndex,Z[se]!==this._currentImage._image&&Be&&(te=z(te,+Be));isFinite(te)&&(this.options.zIndex=te+z(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(z){return this.options.opacity=z,this._currentImage&&this._currentImage.setOpacity(z),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(z,Z){return this.options.from=z,this.options.to=Z,this._update(),this},metadata:function(z,Z){return this.service.metadata(z,Z),this},authenticate:function(z){return this.service.authenticate(z),this},redraw:function(){this._update()},_renderImage:function(z,Z,te){if(this._map){if(te&&(z="data:"+te+";base64,"+z),!z)return;var se=new Qt(z,Z,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),fe=function(){this._map.removeLayer(se),this.fire("error"),se.off("load",Be,this)},Be=function(Ne){if(se.off("error",fe,this),this._map){var Tt=Ne.target,ln=this._currentImage;Tt._bounds.equals(Z)&&Tt._bounds.equals(this._map.getBounds())?(this._currentImage=Tt,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),ln&&this._map&&this._map.removeLayer(ln),ln&&ln._map&&ln._map.removeLayer(ln)):this._map.removeLayer(Tt)}this.fire("load",{bounds:Z})};se.once("error",fe,this),se.once("load",Be,this)}},_update:function(){if(this._map){var z=this._map.getZoom(),Z=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress)){if(z>this.options.maxZoom||z<this.options.minZoom)return void(this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null));var te=this._buildExportParams();Ce.Util.extend(te,this.options.requestParams),te?(this._requestExport(te,Z),this.fire("loading",{bounds:Z})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(z,Z,te,se){if(z=(0,Ce.latLng)(z),this._shouldRenderPopup&&this._lastClick.equals(z)){var fe=this._popupFunction(Z,te,se);fe&&this._popup.setLatLng(z).setContent(fe).openOn(this._map)}},_resetPopupState:function(z){this._shouldRenderPopup=!1,this._lastClick=z.latlng},_calculateBbox:function(){var z=this._map.getPixelBounds(),Z=this._map.unproject(z.getBottomLeft()),te=this._map.unproject(z.getTopRight()),se=this._map.options.crs.project(te),fe=this._map.options.crs.project(Z),Be=(0,Ce.bounds)(se,fe);return[Be.getBottomLeft().x,Be.getBottomLeft().y,Be.getTopRight().x,Be.getTopRight().y].join(",")},_calculateImageSize:function(){var z=this._map.getPixelBounds(),Z=this._map.getSize(),te=this._map.unproject(z.getBottomLeft()),se=this._map.unproject(z.getTopRight()),fe=this._map.latLngToLayerPoint(se).y,Be=this._map.latLngToLayerPoint(te).y;return(fe>0||Be<Z.y)&&(Z.y=Be-fe),Z.x+","+Z.y}}),mi=Vt.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(z){z=Zr(z),this.service=De(z),this.service.addEventParent(this),Ce.Util.setOptions(this,z)},setPixelType:function(z){return this.options.pixelType=z,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(z){return this.options.bandIds=Ce.Util.isArray(z)?z.join(","):z.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(z,Z){return this.options.noData=Ce.Util.isArray(z)?z.join(","):z.toString(),Z&&(this.options.noDataInterpretation=Z),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(z){this.options.renderingRule=z,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(z){this.options.mosaicRule=z,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(z){var Z=Ce.Util.bind(function(se,fe,Be){se||setTimeout(Ce.Util.bind(function(){this._renderPopup(z.latlng,se,fe,Be)},this),300)},this),te=this.identify().at(z.latlng);this.options.mosaicRule&&te.setMosaicRule(this.options.mosaicRule),te.run(Z),this._shouldRenderPopup=!0,this._lastClick=z.latlng},_buildExportParams:function(){var z=parseInt(this._map.options.crs.code.split(":")[1],10),Z={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:z,imageSR:z};return this.options.from&&this.options.to&&(Z.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(Z.pixelType=this.options.pixelType),this.options.interpolation&&(Z.interpolation=this.options.interpolation),this.options.compressionQuality&&(Z.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(Z.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(Z.noData=this.options.noData),this.options.noDataInterpretation&&(Z.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(Z.token=this.service.options.token),this.options.renderingRule&&(Z.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(Z.mosaicRule=JSON.stringify(this.options.mosaicRule)),Z},_requestExport:function(z,Z){if("json"===this.options.f)this.service.request("exportImage",z,function(se,fe){se||(this.options.token&&(fe.href+="?token="+this.options.token),this.options.proxy&&(fe.href=this.options.proxy+"?"+fe.href),this._renderImage(fe.href,Z))},this);else{z.f="image";var te=this.options.url+"exportImage"+Ce.Util.getParamString(z);this.options.proxy&&(te=this.options.proxy+"?"+te),this._renderImage(te,Z)}}});function di(z,Z){return new mi(z,Z)}var ci=Vt.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(z){z=Zr(z),this.service=oe(z),this.service.addEventParent(this),Ce.Util.setOptions(this,z)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(z){return this.options.dynamicLayers=z,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(z){return this.options.layers=z,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(z){return this.options.layerDefs=z,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(z){return this.options.timeOptions=z,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(z){var te,Z=Ce.Util.bind(function(fe,Be,Ne){fe||setTimeout(Ce.Util.bind(function(){this._renderPopup(z.latlng,fe,Be,Ne)},this),300)},this);if((te=this.options.popup?this.options.popup.on(this._map).at(z.latlng):this.identify().on(this._map).at(z.latlng)).params.maxAllowableOffset||te.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||te.layers(this.options.layers?"visible:"+this.options.layers.join(","):"visible"),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!te.params.layerDefs)for(var se in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,se)&&te.layerDef(se,this.options.layerDefs[se]);te.run(Z),this._shouldRenderPopup=!0,this._lastClick=z.latlng},_buildExportParams:function(){var z=parseInt(this._map.options.crs.code.split(":")[1],10),Z={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:z,imageSR:z};if(this.options.dynamicLayers&&(Z.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;Z.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(Z.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(Z.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(Z.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(Z.token=this.service.options.token),this.options.proxy&&(Z.proxy=this.options.proxy),this.options.disableCache&&(Z._ts=Date.now()),Z},_requestExport:function(z,Z){if("json"===this.options.f)this.service.request("export",z,function(se,fe){se||(this.options.token&&fe.href&&(fe.href+="?token="+this.options.token),this.options.proxy&&fe.href&&(fe.href=this.options.proxy+"?"+fe.href),fe.href?this._renderImage(fe.href,Z):this._renderImage(fe.imageData,Z,fe.contentType))},this);else{z.f="image";var te=this.options.url+"export"+Ce.Util.getParamString(z);this.options.proxy&&(te=this.options.proxy+"?"+te),this._renderImage(te,Z)}}});function ir(z,Z){return new ci(z,Z)}var yr=Ce.Layer.extend({options:{cellSize:512,updateWhenIdle:Ce.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(z){Ce.Util.setOptions(this,z)},onAdd:function(z){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(z){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var z={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Ce.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),z.move=this._onMove),z},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var z=this.options.cellSize;return z instanceof Ce.Point?z:new Ce.Point(z,z)},_pruneCells:function(){if(this._map){var z,Z;for(z in this._cells)(Z=this._cells[z]).retain=Z.current;for(z in this._cells)if((Z=this._cells[z]).current&&!Z.active){var te=Z.coords;this._retainParent(te.x,te.y,te.z,te.z-5)||this._retainChildren(te.x,te.y,te.z,te.z+2)}for(z in this._cells)this._cells[z].retain||this._removeCell(z)}},_removeAllCells:function(){for(var z in this._cells)this._removeCell(z)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(z,Z,te,se){var fe=Math.floor(z/2),Be=Math.floor(Z/2),Ne=te-1,Tt=new Ce.Point(+fe,+Be);Tt.z=+Ne;var ln=this._cellCoordsToKey(Tt),vn=this._cells[ln];return vn&&vn.active?(vn.retain=!0,!0):(vn&&vn.loaded&&(vn.retain=!0),Ne>se&&this._retainParent(fe,Be,Ne,se))},_retainChildren:function(z,Z,te,se){for(var fe=2*z;fe<2*z+2;fe++)for(var Be=2*Z;Be<2*Z+2;Be++){var Ne=new Ce.Point(fe,Be);Ne.z=te+1;var Tt=this._cellCoordsToKey(Ne),ln=this._cells[Tt];ln&&ln.active?ln.retain=!0:(ln&&ln.loaded&&(ln.retain=!0),te+1<se&&this._retainChildren(fe,Be,te+1,se))}},_resetView:function(z){var Z=z&&(z.pinch||z.flyTo);Z||this._setView(this._map.getCenter(),this._map.getZoom(),Z,Z)},_setView:function(z,Z,te,se){var fe=Math.round(Z);se||(this._cellZoom=fe,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==fe&&this._update(z),te||this._pruneCells(),this._noPrune=!!te)},_resetGrid:function(){var z=this._map,Z=z.options.crs,te=this._cellSize=this.getCellSize(),se=this._cellZoom,fe=this._map.getPixelWorldBounds(this._cellZoom);fe&&(this._globalCellRange=this._pxBoundsToCellRange(fe)),this._wrapX=Z.wrapLng&&!this.options.noWrap&&[Math.floor(z.project([0,Z.wrapLng[0]],se).x/te.x),Math.ceil(z.project([0,Z.wrapLng[1]],se).x/te.y)],this._wrapY=Z.wrapLat&&!this.options.noWrap&&[Math.floor(z.project([Z.wrapLat[0],0],se).y/te.x),Math.ceil(z.project([Z.wrapLat[1],0],se).y/te.y)]},_onMoveEnd:function(z){z&&(z.pinch||z.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(z){var Z=this._map,te=Z._animatingZoom?Math.max(Z._animateToZoom,Z.getZoom()):Z.getZoom(),se=Z.getZoomScale(te,this._cellZoom),fe=Z.project(z,this._cellZoom).floor(),Be=Z.getSize().divideBy(2*se);return new Ce.Bounds(fe.subtract(Be),fe.add(Be))},_update:function(z){var Z=this._map;if(Z){var te=Math.round(Z.getZoom());void 0===z&&(z=Z.getCenter());var se=this._getCelldPixelBounds(z),fe=this._pxBoundsToCellRange(se),Be=fe.getCenter(),Ne=[],Tt=this.options.keepBuffer,ln=new Ce.Bounds(fe.getBottomLeft().subtract([Tt,-Tt]),fe.getTopRight().add([Tt,-Tt]));if(!(isFinite(fe.min.x)&&isFinite(fe.min.y)&&isFinite(fe.max.x)&&isFinite(fe.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var vn in this._cells){var dn=this._cells[vn].coords;(dn.z!==this._cellZoom||!ln.contains(new Ce.Point(dn.x,dn.y)))&&(this._cells[vn].current=!1)}if(Math.abs(te-this._cellZoom)>1)return void this._setView(z,te);for(var bt=fe.min.y;bt<=fe.max.y;bt++)for(var ft=fe.min.x;ft<=fe.max.x;ft++){var kn=new Ce.Point(ft,bt);if(kn.z=this._cellZoom,this._isValidCell(kn)){var on=this._cells[this._cellCoordsToKey(kn)];on?on.current=!0:Ne.push(kn)}}if(Ne.sort(function(Ns,Yi){return Ns.distanceTo(Be)-Yi.distanceTo(Be)}),0!==Ne.length)for(this._loading||(this._loading=!0),ft=0;ft<Ne.length;ft++){var Xo=this._cellCoordsToKey(Ne[ft]),Mi=this._keyToCellCoords(Xo);this._activeCells[Mi]?this._reuseCell(Ne[ft]):this._createCell(Ne[ft])}}},_isValidCell:function(z){var Z=this._map.options.crs;if(!Z.infinite){var te=this._globalCellRange;if(!Z.wrapLng&&(z.x<te.min.x||z.x>te.max.x)||!Z.wrapLat&&(z.y<te.min.y||z.y>te.max.y))return!1}if(!this.options.bounds)return!0;var se=this._cellCoordsToBounds(z);return(0,Ce.toLatLngBounds)(this.options.bounds).overlaps(se)},_keyToBounds:function(z){return this._cellCoordsToBounds(this._keyToCellCoords(z))},_cellCoordsToNwSe:function(z){var Z=this._map,te=this.getCellSize(),se=z.scaleBy(te),fe=se.add(te);return[Z.unproject(se,z.z),Z.unproject(fe,z.z)]},_cellCoordsToBounds:function(z){var Z=this._cellCoordsToNwSe(z),te=new Ce.LatLngBounds(Z[0],Z[1]);return this.options.noWrap||(te=this._map.wrapLatLngBounds(te)),te},_cellCoordsToKey:function(z){return z.x+":"+z.y+":"+z.z},_keyToCellCoords:function(z){var Z=z.split(":"),te=new Ce.Point(+Z[0],+Z[1]);return te.z=+Z[2],te},_removeCell:function(z){var Z=this._cells[z];if(Z){var te=this._keyToCellCoords(z),se=this._wrapCoords(te),fe=this._cellCoordsToBounds(this._wrapCoords(te));Z.current=!1,delete this._cells[z],this._activeCells[z]=Z,this.cellLeave(fe,se,z),this.fire("cellleave",{key:z,coords:se,bounds:fe})}},_reuseCell:function(z){var Z=this._cellCoordsToKey(z);this._cells[Z]=this._activeCells[Z],this._cells[Z].current=!0;var te=this._wrapCoords(z),se=this._cellCoordsToBounds(this._wrapCoords(z));this.cellEnter(se,te,Z),this.fire("cellenter",{key:Z,coords:te,bounds:se})},_createCell:function(z){var Z=this._cellCoordsToKey(z),te=this._wrapCoords(z),se=this._cellCoordsToBounds(this._wrapCoords(z));this.createCell(se,te,Z),this.fire("cellcreate",{key:Z,coords:te,bounds:se}),this._cells[Z]={coords:z,current:!0},Ce.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(z,Z,te){var se=this._cellCoordsToKey(z);(te=this._cells[se])&&(te.loaded=+new Date,te.active=!0)},_getCellPos:function(z){return z.scaleBy(this.getCellSize())},_wrapCoords:function(z){var Z=new Ce.Point(this._wrapX?Ce.Util.wrapNum(z.x,this._wrapX):z.x,this._wrapY?Ce.Util.wrapNum(z.y,this._wrapY):z.y);return Z.z=z.z,Z},_pxBoundsToCellRange:function(z){var Z=this.getCellSize();return new Ce.Bounds(z.min.unscaleBy(Z).floor(),z.max.unscaleBy(Z).ceil().subtract([1,1]))}});function ur(z){this.values=[].concat(z||[])}ur.prototype.query=function(z){var Z=this.getIndex(z);return this.values[Z]},ur.prototype.getIndex=function(Z){this.dirty&&this.sort();for(var fe,Be,te=0,se=this.values.length-1;te<=se;)if(fe=(te+se)/2|0,+(Be=this.values[Math.round(fe)]).value<+Z)te=fe+1;else{if(!(+Be.value>+Z))return fe;se=fe-1}return Math.abs(~se)},ur.prototype.between=function(Z,te){var se=this.getIndex(Z),fe=this.getIndex(te);if(0===se&&0===fe)return[];for(;this.values[se-1]&&this.values[se-1].value===Z;)se--;for(;this.values[fe+1]&&this.values[fe+1].value===te;)fe++;return this.values[fe]&&this.values[fe].value===te&&this.values[fe+1]&&fe++,this.values.slice(se,fe)},ur.prototype.insert=function(Z){return this.values.splice(this.getIndex(Z.value),0,Z),this},ur.prototype.bulkAdd=function(Z,te){return this.values=this.values.concat([].concat(Z||[])),te?this.sort():this.dirty=!0,this},ur.prototype.sort=function(){return this.values.sort(function(Z,te){return+te.value-+Z.value}).reverse(),this.dirty=!1,this};const Wr=ur;var Js=yr.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(z){if(yr.prototype.initialize.call(this,z),z=Zr(z),z=Ce.Util.setOptions(this,z),this.service=Le(z),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var Z=!1,te=0;te<this.options.fields.length;te++)this.options.fields[te].match(/^(OBJECTID|FID|OID|ID)$/i)&&(Z=!0);!1===Z&&gt("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Wr,this._endTimeIndex=new Wr):this.options.timeField&&(this._timeIndex=new Wr),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(z){return Po(z),this.service.metadata(function(Z,te){if(!Z){var se=te.supportedQueryFormats,fe=!1;(!1===this.service.options.isModern||this.options.fetchAllFeatures)&&(fe=!0),!fe&&se&&-1!==se.indexOf("geoJSON")&&(this.service.options.isModern=!0),te.objectIdField&&(this.service.options.idAttribute=te.objectIdField),!this.options.attribution&&z.attributionControl&&te.copyrightText&&(this.options.attribution=te.copyrightText,z.attributionControl.addAttribution(this.getAttribution()))}},this),z.on("zoomend",this._handleZoomChange,this),yr.prototype.onAdd.call(this,z)},onRemove:function(z){return Br(z),z.off("zoomend",this._handleZoomChange,this),yr.prototype.onRemove.call(this,z)},getAttribution:function(){return this.options.attribution},createCell:function(z,Z){this._visibleZoom()&&this._requestFeatures(z,Z)},_requestFeatures:function(z,Z,te,se){this._activeRequests++,se=se||0;var fe=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:z},!0),this._buildQuery(z,se).run(function(Be,Ne,Tt){Tt&&Tt.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===fe&&(!Be&&Ne&&Ne.features.length&&Ce.Util.requestAnimFrame(Ce.Util.bind(function(){this._addFeatures(Ne.features,Z),this._postProcessFeatures(z)},this)),!Be&&Ne&&!Ne.features.length&&this._postProcessFeatures(z),Be&&this._postProcessFeatures(z),te&&te.call(this,Be,Ne),Tt&&(Tt.exceededTransferLimit||Tt.properties&&Tt.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(z,Z,te,se+Ne.features.length))},this)},_postProcessFeatures:function(z){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:z})},_cacheKey:function(z){return z.z+":"+z.x+":"+z.y},_addFeatures:function(z,Z){if(Z){var te=this._cacheKey(Z);this._cache[te]=this._cache[te]||[]}for(var se=z.length-1;se>=0;se--){var fe=z[se].id;-1===this._currentSnapshot.indexOf(fe)&&this._currentSnapshot.push(fe),typeof te<"u"&&-1===this._cache[te].indexOf(fe)&&this._cache[te].push(fe)}this.options.timeField&&this._buildTimeIndexes(z),this.createLayers(z)},_buildQuery:function(z,Z){var te=this.service.query().intersects(z).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(Z))&&(te=te.offset(Z)),te.params.resultType="tile",this.options.requestParams&&Ce.Util.extend(te.params,this.options.requestParams),this.options.simplifyFactor&&te.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&te.between(this.options.from,this.options.to),te},setWhere:function(z,Z,te){this.options.where=z&&z.length?z:"1=1";for(var se=[],fe=[],Be=0,Ne=null,Tt=Ce.Util.bind(function(ft,kn){if(ft&&(Ne=ft),kn)for(var on=kn.features.length-1;on>=0;on--)fe.push(kn.features[on].id);--Be<=0&&this._visibleZoom()&&z===this.options.where&&(this._currentSnapshot=fe,Ce.Util.requestAnimFrame(Ce.Util.bind(function(){this.removeLayers(se),this.addLayers(fe),Z&&Z.call(te,Ne)},this)))},this),ln=this._currentSnapshot.length-1;ln>=0;ln--)se.push(this._currentSnapshot[ln]);for(var vn in this._cache={},this._cells){Be++;var dn=this._keyToCellCoords(vn),bt=this._cellCoordsToBounds(dn);this._requestFeatures(bt,dn,Tt)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(z,Z,te,se){var fe=this.options.from,Be=this.options.to,Ne=0,Tt=null,ln=Ce.Util.bind(function(ft){ft&&(Tt=ft),this._filterExistingFeatures(fe,Be,z,Z),Ne--,te&&Ne<=0&&te.call(se,Tt)},this);if(this.options.from=z,this.options.to=Z,this._filterExistingFeatures(fe,Be,z,Z),"server"===this.options.timeFilterMode)for(var vn in this._cells){Ne++;var dn=this._keyToCellCoords(vn),bt=this._cellCoordsToBounds(dn);this._requestFeatures(bt,dn,ln)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(z,Z,te,se){var fe=z&&Z?this._getFeaturesInTimeRange(z,Z):this._currentSnapshot,Be=this._getFeaturesInTimeRange(te,se);if(Be.indexOf)for(var Ne=0;Ne<Be.length;Ne++){var Tt=fe.indexOf(Be[Ne]);Tt>=0&&fe.splice(Tt,1)}Ce.Util.requestAnimFrame(Ce.Util.bind(function(){this.removeLayers(fe),this.addLayers(Be)},this))},_getFeaturesInTimeRange:function(z,Z){var se,te=[];if(this.options.timeField.start&&this.options.timeField.end){var fe=this._startTimeIndex.between(z,Z),Be=this._endTimeIndex.between(z,Z);se=fe.concat(Be)}else{if(!this._timeIndex)return gt("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];se=this._timeIndex.between(z,Z)}for(var Ne=se.length-1;Ne>=0;Ne--)te.push(se[Ne].id);return te},_buildTimeIndexes:function(z){var Z,te;if(this.options.timeField.start&&this.options.timeField.end){var se=[],fe=[];for(Z=z.length-1;Z>=0;Z--)se.push({id:(te=z[Z]).id,value:new Date(te.properties[this.options.timeField.start])}),fe.push({id:te.id,value:new Date(te.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(se),this._endTimeIndex.bulkAdd(fe)}else{var Be=[];for(Z=z.length-1;Z>=0;Z--)Be.push({id:(te=z[Z]).id,value:new Date(te.properties[this.options.timeField])});this._timeIndex.bulkAdd(Be)}},_featureWithinTimeRange:function(z){if(!this.options.from||!this.options.to)return!0;var Z=+this.options.from.valueOf(),te=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var se=+z.properties[this.options.timeField];return se>=Z&&se<=te}if(this.options.timeField.start&&this.options.timeField.end){var fe=+z.properties[this.options.timeField.start],Be=+z.properties[this.options.timeField.end];return fe>=Z&&fe<=te||Be>=Z&&Be<=te||fe<=Z&&Be>=te}},_visibleZoom:function(){if(!this._map)return!1;var z=this._map.getZoom();return!(z>this.options.maxZoom||z<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var z in this._cells){var te=this._cacheKey(this._cells[z].coords);this._cache[te]&&this.addLayers(this._cache[te])}else this.removeLayers(this._currentSnapshot),this._currentSnapshot=[]},authenticate:function(z){return this.service.authenticate(z),this},metadata:function(z,Z){return this.service.metadata(z,Z),this},query:function(){return this.service.query()},_getMetadata:function(z){this._metadata?z(void 0,this._metadata):this.metadata(Ce.Util.bind(function(te,se){this._metadata=se,z(te,this._metadata)},this))},addFeature:function(z,Z,te){this.addFeatures(z,Z,te)},addFeatures:function(z,Z,te){this._getMetadata(Ce.Util.bind(function(se,fe){if(se)Z&&Z.call(this,se,null);else{var Be=z.features?z.features:[z];this.service.addFeatures(z,Ce.Util.bind(function(Ne,Tt){if(!Ne){for(var ln=Be.length-1;ln>=0;ln--)Be[ln].properties[fe.objectIdField]=Be.length>1?Tt[ln].objectId:Tt.objectId,Be[ln].id=Be.length>1?Tt[ln].objectId:Tt.objectId;this._addFeatures(Be)}Z&&Z.call(te,Ne,Tt)},this))}},this))},updateFeature:function(z,Z,te){this.updateFeatures(z,Z,te)},updateFeatures:function(z,Z,te){var se=z.features?z.features:[z];this.service.updateFeatures(z,function(fe,Be){if(!fe){for(var Ne=se.length-1;Ne>=0;Ne--)this.removeLayers([se[Ne].id],!0);this._addFeatures(se)}Z&&Z.call(te,fe,Be)},this)},deleteFeature:function(z,Z,te){this.deleteFeatures(z,Z,te)},deleteFeatures:function(z,Z,te){return this.service.deleteFeatures(z,function(se,fe){var Be=fe.length?fe:[fe];if(!se&&Be.length>0)for(var Ne=Be.length-1;Ne>=0;Ne--)this.removeLayers([Be[Ne].objectId],!0);Z&&Z.call(te,se,fe)},this)}}),Ca=Js.extend({options:{cacheLayers:!0},initialize:function(z){z.apikey&&(z.token=z.apikey),Js.prototype.initialize.call(this,z),this._originalStyle=this.options.style,this._layers={}},onRemove:function(z){for(var Z in this._layers)z.removeLayer(this._layers[Z]),this.fire("removefeature",{feature:this._layers[Z].feature,permanent:!1},!0);return Js.prototype.onRemove.call(this,z)},createNewLayer:function(z){var Z=Ce.GeoJSON.geometryToLayer(z,this.options);return Z&&(Z.defaultOptions=Z.options),Z},_updateLayer:function(z,Z){var te=[],se=this.options.coordsToLatLng||Ce.GeoJSON.coordsToLatLng;switch(Z.properties&&(z.feature.properties=Z.properties),Z.geometry.type){case"Point":te=Ce.GeoJSON.coordsToLatLng(Z.geometry.coordinates),z.setLatLng(te);break;case"LineString":te=Ce.GeoJSON.coordsToLatLngs(Z.geometry.coordinates,0,se),z.setLatLngs(te);break;case"MultiLineString":case"Polygon":te=Ce.GeoJSON.coordsToLatLngs(Z.geometry.coordinates,1,se),z.setLatLngs(te);break;case"MultiPolygon":te=Ce.GeoJSON.coordsToLatLngs(Z.geometry.coordinates,2,se),z.setLatLngs(te)}this.redraw(z.feature.id)},createLayers:function(z){for(var Z=z.length-1;Z>=0;Z--){var fe,te=z[Z],se=this._layers[te.id];this._visibleZoom()&&se&&!this._map.hasLayer(se)&&(!this.options.timeField||this._featureWithinTimeRange(te))&&(this._map.addLayer(se),this.fire("addfeature",{feature:se.feature},!0)),se&&(se.setLatLngs||se.setLatLng)&&this._updateLayer(se,te),se||((fe=this.createNewLayer(te))?(fe.feature=te,fe.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(fe.feature,fe),this._layers[fe.feature.id]=fe,this.setFeatureStyle(fe.feature.id,this.options.style),this.fire("createfeature",{feature:fe.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(te))&&this._map.addLayer(fe)):gt("invalid GeoJSON encountered"))}},addLayers:function(z){for(var Z=z.length-1;Z>=0;Z--){var te=this._layers[z[Z]];te&&(!this.options.timeField||this._featureWithinTimeRange(te.feature))&&(this._map.addLayer(te),this.fire("addfeature",{feature:te.feature},!0))}},removeLayers:function(z,Z){for(var te=z.length-1;te>=0;te--){var se=z[te],fe=this._layers[se];fe&&(this.fire("removefeature",{feature:fe.feature,permanent:Z},!0),this._map.removeLayer(fe)),fe&&Z&&delete this._layers[se]}},cellEnter:function(z,Z){this._visibleZoom()&&!this._zooming&&this._map&&Ce.Util.requestAnimFrame(Ce.Util.bind(function(){var te=this._cacheKey(Z),se=this._cellCoordsToKey(Z),fe=this._cache[te];this._activeCells[se]&&fe&&this.addLayers(fe)},this))},cellLeave:function(z,Z){this._zooming||Ce.Util.requestAnimFrame(Ce.Util.bind(function(){if(this._map){var te=this._cacheKey(Z),se=this._cellCoordsToKey(Z),fe=this._cache[te],Be=this._map.getBounds();if(!this._activeCells[se]&&fe){for(var Ne=!0,Tt=0;Tt<fe.length;Tt++){var ln=this._layers[fe[Tt]];ln&&ln.getBounds&&Be.intersects(ln.getBounds())&&(Ne=!1)}Ne&&this.removeLayers(fe,!this.options.cacheLayers),!this.options.cacheLayers&&Ne&&(delete this._cache[te],delete this._cells[se],delete this._activeCells[se])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(z){this.resetFeatureStyle(z.feature.id)},this),this},setStyle:function(z){return this.options.style=z,this.eachFeature(function(Z){this.setFeatureStyle(Z.feature.id,z)},this),this},resetFeatureStyle:function(z){var Z=this._layers[z],te=this._originalStyle||Ce.Path.prototype.options;return Z&&(Ce.Util.extend(Z.options,Z.defaultOptions),this.setFeatureStyle(z,te)),this},setFeatureStyle:function(z,Z){var te=this._layers[z];return"function"==typeof Z&&(Z=Z(te.feature)),te.setStyle&&te.setStyle(Z),this},eachActiveFeature:function(z,Z){if(this._map){var te=this._map.getBounds();for(var se in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[se].feature.id)&&("function"==typeof this._layers[se].getLatLng&&te.contains(this._layers[se].getLatLng())||"function"==typeof this._layers[se].getBounds&&te.intersects(this._layers[se].getBounds()))&&z.call(Z,this._layers[se])}return this},eachFeature:function(z,Z){for(var te in this._layers)z.call(Z,this._layers[te]);return this},getFeature:function(z){return this._layers[z]},bringToBack:function(){this.eachFeature(function(z){z.bringToBack&&z.bringToBack()})},bringToFront:function(){this.eachFeature(function(z){z.bringToFront&&z.bringToFront()})},redraw:function(z){return z&&this._redraw(z),this},_redraw:function(z){var Z=this._layers[z],te=Z.feature;if(Z&&Z.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var se=this.options.pointToLayer(te,(0,Ce.latLng)(te.geometry.coordinates[1],te.geometry.coordinates[0]));Z.setIcon(se.options.icon)}if(Z&&Z.setStyle&&this.options.pointToLayer){var Be=this.options.pointToLayer(te,(0,Ce.latLng)(te.geometry.coordinates[1],te.geometry.coordinates[0]));this.setFeatureStyle(te.id,Be.options)}Z&&Z.setStyle&&this.options.style&&this.resetFeatureStyle(te.id)},openPopup(z){return this._popup&&this._popup._prepareOpen(z||this._latlng)&&this._popup.openOn(this._map),this},openTooltip(z){return this._tooltip&&this._tooltip._prepareOpen(z)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this}});function ea(z){return new Ca(z)}var Pi="3.0.10"},690:()=>{var fi,Ot,V;fi=window,Ot=document,L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(V,q){this._map=V,this._container=V._container,this._overlayPane=V._panes.overlayPane,this._popupPane=V._panes.popupPane,q&&q.shapeOptions&&(q.shapeOptions=L.Util.extend({},this.options.shapeOptions,q.shapeOptions)),L.setOptions(this,q);var y=L.version.split(".");1===parseInt(y[0],10)&&parseInt(y[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var V=this._map;V&&(L.DomUtil.disableTextSelection(),V.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(V){L.setOptions(this,V)},_fireCreatedEvent:function(V){this._map.fire(L.Draw.Event.CREATED,{layer:V,layerType:this.type})},_cancelDrawing:function(V){27===V.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(V,q){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,q&&q.drawError&&(q.drawError=L.Util.extend({},this.options.drawError,q.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,V,q)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var V=this._markers.pop(),q=this._poly,y=q.getLatLngs(),Ve=y.splice(-1,1)[0];this._poly.setLatLngs(y),this._markerGroup.removeLayer(V),q.getLatLngs().length<2&&this._map.removeLayer(q),this._vertexChanged(Ve,!1)}},addVertex:function(V){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(V)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(V)),this._poly.addLatLng(V),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(V,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var V=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),q=this._poly.newLatLngIntersects(V[V.length-1]);!this.options.allowIntersection&&q||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(V){var q=this._map.mouseEventToLayerPoint(V.originalEvent),y=this._map.layerPointToLatLng(q);this._currentLatLng=y,this._updateTooltip(y),this._updateGuide(q),this._mouseMarker.setLatLng(y),L.DomEvent.preventDefault(V.originalEvent)},_vertexChanged:function(V,q){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(V,q),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(V){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(V),this._clickHandled=!0,this._disableNewMarkers();var q=V.originalEvent;this._startPoint.call(this,q.clientX,q.clientY)}},_startPoint:function(V,q){this._mouseDownOrigin=L.point(V,q)},_onMouseUp:function(V){var q=V.originalEvent;this._endPoint.call(this,q.clientX,q.clientY,V),this._clickHandled=null},_endPoint:function(V,q,y){if(this._mouseDownOrigin){var Ve=L.point(V,q).distanceTo(this._mouseDownOrigin),pe=this._calculateFinishDistance(y.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(y.latlng),this._finishShape()):pe<10&&L.Browser.touch?this._finishShape():Math.abs(Ve)<9*(fi.devicePixelRatio||1)&&this.addVertex(y.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(V){var q,y,Ve=V.originalEvent;!Ve.touches||!Ve.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(q=Ve.touches[0].clientX,y=Ve.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,q,y),this._endPoint.call(this,q,y,V),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(V){var q;if(this._markers.length>0){var y;if(this.type===L.Draw.Polyline.TYPE)y=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;y=this._markers[0]}var Ve=this._map.latLngToContainerPoint(y.getLatLng()),pe=new L.Marker(V,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),lt=this._map.latLngToContainerPoint(pe.getLatLng());q=Ve.distanceTo(lt)}else q=1/0;return q},_updateFinishHandler:function(){var V=this._markers.length;V>1&&this._markers[V-1].on("click",this._finishShape,this),V>2&&this._markers[V-2].off("click",this._finishShape,this)},_createMarker:function(V){var q=new L.Marker(V,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(q),q},_updateGuide:function(V){var q=this._markers?this._markers.length:0;q>0&&(V=V||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[q-1].getLatLng()),V))},_updateTooltip:function(V){var q=this._getTooltipText();V&&this._tooltip.updatePosition(V),this._errorShown||this._tooltip.updateContent(q)},_drawGuide:function(V,q){var y,Ve,pe,lt=Math.floor(Math.sqrt(Math.pow(q.x-V.x,2)+Math.pow(q.y-V.y,2))),Ue=this.options.maxGuideLineLength,We=lt>Ue?lt-Ue:this.options.guidelineDistance;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));We<lt;We+=this.options.guidelineDistance)y=We/lt,Ve={x:Math.floor(V.x*(1-y)+y*q.x),y:Math.floor(V.y*(1-y)+y*q.y)},(pe=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(pe,Ve)},_updateGuideColor:function(V){if(this._guidesContainer)for(var q=0,y=this._guidesContainer.childNodes.length;q<y;q++)this._guidesContainer.childNodes[q].style.backgroundColor=V},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var V,q;return 0===this._markers.length?V={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(q=this.options.showLength?this._getMeasurementString():"",V=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:q}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:q}),V},_updateRunningMeasure:function(V,q){var y,Ve,pe=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(y=pe-(q?2:1),Ve=L.GeometryUtil.isVersion07x()?V.distanceTo(this._markers[y].getLatLng())*(this.options.factor||1):this._map.distance(V,this._markers[y].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=Ve*(q?1:-1))},_getMeasurementString:function(){var V,q=this._currentLatLng,y=this._markers[this._markers.length-1].getLatLng();return V=L.GeometryUtil.isVersion07x()?y&&q&&q.distanceTo?this._measurementRunningTotal+q.distanceTo(y)*(this.options.factor||1):this._measurementRunningTotal||0:y&&q?this._measurementRunningTotal+this._map.distance(q,y)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(V,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var V=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,V)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(V,q){L.Draw.Polyline.prototype.initialize.call(this,V,q),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var V=this._markers.length;1===V&&this._markers[0].on("click",this._finishShape,this),V>2&&(this._markers[V-1].on("dblclick",this._finishShape,this),V>3&&this._markers[V-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var V,q;return 0===this._markers.length?V=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(V=L.drawLocal.draw.handlers.polygon.tooltip.cont,q=this._getMeasurementString()):(V=L.drawLocal.draw.handlers.polygon.tooltip.end,q=this._getMeasurementString()),{text:V,subtext:q}},_getMeasurementString:function(){var V=this._area,q="";return V||this.options.showLength?(this.options.showLength&&(q=L.Draw.Polyline.prototype._getMeasurementString.call(this)),V&&(q+="<br>"+L.GeometryUtil.readableArea(V,this.options.metric,this.options.precision)),q):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(V,q){var y;!this.options.allowIntersection&&this.options.showArea&&(y=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(y)),L.Draw.Polyline.prototype._vertexChanged.call(this,V,q)},_cleanUpShape:function(){var V=this._markers.length;V>0&&(this._markers[0].off("click",this._finishShape,this),V>2&&this._markers[V-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(V,q){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,V,q)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),Ot.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(Ot,"mouseup",this._onMouseUp,this),L.DomEvent.off(Ot,"touchend",this._onMouseUp,this),Ot.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(V){this._isDrawing=!0,this._startLatLng=V.latlng,L.DomEvent.on(Ot,"mouseup",this._onMouseUp,this).on(Ot,"touchend",this._onMouseUp,this).preventDefault(V.originalEvent)},_onMouseMove:function(V){var q=V.latlng;this._tooltip.updatePosition(q),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(q))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(V,q){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,V,q)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(V){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function r(V,q){for(;(V=V.parentElement)&&!V.classList.contains(q););return V}(V.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(V){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,V)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,V),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var V=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,V)},_getTooltipText:function(){var V,q,y,Ve=L.Draw.SimpleShape.prototype._getTooltipText.call(this),lt=this.options.showArea;return this._shape&&(V=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),q=L.GeometryUtil.geodesicArea(V),y=lt?L.GeometryUtil.readableArea(q,this.options.metric):""),{text:Ve.text,subtext:y}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(V,q){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,V,q)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(V){var q=V.latlng;this._tooltip.updatePosition(q),this._mouseMarker.setLatLng(q),this._marker?(q=this._mouseMarker.getLatLng(),this._marker.setLatLng(q)):(this._marker=this._createMarker(q),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(V){return new L.Marker(V,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(V){this._onMouseMove(V),this._onClick()},_fireCreatedEvent:function(){var V=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,V)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(V,q){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,V,q)},_fireCreatedEvent:function(){var V=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,V)},_createMarker:function(V){return new L.CircleMarker(V,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(V,q){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,V,q)},_drawShape:function(V){if(L.GeometryUtil.isVersion07x())var q=this._startLatLng.distanceTo(V);else q=this._map.distance(this._startLatLng,V);this._shape?this._shape.setRadius(q):(this._shape=new L.Circle(this._startLatLng,q,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var V=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,V)},_onMouseMove:function(V){var q,y=V.latlng,Ve=this.options.showRadius,pe=this.options.metric;if(this._tooltip.updatePosition(y),this._isDrawing){this._drawShape(y),q=this._shape.getRadius().toFixed(1);var lt="";Ve&&(lt=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(q,pe,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:lt})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(V,q){this._marker=V,L.setOptions(this,q)},addHooks:function(){var V=this._marker;V.dragging.enable(),V.on("dragend",this._onDragEnd,V),this._toggleMarkerHighlight()},removeHooks:function(){var V=this._marker;V.dragging.disable(),V.off("dragend",this._onDragEnd,V),this._toggleMarkerHighlight()},_onDragEnd:function(V){var q=V.target;q.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:q})},_toggleMarkerHighlight:function(){var V=this._marker._icon;V&&(V.style.display="none",L.DomUtil.hasClass(V,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(V,"leaflet-edit-marker-selected"),this._offsetMarker(V,-4)):(L.DomUtil.addClass(V,"leaflet-edit-marker-selected"),this._offsetMarker(V,4)),V.style.display="")},_offsetMarker:function(V,q){var y=parseInt(V.style.marginTop,10)-q,Ve=parseInt(V.style.marginLeft,10)-q;V.style.marginTop=y+"px",V.style.marginLeft=Ve+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(V){this.latlngs=[V._latlngs],V._holes&&(this.latlngs=this.latlngs.concat(V._holes)),this._poly=V,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(V){for(var q=0;q<this._verticesHandlers.length;q++)V(this._verticesHandlers[q])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(V){V.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(V){V.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(V){V.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var V=0;V<this.latlngs.length;V++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[V],this._poly.options.poly))},_updateLatLngs:function(V){this.latlngs=[V.layer._latlngs],V.layer._holes&&(this.latlngs=this.latlngs.concat(V.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(V,q,y){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=V,y&&y.drawError&&(y.drawError=L.Util.extend({},this.options.drawError,y.drawError)),this._latlngs=q,L.setOptions(this,y)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var V=this._poly,q=V._path;V instanceof L.Polygon||(V.options.fill=!1,V.options.editing&&(V.options.editing.fill=!1)),q&&V.options.editing&&V.options.editing.className&&(V.options.original.className&&V.options.original.className.split(" ").forEach(function(y){L.DomUtil.removeClass(q,y)}),V.options.editing.className.split(" ").forEach(function(y){L.DomUtil.addClass(q,y)})),V.setStyle(V.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var V=this._poly,q=V._path;q&&V.options.editing&&V.options.editing.className&&(V.options.editing.className.split(" ").forEach(function(y){L.DomUtil.removeClass(q,y)}),V.options.original.className&&V.options.original.className.split(" ").forEach(function(y){L.DomUtil.addClass(q,y)})),V.setStyle(V.options.original),V._map&&(V._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var V,q,y,Ve,lt,Ce,pe=this._defaultShape();for(V=0,y=pe.length;V<y;V++)(Ve=this._createMarker(pe[V],V)).on("click",this._onMarkerClick,this),Ve.on("contextmenu",this._onContextMenu,this),this._markers.push(Ve);for(V=0,q=y-1;V<y;q=V++)(0!==V||L.Polygon&&this._poly instanceof L.Polygon)&&(this._createMiddleMarker(lt=this._markers[q],Ce=this._markers[V]),this._updatePrevNext(lt,Ce))},_createMarker:function(V,q){var y=new L.Marker.Touch(V,{draggable:!0,icon:this.options.icon});return y._origLatLng=V,y._index=q,y.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(y),y},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var V=this._defaultShape(),q=[].splice.apply(V,arguments);return this._poly._convertLatLngs(V,!0),this._poly.redraw(),q},_removeMarker:function(V){var q=V._index;this._markerGroup.removeLayer(V),this._markers.splice(q,1),this._spliceLatLngs(q,1),this._updateIndexes(q,-1),V.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(V){var q=V.target,y=this._poly,Ve=L.LatLngUtil.cloneLatLng(q._origLatLng);if(L.extend(q._origLatLng,q._latlng),y.options.poly){var pe=y._map._editTooltip;if(!y.options.poly.allowIntersection&&y.intersects()){L.extend(q._origLatLng,Ve),q.setLatLng(Ve);var lt=y.options.color;y.setStyle({color:this.options.drawError.color}),pe&&pe.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){y.setStyle({color:lt}),pe&&pe.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}q._middleLeft&&q._middleLeft.setLatLng(this._getMiddleLatLng(q._prev,q)),q._middleRight&&q._middleRight.setLatLng(this._getMiddleLatLng(q,q._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var Ce=this._poly.getLatLngs();this._poly._convertLatLngs(Ce,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(V){var q=L.Polygon&&this._poly instanceof L.Polygon?4:3,y=V.target;this._defaultShape().length<q||(this._removeMarker(y),this._updatePrevNext(y._prev,y._next),y._middleLeft&&this._markerGroup.removeLayer(y._middleLeft),y._middleRight&&this._markerGroup.removeLayer(y._middleRight),y._prev&&y._next?this._createMiddleMarker(y._prev,y._next):y._prev?y._next||(y._prev._middleRight=null):y._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(V){this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:V.target,layers:this._markerGroup,poly:this._poly}),L},_onTouchMove:function(V){var q=this._map.mouseEventToLayerPoint(V.originalEvent.touches[0]),y=this._map.layerPointToLatLng(q),Ve=V.target;L.extend(Ve._origLatLng,y),Ve._middleLeft&&Ve._middleLeft.setLatLng(this._getMiddleLatLng(Ve._prev,Ve)),Ve._middleRight&&Ve._middleRight.setLatLng(this._getMiddleLatLng(Ve,Ve._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(V,q){this._markerGroup.eachLayer(function(y){y._index>V&&(y._index+=q)})},_createMiddleMarker:function(V,q){var y,Ve,pe,lt=this._getMiddleLatLng(V,q),Ce=this._createMarker(lt);Ce.setOpacity(.6),V._middleRight=q._middleLeft=Ce,Ve=function(){Ce.off("touchmove",Ve,this);var Ue=q._index;Ce._index=Ue,Ce.off("click",y,this).on("click",this._onMarkerClick,this),lt.lat=Ce.getLatLng().lat,lt.lng=Ce.getLatLng().lng,this._spliceLatLngs(Ue,0,lt),this._markers.splice(Ue,0,Ce),Ce.setOpacity(1),this._updateIndexes(Ue,1),q._index++,this._updatePrevNext(V,Ce),this._updatePrevNext(Ce,q),this._poly.fire("editstart")},pe=function(){Ce.off("dragstart",Ve,this),Ce.off("dragend",pe,this),Ce.off("touchmove",Ve,this),this._createMiddleMarker(V,Ce),this._createMiddleMarker(Ce,q)},Ce.on("click",y=function(){Ve.call(this),pe.call(this),this._fireEdit()},this).on("dragstart",Ve,this).on("dragend",pe,this).on("touchmove",Ve,this),this._markerGroup.addLayer(Ce)},_updatePrevNext:function(V,q){V&&(V._next=q),q&&(q._prev=V)},_getMiddleLatLng:function(V,q){var y=this._poly._map,Ve=y.project(V.getLatLng()),pe=y.project(q.getLatLng());return y.unproject(Ve._add(pe)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(V,q){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=V,L.Util.setOptions(this,q)},addHooks:function(){var V=this._shape;this._shape._map&&(this._map=this._shape._map,V.setStyle(V.options.editing),V._map&&(this._map=V._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var V=this._shape;if(V.setStyle(V.options.original),V._map){this._unbindMarker(this._moveMarker);for(var q=0,y=this._resizeMarkers.length;q<y;q++)this._unbindMarker(this._resizeMarkers[q]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(V,q){var y=new L.Marker.Touch(V,{draggable:!0,icon:q,zIndexOffset:10});return this._bindMarker(y),this._markerGroup.addLayer(y),y},_bindMarker:function(V){V.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(V){V.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(V){V.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(V){var q=V.target,y=q.getLatLng();q===this._moveMarker?this._move(y):this._resize(y),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(V){V.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(V){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,V),"function"==typeof this._getCorners){var q=this._getCorners(),y=V.target,Ve=y._cornerIndex;y.setOpacity(0),this._oppositeCorner=q[(Ve+2)%4],this._toggleCornerMarkers(0,Ve)}this._shape.fire("editstart")},_onTouchMove:function(V){var q=this._map.mouseEventToLayerPoint(V.originalEvent.touches[0]),y=this._map.layerPointToLatLng(q);return V.target===this._moveMarker?this._move(y):this._resize(y),this._shape.redraw(),!1},_onTouchEnd:function(V){V.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var q=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(q,this.options.moveIcon)},_createResizeMarker:function(){var V=this._getCorners();this._resizeMarkers=[];for(var q=0,y=V.length;q<y;q++)this._resizeMarkers.push(this._createMarker(V[q],this.options.resizeIcon)),this._resizeMarkers[q]._cornerIndex=q},_onMarkerDragStart:function(V){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,V);var q=this._getCorners(),Ve=V.target._cornerIndex;this._oppositeCorner=q[(Ve+2)%4],this._toggleCornerMarkers(0,Ve)},_onMarkerDragEnd:function(V){var y,Ve=V.target;Ve===this._moveMarker&&(y=this._shape.getBounds().getCenter(),Ve.setLatLng(y)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,V)},_move:function(V){for(var q,y=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),pe=this._shape.getBounds().getCenter(),lt=[],Ce=0,Ue=y.length;Ce<Ue;Ce++)lt.push([V.lat+(q=[y[Ce].lat-pe.lat,y[Ce].lng-pe.lng])[0],V.lng+q[1]]);this._shape.setLatLngs(lt),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(V){var q;this._shape.setBounds(L.latLngBounds(V,this._oppositeCorner)),q=this._shape.getBounds(),this._moveMarker.setLatLng(q.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var V=this._shape.getBounds();return[V.getNorthWest(),V.getNorthEast(),V.getSouthEast(),V.getSouthWest()]},_toggleCornerMarkers:function(V){for(var q=0,y=this._resizeMarkers.length;q<y;q++)this._resizeMarkers[q].setOpacity(V)},_repositionCornerMarkers:function(){for(var V=this._getCorners(),q=0,y=this._resizeMarkers.length;q<y;q++)this._resizeMarkers[q].setLatLng(V[q])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var V=this._shape.getLatLng();this._moveMarker=this._createMarker(V,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(V){if(this._resizeMarkers.length){var q=this._getResizeMarkerPoint(V);this._resizeMarkers[0].setLatLng(q)}this._shape.setLatLng(V),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var V=this._shape.getLatLng(),q=this._getResizeMarkerPoint(V);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(q,this.options.resizeIcon))},_getResizeMarkerPoint:function(V){var q=this._shape._radius*Math.cos(Math.PI/4),y=this._map.project(V);return this._map.unproject([y.x+q,y.y-q])},_resize:function(V){var q=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=q.distanceTo(V):radius=this._map.distance(q,V),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(V){this._map=V,this._container=V._container,this._pane=V._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(V,q){var y={};if(void 0!==V.touches){if(!V.touches.length)return;y=V.touches[0]}else if("touch"!==V.pointerType||(y=V,!this._filterClick(V)))return;var Ve=this._map.mouseEventToContainerPoint(y),pe=this._map.mouseEventToLayerPoint(y),lt=this._map.layerPointToLatLng(pe);this._map.fire(q,{latlng:lt,layerPoint:pe,containerPoint:Ve,pageX:y.pageX,pageY:y.pageY,originalEvent:V})},_filterClick:function(V){var q=V.timeStamp||V.originalEvent.timeStamp,y=L.DomEvent._lastClick&&q-L.DomEvent._lastClick;return y&&y>100&&y<500||V.target._simulatedClick&&!V._simulated?(L.DomEvent.stop(V),!1):(L.DomEvent._lastClick=q,!0)},_onTouchStart:function(V){this._map._loaded&&this._touchEvent(V,"touchstart")},_onTouchEnd:function(V){this._map._loaded&&this._touchEvent(V,"touchend")},_onTouchCancel:function(V){if(this._map._loaded){var q="touchcancel";this._detectIE()&&(q="pointercancel"),this._touchEvent(V,q)}},_onTouchLeave:function(V){this._map._loaded&&this._touchEvent(V,"touchleave")},_onTouchMove:function(V){this._map._loaded&&this._touchEvent(V,"touchmove")},_detectIE:function(){var V=fi.navigator.userAgent,q=V.indexOf("MSIE ");if(q>0)return parseInt(V.substring(q+5,V.indexOf(".",q)),10);if(V.indexOf("Trident/")>0){var y=V.indexOf("rv:");return parseInt(V.substring(y+3,V.indexOf(".",y)),10)}var Ve=V.indexOf("Edge/");return Ve>0&&parseInt(V.substring(Ve+5,V.indexOf(".",Ve)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var V=this._icon,q=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];q.concat(this._detectIE?["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]:["touchcancel"]),L.DomUtil.addClass(V,"leaflet-clickable"),L.DomEvent.on(V,"click",this._onMouseClick,this),L.DomEvent.on(V,"keypress",this._onKeyPress,this);for(var y=0;y<q.length;y++)L.DomEvent.on(V,q[y],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var V=fi.navigator.userAgent,q=V.indexOf("MSIE ");if(q>0)return parseInt(V.substring(q+5,V.indexOf(".",q)),10);if(V.indexOf("Trident/")>0){var y=V.indexOf("rv:");return parseInt(V.substring(y+3,V.indexOf(".",y)),10)}var Ve=V.indexOf("Edge/");return Ve>0&&parseInt(V.substring(Ve+5,V.indexOf(".",Ve)),10)}}),L.LatLngUtil={cloneLatLngs:function(V){for(var q=[],y=0,Ve=V.length;y<Ve;y++)Array.isArray(V[y])?q.push(L.LatLngUtil.cloneLatLngs(V[y])):q.push(this.cloneLatLng(V[y]));return q},cloneLatLng:function(V){return L.latLng(V.lat,V.lng)}},V={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(q){var y,Ve,pe=q.length,lt=0,Ce=Math.PI/180;if(pe>2){for(var Ue=0;Ue<pe;Ue++)lt+=((Ve=q[(Ue+1)%pe]).lng-(y=q[Ue]).lng)*Ce*(2+Math.sin(y.lat*Ce)+Math.sin(Ve.lat*Ce));lt=6378137*lt*6378137/2}return Math.abs(lt)},formattedNumber:function(q,y){var Ve=parseFloat(q).toFixed(y),pe=L.drawLocal.format&&L.drawLocal.format.numeric,lt=pe&&pe.delimiters,Ce=lt&&lt.thousands,Ue=lt&&lt.decimal;if(Ce||Ue){var We=Ve.split(".");Ve=Ce?We[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+Ce):We[0],Ue=Ue||".",We.length>1&&(Ve=Ve+Ue+We[1])}return Ve},readableArea:function(q,y,Ce){var pe,lt;return Ce=L.Util.extend({},V,Ce),y?(lt=["ha","m"],type=typeof y,"string"===type?lt=[y]:"boolean"!==type&&(lt=y),pe=q>=1e6&&-1!==lt.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*q,Ce.km)+" km\xb2":q>=1e4&&-1!==lt.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*q,Ce.ha)+" ha":L.GeometryUtil.formattedNumber(q,Ce.m)+" m\xb2"):pe=(q/=.836127)>=3097600?L.GeometryUtil.formattedNumber(q/3097600,Ce.mi)+" mi\xb2":q>=4840?L.GeometryUtil.formattedNumber(q/4840,Ce.ac)+" acres":L.GeometryUtil.formattedNumber(q,Ce.yd)+" yd\xb2",pe},readableDistance:function(q,y,Ve,pe,Ue){var Ce;switch(Ue=L.Util.extend({},V,Ue),y?"string"==typeof y?y:"metric":Ve?"feet":pe?"nauticalMile":"yards"){case"metric":Ce=q>1e3?L.GeometryUtil.formattedNumber(q/1e3,Ue.km)+" km":L.GeometryUtil.formattedNumber(q,Ue.m)+" m";break;case"feet":q*=3.28083,Ce=L.GeometryUtil.formattedNumber(q,Ue.ft)+" ft";break;case"nauticalMile":q*=.53996,Ce=L.GeometryUtil.formattedNumber(q/1e3,Ue.nm)+" nm";break;default:Ce=(q*=1.09361)>1760?L.GeometryUtil.formattedNumber(q/1760,Ue.mi)+" miles":L.GeometryUtil.formattedNumber(q,Ue.yd)+" yd"}return Ce},isVersion07x:function(){var q=L.version.split(".");return 0===parseInt(q[0],10)&&7===parseInt(q[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(V,q,y,Ve){return this._checkCounterclockwise(V,y,Ve)!==this._checkCounterclockwise(q,y,Ve)&&this._checkCounterclockwise(V,q,y)!==this._checkCounterclockwise(V,q,Ve)},_checkCounterclockwise:function(V,q,y){return(y.y-V.y)*(q.x-V.x)>(q.y-V.y)*(y.x-V.x)}}),L.Polyline.include({intersects:function(){var V,Ve=this._getProjectedPoints(),pe=Ve?Ve.length:0;if(this._tooFewPointsForIntersection())return!1;for(V=pe-1;V>=3;V--)if(this._lineSegmentsIntersectsRange(Ve[V-1],Ve[V],V-2))return!0;return!1},newLatLngIntersects:function(V,q){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(V),q)},newPointIntersects:function(V,q){var y=this._getProjectedPoints(),Ve=y?y.length:0,pe=y?y[Ve-1]:null,lt=Ve-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(pe,V,lt,q?1:0)},_tooFewPointsForIntersection:function(V){var q=this._getProjectedPoints(),y=q?q.length:0;return!q||(y+=V||0)<=3},_lineSegmentsIntersectsRange:function(V,q,y,Ve){var Ce=this._getProjectedPoints();Ve=Ve||0;for(var Ue=y;Ue>Ve;Ue--)if(L.LineUtil.segmentsIntersect(V,q,Ce[Ue-1],Ce[Ue]))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var V=[],q=this._defaultShape(),y=0;y<q.length;y++)V.push(this._map.latLngToLayerPoint(q[y]));return V}}),L.Polygon.include({intersects:function(){var V,pe=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||this._lineSegmentsIntersectsRange(pe[(V=pe.length)-1],pe[0],V-2,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(V){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var q;L.Control.prototype.initialize.call(this,V),this._toolbars={},L.DrawToolbar&&this.options.draw&&(q=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=q,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(q=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=q,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(V){var q,y=L.DomUtil.create("div","leaflet-draw"),Ve=!1;for(var pe in this._toolbars)this._toolbars.hasOwnProperty(pe)&&(q=this._toolbars[pe].addToolbar(V))&&(Ve||(L.DomUtil.hasClass(q,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(q.childNodes[0],"leaflet-draw-toolbar-top"),Ve=!0),y.appendChild(q));return y},onRemove:function(){for(var V in this._toolbars)this._toolbars.hasOwnProperty(V)&&this._toolbars[V].removeToolbar()},setDrawingOptions:function(V){for(var q in this._toolbars)this._toolbars[q]instanceof L.DrawToolbar&&this._toolbars[q].setOptions(V)},_toolbarEnabled:function(V){var q=V.target;for(var y in this._toolbars)this._toolbars[y]!==q&&this._toolbars[y].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(V){L.setOptions(this,V),this._modes={},this._actionButtons=[],this._activeMode=null;var q=L.version.split(".");1===parseInt(q[0],10)&&parseInt(q[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(V){var q,y=L.DomUtil.create("div","leaflet-draw-section"),Ve=0,pe=this._toolbarClass||"",lt=this.getModeHandlers(V);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=V,q=0;q<lt.length;q++)lt[q].enabled&&this._initModeHandler(lt[q].handler,this._toolbarContainer,Ve++,pe,lt[q].title);if(Ve)return this._lastButtonIndex=--Ve,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),y.appendChild(this._toolbarContainer),y.appendChild(this._actionsContainer),y},removeToolbar:function(){for(var V in this._modes)this._modes.hasOwnProperty(V)&&(this._disposeButton(this._modes[V].button,this._modes[V].handler.enable,this._modes[V].handler),this._modes[V].handler.disable(),this._modes[V].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var q=0,y=this._actionButtons.length;q<y;q++)this._disposeButton(this._actionButtons[q].button,this._actionButtons[q].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(V,q,y,Ve,pe){var lt=V.type;this._modes[lt]={},this._modes[lt].handler=V,this._modes[lt].button=this._createButton({type:lt,title:pe,className:Ve+"-"+lt,container:q,callback:this._modes[lt].handler.enable,context:this._modes[lt].handler}),this._modes[lt].buttonIndex=y,this._modes[lt].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!fi.MSStream},_createButton:function(V){var q=L.DomUtil.create("a",V.className||"",V.container),y=L.DomUtil.create("span","sr-only",V.container);q.href="#",q.appendChild(y),V.title&&(q.title=V.title,y.innerHTML=V.title),V.text&&(q.innerHTML=V.text,y.innerHTML=V.text);var Ve=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(q,"click",L.DomEvent.stopPropagation).on(q,"mousedown",L.DomEvent.stopPropagation).on(q,"dblclick",L.DomEvent.stopPropagation).on(q,"touchstart",L.DomEvent.stopPropagation).on(q,"click",L.DomEvent.preventDefault).on(q,Ve,V.callback,V.context),q},_disposeButton:function(V,q){var y=this._detectIOS()?"touchstart":"click";L.DomEvent.off(V,"click",L.DomEvent.stopPropagation).off(V,"mousedown",L.DomEvent.stopPropagation).off(V,"dblclick",L.DomEvent.stopPropagation).off(V,"touchstart",L.DomEvent.stopPropagation).off(V,"click",L.DomEvent.preventDefault).off(V,y,q)},_handlerActivated:function(V){this.disable(),this._activeMode=this._modes[V.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(V){var q,y,Ve,pe,lt=this._actionsContainer,Ce=this.getActions(V),Ue=Ce.length;for(y=0,Ve=this._actionButtons.length;y<Ve;y++)this._disposeButton(this._actionButtons[y].button,this._actionButtons[y].callback);for(this._actionButtons=[];lt.firstChild;)lt.removeChild(lt.firstChild);for(var We=0;We<Ue;We++)"enabled"in Ce[We]&&!Ce[We].enabled||(q=L.DomUtil.create("li","",lt),pe=this._createButton({title:Ce[We].title,text:Ce[We].text,container:q,callback:Ce[We].callback,context:Ce[We].context}),this._actionButtons.push({button:pe,callback:Ce[We].callback}))},_showActionsToolbar:function(){var V=this._activeMode.buttonIndex,q=this._lastButtonIndex,y=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=y+"px",0===V&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),V===q&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(V){this._map=V,this._popupPane=V._panes.popupPane,this._visible=!1,this._container=V.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(V){return this._container?(V.subtext=V.subtext||"",0!==V.subtext.length||this._singleLineLabel?V.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(V.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+V.subtext+"</span><br />":"")+"<span>"+V.text+"</span>",V.text||V.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(V){var q=this._map.latLngToLayerPoint(V),y=this._container;return this._container&&(this._visible&&(y.style.visibility="inherit"),L.DomUtil.setPosition(y,q)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(V){for(var q in this.options)this.options.hasOwnProperty(q)&&V[q]&&(V[q]=L.extend({},this.options[q],V[q]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,V)},getModeHandlers:function(V){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(V,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(V,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(V,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(V,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(V,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(V,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(V){return[{enabled:V.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:V.completeShape,context:V},{enabled:V.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:V.deleteLastVertex,context:V},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(V){for(var q in L.setOptions(this,V),this._modes)this._modes.hasOwnProperty(q)&&V.hasOwnProperty(q)&&this._modes[q].handler.setOptions(V[q])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(V){V.edit&&(void 0===V.edit.selectedPathOptions&&(V.edit.selectedPathOptions=this.options.edit.selectedPathOptions),V.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,V.edit.selectedPathOptions)),V.remove&&(V.remove=L.extend({},this.options.remove,V.remove)),V.poly&&(V.poly=L.extend({},this.options.poly,V.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,V),this._selectedFeatureCount=0},getModeHandlers:function(V){var q=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(V,{featureGroup:q,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(V,{featureGroup:q}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(V){var q=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return V.removeAllLayers&&q.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),q},addToolbar:function(V){var q=L.Toolbar.prototype.addToolbar.call(this,V);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),q},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var V,y=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(V=this._modes[L.EditToolbar.Edit.TYPE].button,y?L.DomUtil.removeClass(V,"leaflet-disabled"):L.DomUtil.addClass(V,"leaflet-disabled"),V.setAttribute("title",y?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(V=this._modes[L.EditToolbar.Delete.TYPE].button,y?L.DomUtil.removeClass(V,"leaflet-disabled"):L.DomUtil.addClass(V,"leaflet-disabled"),V.setAttribute("title",y?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(V,q){if(L.Handler.prototype.initialize.call(this,V),L.setOptions(this,q),this._featureGroup=q.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var y=L.version.split(".");1===parseInt(y[0],10)&&parseInt(y[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var V=this._map;V&&(V.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),V._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(V){this._revertLayer(V)},this)},save:function(){var V=new L.LayerGroup;this._featureGroup.eachLayer(function(q){q.edited&&(V.addLayer(q),q.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:V})},_backupLayer:function(V){var q=L.Util.stamp(V);this._uneditedLayerProps[q]||(V instanceof L.Polyline||V instanceof L.Polygon||V instanceof L.Rectangle?this._uneditedLayerProps[q]={latlngs:L.LatLngUtil.cloneLatLngs(V.getLatLngs())}:V instanceof L.Circle?this._uneditedLayerProps[q]={latlng:L.LatLngUtil.cloneLatLng(V.getLatLng()),radius:V.getRadius()}:(V instanceof L.Marker||V instanceof L.CircleMarker)&&(this._uneditedLayerProps[q]={latlng:L.LatLngUtil.cloneLatLng(V.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(V){var q=L.Util.stamp(V);V.edited=!1,this._uneditedLayerProps.hasOwnProperty(q)&&(V instanceof L.Polyline||V instanceof L.Polygon||V instanceof L.Rectangle?V.setLatLngs(this._uneditedLayerProps[q].latlngs):V instanceof L.Circle?(V.setLatLng(this._uneditedLayerProps[q].latlng),V.setRadius(this._uneditedLayerProps[q].radius)):(V instanceof L.Marker||V instanceof L.CircleMarker)&&V.setLatLng(this._uneditedLayerProps[q].latlng),V.fire("revert-edited",{layer:V}))},_enableLayerEdit:function(V){var q,y,Ve=V.layer||V.target||V;this._backupLayer(Ve),this.options.poly&&(y=L.Util.extend({},this.options.poly),Ve.options.poly=y),this.options.selectedPathOptions&&((q=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(q.color=Ve.options.color,q.fillColor=Ve.options.fillColor),Ve.options.original=L.extend({},Ve.options),Ve.options.editing=q),Ve instanceof L.Marker?(Ve.editing&&Ve.editing.enable(),Ve.dragging.enable(),Ve.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):Ve.editing.enable()},_disableLayerEdit:function(V){var q=V.layer||V.target||V;q.edited=!1,q.editing&&q.editing.disable(),delete q.options.editing,delete q.options.original,this._selectedPathOptions&&(q instanceof L.Marker?this._toggleMarkerHighlight(q):(q.setStyle(q.options.previousOptions),delete q.options.previousOptions)),q instanceof L.Marker?(q.dragging.disable(),q.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):q.editing.disable()},_onMouseMove:function(V){this._tooltip.updatePosition(V.latlng)},_onMarkerDragEnd:function(V){var q=V.target;q.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:q})},_onTouchMove:function(V){var y=this._map.mouseEventToLayerPoint(V.originalEvent.changedTouches[0]),Ve=this._map.layerPointToLatLng(y);V.target.setLatLng(Ve)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(V,q){if(L.Handler.prototype.initialize.call(this,V),L.Util.setOptions(this,q),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var y=L.version.split(".");1===parseInt(y[0],10)&&parseInt(y[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var V=this._map;V&&(V.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(V){this._deletableLayers.addLayer(V),V.fire("revert-deleted",{layer:V})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(V){this._removeLayer({layer:V})},this),this.save()},_enableLayerDelete:function(V){(V.layer||V.target||V).on("click",this._removeLayer,this)},_disableLayerDelete:function(V){var q=V.layer||V.target||V;q.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(q)},_removeLayer:function(V){var q=V.layer||V.target||V;this._deletableLayers.removeLayer(q),this._deletedLayers.addLayer(q),q.fire("deleted")},_onMouseMove:function(V){this._tooltip.updatePosition(V.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})},407:function(fi,Ot){!function(Me){"use strict";function V(p){var x,P,U,J;for(P=1,U=arguments.length;P<U;P++)for(x in J=arguments[P])p[x]=J[x];return p}var q=Object.create||function(){function p(){}return function(x){return p.prototype=x,new p}}();function y(p,x){var P=Array.prototype.slice;if(p.bind)return p.bind.apply(p,P.call(arguments,1));var U=P.call(arguments,2);return function(){return p.apply(x,U.length?U.concat(P.call(arguments)):arguments)}}var Ve=0;function pe(p){return"_leaflet_id"in p||(p._leaflet_id=++Ve),p._leaflet_id}function lt(p,x,P){var U,J,ue,Pe;return Pe=function(){U=!1,J&&(ue.apply(P,J),J=!1)},ue=function(){U?J=arguments:(p.apply(P,arguments),setTimeout(Pe,x),U=!0)},ue}function Ce(p,x,P){var U=x[1],J=x[0],ue=U-J;return p===U&&P?p:((p-J)%ue+ue)%ue+J}function Ue(){return!1}function We(p,x){if(!1===x)return p;var P=Math.pow(10,void 0===x?6:x);return Math.round(p*P)/P}function Ye(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function ct(p){return Ye(p).split(/\s+/)}function it(p,x){for(var P in Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?q(p.options):{}),x)p.options[P]=x[P];return p.options}function Mt(p,x,P){var U=[];for(var J in p)U.push(encodeURIComponent(P?J.toUpperCase():J)+"="+encodeURIComponent(p[J]));return(x&&-1!==x.indexOf("?")?"&":"?")+U.join("&")}var Rn=/\{ *([\w_ -]+) *\}/g;function Zt(p,x){return p.replace(Rn,function(P,U){var J=x[U];if(void 0===J)throw new Error("No value provided for variable "+P);return"function"==typeof J&&(J=J(x)),J})}var gt=Array.isArray||function(p){return"[object Array]"===Object.prototype.toString.call(p)};function Zi(p,x){for(var P=0;P<p.length;P++)if(p[P]===x)return P;return-1}var ni="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Sr(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var Ui=0;function fn(p){var x=+new Date,P=Math.max(0,16-(x-Ui));return Ui=x+P,window.setTimeout(p,P)}var hi=window.requestAnimationFrame||Sr("RequestAnimationFrame")||fn,In=window.cancelAnimationFrame||Sr("CancelAnimationFrame")||Sr("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function bn(p,x,P){if(!P||hi!==fn)return hi.call(window,y(p,x));p.call(x)}function Ti(p){p&&In.call(window,p)}var Di={__proto__:null,extend:V,create:q,bind:y,get lastId(){return Ve},stamp:pe,throttle:lt,wrapNum:Ce,falseFn:Ue,formatNum:We,trim:Ye,splitWords:ct,setOptions:it,getParamString:Mt,template:Zt,isArray:gt,indexOf:Zi,emptyImageUrl:ni,requestFn:hi,cancelFn:In,requestAnimFrame:bn,cancelAnimFrame:Ti};function Jn(){}Jn.extend=function(p){var x=function(){it(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=x.__super__=this.prototype,U=q(P);for(var J in U.constructor=x,x.prototype=U,this)Object.prototype.hasOwnProperty.call(this,J)&&"prototype"!==J&&"__super__"!==J&&(x[J]=this[J]);return p.statics&&V(x,p.statics),p.includes&&(function Fn(p){if(!(typeof L>"u")&&L&&L.Mixin){p=gt(p)?p:[p];for(var x=0;x<p.length;x++)p[x]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(p.includes),V.apply(null,[U].concat(p.includes))),V(U,p),delete U.statics,delete U.includes,U.options&&(U.options=P.options?q(P.options):{},V(U.options,p.options)),U._initHooks=[],U.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var ue=0,Pe=U._initHooks.length;ue<Pe;ue++)U._initHooks[ue].call(this)}},x},Jn.include=function(p){var x=this.prototype.options;return V(this.prototype,p),p.options&&(this.prototype.options=x,this.mergeOptions(p.options)),this},Jn.mergeOptions=function(p){return V(this.prototype.options,p),this},Jn.addInitHook=function(p){var x=Array.prototype.slice.call(arguments,1),P="function"==typeof p?p:function(){this[p].apply(this,x)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};var gn={on:function(p,x,P){if("object"==typeof p)for(var U in p)this._on(U,p[U],x);else for(var J=0,ue=(p=ct(p)).length;J<ue;J++)this._on(p[J],x,P);return this},off:function(p,x,P){if(arguments.length)if("object"==typeof p)for(var U in p)this._off(U,p[U],x);else{p=ct(p);for(var J=1===arguments.length,ue=0,Pe=p.length;ue<Pe;ue++)J?this._off(p[ue]):this._off(p[ue],x,P)}else delete this._events;return this},_on:function(p,x,P,U){if("function"==typeof x){if(!1===this._listens(p,x,P)){P===this&&(P=void 0);var J={fn:x,ctx:P};U&&(J.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(J)}}else console.warn("wrong listener type: "+typeof x)},_off:function(p,x,P){var U,J,ue;if(this._events&&(U=this._events[p])){if(1===arguments.length){if(this._firingCount)for(J=0,ue=U.length;J<ue;J++)U[J].fn=Ue;return void delete this._events[p]}if("function"!=typeof x)return void console.warn("wrong listener type: "+typeof x);var Pe=this._listens(p,x,P);!1!==Pe&&(this._firingCount&&(U[Pe].fn=Ue,this._events[p]=U=U.slice()),U.splice(Pe,1))}},fire:function(p,x,P){if(!this.listens(p,P))return this;var U=V({},x,{type:p,target:this,sourceTarget:x&&x.sourceTarget||this});if(this._events){var J=this._events[p];if(J){this._firingCount=this._firingCount+1||1;for(var ue=0,Pe=J.length;ue<Pe;ue++){var tt=J[ue],at=tt.fn;tt.once&&this.off(p,at,tt.ctx),at.call(tt.ctx||this,U)}this._firingCount--}}return P&&this._propagateEvent(U),this},listens:function(p,x,P,U){"string"!=typeof p&&console.warn('"string" type argument expected');var J=x;"function"!=typeof x&&(U=!!x,J=void 0,P=void 0);var ue=this._events&&this._events[p];if(ue&&ue.length&&!1!==this._listens(p,J,P))return!0;if(U)for(var Pe in this._eventParents)if(this._eventParents[Pe].listens(p,x,P,U))return!0;return!1},_listens:function(p,x,P){if(!this._events)return!1;var U=this._events[p]||[];if(!x)return!!U.length;P===this&&(P=void 0);for(var J=0,ue=U.length;J<ue;J++)if(U[J].fn===x&&U[J].ctx===P)return J;return!1},once:function(p,x,P){if("object"==typeof p)for(var U in p)this._on(U,p[U],x,!0);else for(var J=0,ue=(p=ct(p)).length;J<ue;J++)this._on(p[J],x,P,!0);return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[pe(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[pe(p)],this},_propagateEvent:function(p){for(var x in this._eventParents)this._eventParents[x].fire(p.type,V({layer:p.target,propagatedFrom:p.target},p),!0)}};gn.addEventListener=gn.on,gn.removeEventListener=gn.clearAllEventListeners=gn.off,gn.addOneTimeEventListener=gn.once,gn.fireEvent=gn.fire,gn.hasEventListeners=gn.listens;var hn=Jn.extend(gn);function Un(p,x,P){this.x=P?Math.round(p):p,this.y=P?Math.round(x):x}var wa=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};function xn(p,x,P){return p instanceof Un?p:gt(p)?new Un(p[0],p[1]):null==p?p:"object"==typeof p&&"x"in p&&"y"in p?new Un(p.x,p.y):new Un(p,x,P)}function Ii(p,x){if(p)for(var P=x?[p,x]:p,U=0,J=P.length;U<J;U++)this.extend(P[U])}function qn(p,x){return!p||p instanceof Ii?p:new Ii(p,x)}function ji(p,x){if(p)for(var P=x?[p,x]:p,U=0,J=P.length;U<J;U++)this.extend(P[U])}function Ji(p,x){return p instanceof ji?p:new ji(p,x)}function Ci(p,x,P){if(isNaN(p)||isNaN(x))throw new Error("Invalid LatLng object: ("+p+", "+x+")");this.lat=+p,this.lng=+x,void 0!==P&&(this.alt=+P)}function Si(p,x,P){return p instanceof Ci?p:gt(p)&&"object"!=typeof p[0]?3===p.length?new Ci(p[0],p[1],p[2]):2===p.length?new Ci(p[0],p[1]):null:null==p?p:"object"==typeof p&&"lat"in p?new Ci(p.lat,"lng"in p?p.lng:p.lon,p.alt):void 0===x?null:new Ci(p,x,P)}Un.prototype={clone:function(){return new Un(this.x,this.y)},add:function(p){return this.clone()._add(xn(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract(xn(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new Un(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new Un(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=wa(this.x),this.y=wa(this.y),this},distanceTo:function(p){var x=(p=xn(p)).x-this.x,P=p.y-this.y;return Math.sqrt(x*x+P*P)},equals:function(p){return(p=xn(p)).x===this.x&&p.y===this.y},contains:function(p){return p=xn(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+We(this.x)+", "+We(this.y)+")"}},Ii.prototype={extend:function(p){var x,P;if(!p)return this;if(p instanceof Un||"number"==typeof p[0]||"x"in p)x=P=xn(p);else if(P=(p=qn(p)).max,!(x=p.min)||!P)return this;return this.min||this.max?(this.min.x=Math.min(x.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(x.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)):(this.min=x.clone(),this.max=P.clone()),this},getCenter:function(p){return xn((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return xn(this.min.x,this.max.y)},getTopRight:function(){return xn(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var x,P;return(p="number"==typeof p[0]||p instanceof Un?xn(p):qn(p))instanceof Ii?(x=p.min,P=p.max):x=P=p,x.x>=this.min.x&&P.x<=this.max.x&&x.y>=this.min.y&&P.y<=this.max.y},intersects:function(p){p=qn(p);var x=this.min,P=this.max,U=p.min,J=p.max;return J.x>=x.x&&U.x<=P.x&&J.y>=x.y&&U.y<=P.y},overlaps:function(p){p=qn(p);var x=this.min,P=this.max,U=p.min,J=p.max;return J.x>x.x&&U.x<P.x&&J.y>x.y&&U.y<P.y},isValid:function(){return!(!this.min||!this.max)},pad:function(p){var x=this.min,P=this.max,U=Math.abs(x.x-P.x)*p,J=Math.abs(x.y-P.y)*p;return qn(xn(x.x-U,x.y-J),xn(P.x+U,P.y+J))},equals:function(p){return!!p&&(p=qn(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight()))}},ji.prototype={extend:function(p){var U,J,x=this._southWest,P=this._northEast;if(p instanceof Ci)U=p,J=p;else{if(!(p instanceof ji))return p?this.extend(Si(p)||Ji(p)):this;if(J=p._northEast,!(U=p._southWest)||!J)return this}return x||P?(x.lat=Math.min(U.lat,x.lat),x.lng=Math.min(U.lng,x.lng),P.lat=Math.max(J.lat,P.lat),P.lng=Math.max(J.lng,P.lng)):(this._southWest=new Ci(U.lat,U.lng),this._northEast=new Ci(J.lat,J.lng)),this},pad:function(p){var x=this._southWest,P=this._northEast,U=Math.abs(x.lat-P.lat)*p,J=Math.abs(x.lng-P.lng)*p;return new ji(new Ci(x.lat-U,x.lng-J),new Ci(P.lat+U,P.lng+J))},getCenter:function(){return new Ci((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ci(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ci(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){p="number"==typeof p[0]||p instanceof Ci||"lat"in p?Si(p):Ji(p);var U,J,x=this._southWest,P=this._northEast;return p instanceof ji?(U=p.getSouthWest(),J=p.getNorthEast()):U=J=p,U.lat>=x.lat&&J.lat<=P.lat&&U.lng>=x.lng&&J.lng<=P.lng},intersects:function(p){p=Ji(p);var x=this._southWest,P=this._northEast,U=p.getSouthWest(),J=p.getNorthEast();return J.lat>=x.lat&&U.lat<=P.lat&&J.lng>=x.lng&&U.lng<=P.lng},overlaps:function(p){p=Ji(p);var x=this._southWest,P=this._northEast,U=p.getSouthWest(),J=p.getNorthEast();return J.lat>x.lat&&U.lat<P.lat&&J.lng>x.lng&&U.lng<P.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,x){return!!p&&(p=Ji(p),this._southWest.equals(p.getSouthWest(),x)&&this._northEast.equals(p.getNorthEast(),x))},isValid:function(){return!(!this._southWest||!this._northEast)}},Ci.prototype={equals:function(p,x){return!!p&&(p=Si(p),Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng))<=(void 0===x?1e-9:x))},toString:function(p){return"LatLng("+We(this.lat,p)+", "+We(this.lng,p)+")"},distanceTo:function(p){return _r.distance(this,Si(p))},wrap:function(){return _r.wrapLatLng(this)},toBounds:function(p){var x=180*p/40075017,P=x/Math.cos(Math.PI/180*this.lat);return Ji([this.lat-x,this.lng-P],[this.lat+x,this.lng+P])},clone:function(){return new Ci(this.lat,this.lng,this.alt)}};var p,Er={latLngToPoint:function(p,x){var P=this.projection.project(p),U=this.scale(x);return this.transformation._transform(P,U)},pointToLatLng:function(p,x){var P=this.scale(x),U=this.transformation.untransform(p,P);return this.projection.unproject(U)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var x=this.projection.bounds,P=this.scale(p);return new Ii(this.transformation.transform(x.min,P),this.transformation.transform(x.max,P))},infinite:!1,wrapLatLng:function(p){var x=this.wrapLng?Ce(p.lng,this.wrapLng,!0):p.lng;return new Ci(this.wrapLat?Ce(p.lat,this.wrapLat,!0):p.lat,x,p.alt)},wrapLatLngBounds:function(p){var x=p.getCenter(),P=this.wrapLatLng(x),U=x.lat-P.lat,J=x.lng-P.lng;if(0===U&&0===J)return p;var ue=p.getSouthWest(),Pe=p.getNorthEast();return new ji(new Ci(ue.lat-U,ue.lng-J),new Ci(Pe.lat-U,Pe.lng-J))}},_r=V({},Er,{wrapLng:[-180,180],R:6371e3,distance:function(p,x){var P=Math.PI/180,U=p.lat*P,J=x.lat*P,ue=Math.sin((x.lat-p.lat)*P/2),Pe=Math.sin((x.lng-p.lng)*P/2),tt=ue*ue+Math.cos(U)*Math.cos(J)*Pe*Pe,at=2*Math.atan2(Math.sqrt(tt),Math.sqrt(1-tt));return this.R*at}}),Yn={R:6378137,MAX_LATITUDE:85.0511287798,project:function(p){var x=Math.PI/180,P=this.MAX_LATITUDE,U=Math.max(Math.min(P,p.lat),-P),J=Math.sin(U*x);return new Un(this.R*p.lng*x,this.R*Math.log((1+J)/(1-J))/2)},unproject:function(p){var x=180/Math.PI;return new Ci((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*x,p.x*x/this.R)},bounds:(p=6378137*Math.PI,new Ii([-p,-p],[p,p]))};function Zr(p,x,P,U){if(gt(p))return this._a=p[0],this._b=p[1],this._c=p[2],void(this._d=p[3]);this._a=p,this._b=x,this._c=P,this._d=U}function Ho(p,x,P,U){return new Zr(p,x,P,U)}Zr.prototype={transform:function(p,x){return this._transform(p.clone(),x)},_transform:function(p,x){return p.x=(x=x||1)*(this._a*p.x+this._b),p.y=x*(this._c*p.y+this._d),p},untransform:function(p,x){return new Un((p.x/(x=x||1)-this._b)/this._a,(p.y/x-this._d)/this._c)}};var $o=V({},_r,{code:"EPSG:3857",projection:Yn,transformation:function(){var p=.5/(Math.PI*Yn.R);return Ho(p,.5,-p,.5)}()}),Wi=V({},$o,{code:"EPSG:900913"});function Po(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function Br(p,x){var U,J,ue,Pe,tt,at,P="";for(U=0,ue=p.length;U<ue;U++){for(J=0,Pe=(tt=p[U]).length;J<Pe;J++)P+=(J?"L":"M")+(at=tt[J]).x+" "+at.y;P+=x?Xe.svg?"z":"x":""}return P||"M0 0"}var Ke=document.documentElement.style,dt="ActiveXObject"in window,ze=dt&&!document.addEventListener,kt="msLaunchUri"in navigator&&!("documentMode"in document),xi=ut("webkit"),Dn=ut("android"),an=ut("android 2")||ut("android 3"),Gn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kr=Dn&&ut("Google")&&Gn<537&&!("AudioNode"in window),Or=!!window.opera,Mn=!kt&&ut("chrome"),qi=ut("gecko")&&!xi&&!Or&&!dt,Cn=!Mn&&ut("safari"),yn=ut("phantom"),It="OTransition"in Ke,Ko=0===navigator.platform.indexOf("Win"),Vn=dt&&"transition"in Ke,Qo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!an,Rr="MozPerspective"in Ke,Lt=!window.L_DISABLE_3D&&(Vn||Qo||Rr)&&!It&&!yn,Yt=typeof orientation<"u"||ut("mobile"),Ln=Yt&&xi,ei=Yt&&Qo,bo=!window.PointerEvent&&window.MSPointerEvent,Nn=!(!window.PointerEvent&&!bo),Fs="ontouchstart"in window||!!window.TouchEvent,we=!window.L_NO_TOUCH&&(Fs||Nn),ie=Yt&&Or,oe=Yt&&qi,me=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ve=function(){var p=!1;try{var x=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",Ue,x),window.removeEventListener("testPassiveEventSupport",Ue,x)}catch{}return p}(),De=!!document.createElement("canvas").getContext,Ge=!(!document.createElementNS||!Po("svg").createSVGRect),Oe=!!Ge&&function(){var p=document.createElement("div");return p.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(p.firstChild&&p.firstChild.namespaceURI)}(),Le=!Ge&&function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var x=p.firstChild;return x.style.behavior="url(#default#VML)",x&&"object"==typeof x.adj}catch{return!1}}();function ut(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var Xe={ie:dt,ielt9:ze,edge:kt,webkit:xi,android:Dn,android23:an,androidStock:kr,opera:Or,chrome:Mn,gecko:qi,safari:Cn,phantom:yn,opera12:It,win:Ko,ie3d:Vn,webkit3d:Qo,gecko3d:Rr,any3d:Lt,mobile:Yt,mobileWebkit:Ln,mobileWebkit3d:ei,msPointer:bo,pointer:Nn,touch:we,touchNative:Fs,mobileOpera:ie,mobileGecko:oe,retina:me,passiveEvents:ve,canvas:De,svg:Ge,vml:Le,inlineSvg:Oe,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Kt=Xe.msPointer?"MSPointerDown":"pointerdown",sn=Xe.msPointer?"MSPointerMove":"pointermove",Ht=Xe.msPointer?"MSPointerUp":"pointerup",Qt=Xe.msPointer?"MSPointerCancel":"pointercancel",Vt={touchstart:Kt,touchmove:sn,touchend:Ht,touchcancel:Qt},mi={touchstart:function Ca(p,x){x.MSPOINTER_TYPE_TOUCH&&x.pointerType===x.MSPOINTER_TYPE_TOUCH&&hr(x),Js(p,x)},touchmove:Js,touchend:Js,touchcancel:Js},di={},li=!1;function ci(p,x,P){return"touchstart"===x&&function Wr(){li||(document.addEventListener(Kt,Ni,!0),document.addEventListener(sn,yr,!0),document.addEventListener(Ht,ur,!0),document.addEventListener(Qt,ur,!0),li=!0)}(),mi[x]?(P=mi[x].bind(this,P),p.addEventListener(Vt[x],P,!1),P):(console.warn("wrong event specified:",x),Ue)}function Ni(p){di[p.pointerId]=p}function yr(p){di[p.pointerId]&&(di[p.pointerId]=p)}function ur(p){delete di[p.pointerId]}function Js(p,x){if(x.pointerType!==(x.MSPOINTER_TYPE_MOUSE||"mouse")){for(var P in x.touches=[],di)x.touches.push(di[P]);x.changedTouches=[x],p(x)}}var hc=200;var ta,ds,hl,na,Ts,Z=Yi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),te=Yi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),se="webkitTransition"===te||"OTransition"===te?te+"End":"transitionend";function fe(p){return"string"==typeof p?document.getElementById(p):p}function Be(p,x){var P=p.style[x]||p.currentStyle&&p.currentStyle[x];if((!P||"auto"===P)&&document.defaultView){var U=document.defaultView.getComputedStyle(p,null);P=U?U[x]:null}return"auto"===P?null:P}function Ne(p,x,P){var U=document.createElement(p);return U.className=x||"",P&&P.appendChild(U),U}function Tt(p){var x=p.parentNode;x&&x.removeChild(p)}function ln(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function vn(p){var x=p.parentNode;x&&x.lastChild!==p&&x.appendChild(p)}function dn(p){var x=p.parentNode;x&&x.firstChild!==p&&x.insertBefore(p,x.firstChild)}function bt(p,x){if(void 0!==p.classList)return p.classList.contains(x);var P=Xo(p);return P.length>0&&new RegExp("(^|\\s)"+x+"(\\s|$)").test(P)}function ft(p,x){if(void 0!==p.classList)for(var P=ct(x),U=0,J=P.length;U<J;U++)p.classList.add(P[U]);else if(!bt(p,x)){var ue=Xo(p);on(p,(ue?ue+" ":"")+x)}}function kn(p,x){void 0!==p.classList?p.classList.remove(x):on(p,Ye((" "+Xo(p)+" ").replace(" "+x+" "," ")))}function on(p,x){void 0===p.className.baseVal?p.className=x:p.className.baseVal=x}function Xo(p){return p.correspondingElement&&(p=p.correspondingElement),void 0===p.className.baseVal?p.className:p.className.baseVal}function Mi(p,x){"opacity"in p.style?p.style.opacity=x:"filter"in p.style&&function Ns(p,x){var P=!1,U="DXImageTransform.Microsoft.Alpha";try{P=p.filters.item(U)}catch{if(1===x)return}x=Math.round(100*x),P?(P.Enabled=100!==x,P.Opacity=x):p.style.filter+=" progid:"+U+"(opacity="+x+")"}(p,x)}function Yi(p){for(var x=document.documentElement.style,P=0;P<p.length;P++)if(p[P]in x)return p[P];return!1}function hs(p,x,P){var U=x||new Un(0,0);p.style[Z]=(Xe.ie3d?"translate("+U.x+"px,"+U.y+"px)":"translate3d("+U.x+"px,"+U.y+"px,0)")+(P?" scale("+P+")":"")}function fr(p,x){p._leaflet_pos=x,Xe.any3d?hs(p,x):(p.style.left=x.x+"px",p.style.top=x.y+"px")}function zn(p){return p._leaflet_pos||new Un(0,0)}if("onselectstart"in document)ta=function(){$n(window,"selectstart",hr)},ds=function(){Ai(window,"selectstart",hr)};else{var Es=Yi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ta=function(){if(Es){var p=document.documentElement.style;hl=p[Es],p[Es]="none"}},ds=function(){Es&&(document.documentElement.style[Es]=hl,hl=void 0)}}function qr(){$n(window,"dragstart",hr)}function Yr(){Ai(window,"dragstart",hr)}function Ha(p){for(;-1===p.tabIndex;)p=p.parentNode;p.style&&(Bl(),na=p,Ts=p.style.outline,p.style.outline="none",$n(window,"keydown",Bl))}function Bl(){na&&(na.style.outline=Ts,na=void 0,Ts=void 0,Ai(window,"keydown",Bl))}function er(p){do{p=p.parentNode}while(!(p.offsetWidth&&p.offsetHeight||p===document.body));return p}function Au(p){var x=p.getBoundingClientRect();return{x:x.width/p.offsetWidth||1,y:x.height/p.offsetHeight||1,boundingClientRect:x}}var Uc={__proto__:null,TRANSFORM:Z,TRANSITION:te,TRANSITION_END:se,get:fe,getStyle:Be,create:Ne,remove:Tt,empty:ln,toFront:vn,toBack:dn,hasClass:bt,addClass:ft,removeClass:kn,setClass:on,getClass:Xo,setOpacity:Mi,testProp:Yi,setTransform:hs,setPosition:fr,getPosition:zn,get disableTextSelection(){return ta},get enableTextSelection(){return ds},disableImageDrag:qr,enableImageDrag:Yr,preventOutline:Ha,restoreOutline:Bl,getSizedParentNode:er,getScale:Au};function $n(p,x,P,U){if(x&&"object"==typeof x)for(var J in x)dl(p,J,x[J],P);else for(var ue=0,Pe=(x=ct(x)).length;ue<Pe;ue++)dl(p,x[ue],P,U);return this}var Go="_leaflet_events";function Ai(p,x,P,U){if(1===arguments.length)ia(p),delete p[Go];else if(x&&"object"==typeof x)for(var J in x)oo(p,J,x[J],P);else if(x=ct(x),2===arguments.length)ia(p,function(tt){return-1!==Zi(x,tt)});else for(var ue=0,Pe=x.length;ue<Pe;ue++)oo(p,x[ue],P,U);return this}function ia(p,x){for(var P in p[Go]){var U=P.split(/\d/)[0];(!x||x(U))&&oo(p,U,null,null,P)}}var rr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function dl(p,x,P,U){var J=x+pe(P)+(U?"_"+pe(U):"");if(p[Go]&&p[Go][J])return this;var ue=function(tt){return P.call(U||p,tt||window.event)},Pe=ue;!Xe.touchNative&&Xe.pointer&&0===x.indexOf("touch")?ue=ci(p,x,ue):Xe.touch&&"dblclick"===x?ue=function Pi(p,x){p.addEventListener("dblclick",x);var U,P=0;function J(ue){if(1===ue.detail){if("mouse"!==ue.pointerType&&(!ue.sourceCapabilities||ue.sourceCapabilities.firesTouchEvents)){var Pe=Vl(ue);if(!Pe.some(function(at){return at instanceof HTMLLabelElement&&at.attributes.for})||Pe.some(function(at){return at instanceof HTMLInputElement||at instanceof HTMLSelectElement})){var tt=Date.now();tt-P<=hc?2==++U&&x(function ea(p){var P,U,x={};for(U in p)x[U]=(P=p[U])&&P.bind?P.bind(p):P;return p=x,x.type="dblclick",x.detail=2,x.isTrusted=!1,x._simulated=!0,x}(ue)):U=1,P=tt}}}else U=ue.detail}return p.addEventListener("click",J),{dblclick:x,simDblclick:J}}(p,ue):"addEventListener"in p?"touchstart"===x||"touchmove"===x||"wheel"===x||"mousewheel"===x?p.addEventListener(rr[x]||x,ue,!!Xe.passiveEvents&&{passive:!1}):"mouseenter"===x||"mouseleave"===x?p.addEventListener(rr[x],ue=function(tt){tt=tt||window.event,pl(p,tt)&&Pe(tt)},!1):p.addEventListener(x,Pe,!1):p.attachEvent("on"+x,ue),p[Go]=p[Go]||{},p[Go][J]=ue}function oo(p,x,P,U,J){J=J||x+pe(P)+(U?"_"+pe(U):"");var ue=p[Go]&&p[Go][J];if(!ue)return this;!Xe.touchNative&&Xe.pointer&&0===x.indexOf("touch")?function ir(p,x,P){Vt[x]?p.removeEventListener(Vt[x],P,!1):console.warn("wrong event specified:",x)}(p,x,ue):Xe.touch&&"dblclick"===x?function z(p,x){p.removeEventListener("dblclick",x.dblclick),p.removeEventListener("click",x.simDblclick)}(p,ue):"removeEventListener"in p?p.removeEventListener(rr[x]||x,ue,!1):p.detachEvent("on"+x,ue),p[Go][J]=null}function Nr(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function $a(p){return dl(p,"wheel",Nr),this}function Ao(p){return $n(p,"mousedown touchstart dblclick contextmenu",Nr),p._leaflet_disable_click=!0,this}function hr(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function On(p){return hr(p),Nr(p),this}function Vl(p){if(p.composedPath)return p.composedPath();for(var x=[],P=p.target;P;)x.push(P),P=P.parentNode;return x}function ps(p,x){if(!x)return new Un(p.clientX,p.clientY);var P=Au(x),U=P.boundingClientRect;return new Un((p.clientX-U.left)/P.x-x.clientLeft,(p.clientY-U.top)/P.y-x.clientTop)}var fs=Xe.linux&&Xe.chrome?window.devicePixelRatio:Xe.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Hc(p){return Xe.edge?p.wheelDeltaY/2:p.deltaY&&0===p.deltaMode?-p.deltaY/fs:p.deltaY&&1===p.deltaMode?20*-p.deltaY:p.deltaY&&2===p.deltaMode?60*-p.deltaY:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?20*-p.detail:p.detail?p.detail/-32765*60:0}function pl(p,x){var P=x.relatedTarget;if(!P)return!0;try{for(;P&&P!==p;)P=P.parentNode}catch{return!1}return P!==p}var dc={__proto__:null,on:$n,off:Ai,stopPropagation:Nr,disableScrollPropagation:$a,disableClickPropagation:Ao,preventDefault:hr,stop:On,getPropagationPath:Vl,getMousePosition:ps,getWheelDelta:Hc,isExternalTarget:pl,addListener:$n,removeListener:Ai},pc=hn.extend({run:function(p,x,P,U){this.stop(),this._el=p,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(U||.5,.2),this._startPos=zn(p),this._offset=x.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=bn(this._animate,this),this._step()},_step:function(p){var x=+new Date-this._startTime,P=1e3*this._duration;x<P?this._runFrame(this._easeOut(x/P),p):(this._runFrame(1),this._complete())},_runFrame:function(p,x){var P=this._startPos.add(this._offset.multiplyBy(p));x&&P._round(),fr(this._el,P),this.fire("step")},_complete:function(){Ti(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),Oi=hn.extend({options:{crs:$o,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,x){x=it(this,x),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=y(this._onResize,this),this._initEvents(),x.maxBounds&&this.setMaxBounds(x.maxBounds),void 0!==x.zoom&&(this._zoom=this._limitZoom(x.zoom)),x.center&&void 0!==x.zoom&&this.setView(Si(x.center),x.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=te&&Xe.any3d&&!Xe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$n(this._proxy,se,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,x,P){return x=void 0===x?this._zoom:this._limitZoom(x),p=this._limitCenter(Si(p),x,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&!0!==P&&(void 0!==P.animate&&(P.zoom=V({animate:P.animate},P.zoom),P.pan=V({animate:P.animate,duration:P.duration},P.pan)),this._zoom!==x?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,x,P.zoom):this._tryAnimatedPan(p,P.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(p,x,P.pan&&P.pan.noMoveStart),this)},setZoom:function(p,x){return this._loaded?this.setView(this.getCenter(),p,{zoom:x}):(this._zoom=p,this)},zoomIn:function(p,x){return this.setZoom(this._zoom+(p=p||(Xe.any3d?this.options.zoomDelta:1)),x)},zoomOut:function(p,x){return this.setZoom(this._zoom-(p=p||(Xe.any3d?this.options.zoomDelta:1)),x)},setZoomAround:function(p,x,P){var U=this.getZoomScale(x),J=this.getSize().divideBy(2),Pe=(p instanceof Un?p:this.latLngToContainerPoint(p)).subtract(J).multiplyBy(1-1/U),tt=this.containerPointToLatLng(J.add(Pe));return this.setView(tt,x,{zoom:P})},_getBoundsCenterZoom:function(p,x){x=x||{},p=p.getBounds?p.getBounds():Ji(p);var P=xn(x.paddingTopLeft||x.padding||[0,0]),U=xn(x.paddingBottomRight||x.padding||[0,0]),J=this.getBoundsZoom(p,!1,P.add(U));if((J="number"==typeof x.maxZoom?Math.min(x.maxZoom,J):J)===1/0)return{center:p.getCenter(),zoom:J};var ue=U.subtract(P).divideBy(2),Pe=this.project(p.getSouthWest(),J),tt=this.project(p.getNorthEast(),J);return{center:this.unproject(Pe.add(tt).divideBy(2).add(ue),J),zoom:J}},fitBounds:function(p,x){if(!(p=Ji(p)).isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(p,x);return this.setView(P.center,P.zoom,x)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,x){return this.setView(p,this._zoom,{pan:x})},panBy:function(p,x){if(x=x||{},!(p=xn(p).round()).x&&!p.y)return this.fire("moveend");if(!0!==x.animate&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),x.noMoveStart||this.fire("movestart"),!1!==x.animate){ft(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,P,x.duration||.25,x.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,x,P){if(!1===(P=P||{}).animate||!Xe.any3d)return this.setView(p,x,P);this._stop();var U=this.project(this.getCenter()),J=this.project(p),ue=this.getSize(),Pe=this._zoom;p=Si(p),x=void 0===x?Pe:x;var tt=Math.max(ue.x,ue.y),at=tt*this.getZoomScale(Pe,x),wt=J.distanceTo(U)||1,qt=1.42,Kn=qt*qt;function Ei(mr){var gs=(at*at-tt*tt+(mr?-1:1)*Kn*Kn*wt*wt)/(2*(mr?at:tt)*Kn*wt),Fa=Math.sqrt(gs*gs+1)-gs;return Fa<1e-9?-18:Math.log(Fa)}function or(mr){return(Math.exp(mr)-Math.exp(-mr))/2}function ha(mr){return(Math.exp(mr)+Math.exp(-mr))/2}var pn=Ei(0);function Kl(mr){return tt*(ha(pn)*function Wt(mr){return or(mr)/ha(mr)}(pn+qt*mr)-or(pn))/Kn}var Ir=Date.now(),Ql=(Ei(1)-pn)/qt,ts=P.duration?1e3*P.duration:1e3*Ql*.8;return this._moveStart(!0,P.noMoveStart),function Nu(){var mr=(Date.now()-Ir)/ts,sr=function eu(mr){return 1-Math.pow(1-mr,1.5)}(mr)*Ql;mr<=1?(this._flyToFrame=bn(Nu,this),this._move(this.unproject(U.add(J.subtract(U).multiplyBy(Kl(sr)/wt)),Pe),this.getScaleZoom(tt/function da(mr){return tt*(ha(pn)/ha(pn+qt*mr))}(sr),Pe),{flyTo:!0})):this._move(p,x)._moveEnd(!0)}.call(this),this},flyToBounds:function(p,x){var P=this._getBoundsCenterZoom(p,x);return this.flyTo(P.center,P.zoom,x)},setMaxBounds:function(p){return p=Ji(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var x=this.options.minZoom;return this.options.minZoom=p,this._loaded&&x!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var x=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&x!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,x){this._enforcingBounds=!0;var P=this.getCenter(),U=this._limitCenter(P,this._zoom,Ji(p));return P.equals(U)||this.panTo(U,x),this._enforcingBounds=!1,this},panInside:function(p,x){var P=xn((x=x||{}).paddingTopLeft||x.padding||[0,0]),U=xn(x.paddingBottomRight||x.padding||[0,0]),J=this.project(this.getCenter()),ue=this.project(p),Pe=this.getPixelBounds(),tt=qn([Pe.min.add(P),Pe.max.subtract(U)]),at=tt.getSize();if(!tt.contains(ue)){this._enforcingBounds=!0;var wt=ue.subtract(tt.getCenter()),qt=tt.extend(ue).getSize().subtract(at);J.x+=wt.x<0?-qt.x:qt.x,J.y+=wt.y<0?-qt.y:qt.y,this.panTo(this.unproject(J),x),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=V({animate:!1,pan:!0},!0===p?{animate:!0}:p);var x=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),U=x.divideBy(2).round(),J=P.divideBy(2).round(),ue=U.subtract(J);return ue.x||ue.y?(p.animate&&p.pan?this.panBy(ue):(p.pan&&this._rawPanBy(ue),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(y(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:x,newSize:P})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=V({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var x=y(this._handleGeolocationResponse,this),P=y(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(x,P,p):navigator.geolocation.getCurrentPosition(x,P,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var x=p.code,P=p.message||(1===x?"permission denied":2===x?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:x,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var U=new Ci(p.coords.latitude,p.coords.longitude),J=U.toBounds(2*p.coords.accuracy),ue=this._locateOptions;if(ue.setView){var Pe=this.getBoundsZoom(J);this.setView(U,ue.maxZoom?Math.min(Pe,ue.maxZoom):Pe)}var tt={latlng:U,bounds:J,timestamp:p.timestamp};for(var at in p.coords)"number"==typeof p.coords[at]&&(tt[at]=p.coords[at]);this.fire("locationfound",tt)}},addHandler:function(p,x){if(!x)return this;var P=this[p]=new x(this);return this._handlers.push(P),this.options[p]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var p;for(p in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ti(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[p].remove();for(p in this._panes)Tt(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,x){var U=Ne("div","leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),x||this._mapPane);return p&&(this._panes[p]=U),U},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds();return new ji(this.unproject(p.getBottomLeft()),this.unproject(p.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,x,P){p=Ji(p),P=xn(P||[0,0]);var U=this.getZoom()||0,J=this.getMinZoom(),ue=this.getMaxZoom(),Pe=p.getNorthWest(),tt=p.getSouthEast(),at=this.getSize().subtract(P),wt=qn(this.project(tt,U),this.project(Pe,U)).getSize(),qt=Xe.any3d?this.options.zoomSnap:1,Kn=at.x/wt.x,Ei=at.y/wt.y,or=x?Math.max(Kn,Ei):Math.min(Kn,Ei);return U=this.getScaleZoom(or,U),qt&&(U=Math.round(U/(qt/100))*(qt/100),U=x?Math.ceil(U/qt)*qt:Math.floor(U/qt)*qt),Math.max(J,Math.min(ue,U))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Un(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,x){var P=this._getTopLeftPoint(p,x);return new Ii(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(void 0===p?this.getZoom():p)},getPane:function(p){return"string"==typeof p?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,x){var P=this.options.crs;return x=void 0===x?this._zoom:x,P.scale(p)/P.scale(x)},getScaleZoom:function(p,x){var P=this.options.crs,U=P.zoom(p*P.scale(x=void 0===x?this._zoom:x));return isNaN(U)?1/0:U},project:function(p,x){return x=void 0===x?this._zoom:x,this.options.crs.latLngToPoint(Si(p),x)},unproject:function(p,x){return x=void 0===x?this._zoom:x,this.options.crs.pointToLatLng(xn(p),x)},layerPointToLatLng:function(p){var x=xn(p).add(this.getPixelOrigin());return this.unproject(x)},latLngToLayerPoint:function(p){return this.project(Si(p))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(Si(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(Ji(p))},distance:function(p,x){return this.options.crs.distance(Si(p),Si(x))},containerPointToLayerPoint:function(p){return xn(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return xn(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var x=this.containerPointToLayerPoint(xn(p));return this.layerPointToLatLng(x)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Si(p)))},mouseEventToContainerPoint:function(p){return ps(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var x=this._container=fe(p);if(!x)throw new Error("Map container not found.");if(x._leaflet_id)throw new Error("Map container is already initialized.");$n(x,"scroll",this._onScroll,this),this._containerId=pe(x)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&Xe.any3d,ft(p,"leaflet-container"+(Xe.touch?" leaflet-touch":"")+(Xe.retina?" leaflet-retina":"")+(Xe.ielt9?" leaflet-oldie":"")+(Xe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var x=Be(p,"position");"absolute"!==x&&"relative"!==x&&"fixed"!==x&&"sticky"!==x&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fr(this._mapPane,new Un(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ft(p.markerPane,"leaflet-zoom-hide"),ft(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,x,P){fr(this._mapPane,new Un(0,0));var U=!this._loaded;this._loaded=!0,x=this._limitZoom(x),this.fire("viewprereset");var J=this._zoom!==x;this._moveStart(J,P)._move(p,x)._moveEnd(J),this.fire("viewreset"),U&&this.fire("load")},_moveStart:function(p,x){return p&&this.fire("zoomstart"),x||this.fire("movestart"),this},_move:function(p,x,P,U){void 0===x&&(x=this._zoom);var J=this._zoom!==x;return this._zoom=x,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),U?P&&P.pinch&&this.fire("zoom",P):((J||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ti(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){fr(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[pe(this._container)]=this;var x=p?Ai:$n;x(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&x(window,"resize",this._onResize,this),Xe.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ti(this._resizeRequest),this._resizeRequest=bn(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,x){for(var U,P=[],J="mouseout"===x||"mouseover"===x,ue=p.target||p.srcElement,Pe=!1;ue;){if((U=this._targets[pe(ue)])&&("click"===x||"preclick"===x)&&this._draggableMoved(U)){Pe=!0;break}if(U&&U.listens(x,!0)&&(J&&!pl(ue,p)||(P.push(U),J))||ue===this._container)break;ue=ue.parentNode}return!P.length&&!Pe&&!J&&this.listens(x,!0)&&(P=[this]),P},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var x=p.target||p.srcElement;if(!(!this._loaded||x._leaflet_disable_events||"click"===p.type&&this._isClickDisabled(x))){var P=p.type;"mousedown"===P&&Ha(x),this._fireDOMEvent(p,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,x,P){if("click"===p.type){var U=V({},p);U.type="preclick",this._fireDOMEvent(U,U.type,P)}var J=this._findEventTargets(p,x);if(P){for(var ue=[],Pe=0;Pe<P.length;Pe++)P[Pe].listens(x,!0)&&ue.push(P[Pe]);J=ue.concat(J)}if(J.length){"contextmenu"===x&&hr(p);var tt=J[0],at={originalEvent:p};if("keypress"!==p.type&&"keydown"!==p.type&&"keyup"!==p.type){var wt=tt.getLatLng&&(!tt._radius||tt._radius<=10);at.containerPoint=wt?this.latLngToContainerPoint(tt.getLatLng()):this.mouseEventToContainerPoint(p),at.layerPoint=this.containerPointToLayerPoint(at.containerPoint),at.latlng=wt?tt.getLatLng():this.layerPointToLatLng(at.layerPoint)}for(Pe=0;Pe<J.length;Pe++)if(J[Pe].fire(x,at,!0),at.originalEvent._stopped||!1===J[Pe].options.bubblingMouseEvents&&-1!==Zi(this._mouseEvents,x))return}},_draggableMoved:function(p){return(p=p.dragging&&p.dragging.enabled()?p:this).dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,x=this._handlers.length;p<x;p++)this._handlers[p].disable()},whenReady:function(p,x){return this._loaded?p.call(x||this,{target:this}):this.on("load",p,x),this},_getMapPanePos:function(){return zn(this._mapPane)||new Un(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,x){return(p&&void 0!==x?this._getNewPixelOrigin(p,x):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,x){var P=this.getSize()._divideBy(2);return this.project(p,x)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,x,P){var U=this._getNewPixelOrigin(P,x);return this.project(p,x)._subtract(U)},_latLngBoundsToNewLayerBounds:function(p,x,P){var U=this._getNewPixelOrigin(P,x);return qn([this.project(p.getSouthWest(),x)._subtract(U),this.project(p.getNorthWest(),x)._subtract(U),this.project(p.getSouthEast(),x)._subtract(U),this.project(p.getNorthEast(),x)._subtract(U)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,x,P){if(!P)return p;var U=this.project(p,x),J=this.getSize().divideBy(2),ue=new Ii(U.subtract(J),U.add(J)),Pe=this._getBoundsOffset(ue,P,x);return Math.abs(Pe.x)<=1&&Math.abs(Pe.y)<=1?p:this.unproject(U.add(Pe),x)},_limitOffset:function(p,x){if(!x)return p;var P=this.getPixelBounds(),U=new Ii(P.min.add(p),P.max.add(p));return p.add(this._getBoundsOffset(U,x))},_getBoundsOffset:function(p,x,P){var U=qn(this.project(x.getNorthEast(),P),this.project(x.getSouthWest(),P)),J=U.min.subtract(p.min),ue=U.max.subtract(p.max);return new Un(this._rebound(J.x,-ue.x),this._rebound(J.y,-ue.y))},_rebound:function(p,x){return p+x>0?Math.round(p-x)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(x))},_limitZoom:function(p){var x=this.getMinZoom(),P=this.getMaxZoom(),U=Xe.any3d?this.options.zoomSnap:1;return U&&(p=Math.round(p/U)*U),Math.max(x,Math.min(P,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){kn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,x){var P=this._getCenterOffset(p)._trunc();return!(!0!==(x&&x.animate)&&!this.getSize().contains(P)||(this.panBy(P,x),0))},_createAnimProxy:function(){var p=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(x){var P=Z,U=this._proxy.style[P];hs(this._proxy,this.project(x.center,x.zoom),this.getZoomScale(x.zoom,1)),U===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),x=this.getZoom();hs(this._proxy,this.project(p,x),this.getZoomScale(x,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,x,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||!1===P.animate||this._nothingToAnimate()||Math.abs(x-this._zoom)>this.options.zoomAnimationThreshold)return!1;var U=this.getZoomScale(x),J=this._getCenterOffset(p)._divideBy(1-1/U);return!(!0!==P.animate&&!this.getSize().contains(J)||(bn(function(){this._moveStart(!0,!1)._animateZoom(p,x,!0)},this),0))},_animateZoom:function(p,x,P,U){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=x,ft(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:x,noUpdate:U}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(y(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&kn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var ms=Jn.extend({options:{position:"topright"},initialize:function(p){it(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var x=this._map;return x&&x.removeControl(this),this.options.position=p,x&&x.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var x=this._container=this.onAdd(p),P=this.getPosition(),U=p._controlCorners[P];return ft(x,"leaflet-control"),-1!==P.indexOf("bottom")?U.insertBefore(x,U.firstChild):U.appendChild(x),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),jl=function(p){return new ms(p)};Oi.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},x="leaflet-",P=this._controlContainer=Ne("div",x+"control-container",this._container);function U(J,ue){p[J+ue]=Ne("div",x+J+" "+x+ue,P)}U("top","left"),U("top","right"),U("bottom","left"),U("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)Tt(this._controlCorners[p]);Tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $c=ms.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,x,P,U){return P<U?-1:U<P?1:0}},initialize:function(p,x,P){for(var U in it(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,p)this._addLayer(p[U],U);for(U in x)this._addLayer(x[U],U,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var x=0;x<this._layers.length;x++)this._layers[x].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return ms.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,x){return this._addLayer(p,x),this._map?this._update():this},addOverlay:function(p,x){return this._addLayer(p,x,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var x=this._getLayer(pe(p));return x&&this._layers.splice(this._layers.indexOf(x),1),this._map?this._update():this},expand:function(){ft(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(ft(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):kn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return kn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",x=this._container=Ne("div",p),P=this.options.collapsed;x.setAttribute("aria-haspopup",!0),Ao(x),$a(x);var U=this._section=Ne("section",p+"-list");P&&(this._map.on("click",this.collapse,this),$n(x,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var J=this._layersLink=Ne("a",p+"-toggle",x);J.href="#",J.title="Layers",J.setAttribute("role","button"),$n(J,{keydown:function(ue){13===ue.keyCode&&this._expandSafely()},click:function(ue){hr(ue),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=Ne("div",p+"-base",U),this._separator=Ne("div",p+"-separator",U),this._overlaysList=Ne("div",p+"-overlays",U),x.appendChild(U)},_getLayer:function(p){for(var x=0;x<this._layers.length;x++)if(this._layers[x]&&pe(this._layers[x].layer)===p)return this._layers[x]},_addLayer:function(p,x,P){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:x,overlay:P}),this.options.sortLayers&&this._layers.sort(y(function(U,J){return this.options.sortFunction(U.layer,J.layer,U.name,J.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var p,x,P,U,J=0;for(P=0;P<this._layers.length;P++)this._addItem(U=this._layers[P]),x=x||U.overlay,p=p||!U.overlay,J+=U.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(p=p&&J>1)?"":"none"),this._separator.style.display=x&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var x=this._getLayer(pe(p.target)),P=x.overlay?"add"===p.type?"overlayadd":"overlayremove":"add"===p.type?"baselayerchange":null;P&&this._map.fire(P,x)},_createRadioElement:function(p,x){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(x?' checked="checked"':"")+"/>",U=document.createElement("div");return U.innerHTML=P,U.firstChild},_addItem:function(p){var U,x=document.createElement("label"),P=this._map.hasLayer(p.layer);p.overlay?((U=document.createElement("input")).type="checkbox",U.className="leaflet-control-layers-selector",U.defaultChecked=P):U=this._createRadioElement("leaflet-base-layers_"+pe(this),P),this._layerControlInputs.push(U),U.layerId=pe(p.layer),$n(U,"click",this._onInputClick,this);var J=document.createElement("span");J.innerHTML=" "+p.name;var ue=document.createElement("span");return x.appendChild(ue),ue.appendChild(U),ue.appendChild(J),(p.overlay?this._overlaysList:this._baseLayersList).appendChild(x),this._checkDisabledLayers(),x},_onInputClick:function(){var x,P,p=this._layerControlInputs,U=[],J=[];this._handlingClick=!0;for(var ue=p.length-1;ue>=0;ue--)P=this._getLayer((x=p[ue]).layerId).layer,x.checked?U.push(P):x.checked||J.push(P);for(ue=0;ue<J.length;ue++)this._map.hasLayer(J[ue])&&this._map.removeLayer(J[ue]);for(ue=0;ue<U.length;ue++)this._map.hasLayer(U[ue])||this._map.addLayer(U[ue]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var x,P,p=this._layerControlInputs,U=this._map.getZoom(),J=p.length-1;J>=0;J--)P=this._getLayer((x=p[J]).layerId).layer,x.disabled=void 0!==P.options.minZoom&&U<P.options.minZoom||void 0!==P.options.maxZoom&&U>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;$n(p,"click",hr),this.expand(),setTimeout(function(){Ai(p,"click",hr)})}}),Sa=ms.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var x="leaflet-control-zoom",P=Ne("div",x+" leaflet-bar"),U=this.options;return this._zoomInButton=this._createButton(U.zoomInText,U.zoomInTitle,x+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(U.zoomOutText,U.zoomOutTitle,x+"-out",P,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,x,P,U,J){var ue=Ne("a",P,U);return ue.innerHTML=p,ue.href="#",ue.title=x,ue.setAttribute("role","button"),ue.setAttribute("aria-label",x),Ao(ue),$n(ue,"click",On),$n(ue,"click",J,this),$n(ue,"click",this._refocusOnMap,this),ue},_updateDisabled:function(){var p=this._map,x="leaflet-disabled";kn(this._zoomInButton,x),kn(this._zoomOutButton,x),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(ft(this._zoomOutButton,x),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(ft(this._zoomInButton,x),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oi.mergeOptions({zoomControl:!0}),Oi.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sa,this.addControl(this.zoomControl))});var mp=ms.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var x="leaflet-control-scale",P=Ne("div",x),U=this.options;return this._addScales(U,x+"-line",P),p.on(U.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),P},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,x,P){p.metric&&(this._mScale=Ne("div",x,P)),p.imperial&&(this._iScale=Ne("div",x,P))},_update:function(){var p=this._map,x=p.getSize().y/2,P=p.distance(p.containerPointToLatLng([0,x]),p.containerPointToLatLng([this.options.maxWidth,x]));this._updateScales(P)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var x=this._getRoundNum(p);this._updateScale(this._mScale,x<1e3?x+" m":x/1e3+" km",x/p)},_updateImperial:function(p){var P,U,J,x=3.2808399*p;x>5280?(U=this._getRoundNum(P=x/5280),this._updateScale(this._iScale,U+" mi",U/P)):(J=this._getRoundNum(x),this._updateScale(this._iScale,J+" ft",J/x))},_updateScale:function(p,x,P){p.style.width=Math.round(this.options.maxWidth*P)+"px",p.innerHTML=x},_getRoundNum:function(p){var x=Math.pow(10,(Math.floor(p)+"").length-1),P=p/x;return x*(P>=10?10:P>=5?5:P>=3?3:P>=2?2:1)}}),fh=ms.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Xe.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(p){it(this,p),this._attributions={}},onAdd:function(p){for(var x in p.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),Ao(this._container),p._layers)p._layers[x].getAttribution&&this.addAttribution(p._layers[x].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var x in this._attributions)this._attributions[x]&&p.push(x);var P=[];this.options.prefix&&P.push(this.options.prefix),p.length&&P.push(p.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Oi.mergeOptions({attributionControl:!0}),Oi.addInitHook(function(){this.options.attributionControl&&(new fh).addTo(this)});ms.Layers=$c,ms.Zoom=Sa,ms.Scale=mp,ms.Attribution=fh,jl.layers=function(p,x,P){return new $c(p,x,P)},jl.zoom=function(p){return new Sa(p)},jl.scale=function(p){return new mp(p)},jl.attribution=function(p){return new fh(p)};var ra=Jn.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ra.addTo=function(p,x){return p.addHandler(x,this),this};var Ga,Ea={Events:gn},fc=Xe.touch?"touchstart mousedown":"mousedown",Ds=hn.extend({options:{clickTolerance:3},initialize:function(p,x,P,U){it(this,U),this._element=p,this._dragStartTarget=x||p,this._preventOutline=P},enable:function(){this._enabled||($n(this._dragStartTarget,fc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ds._dragging===this&&this.finishDrag(!0),Ai(this._dragStartTarget,fc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!bt(this._element,"leaflet-zoom-anim"))){if(p.touches&&1!==p.touches.length)return void(Ds._dragging===this&&this.finishDrag());if(!(Ds._dragging||p.shiftKey||1!==p.which&&1!==p.button&&!p.touches||(Ds._dragging=this,this._preventOutline&&Ha(this._element),qr(),ta(),this._moving))){this.fire("down");var x=p.touches?p.touches[0]:p,P=er(this._element);this._startPoint=new Un(x.clientX,x.clientY),this._startPos=zn(this._element),this._parentScale=Au(P);var U="mousedown"===p.type;$n(document,U?"mousemove":"touchmove",this._onMove,this),$n(document,U?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1)return void(this._moved=!0);var x=p.touches&&1===p.touches.length?p.touches[0]:p,P=new Un(x.clientX,x.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,hr(p),this._moved||(this.fire("dragstart"),this._moved=!0,ft(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ft(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),fr(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){kn(document.body,"leaflet-dragging"),this._lastTarget&&(kn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ai(document,"mousemove touchmove",this._onMove,this),Ai(document,"mouseup touchend touchcancel",this._onUp,this),Yr(),ds(),this._moved&&this._moving&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ds._dragging=!1}});function Zc(p,x){if(!x||!p.length)return p.slice();var P=x*x;return function Lu(p,x){var P=p.length,J=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(P);J[0]=J[P-1]=1,Ul(p,J,x,0,P-1);var ue,Pe=[];for(ue=0;ue<P;ue++)J[ue]&&Pe.push(p[ue]);return Pe}(p=function fl(p,x){for(var P=[p[0]],U=1,J=0,ue=p.length;U<ue;U++)Wc(p[U],p[J])>x&&(P.push(p[U]),J=U);return J<ue-1&&P.push(p[ue-1]),P}(p,P),P)}function Ta(p,x,P){return Math.sqrt(Bn(p,x,P,!0))}function Ul(p,x,P,U,J){var Pe,tt,at,ue=0;for(tt=U+1;tt<=J-1;tt++)(at=Bn(p[tt],p[U],p[J],!0))>ue&&(Pe=tt,ue=at);ue>P&&(x[Pe]=1,Ul(p,x,P,U,Pe),Ul(p,x,P,Pe,J))}function Da(p,x,P,U,J){var tt,at,wt,ue=U?Ga:Ma(p,P),Pe=Ma(x,P);for(Ga=Pe;;){if(!(ue|Pe))return[p,x];if(ue&Pe)return!1;wt=Ma(at=Dr(p,x,tt=ue||Pe,P,J),P),tt===ue?(p=at,ue=wt):(x=at,Pe=wt)}}function Dr(p,x,P,U,J){var wt,qt,ue=x.x-p.x,Pe=x.y-p.y,tt=U.min,at=U.max;return 8&P?(wt=p.x+ue*(at.y-p.y)/Pe,qt=at.y):4&P?(wt=p.x+ue*(tt.y-p.y)/Pe,qt=tt.y):2&P?(wt=at.x,qt=p.y+Pe*(at.x-p.x)/ue):1&P&&(wt=tt.x,qt=p.y+Pe*(tt.x-p.x)/ue),new Un(wt,qt,J)}function Ma(p,x){var P=0;return p.x<x.min.x?P|=1:p.x>x.max.x&&(P|=2),p.y<x.min.y?P|=4:p.y>x.max.y&&(P|=8),P}function Wc(p,x){var P=x.x-p.x,U=x.y-p.y;return P*P+U*U}function Bn(p,x,P,U){var wt,J=x.x,ue=x.y,Pe=P.x-J,tt=P.y-ue,at=Pe*Pe+tt*tt;return at>0&&((wt=((p.x-J)*Pe+(p.y-ue)*tt)/at)>1?(J=P.x,ue=P.y):wt>0&&(J+=Pe*wt,ue+=tt*wt)),Pe=p.x-J,tt=p.y-ue,U?Pe*Pe+tt*tt:new Un(J,ue)}function Li(p){return!gt(p[0])||"object"!=typeof p[0][0]&&typeof p[0][0]<"u"}function mc(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Li(p)}function jn(p,x){var P,U,J,ue,Pe,tt,at,wt;if(!p||0===p.length)throw new Error("latlngs not passed");Li(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var qt=[];for(var Kn in p)qt.push(x.project(Si(p[Kn])));var Ei=qt.length;for(P=0,U=0;P<Ei-1;P++)U+=qt[P].distanceTo(qt[P+1])/2;if(0===U)wt=qt[0];else for(P=0,ue=0;P<Ei-1;P++)if((ue+=J=(Pe=qt[P]).distanceTo(tt=qt[P+1]))>U){wt=[tt.x-(at=(ue-U)/J)*(tt.x-Pe.x),tt.y-at*(tt.y-Pe.y)];break}return x.unproject(xn(wt))}var ml={__proto__:null,simplify:Zc,pointToSegmentDistance:Ta,closestPointOnSegment:function hd(p,x,P){return Bn(p,x,P)},clipSegment:Da,_getEdgeIntersection:Dr,_getBitCode:Ma,_sqClosestPointOnSegment:Bn,isFlat:Li,_flat:mc,polylineCenter:jn};function vr(p,x,P){var U,ue,Pe,tt,at,wt,qt,Kn,Ei,J=[1,4,2,8];for(ue=0,qt=p.length;ue<qt;ue++)p[ue]._code=Ma(p[ue],x);for(tt=0;tt<4;tt++){for(Kn=J[tt],U=[],ue=0,Pe=(qt=p.length)-1;ue<qt;Pe=ue++)wt=p[Pe],(at=p[ue])._code&Kn?wt._code&Kn||((Ei=Dr(wt,at,Kn,x,P))._code=Ma(Ei,x),U.push(Ei)):(wt._code&Kn&&((Ei=Dr(wt,at,Kn,x,P))._code=Ma(Ei,x),U.push(Ei)),U.push(at));p=U}return p}function Hi(p,x){var P,U,J,ue,Pe,tt,at,wt;if(!p||0===p.length)throw new Error("latlngs not passed");Li(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Kn=[];for(var Ei in p)Kn.push(x.project(Si(p[Ei])));var or=Kn.length;for(tt=at=wt=0,P=0,U=or-1;P<or;U=P++)at+=((J=Kn[P]).x+(ue=Kn[U]).x)*(Pe=J.y*ue.x-ue.y*J.x),wt+=(J.y+ue.y)*Pe,tt+=3*Pe;return x.unproject(xn(0===tt?Kn[0]:[at/tt,wt/tt]))}var so={__proto__:null,clipPolygon:vr,polygonCenter:Hi},qc={project:function(p){return new Un(p.lng,p.lat)},unproject:function(p){return new Ci(p.y,p.x)},bounds:new Ii([-180,-90],[180,90])},Za={R:6378137,R_MINOR:6356752.314245179,bounds:new Ii([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(p){var x=Math.PI/180,P=this.R,U=p.lat*x,J=this.R_MINOR/P,ue=Math.sqrt(1-J*J),Pe=ue*Math.sin(U),tt=Math.tan(Math.PI/4-U/2)/Math.pow((1-Pe)/(1+Pe),ue/2);return U=-P*Math.log(Math.max(tt,1e-10)),new Un(p.lng*x*P,U)},unproject:function(p){for(var wt,x=180/Math.PI,P=this.R,U=this.R_MINOR/P,J=Math.sqrt(1-U*U),ue=Math.exp(-p.y/P),Pe=Math.PI/2-2*Math.atan(ue),tt=0,at=.1;tt<15&&Math.abs(at)>1e-7;tt++)wt=J*Math.sin(Pe),wt=Math.pow((1-wt)/(1+wt),J/2),Pe+=at=Math.PI/2-2*Math.atan(ue*wt)-Pe;return new Ci(Pe*x,p.x*x/P)}},ku={__proto__:null,LonLat:qc,Mercator:Za,SphericalMercator:Yn},zs=V({},_r,{code:"EPSG:3395",projection:Za,transformation:function(){var p=.5/(Math.PI*Za.R);return Ho(p,.5,-p,.5)}()}),gc=V({},_r,{code:"EPSG:4326",projection:qc,transformation:Ho(1/180,1,-1/180,.5)}),Hl=V({},Er,{projection:qc,transformation:Ho(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,x){var P=x.lng-p.lng,U=x.lat-p.lat;return Math.sqrt(P*P+U*U)},infinite:!0});Er.Earth=_r,Er.EPSG3395=zs,Er.EPSG3857=$o,Er.EPSG900913=Wi,Er.EPSG4326=gc,Er.Simple=Hl;var Pn=hn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[pe(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[pe(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var x=p.target;if(x.hasLayer(this)){if(this._map=x,this._zoomAnimated=x._zoomAnimated,this.getEvents){var P=this.getEvents();x.on(P,this),this.once("remove",function(){x.off(P,this)},this)}this.onAdd(x),this.fire("add"),x.fire("layeradd",{layer:this})}}});Oi.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var x=pe(p);return this._layers[x]||(this._layers[x]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p)),this},removeLayer:function(p){var x=pe(p);return this._layers[x]?(this._loaded&&p.onRemove(this),delete this._layers[x],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return pe(p)in this._layers},eachLayer:function(p,x){for(var P in this._layers)p.call(x,this._layers[P]);return this},_addLayers:function(p){for(var x=0,P=(p=p?gt(p)?p:[p]:[]).length;x<P;x++)this.addLayer(p[x])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[pe(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var x=pe(p);this._zoomBoundLayers[x]&&(delete this._zoomBoundLayers[x],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,x=-1/0,P=this._getZoomSpan();for(var U in this._zoomBoundLayers){var J=this._zoomBoundLayers[U].options;p=void 0===J.minZoom?p:Math.min(p,J.minZoom),x=void 0===J.maxZoom?x:Math.max(x,J.maxZoom)}this._layersMaxZoom=x===-1/0?void 0:x,this._layersMinZoom=p===1/0?void 0:p,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oa=Pn.extend({initialize:function(p,x){var P,U;if(it(this,x),this._layers={},p)for(P=0,U=p.length;P<U;P++)this.addLayer(p[P])},addLayer:function(p){var x=this.getLayerId(p);return this._layers[x]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var x=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[x]&&this._map.removeLayer(this._layers[x]),delete this._layers[x],this},hasLayer:function(p){return("number"==typeof p?p:this.getLayerId(p))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var P,U,x=Array.prototype.slice.call(arguments,1);for(P in this._layers)(U=this._layers[P])[p]&&U[p].apply(U,x);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,x){for(var P in this._layers)p.call(x,this._layers[P]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return pe(p)}}),zi=oa.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),oa.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),oa.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new ji;for(var x in this._layers){var P=this._layers[x];p.extend(P.getBounds?P.getBounds():P.getLatLng())}return p}}),gl=Jn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){it(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,x){var P=this._getIconUrl(p);if(!P){if("icon"===p)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var U=this._createImg(P,x&&"IMG"===x.tagName?x:null);return this._setIconStyles(U,p),(this.options.crossOrigin||""===this.options.crossOrigin)&&(U.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),U},_setIconStyles:function(p,x){var P=this.options,U=P[x+"Size"];"number"==typeof U&&(U=[U,U]);var J=xn(U),ue=xn("shadow"===x&&P.shadowAnchor||P.iconAnchor||J&&J.divideBy(2,!0));p.className="leaflet-marker-"+x+" "+(P.className||""),ue&&(p.style.marginLeft=-ue.x+"px",p.style.marginTop=-ue.y+"px"),J&&(p.style.width=J.x+"px",p.style.height=J.y+"px")},_createImg:function(p,x){return(x=x||document.createElement("img")).src=p,x},_getIconUrl:function(p){return Xe.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});var $l=gl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return"string"!=typeof $l.imagePath&&($l.imagePath=this._detectIconPath()),(this.options.imagePath||$l.imagePath)+gl.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var x=function(P,U,J){var ue=U.exec(P);return ue&&ue[J]};return(p=x(p,/^url\((['"])?(.+)\1\)$/,2))&&x(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=Ne("div","leaflet-default-icon-path",document.body),x=Be(p,"background-image")||Be(p,"backgroundImage");if(document.body.removeChild(p),x=this._stripUrl(x))return x;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),_c=ra.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new Ds(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ft(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&kn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var x=this._marker,P=x._map,U=this._marker.options.autoPanSpeed,J=this._marker.options.autoPanPadding,ue=zn(x._icon),Pe=P.getPixelBounds(),tt=P.getPixelOrigin(),at=qn(Pe.min._subtract(tt).add(J),Pe.max._subtract(tt).subtract(J));if(!at.contains(ue)){var wt=xn((Math.max(at.max.x,ue.x)-at.max.x)/(Pe.max.x-at.max.x)-(Math.min(at.min.x,ue.x)-at.min.x)/(Pe.min.x-at.min.x),(Math.max(at.max.y,ue.y)-at.max.y)/(Pe.max.y-at.max.y)-(Math.min(at.min.y,ue.y)-at.min.y)/(Pe.min.y-at.min.y)).multiplyBy(U);P.panBy(wt,{animate:!1}),this._draggable._newPos._add(wt),this._draggable._startPos._add(wt),fr(x._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=bn(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(Ti(this._panRequest),this._panRequest=bn(this._adjustPan.bind(this,p)))},_onDrag:function(p){var x=this._marker,P=x._shadow,U=zn(x._icon),J=x._map.layerPointToLatLng(U);P&&fr(P,U),x._latlng=J,p.latlng=J,p.oldLatLng=this._oldLatLng,x.fire("move",p).fire("drag",p)},_onDragEnd:function(p){Ti(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),xt=Pn.extend({options:{icon:new $l,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,x){it(this,x),this._latlng=Si(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var x=this._latlng;return this._latlng=Si(p),this.update(),this.fire("move",{oldLatLng:x,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,x="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=p.icon.createIcon(this._icon),U=!1;P!==this._icon&&(this._icon&&this._removeIcon(),U=!0,p.title&&(P.title=p.title),"IMG"===P.tagName&&(P.alt=p.alt||"")),ft(P,x),p.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$n(P,"focus",this._panOnFocus,this);var J=p.icon.createShadow(this._shadow),ue=!1;J!==this._shadow&&(this._removeShadow(),ue=!0),J&&(ft(J,x),J.alt=""),this._shadow=J,p.opacity<1&&this._updateOpacity(),U&&this.getPane().appendChild(this._icon),this._initInteraction(),J&&ue&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ai(this._icon,"focus",this._panOnFocus,this),Tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Tt(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&fr(this._icon,p),this._shadow&&fr(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var x=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(x)},_initInteraction:function(){if(this.options.interactive&&(ft(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_c)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _c(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&Mi(this._icon,p),this._shadow&&Mi(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var x=this.options.icon.options,P=x.iconSize?xn(x.iconSize):xn(0,0),U=x.iconAnchor?xn(x.iconAnchor):xn(0,0);p.panInside(this._latlng,{paddingTopLeft:U,paddingBottomRight:P.subtract(U)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Ia=Pn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return it(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wa=Ia.extend({options:{fill:!0,radius:10},initialize:function(p,x){it(this,x),this._latlng=Si(p),this._radius=this.options.radius},setLatLng:function(p){var x=this._latlng;return this._latlng=Si(p),this.redraw(),this.fire("move",{oldLatLng:x,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var x=p&&p.radius||this._radius;return Ia.prototype.setStyle.call(this,p),this.setRadius(x),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,x=this._radiusY||p,P=this._clickTolerance(),U=[p+P,x+P];this._pxBounds=new Ii(this._point.subtract(U),this._point.add(U))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var qa=Wa.extend({initialize:function(p,x,P){if("number"==typeof x&&(x=V({},P,{radius:x})),it(this,x),this._latlng=Si(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new ji(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:Ia.prototype.setStyle,_project:function(){var p=this._latlng.lng,x=this._latlng.lat,P=this._map,U=P.options.crs;if(U.distance===_r.distance){var J=Math.PI/180,ue=this._mRadius/_r.R/J,Pe=P.project([x+ue,p]),tt=P.project([x-ue,p]),at=Pe.add(tt).divideBy(2),wt=P.unproject(at).lat,qt=Math.acos((Math.cos(ue*J)-Math.sin(x*J)*Math.sin(wt*J))/(Math.cos(x*J)*Math.cos(wt*J)))/J;(isNaN(qt)||0===qt)&&(qt=ue/Math.cos(Math.PI/180*x)),this._point=at.subtract(P.getPixelOrigin()),this._radius=isNaN(qt)?0:at.x-P.project([wt,p-qt]).x,this._radiusY=at.y-Pe.y}else{var Kn=U.unproject(U.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(Kn).x}this._updateBounds()}});var gi=Ia.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,x){it(this,x),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var J,ue,x=1/0,P=null,U=Bn,Pe=0,tt=this._parts.length;Pe<tt;Pe++)for(var at=this._parts[Pe],wt=1,qt=at.length;wt<qt;wt++){var Kn=U(p,J=at[wt-1],ue=at[wt],!0);Kn<x&&(x=Kn,P=U(p,J,ue))}return P&&(P.distance=Math.sqrt(x)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,x){return x=x||this._defaultShape(),p=Si(p),x.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new ji,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return Li(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var x=[],P=Li(p),U=0,J=p.length;U<J;U++)P?(x[U]=Si(p[U]),this._bounds.extend(x[U])):x[U]=this._convertLatLngs(p[U]);return x},_project:function(){var p=new Ii;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),x=new Un(p,p);this._rawPxBounds&&(this._pxBounds=new Ii([this._rawPxBounds.min.subtract(x),this._rawPxBounds.max.add(x)]))},_projectLatlngs:function(p,x,P){var ue,Pe,J=p.length;if(p[0]instanceof Ci){for(Pe=[],ue=0;ue<J;ue++)Pe[ue]=this._map.latLngToLayerPoint(p[ue]),P.extend(Pe[ue]);x.push(Pe)}else for(ue=0;ue<J;ue++)this._projectLatlngs(p[ue],x,P)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(p)){if(this.options.noClip)return void(this._parts=this._rings);var P,U,J,ue,Pe,tt,at,x=this._parts;for(P=0,J=0,ue=this._rings.length;P<ue;P++)for(U=0,Pe=(at=this._rings[P]).length;U<Pe-1;U++)(tt=Da(at[U],at[U+1],p,U,!0))&&(x[J]=x[J]||[],x[J].push(tt[0]),(tt[1]!==at[U+1]||U===Pe-2)&&(x[J].push(tt[1]),J++))}},_simplifyPoints:function(){for(var p=this._parts,x=this.options.smoothFactor,P=0,U=p.length;P<U;P++)p[P]=Zc(p[P],x)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,x){var P,U,J,ue,Pe,tt,at=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(P=0,ue=this._parts.length;P<ue;P++)for(U=0,J=(Pe=(tt=this._parts[P]).length)-1;U<Pe;J=U++)if((x||0!==U)&&Ta(p,tt[J],tt[U])<=at)return!0;return!1}});gi._flat=mc;var br=gi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var x=gi.prototype._convertLatLngs.call(this,p),P=x.length;return P>=2&&x[0]instanceof Ci&&x[0].equals(x[P-1])&&x.pop(),x},_setLatLngs:function(p){gi.prototype._setLatLngs.call(this,p),Li(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Li(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,x=this.options.weight,P=new Un(x,x);if(p=new Ii(p.min.subtract(P),p.max.add(P)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(p)){if(this.options.noClip)return void(this._parts=this._rings);for(var ue,U=0,J=this._rings.length;U<J;U++)(ue=vr(this._rings[U],p,!0)).length&&this._parts.push(ue)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var P,U,J,ue,Pe,tt,at,wt,x=!1;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(ue=0,at=this._parts.length;ue<at;ue++)for(Pe=0,tt=(wt=(P=this._parts[ue]).length)-1;Pe<wt;tt=Pe++)(U=P[Pe]).y>p.y!=(J=P[tt]).y>p.y&&p.x<(J.x-U.x)*(p.y-U.y)/(J.y-U.y)+U.x&&(x=!x);return x||gi.prototype._containsPoint.call(this,p,!0)}});var Vs=zi.extend({initialize:function(p,x){it(this,x),this._layers={},p&&this.addData(p)},addData:function(p){var P,U,J,x=gt(p)?p:p.features;if(x){for(P=0,U=x.length;P<U;P++)((J=x[P]).geometries||J.geometry||J.features||J.coordinates)&&this.addData(J);return this}var ue=this.options;if(ue.filter&&!ue.filter(p))return this;var Pe=Pa(p,ue);return Pe?(Pe.feature=vc(p),Pe.defaultOptions=Pe.options,this.resetStyle(Pe),ue.onEachFeature&&ue.onEachFeature(p,Pe),this.addLayer(Pe)):this},resetStyle:function(p){return void 0===p?this.eachLayer(this.resetStyle,this):(p.options=V({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(x){this._setLayerStyle(x,p)},this)},_setLayerStyle:function(p,x){p.setStyle&&("function"==typeof x&&(x=x(p.feature)),p.setStyle(x))}});function Pa(p,x){var tt,at,wt,qt,P="Feature"===p.type?p.geometry:p,U=P?P.coordinates:null,J=[],ue=x&&x.pointToLayer,Pe=x&&x.coordsToLatLng||Jo;if(!U&&!P)return null;switch(P.type){case"Point":return Mr(ue,p,tt=Pe(U),x);case"MultiPoint":for(wt=0,qt=U.length;wt<qt;wt++)tt=Pe(U[wt]),J.push(Mr(ue,p,tt,x));return new zi(J);case"LineString":case"MultiLineString":return at=Aa(U,"LineString"===P.type?0:1,Pe),new gi(at,x);case"Polygon":case"MultiPolygon":return at=Aa(U,"Polygon"===P.type?1:2,Pe),new br(at,x);case"GeometryCollection":for(wt=0,qt=P.geometries.length;wt<qt;wt++){var Kn=Pa({geometry:P.geometries[wt],type:"Feature",properties:p.properties},x);Kn&&J.push(Kn)}return new zi(J);case"FeatureCollection":for(wt=0,qt=P.features.length;wt<qt;wt++){var Ei=Pa(P.features[wt],x);Ei&&J.push(Ei)}return new zi(J);default:throw new Error("Invalid GeoJSON object.")}}function Mr(p,x,P,U){return p?p(x,P):new xt(P,U&&U.markersInheritOptions&&U)}function Jo(p){return new Ci(p[1],p[0],p[2])}function Aa(p,x,P){for(var Pe,U=[],J=0,ue=p.length;J<ue;J++)Pe=x?Aa(p[J],x-1,P):(P||Jo)(p[J]),U.push(Pe);return U}function La(p,x){return void 0!==(p=Si(p)).alt?[We(p.lng,x),We(p.lat,x),We(p.alt,x)]:[We(p.lng,x),We(p.lat,x)]}function es(p,x,P,U){for(var J=[],ue=0,Pe=p.length;ue<Pe;ue++)J.push(x?es(p[ue],Li(p[ue])?0:x-1,P,U):La(p[ue],U));return!x&&P&&J.push(J[0].slice()),J}function Zl(p,x){return p.feature?V({},p.feature,{geometry:x}):vc(x)}function vc(p){return"Feature"===p.type||"FeatureCollection"===p.type?p:{type:"Feature",properties:{},geometry:p}}var Ou={toGeoJSON:function(p){return Zl(this,{type:"Point",coordinates:La(this.getLatLng(),p)})}};function sa(p,x){return new Vs(p,x)}xt.include(Ou),qa.include(Ou),Wa.include(Ou),gi.include({toGeoJSON:function(p){var x=!Li(this._latlngs);return Zl(this,{type:(x?"Multi":"")+"LineString",coordinates:es(this._latlngs,x?1:0,!1,p)})}}),br.include({toGeoJSON:function(p){var x=!Li(this._latlngs),P=x&&!Li(this._latlngs[0]),U=es(this._latlngs,P?2:x?1:0,!0,p);return x||(U=[U]),Zl(this,{type:(P?"Multi":"")+"Polygon",coordinates:U})}}),oa.include({toMultiPoint:function(p){var x=[];return this.eachLayer(function(P){x.push(P.toGeoJSON(p).geometry.coordinates)}),Zl(this,{type:"MultiPoint",coordinates:x})},toGeoJSON:function(p){var x=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===x)return this.toMultiPoint(p);var P="GeometryCollection"===x,U=[];return this.eachLayer(function(J){if(J.toGeoJSON){var ue=J.toGeoJSON(p);if(P)U.push(ue.geometry);else{var Pe=vc(ue);"FeatureCollection"===Pe.type?U.push.apply(U,Pe.features):U.push(Pe)}}}),P?Zl(this,{geometries:U,type:"GeometryCollection"}):{type:"FeatureCollection",features:U}}});var Wl=sa,xo=Pn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,x,P){this._url=p,this._bounds=Ji(x),it(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ft(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&vn(this._image),this},bringToBack:function(){return this._map&&dn(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=Ji(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p="IMG"===this._url.tagName,x=this._image=p?this._url:Ne("img");ft(x,"leaflet-image-layer"),this._zoomAnimated&&ft(x,"leaflet-zoom-animated"),this.options.className&&ft(x,this.options.className),x.onselectstart=Ue,x.onmousemove=Ue,x.onload=y(this.fire,this,"load"),x.onerror=y(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(x.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p?this._url=x.src:(x.src=this._url,x.alt=this.options.alt)},_animateZoom:function(p){var x=this._map.getZoomScale(p.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;hs(this._image,P,x)},_reset:function(){var p=this._image,x=new Ii(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=x.getSize();fr(p,x.min),p.style.width=P.x+"px",p.style.height=P.y+"px"},_updateOpacity:function(){Mi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),Kc=xo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p="VIDEO"===this._url.tagName,x=this._image=p?this._url:Ne("video");if(ft(x,"leaflet-image-layer"),this._zoomAnimated&&ft(x,"leaflet-zoom-animated"),this.options.className&&ft(x,this.options.className),x.onselectstart=Ue,x.onmousemove=Ue,x.onloadeddata=y(this.fire,this,"load"),p){for(var P=x.getElementsByTagName("source"),U=[],J=0;J<P.length;J++)U.push(P[J].src);this._url=P.length>0?U:[x.src]}else{gt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(x.style,"objectFit")&&(x.style.objectFit="fill"),x.autoplay=!!this.options.autoplay,x.loop=!!this.options.loop,x.muted=!!this.options.muted,x.playsInline=!!this.options.playsInline;for(var ue=0;ue<this._url.length;ue++){var Pe=Ne("source");Pe.src=this._url[ue],x.appendChild(Pe)}}}});var Ru=xo.extend({_initImage:function(){var p=this._image=this._url;ft(p,"leaflet-image-layer"),this._zoomAnimated&&ft(p,"leaflet-zoom-animated"),this.options.className&&ft(p,this.options.className),p.onselectstart=Ue,p.onmousemove=Ue}});var Us=Pn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,x){p&&(p instanceof Ci||gt(p))?(this._latlng=Si(p),it(this,x)):(it(this,p),this._source=x),this.options.content&&(this._content=this.options.content)},openOn:function(p){return(p=arguments.length?p:this._source._map).hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&Mi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&Mi(this._container,1),this.bringToFront(),this.options.interactive&&(ft(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(Mi(this._container,0),this._removeTimeout=setTimeout(y(Tt,void 0,this._container),200)):Tt(this._container),this.options.interactive&&(kn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=Si(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vn(this._container),this},bringToBack:function(){return this._map&&dn(this._container),this},_prepareOpen:function(p){var x=this._source;if(!x._map)return!1;if(x instanceof zi){x=null;var P=this._source._layers;for(var U in P)if(P[U]._map){x=P[U];break}if(!x)return!1;this._source=x}if(!p)if(x.getCenter)p=x.getCenter();else if(x.getLatLng)p=x.getLatLng();else{if(!x.getBounds)throw new Error("Unable to get source layer LatLng.");p=x.getBounds().getCenter()}return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,x="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof x)p.innerHTML=x;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(x)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),x=xn(this.options.offset),P=this._getAnchor();this._zoomAnimated?fr(this._container,p.add(P)):x=x.add(p).add(P);var U=this._containerBottom=-x.y,J=this._containerLeft=-Math.round(this._containerWidth/2)+x.x;this._container.style.bottom=U+"px",this._container.style.left=J+"px"}},_getAnchor:function(){return[0,0]}});Oi.include({_initOverlay:function(p,x,P,U){var J=x;return J instanceof p||(J=new p(U).setContent(x)),P&&J.setLatLng(P),J}}),Pn.include({_initOverlay:function(p,x,P,U){var J=P;return J instanceof p?(it(J,U),J._source=this):(J=x&&!U?x:new p(U,this)).setContent(P),J}});var Lo=Us.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return!(p=arguments.length?p:this._source._map).hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,Us.prototype.openOn.call(this,p)},onAdd:function(p){Us.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ia||this._source.on("preclick",Nr))},onRemove:function(p){Us.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ia||this._source.off("preclick",Nr))},getEvents:function(){var p=Us.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",x=this._container=Ne("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=Ne("div",p+"-content-wrapper",x);if(this._contentNode=Ne("div",p+"-content",P),Ao(x),$a(this._contentNode),$n(x,"contextmenu",Nr),this._tipContainer=Ne("div",p+"-tip-container",x),this._tip=Ne("div",p+"-tip",this._tipContainer),this.options.closeButton){var U=this._closeButton=Ne("a",p+"-close-button",x);U.setAttribute("role","button"),U.setAttribute("aria-label","Close popup"),U.href="#close",U.innerHTML='<span aria-hidden="true">&#215;</span>',$n(U,"click",function(J){hr(J),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,x=p.style;x.width="",x.whiteSpace="nowrap";var P=p.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),x.width=P+1+"px",x.whiteSpace="",x.height="";var J=this.options.maxHeight,ue="leaflet-popup-scrolled";J&&p.offsetHeight>J?(x.height=J+"px",ft(p,ue)):kn(p,ue),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var x=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),P=this._getAnchor();fr(this._container,x.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var p=this._map,x=parseInt(Be(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+x,U=this._containerWidth,J=new Un(this._containerLeft,-P-this._containerBottom);J._add(zn(this._container));var ue=p.layerPointToContainerPoint(J),Pe=xn(this.options.autoPanPadding),tt=xn(this.options.autoPanPaddingTopLeft||Pe),at=xn(this.options.autoPanPaddingBottomRight||Pe),wt=p.getSize(),qt=0,Kn=0;ue.x+U+at.x>wt.x&&(qt=ue.x+U-wt.x+at.x),ue.x-qt-tt.x<0&&(qt=ue.x-tt.x),ue.y+P+at.y>wt.y&&(Kn=ue.y+P-wt.y+at.y),ue.y-Kn-tt.y<0&&(Kn=ue.y-tt.y),(qt||Kn)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([qt,Kn]))}},_getAnchor:function(){return xn(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Oi.mergeOptions({closePopupOnClick:!0}),Oi.include({openPopup:function(p,x,P){return this._initOverlay(Lo,p,x,P).openOn(this),this},closePopup:function(p){return(p=arguments.length?p:this._popup)&&p.close(),this}}),Pn.include({bindPopup:function(p,x){return this._popup=this._initOverlay(Lo,this._popup,p,x),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof zi||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(this._popup&&this._map){On(p);var x=p.layer||p.target;if(this._popup._source===x&&!(x instanceof Ia))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng));this._popup._source=x,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){13===p.originalEvent.keyCode&&this._openPopup(p)}});var _l=Us.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){Us.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){Us.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=Us.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){this._contentNode=this._container=Ne("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+pe(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var x,P,U=this._map,J=this._container,ue=U.latLngToContainerPoint(U.getCenter()),Pe=U.layerPointToContainerPoint(p),tt=this.options.direction,at=J.offsetWidth,wt=J.offsetHeight,qt=xn(this.options.offset),Kn=this._getAnchor();"top"===tt?(x=at/2,P=wt):"bottom"===tt?(x=at/2,P=0):"center"===tt?(x=at/2,P=wt/2):"right"===tt?(x=0,P=wt/2):"left"===tt?(x=at,P=wt/2):Pe.x<ue.x?(tt="right",x=0,P=wt/2):(tt="left",x=at+2*(qt.x+Kn.x),P=wt/2),p=p.subtract(xn(x,P,!0)).add(qt).add(Kn),kn(J,"leaflet-tooltip-right"),kn(J,"leaflet-tooltip-left"),kn(J,"leaflet-tooltip-top"),kn(J,"leaflet-tooltip-bottom"),ft(J,"leaflet-tooltip-"+tt),fr(J,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&Mi(this._container,p)},_animateZoom:function(p){var x=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(x)},_getAnchor:function(){return xn(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Oi.include({openTooltip:function(p,x,P){return this._initOverlay(_l,p,x,P).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),Pn.include({bindTooltip:function(p,x){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_l,this._tooltip,p,x),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(p||!this._tooltipHandlersAdded){var x=p?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[x](P),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof zi||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var x=p.getElement();x&&($n(x,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),$n(x,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var x=p.getElement();x&&x.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0))},_moveTooltip:function(p){var P,U,x=p.latlng;this._tooltip.options.sticky&&p.originalEvent&&(P=this._map.mouseEventToContainerPoint(p.originalEvent),U=this._map.containerPointToLayerPoint(P),x=this._map.layerPointToLatLng(U)),this._tooltip.setLatLng(x)}});var ka=gl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var x=p&&"DIV"===p.tagName?p:document.createElement("div"),P=this.options;if(P.html instanceof Element?(ln(x),x.appendChild(P.html)):x.innerHTML=!1!==P.html?P.html:"",P.bgPos){var U=xn(P.bgPos);x.style.backgroundPosition=-U.x+"px "+-U.y+"px"}return this._setIconStyles(x,"icon"),x},createShadow:function(){return null}});gl.Default=$l;var Vr=Pn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Xe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){it(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),Tt(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=lt(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof Un?p:new Un(p,p)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var ue,x=this.getPane().children,P=-p(-1/0,1/0),U=0,J=x.length;U<J;U++)ue=x[U].style.zIndex,x[U]!==this._container&&ue&&(P=p(P,+ue));isFinite(P)&&(this.options.zIndex=P+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Xe.ielt9){Mi(this._container,this.options.opacity);var p=+new Date,x=!1,P=!1;for(var U in this._tiles){var J=this._tiles[U];if(J.current&&J.loaded){var ue=Math.min(1,(p-J.loaded)/200);Mi(J.el,ue),ue<1?x=!0:(J.active?P=!0:this._onOpaqueTile(J),J.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),x&&(Ti(this._fadeFrame),this._fadeFrame=bn(this._updateOpacity,this))}},_onOpaqueTile:Ue,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,x=this.options.maxZoom;if(void 0!==p){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===p?(this._levels[P].el.style.zIndex=x-Math.abs(p-P),this._onUpdateLevel(P)):(Tt(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var U=this._levels[p],J=this._map;return U||((U=this._levels[p]={}).el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),U.el.style.zIndex=x,U.origin=J.project(J.unproject(J.getPixelOrigin()),p).round(),U.zoom=p,this._setZoomTransform(U,J.getCenter(),J.getZoom()),this._onCreateLevel(U)),this._level=U,U}},_onUpdateLevel:Ue,_onRemoveLevel:Ue,_onCreateLevel:Ue,_pruneTiles:function(){if(this._map){var p,x,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom)return void this._removeAllTiles();for(p in this._tiles)(x=this._tiles[p]).retain=x.current;for(p in this._tiles)if((x=this._tiles[p]).current&&!x.active){var U=x.coords;this._retainParent(U.x,U.y,U.z,U.z-5)||this._retainChildren(U.x,U.y,U.z,U.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var x in this._tiles)this._tiles[x].coords.z===p&&this._removeTile(x)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)Tt(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,x,P,U){var J=Math.floor(p/2),ue=Math.floor(x/2),Pe=P-1,tt=new Un(+J,+ue);tt.z=+Pe;var at=this._tileCoordsToKey(tt),wt=this._tiles[at];return wt&&wt.active?(wt.retain=!0,!0):(wt&&wt.loaded&&(wt.retain=!0),Pe>U&&this._retainParent(J,ue,Pe,U))},_retainChildren:function(p,x,P,U){for(var J=2*p;J<2*p+2;J++)for(var ue=2*x;ue<2*x+2;ue++){var Pe=new Un(J,ue);Pe.z=P+1;var tt=this._tileCoordsToKey(Pe),at=this._tiles[tt];at&&at.active?at.retain=!0:(at&&at.loaded&&(at.retain=!0),P+1<U&&this._retainChildren(J,ue,P+1,U))}},_resetView:function(p){var x=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),x,x)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var x=this.options;return void 0!==x.minNativeZoom&&p<x.minNativeZoom?x.minNativeZoom:void 0!==x.maxNativeZoom&&x.maxNativeZoom<p?x.maxNativeZoom:p},_setView:function(p,x,P,U){var J=Math.round(x);J=void 0!==this.options.maxZoom&&J>this.options.maxZoom||void 0!==this.options.minZoom&&J<this.options.minZoom?void 0:this._clampZoom(J),(!U||this.options.updateWhenZooming&&J!==this._tileZoom)&&(this._tileZoom=J,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==J&&this._update(p),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(p,x)},_setZoomTransforms:function(p,x){for(var P in this._levels)this._setZoomTransform(this._levels[P],p,x)},_setZoomTransform:function(p,x,P){var U=this._map.getZoomScale(P,p.zoom),J=p.origin.multiplyBy(U).subtract(this._map._getNewPixelOrigin(x,P)).round();Xe.any3d?hs(p.el,J,U):fr(p.el,J)},_resetGrid:function(){var p=this._map,x=p.options.crs,P=this._tileSize=this.getTileSize(),U=this._tileZoom,J=this._map.getPixelWorldBounds(this._tileZoom);J&&(this._globalTileRange=this._pxBoundsToTileRange(J)),this._wrapX=x.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,x.wrapLng[0]],U).x/P.x),Math.ceil(p.project([0,x.wrapLng[1]],U).x/P.y)],this._wrapY=x.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([x.wrapLat[0],0],U).y/P.x),Math.ceil(p.project([x.wrapLat[1],0],U).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var x=this._map,P=x._animatingZoom?Math.max(x._animateToZoom,x.getZoom()):x.getZoom(),U=x.getZoomScale(P,this._tileZoom),J=x.project(p,this._tileZoom).floor(),ue=x.getSize().divideBy(2*U);return new Ii(J.subtract(ue),J.add(ue))},_update:function(p){var x=this._map;if(x){var P=this._clampZoom(x.getZoom());if(void 0===p&&(p=x.getCenter()),void 0!==this._tileZoom){var U=this._getTiledPixelBounds(p),J=this._pxBoundsToTileRange(U),ue=J.getCenter(),Pe=[],tt=this.options.keepBuffer,at=new Ii(J.getBottomLeft().subtract([tt,-tt]),J.getTopRight().add([tt,-tt]));if(!(isFinite(J.min.x)&&isFinite(J.min.y)&&isFinite(J.max.x)&&isFinite(J.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var wt in this._tiles){var qt=this._tiles[wt].coords;(qt.z!==this._tileZoom||!at.contains(new Un(qt.x,qt.y)))&&(this._tiles[wt].current=!1)}if(Math.abs(P-this._tileZoom)>1)return void this._setView(p,P);for(var Kn=J.min.y;Kn<=J.max.y;Kn++)for(var Ei=J.min.x;Ei<=J.max.x;Ei++){var or=new Un(Ei,Kn);if(or.z=this._tileZoom,this._isValidTile(or)){var ha=this._tiles[this._tileCoordsToKey(or)];ha?ha.current=!0:Pe.push(or)}}if(Pe.sort(function(pn,da){return pn.distanceTo(ue)-da.distanceTo(ue)}),0!==Pe.length){this._loading||(this._loading=!0,this.fire("loading"));var Wt=document.createDocumentFragment();for(Ei=0;Ei<Pe.length;Ei++)this._addTile(Pe[Ei],Wt);this._level.el.appendChild(Wt)}}}},_isValidTile:function(p){var x=this._map.options.crs;if(!x.infinite){var P=this._globalTileRange;if(!x.wrapLng&&(p.x<P.min.x||p.x>P.max.x)||!x.wrapLat&&(p.y<P.min.y||p.y>P.max.y))return!1}if(!this.options.bounds)return!0;var U=this._tileCoordsToBounds(p);return Ji(this.options.bounds).overlaps(U)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var x=this._map,P=this.getTileSize(),U=p.scaleBy(P),J=U.add(P);return[x.unproject(U,p.z),x.unproject(J,p.z)]},_tileCoordsToBounds:function(p){var x=this._tileCoordsToNwSe(p),P=new ji(x[0],x[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var x=p.split(":"),P=new Un(+x[0],+x[1]);return P.z=+x[2],P},_removeTile:function(p){var x=this._tiles[p];x&&(Tt(x.el),delete this._tiles[p],this.fire("tileunload",{tile:x.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){ft(p,"leaflet-tile");var x=this.getTileSize();p.style.width=x.x+"px",p.style.height=x.y+"px",p.onselectstart=Ue,p.onmousemove=Ue,Xe.ielt9&&this.options.opacity<1&&Mi(p,this.options.opacity)},_addTile:function(p,x){var P=this._getTilePos(p),U=this._tileCoordsToKey(p),J=this.createTile(this._wrapCoords(p),y(this._tileReady,this,p));this._initTile(J),this.createTile.length<2&&bn(y(this._tileReady,this,p,null,J)),fr(J,P),this._tiles[U]={el:J,coords:p,current:!0},x.appendChild(J),this.fire("tileloadstart",{tile:J,coords:p})},_tileReady:function(p,x,P){x&&this.fire("tileerror",{error:x,tile:P,coords:p});var U=this._tileCoordsToKey(p);(P=this._tiles[U])&&(P.loaded=+new Date,this._map._fadeAnimated?(Mi(P.el,0),Ti(this._fadeFrame),this._fadeFrame=bn(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),x||(ft(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Xe.ielt9||!this._map._fadeAnimated?bn(this._pruneTiles,this):setTimeout(y(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var x=new Un(this._wrapX?Ce(p.x,this._wrapX):p.x,this._wrapY?Ce(p.y,this._wrapY):p.y);return x.z=p.z,x},_pxBoundsToTileRange:function(p){var x=this.getTileSize();return new Ii(p.min.unscaleBy(x).floor(),p.max.unscaleBy(x).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});var Ki=Vr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,x){this._url=p,(x=it(this,x)).detectRetina&&Xe.retina&&x.maxZoom>0?(x.tileSize=Math.floor(x.tileSize/2),x.zoomReverse?(x.zoomOffset--,x.minZoom=Math.min(x.maxZoom,x.minZoom+1)):(x.zoomOffset++,x.maxZoom=Math.max(x.minZoom,x.maxZoom-1)),x.minZoom=Math.max(0,x.minZoom)):x.zoomReverse?x.minZoom=Math.min(x.maxZoom,x.minZoom):x.maxZoom=Math.max(x.minZoom,x.maxZoom),"string"==typeof x.subdomains&&(x.subdomains=x.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,x){return this._url===p&&void 0===x&&(x=!0),this._url=p,x||this.redraw(),this},createTile:function(p,x){var P=document.createElement("img");return $n(P,"load",y(this._tileOnLoad,this,x,P)),$n(P,"error",y(this._tileOnError,this,x,P)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(P.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(p),P},getTileUrl:function(p){var x={r:Xe.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-p.y;this.options.tms&&(x.y=P),x["-y"]=P}return Zt(this._url,V(x,this.options))},_tileOnLoad:function(p,x){Xe.ielt9?setTimeout(y(p,this,null,x),0):p(null,x)},_tileOnError:function(p,x,P){var U=this.options.errorTileUrl;U&&x.getAttribute("src")!==U&&(x.src=U),p(P,x)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom;return this.options.zoomReverse&&(p=this.options.maxZoom-p),p+this.options.zoomOffset},_getSubdomain:function(p){var x=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[x]},_abortLoading:function(){var p,x;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&((x=this._tiles[p].el).onload=Ue,x.onerror=Ue,!x.complete)){x.src=ni;var P=this._tiles[p].coords;Tt(x),delete this._tiles[p],this.fire("tileabort",{tile:x,coords:P})}},_removeTile:function(p){var x=this._tiles[p];if(x)return x.el.setAttribute("src",ni),Vr.prototype._removeTile.call(this,p)},_tileReady:function(p,x,P){if(this._map&&(!P||P.getAttribute("src")!==ni))return Vr.prototype._tileReady.call(this,p,x,P)}});function vl(p,x){return new Ki(p,x)}var ca=Ki.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,x){this._url=p;var P=V({},this.defaultWmsParams);for(var U in x)U in this.options||(P[U]=x[U]);var J=(x=it(this,x)).detectRetina&&Xe.retina?2:1,ue=this.getTileSize();P.width=ue.x*J,P.height=ue.y*J,this.wmsParams=P},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,Ki.prototype.onAdd.call(this,p)},getTileUrl:function(p){var x=this._tileCoordsToNwSe(p),P=this._crs,U=qn(P.project(x[0]),P.project(x[1])),J=U.min,ue=U.max,Pe=(this._wmsVersion>=1.3&&this._crs===gc?[J.y,J.x,ue.y,ue.x]:[J.x,J.y,ue.x,ue.y]).join(","),tt=Ki.prototype.getTileUrl.call(this,p);return tt+Mt(this.wmsParams,tt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Pe},setParams:function(p,x){return V(this.wmsParams,p),x||this.redraw(),this}});Ki.WMS=ca,vl.wms=function Xt(p,x){return new ca(p,x)};var Ms=Pn.extend({options:{padding:.1},initialize:function(p){it(this,p),pe(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ft(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,x){var P=this._map.getZoomScale(x,this._zoom),U=this._map.getSize().multiplyBy(.5+this.options.padding),J=this._map.project(this._center,x),ue=U.multiplyBy(-P).add(J).subtract(this._map._getNewPixelOrigin(p,x));Xe.any3d?hs(this._container,ue,P):fr(this._container,ue)},_reset:function(){for(var p in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,x=this._map.getSize(),P=this._map.containerPointToLayerPoint(x.multiplyBy(-p)).round();this._bounds=new Ii(P,P.add(x.multiplyBy(1+2*p)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hs=Ms.extend({options:{tolerance:0},getEvents:function(){var p=Ms.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ms.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");$n(p,"mousemove",this._onMouseMove,this),$n(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$n(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){Ti(this._redrawRequest),delete this._ctx,Tt(this._container),Ai(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var x in this._redrawBounds=null,this._layers)this._layers[x]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ms.prototype._update.call(this);var p=this._bounds,x=this._container,P=p.getSize(),U=Xe.retina?2:1;fr(x,p.min),x.width=U*P.x,x.height=U*P.y,x.style.width=P.x+"px",x.style.height=P.y+"px",Xe.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){Ms.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[pe(p)]=p;var x=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=x),this._drawLast=x,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var x=p._order,P=x.next,U=x.prev;P?P.prev=U:this._drawLast=U,U?U.next=P:this._drawFirst=P,delete p._order,delete this._layers[pe(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if("string"==typeof p.options.dashArray){var U,J,x=p.options.dashArray.split(/[, ]+/),P=[];for(J=0;J<x.length;J++){if(U=Number(x[J]),isNaN(U))return;P.push(U)}p.options._dashArray=P}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||bn(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var x=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ii,this._redrawBounds.extend(p._pxBounds.min.subtract([x,x])),this._redrawBounds.extend(p._pxBounds.max.add([x,x]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var x=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,x.x,x.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,x=this._redrawBounds;if(this._ctx.save(),x){var P=x.getSize();this._ctx.beginPath(),this._ctx.rect(x.min.x,x.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var U=this._drawFirst;U;U=U.next)p=U.layer,(!x||p._pxBounds&&p._pxBounds.intersects(x))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,x){if(this._drawing){var P,U,J,ue,Pe=p._parts,tt=Pe.length,at=this._ctx;if(tt){for(at.beginPath(),P=0;P<tt;P++){for(U=0,J=Pe[P].length;U<J;U++)at[U?"lineTo":"moveTo"]((ue=Pe[P][U]).x,ue.y);x&&at.closePath()}this._fillStroke(at,p)}}},_updateCircle:function(p){if(this._drawing&&!p._empty()){var x=p._point,P=this._ctx,U=Math.max(Math.round(p._radius),1),J=(Math.max(Math.round(p._radiusY),1)||U)/U;1!==J&&(P.save(),P.scale(1,J)),P.beginPath(),P.arc(x.x,x.y/J,U,0,2*Math.PI,!1),1!==J&&P.restore(),this._fillStroke(P,p)}},_fillStroke:function(p,x){var P=x.options;P.fill&&(p.globalAlpha=P.fillOpacity,p.fillStyle=P.fillColor||P.color,p.fill(P.fillRule||"evenodd")),P.stroke&&0!==P.weight&&(p.setLineDash&&p.setLineDash(x.options&&x.options._dashArray||[]),p.globalAlpha=P.opacity,p.lineWidth=P.weight,p.strokeStyle=P.color,p.lineCap=P.lineCap,p.lineJoin=P.lineJoin,p.stroke())},_onClick:function(p){for(var P,U,x=this._map.mouseEventToLayerPoint(p),J=this._drawFirst;J;J=J.next)(P=J.layer).options.interactive&&P._containsPoint(x)&&("click"!==p.type&&"preclick"!==p.type||!this._map._draggableMoved(P))&&(U=P);this._fireEvent(!!U&&[U],p)},_onMouseMove:function(p){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var x=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,x)}},_handleMouseOut:function(p){var x=this._hoveredLayer;x&&(kn(this._container,"leaflet-interactive"),this._fireEvent([x],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,x){if(!this._mouseHoverThrottled){for(var P,U,J=this._drawFirst;J;J=J.next)(P=J.layer).options.interactive&&P._containsPoint(x)&&(U=P);U!==this._hoveredLayer&&(this._handleMouseOut(p),U&&(ft(this._container,"leaflet-interactive"),this._fireEvent([U],p,"mouseover"),this._hoveredLayer=U)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],p),this._mouseHoverThrottled=!0,setTimeout(y(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,x,P){this._map._fireDOMEvent(x,P||x.type,p)},_bringToFront:function(p){var x=p._order;if(x){var P=x.next,U=x.prev;if(!P)return;P.prev=U,U?U.next=P:P&&(this._drawFirst=P),x.prev=this._drawLast,this._drawLast.next=x,x.next=null,this._drawLast=x,this._requestRedraw(p)}},_bringToBack:function(p){var x=p._order;if(x){var P=x.next,U=x.prev;if(!U)return;U.next=P,P?P.prev=U:U&&(this._drawLast=U),x.prev=null,x.next=this._drawFirst,this._drawFirst.prev=x,this._drawFirst=x,this._requestRedraw(p)}}});function $s(p){return Xe.canvas?new Hs(p):null}var Oa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Rt={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ms.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var x=p._container=Oa("shape");ft(x,"leaflet-vml-shape "+(this.options.className||"")),x.coordsize="1 1",p._path=Oa("path"),x.appendChild(p._path),this._updateStyle(p),this._layers[pe(p)]=p},_addPath:function(p){var x=p._container;this._container.appendChild(x),p.options.interactive&&p.addInteractiveTarget(x)},_removePath:function(p){var x=p._container;Tt(x),p.removeInteractiveTarget(x),delete this._layers[pe(p)]},_updateStyle:function(p){var x=p._stroke,P=p._fill,U=p.options,J=p._container;J.stroked=!!U.stroke,J.filled=!!U.fill,U.stroke?(x||(x=p._stroke=Oa("stroke")),J.appendChild(x),x.weight=U.weight+"px",x.color=U.color,x.opacity=U.opacity,x.dashStyle=U.dashArray?gt(U.dashArray)?U.dashArray.join(" "):U.dashArray.replace(/( *, *)/g," "):"",x.endcap=U.lineCap.replace("butt","flat"),x.joinstyle=U.lineJoin):x&&(J.removeChild(x),p._stroke=null),U.fill?(P||(P=p._fill=Oa("fill")),J.appendChild(P),P.color=U.fillColor||U.color,P.opacity=U.fillOpacity):P&&(J.removeChild(P),p._fill=null)},_updateCircle:function(p){var x=p._point.round(),P=Math.round(p._radius),U=Math.round(p._radiusY||P);this._setPath(p,p._empty()?"M0 0":"AL "+x.x+","+x.y+" "+P+","+U+" 0,23592600")},_setPath:function(p,x){p._path.v=x},_bringToFront:function(p){vn(p._container)},_bringToBack:function(p){dn(p._container)}},Ra=Xe.vml?Oa:Po,ua=Ms.extend({_initContainer:function(){this._container=Ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Tt(this._container),Ai(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ms.prototype._update.call(this);var p=this._bounds,x=p.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(x))&&(this._svgSize=x,P.setAttribute("width",x.x),P.setAttribute("height",x.y)),fr(P,p.min),P.setAttribute("viewBox",[p.min.x,p.min.y,x.x,x.y].join(" ")),this.fire("update")}},_initPath:function(p){var x=p._path=Ra("path");p.options.className&&ft(x,p.options.className),p.options.interactive&&ft(x,"leaflet-interactive"),this._updateStyle(p),this._layers[pe(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){Tt(p._path),p.removeInteractiveTarget(p._path),delete this._layers[pe(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var x=p._path,P=p.options;x&&(P.stroke?(x.setAttribute("stroke",P.color),x.setAttribute("stroke-opacity",P.opacity),x.setAttribute("stroke-width",P.weight),x.setAttribute("stroke-linecap",P.lineCap),x.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?x.setAttribute("stroke-dasharray",P.dashArray):x.removeAttribute("stroke-dasharray"),P.dashOffset?x.setAttribute("stroke-dashoffset",P.dashOffset):x.removeAttribute("stroke-dashoffset")):x.setAttribute("stroke","none"),P.fill?(x.setAttribute("fill",P.fillColor||P.color),x.setAttribute("fill-opacity",P.fillOpacity),x.setAttribute("fill-rule",P.fillRule||"evenodd")):x.setAttribute("fill","none"))},_updatePoly:function(p,x){this._setPath(p,Br(p._parts,x))},_updateCircle:function(p){var x=p._point,P=Math.max(Math.round(p._radius),1),J="a"+P+","+(Math.max(Math.round(p._radiusY),1)||P)+" 0 1,0 ",ue=p._empty()?"M0 0":"M"+(x.x-P)+","+x.y+J+2*P+",0 "+J+2*-P+",0 ";this._setPath(p,ue)},_setPath:function(p,x){p._path.setAttribute("d",x)},_bringToFront:function(p){vn(p._path)},_bringToBack:function(p){dn(p._path)}});function Fu(p){return Xe.svg||Xe.vml?new ua(p):null}Xe.vml&&ua.include(Rt),Oi.include({getRenderer:function(p){var x=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return x||(x=this._renderer=this._createRenderer()),this.hasLayer(x)||this.addLayer(x),x},_getPaneRenderer:function(p){if("overlayPane"===p||void 0===p)return!1;var x=this._paneRenderers[p];return void 0===x&&(x=this._createRenderer({pane:p}),this._paneRenderers[p]=x),x},_createRenderer:function(p){return this.options.preferCanvas&&$s(p)||Fu(p)}});var Qc=br.extend({initialize:function(p,x){br.prototype.initialize.call(this,this._boundsToLatLngs(p),x)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return[(p=Ji(p)).getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});ua.create=Ra,ua.pointsToPath=Br,Vs.geometryToLayer=Pa,Vs.coordsToLatLng=Jo,Vs.coordsToLatLngs=Aa,Vs.latLngToCoords=La,Vs.latLngsToCoords=es,Vs.getFeature=Zl,Vs.asFeature=vc,Oi.mergeOptions({boxZoom:!0});var xl=ra.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){$n(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ai(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||1!==p.which&&1!==p.button)return!1;this._clearDeferredResetState(),this._resetState(),ta(),qr(),this._startPoint=this._map.mouseEventToContainerPoint(p),$n(document,{contextmenu:On,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),ft(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var x=new Ii(this._point,this._startPoint),P=x.getSize();fr(this._box,x.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(Tt(this._box),kn(this._container,"leaflet-crosshair")),ds(),Yr(),Ai(document,{contextmenu:On,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if((1===p.which||1===p.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(y(this._resetState,this),0);var x=new ji(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(x).fire("boxzoomend",{boxZoomBounds:x})}},_onKeyDown:function(p){27===p.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oi.addInitHook("addHandler","boxZoom",xl),Oi.mergeOptions({doubleClickZoom:!0});var ql=ra.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var x=this._map,P=x.getZoom(),U=x.options.zoomDelta,J=p.originalEvent.shiftKey?P-U:P+U;"center"===x.options.doubleClickZoom?x.setZoom(J):x.setZoomAround(p.containerPoint,J)}});Oi.addInitHook("addHandler","doubleClickZoom",ql),Oi.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xc=ra.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new Ds(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}ft(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){kn(this._map._container,"leaflet-grab"),kn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var x=Ji(this._map.options.maxBounds);this._offsetLimit=qn(this._map.latLngToContainerPoint(x.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(x.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var x=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(x),this._prunePositions(x)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),x=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=x.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,x){return p-(p-x)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var p=this._draggable._newPos.subtract(this._draggable._startPos),x=this._offsetLimit;p.x<x.min.x&&(p.x=this._viscousLimit(p.x,x.min.x)),p.y<x.min.y&&(p.y=this._viscousLimit(p.y,x.min.y)),p.x>x.max.x&&(p.x=this._viscousLimit(p.x,x.max.x)),p.y>x.max.y&&(p.y=this._viscousLimit(p.y,x.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,x=Math.round(p/2),P=this._initialWorldOffset,U=this._draggable._newPos.x,J=(U-x+P)%p+x-P,ue=(U+x+P)%p-x-P,Pe=Math.abs(J+P)<Math.abs(ue+P)?J:ue;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Pe},_onDragEnd:function(p){var x=this._map,P=x.options,U=!P.inertia||p.noInertia||this._times.length<2;if(x.fire("dragend",p),U)x.fire("moveend");else{this._prunePositions(+new Date);var J=this._lastPos.subtract(this._positions[0]),Pe=P.easeLinearity,tt=J.multiplyBy(Pe/((this._lastTime-this._times[0])/1e3)),at=tt.distanceTo([0,0]),wt=Math.min(P.inertiaMaxSpeed,at),qt=tt.multiplyBy(wt/at),Kn=wt/(P.inertiaDeceleration*Pe),Ei=qt.multiplyBy(-Kn/2).round();Ei.x||Ei.y?(Ei=x._limitOffset(Ei,x.options.maxBounds),bn(function(){x.panBy(Ei,{duration:Kn,easeLinearity:Pe,noMoveStart:!0,animate:!0})})):x.fire("moveend")}}});Oi.addInitHook("addHandler","dragging",Xc),Oi.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wl=ra.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),$n(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ai(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,x=document.documentElement,P=p.scrollTop||x.scrollTop,U=p.scrollLeft||x.scrollLeft;this._map._container.focus(),window.scrollTo(U,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var U,J,x=this._panKeys={},P=this.keyCodes;for(U=0,J=P.left.length;U<J;U++)x[P.left[U]]=[-1*p,0];for(U=0,J=P.right.length;U<J;U++)x[P.right[U]]=[p,0];for(U=0,J=P.down.length;U<J;U++)x[P.down[U]]=[0,p];for(U=0,J=P.up.length;U<J;U++)x[P.up[U]]=[0,-1*p]},_setZoomDelta:function(p){var U,J,x=this._zoomKeys={},P=this.keyCodes;for(U=0,J=P.zoomIn.length;U<J;U++)x[P.zoomIn[U]]=p;for(U=0,J=P.zoomOut.length;U<J;U++)x[P.zoomOut[U]]=-p},_addHooks:function(){$n(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ai(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var U,x=p.keyCode,P=this._map;if(x in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(U=this._panKeys[x],p.shiftKey&&(U=xn(U).multiplyBy(3)),P.options.maxBounds&&(U=P._limitOffset(xn(U),P.options.maxBounds)),P.options.worldCopyJump){var J=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(U)));P.panTo(J)}else P.panBy(U)}else if(x in this._zoomKeys)P.setZoom(P.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[x]);else{if(27!==x||!P._popup||!P._popup.options.closeOnEscapeKey)return;P.closePopup()}On(p)}}});Oi.addInitHook("addHandler","keyboard",wl),Oi.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Jc=ra.extend({addHooks:function(){$n(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ai(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var x=Hc(p),P=this._map.options.wheelDebounceTime;this._delta+=x,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var U=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(y(this._performZoom,this),U),On(p)},_performZoom:function(){var p=this._map,x=p.getZoom(),P=this._map.options.zoomSnap||0;p._stop();var J=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,ue=P?Math.ceil(J/P)*P:J,Pe=p._limitZoom(x+(this._delta>0?ue:-ue))-x;this._delta=0,this._startTime=null,Pe&&("center"===p.options.scrollWheelZoom?p.setZoom(x+Pe):p.setZoomAround(this._lastMousePos,x+Pe))}});Oi.addInitHook("addHandler","scrollWheelZoom",Jc);Oi.mergeOptions({tapHold:Xe.touchNative&&Xe.safari&&Xe.mobile,tapTolerance:15});var Yl=ra.extend({addHooks:function(){$n(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ai(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),1===p.touches.length){var x=p.touches[0];this._startPos=this._newPos=new Un(x.clientX,x.clientY),this._holdTimeout=setTimeout(y(function(){this._cancel(),this._isTapValid()&&($n(document,"touchend",hr),$n(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",x))},this),600),$n(document,"touchend touchcancel contextmenu",this._cancel,this),$n(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){Ai(document,"touchend",hr),Ai(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),Ai(document,"touchend touchcancel contextmenu",this._cancel,this),Ai(document,"touchmove",this._onMove,this)},_onMove:function(p){var x=p.touches[0];this._newPos=new Un(x.clientX,x.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,x){var P=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY});P._simulated=!0,x.target.dispatchEvent(P)}});Oi.addInitHook("addHandler","tapHold",Yl),Oi.mergeOptions({touchZoom:Xe.touch,bounceAtZoomLimits:!0});var ko=ra.extend({addHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),$n(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){kn(this._map._container,"leaflet-touch-zoom"),Ai(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var x=this._map;if(p.touches&&2===p.touches.length&&!x._animatingZoom&&!this._zooming){var P=x.mouseEventToContainerPoint(p.touches[0]),U=x.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=x.getSize()._divideBy(2),this._startLatLng=x.containerPointToLatLng(this._centerPoint),"center"!==x.options.touchZoom&&(this._pinchStartLatLng=x.containerPointToLatLng(P.add(U)._divideBy(2))),this._startDist=P.distanceTo(U),this._startZoom=x.getZoom(),this._moved=!1,this._zooming=!0,x._stop(),$n(document,"touchmove",this._onTouchMove,this),$n(document,"touchend touchcancel",this._onTouchEnd,this),hr(p)}},_onTouchMove:function(p){if(p.touches&&2===p.touches.length&&this._zooming){var x=this._map,P=x.mouseEventToContainerPoint(p.touches[0]),U=x.mouseEventToContainerPoint(p.touches[1]),J=P.distanceTo(U)/this._startDist;if(this._zoom=x.getScaleZoom(J,this._startZoom),!x.options.bounceAtZoomLimits&&(this._zoom<x.getMinZoom()&&J<1||this._zoom>x.getMaxZoom()&&J>1)&&(this._zoom=x._limitZoom(this._zoom)),"center"===x.options.touchZoom){if(this._center=this._startLatLng,1===J)return}else{var ue=P._add(U)._divideBy(2)._subtract(this._centerPoint);if(1===J&&0===ue.x&&0===ue.y)return;this._center=x.unproject(x.project(this._pinchStartLatLng,this._zoom).subtract(ue),this._zoom)}this._moved||(x._moveStart(!0,!1),this._moved=!0),Ti(this._animRequest);var Pe=y(x._move,x,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=bn(Pe,this,!0),hr(p)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,Ti(this._animRequest),Ai(document,"touchmove",this._onTouchMove,this),Ai(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Oi.addInitHook("addHandler","touchZoom",ko),Oi.BoxZoom=xl,Oi.DoubleClickZoom=ql,Oi.Drag=Xc,Oi.Keyboard=wl,Oi.ScrollWheelZoom=Jc,Oi.TapHold=Yl,Oi.TouchZoom=ko,Me.Bounds=Ii,Me.Browser=Xe,Me.CRS=Er,Me.Canvas=Hs,Me.Circle=qa,Me.CircleMarker=Wa,Me.Class=Jn,Me.Control=ms,Me.DivIcon=ka,Me.DivOverlay=Us,Me.DomEvent=dc,Me.DomUtil=Uc,Me.Draggable=Ds,Me.Evented=hn,Me.FeatureGroup=zi,Me.GeoJSON=Vs,Me.GridLayer=Vr,Me.Handler=ra,Me.Icon=gl,Me.ImageOverlay=xo,Me.LatLng=Ci,Me.LatLngBounds=ji,Me.Layer=Pn,Me.LayerGroup=oa,Me.LineUtil=ml,Me.Map=Oi,Me.Marker=xt,Me.Mixin=Ea,Me.Path=Ia,Me.Point=Un,Me.PolyUtil=so,Me.Polygon=br,Me.Polyline=gi,Me.Popup=Lo,Me.PosAnimation=pc,Me.Projection=ku,Me.Rectangle=Qc,Me.Renderer=Ms,Me.SVG=ua,Me.SVGOverlay=Ru,Me.TileLayer=Ki,Me.Tooltip=_l,Me.Transformation=Zr,Me.Util=Di,Me.VideoOverlay=Kc,Me.bind=y,Me.bounds=qn,Me.canvas=$s,Me.circle=function Gl(p,x,P){return new qa(p,x,P)},Me.circleMarker=function Kr(p,x){return new Wa(p,x)},Me.control=jl,Me.divIcon=function yp(p){return new ka(p)},Me.extend=V,Me.featureGroup=function(p,x){return new zi(p,x)},Me.geoJSON=sa,Me.geoJson=Wl,Me.gridLayer=function yl(p){return new Vr(p)},Me.icon=function dd(p){return new gl(p)},Me.imageOverlay=function(p,x,P){return new xo(p,x,P)},Me.latLng=Si,Me.latLngBounds=Ji,Me.layerGroup=function(p,x){return new oa(p,x)},Me.map=function Ri(p,x){return new Oi(p,x)},Me.marker=function ki(p,x){return new xt(p,x)},Me.point=xn,Me.polygon=function yc(p,x){return new br(p,x)},Me.polyline=function Bs(p,x){return new gi(p,x)},Me.popup=function(p,x){return new Lo(p,x)},Me.rectangle=function bl(p,x){return new Qc(p,x)},Me.setOptions=it,Me.stamp=pe,Me.svg=Fu,Me.svgOverlay=function js(p,x,P){return new Ru(p,x,P)},Me.tileLayer=vl,Me.tooltip=function(p,x){return new _l(p,x)},Me.transformation=Ho,Me.version="1.9.3",Me.videoOverlay=function pd(p,x,P){return new Kc(p,x,P)};var Ya=window.L;Me.noConflict=function(){return window.L=Ya,this},window.L=Me}(Ot)},498:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{y:()=>Ue});var r=Me(489),q=Me(668),y=Me(292),pe=Me(821),lt=Me(843),Ce=Me(735);let Ue=(()=>{class Ye{constructor(it){this._isScalar=!1,it&&(this._subscribe=it)}lift(it){const Mt=new Ye;return Mt.source=this,Mt.operator=it,Mt}subscribe(it,Mt,Rn){const{operator:Zt}=this,gt=function Ve(Ye,ct,it){if(Ye){if(Ye instanceof r.L)return Ye;if(Ye[q.b])return Ye[q.b]()}return Ye||ct||it?new r.L(Ye,ct,it):new r.L(y.c)}(it,Mt,Rn);if(gt.add(Zt?Zt.call(gt,this.source):this.source||Ce.v.useDeprecatedSynchronousErrorHandling&&!gt.syncErrorThrowable?this._subscribe(gt):this._trySubscribe(gt)),Ce.v.useDeprecatedSynchronousErrorHandling&&gt.syncErrorThrowable&&(gt.syncErrorThrowable=!1,gt.syncErrorThrown))throw gt.syncErrorValue;return gt}_trySubscribe(it){try{return this._subscribe(it)}catch(Mt){Ce.v.useDeprecatedSynchronousErrorHandling&&(it.syncErrorThrown=!0,it.syncErrorValue=Mt),function V(Ye){for(;Ye;){const{closed:ct,destination:it,isStopped:Mt}=Ye;if(ct||Mt)return!1;Ye=it&&it instanceof r.L?it:null}return!0}(it)?it.error(Mt):console.warn(Mt)}}forEach(it,Mt){return new(Mt=We(Mt))((Rn,Zt)=>{let gt;gt=this.subscribe(Zi=>{try{it(Zi)}catch(ni){Zt(ni),gt&&gt.unsubscribe()}},Zt,Rn)})}_subscribe(it){const{source:Mt}=this;return Mt&&Mt.subscribe(it)}[pe.L](){return this}pipe(...it){return 0===it.length?this:(0,lt.U)(it)(this)}toPromise(it){return new(it=We(it))((Mt,Rn)=>{let Zt;this.subscribe(gt=>Zt=gt,gt=>Rn(gt),()=>Mt(Zt))})}}return Ye.create=ct=>new Ye(ct),Ye})();function We(Ye){if(Ye||(Ye=Ce.v.Promise||Promise),!Ye)throw new Error("no Promise impl found");return Ye}},292:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{c:()=>q});var r=Me(735),V=Me(782);const q={closed:!0,next(y){},error(y){if(r.v.useDeprecatedSynchronousErrorHandling)throw y;(0,V.z)(y)},complete(){}}},529:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{xQ:()=>Ce,Yc:()=>lt});var r=Me(498),V=Me(489),q=Me(654),y=Me(279);class Ve extends q.w{constructor(Ye,ct){super(),this.subject=Ye,this.subscriber=ct,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ye=this.subject,ct=Ye.observers;if(this.subject=null,!ct||0===ct.length||Ye.isStopped||Ye.closed)return;const it=ct.indexOf(this.subscriber);-1!==it&&ct.splice(it,1)}}var pe=Me(668);class lt extends V.L{constructor(Ye){super(Ye),this.destination=Ye}}let Ce=(()=>{class We extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[pe.b](){return new lt(this)}lift(ct){const it=new Ue(this,this);return it.operator=ct,it}next(ct){if(this.closed)throw new y.N;if(!this.isStopped){const{observers:it}=this,Mt=it.length,Rn=it.slice();for(let Zt=0;Zt<Mt;Zt++)Rn[Zt].next(ct)}}error(ct){if(this.closed)throw new y.N;this.hasError=!0,this.thrownError=ct,this.isStopped=!0;const{observers:it}=this,Mt=it.length,Rn=it.slice();for(let Zt=0;Zt<Mt;Zt++)Rn[Zt].error(ct);this.observers.length=0}complete(){if(this.closed)throw new y.N;this.isStopped=!0;const{observers:ct}=this,it=ct.length,Mt=ct.slice();for(let Rn=0;Rn<it;Rn++)Mt[Rn].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ct){if(this.closed)throw new y.N;return super._trySubscribe(ct)}_subscribe(ct){if(this.closed)throw new y.N;return this.hasError?(ct.error(this.thrownError),q.w.EMPTY):this.isStopped?(ct.complete(),q.w.EMPTY):(this.observers.push(ct),new Ve(this,ct))}asObservable(){const ct=new r.y;return ct.source=this,ct}}return We.create=(Ye,ct)=>new Ue(Ye,ct),We})();class Ue extends Ce{constructor(Ye,ct){super(),this.destination=Ye,this.source=ct}next(Ye){const{destination:ct}=this;ct&&ct.next&&ct.next(Ye)}error(Ye){const{destination:ct}=this;ct&&ct.error&&this.destination.error(Ye)}complete(){const{destination:Ye}=this;Ye&&Ye.complete&&this.destination.complete()}_subscribe(Ye){const{source:ct}=this;return ct?this.source.subscribe(Ye):q.w.EMPTY}}},489:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{L:()=>lt});var r=Me(43),V=Me(292),q=Me(654),y=Me(668),Ve=Me(735),pe=Me(782);class lt extends q.w{constructor(We,Ye,ct){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=V.c;break;case 1:if(!We){this.destination=V.c;break}if("object"==typeof We){We instanceof lt?(this.syncErrorThrowable=We.syncErrorThrowable,this.destination=We,We.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ce(this,We));break}default:this.syncErrorThrowable=!0,this.destination=new Ce(this,We,Ye,ct)}}[y.b](){return this}static create(We,Ye,ct){const it=new lt(We,Ye,ct);return it.syncErrorThrowable=!1,it}next(We){this.isStopped||this._next(We)}error(We){this.isStopped||(this.isStopped=!0,this._error(We))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(We){this.destination.next(We)}_error(We){this.destination.error(We),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:We}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=We,this}}class Ce extends lt{constructor(We,Ye,ct,it){super(),this._parentSubscriber=We;let Mt,Rn=this;(0,r.m)(Ye)?Mt=Ye:Ye&&(Mt=Ye.next,ct=Ye.error,it=Ye.complete,Ye!==V.c&&(Rn=Object.create(Ye),(0,r.m)(Rn.unsubscribe)&&this.add(Rn.unsubscribe.bind(Rn)),Rn.unsubscribe=this.unsubscribe.bind(this))),this._context=Rn,this._next=Mt,this._error=ct,this._complete=it}next(We){if(!this.isStopped&&this._next){const{_parentSubscriber:Ye}=this;Ve.v.useDeprecatedSynchronousErrorHandling&&Ye.syncErrorThrowable?this.__tryOrSetError(Ye,this._next,We)&&this.unsubscribe():this.__tryOrUnsub(this._next,We)}}error(We){if(!this.isStopped){const{_parentSubscriber:Ye}=this,{useDeprecatedSynchronousErrorHandling:ct}=Ve.v;if(this._error)ct&&Ye.syncErrorThrowable?(this.__tryOrSetError(Ye,this._error,We),this.unsubscribe()):(this.__tryOrUnsub(this._error,We),this.unsubscribe());else if(Ye.syncErrorThrowable)ct?(Ye.syncErrorValue=We,Ye.syncErrorThrown=!0):(0,pe.z)(We),this.unsubscribe();else{if(this.unsubscribe(),ct)throw We;(0,pe.z)(We)}}}complete(){if(!this.isStopped){const{_parentSubscriber:We}=this;if(this._complete){const Ye=()=>this._complete.call(this._context);Ve.v.useDeprecatedSynchronousErrorHandling&&We.syncErrorThrowable?(this.__tryOrSetError(We,Ye),this.unsubscribe()):(this.__tryOrUnsub(Ye),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(We,Ye){try{We.call(this._context,Ye)}catch(ct){if(this.unsubscribe(),Ve.v.useDeprecatedSynchronousErrorHandling)throw ct;(0,pe.z)(ct)}}__tryOrSetError(We,Ye,ct){if(!Ve.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ye.call(this._context,ct)}catch(it){return Ve.v.useDeprecatedSynchronousErrorHandling?(We.syncErrorValue=it,We.syncErrorThrown=!0,!0):((0,pe.z)(it),!0)}return!1}_unsubscribe(){const{_parentSubscriber:We}=this;this._context=null,this._parentSubscriber=null,We.unsubscribe()}}},654:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{w:()=>pe});var r=Me(688),V=Me(830),q=Me(43);const Ve=(()=>{function Ce(Ue){return Error.call(this),this.message=Ue?`${Ue.length} errors occurred during unsubscription:\n${Ue.map((We,Ye)=>`${Ye+1}) ${We.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ue,this}return Ce.prototype=Object.create(Error.prototype),Ce})();class pe{constructor(Ue){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ue&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ue)}unsubscribe(){let Ue;if(this.closed)return;let{_parentOrParents:We,_ctorUnsubscribe:Ye,_unsubscribe:ct,_subscriptions:it}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,We instanceof pe)We.remove(this);else if(null!==We)for(let Mt=0;Mt<We.length;++Mt)We[Mt].remove(this);if((0,q.m)(ct)){Ye&&(this._unsubscribe=void 0);try{ct.call(this)}catch(Mt){Ue=Mt instanceof Ve?lt(Mt.errors):[Mt]}}if((0,r.k)(it)){let Mt=-1,Rn=it.length;for(;++Mt<Rn;){const Zt=it[Mt];if((0,V.K)(Zt))try{Zt.unsubscribe()}catch(gt){Ue=Ue||[],gt instanceof Ve?Ue=Ue.concat(lt(gt.errors)):Ue.push(gt)}}}if(Ue)throw new Ve(Ue)}add(Ue){let We=Ue;if(!Ue)return pe.EMPTY;switch(typeof Ue){case"function":We=new pe(Ue);case"object":if(We===this||We.closed||"function"!=typeof We.unsubscribe)return We;if(this.closed)return We.unsubscribe(),We;if(!(We instanceof pe)){const it=We;We=new pe,We._subscriptions=[it]}break;default:throw new Error("unrecognized teardown "+Ue+" added to Subscription.")}let{_parentOrParents:Ye}=We;if(null===Ye)We._parentOrParents=this;else if(Ye instanceof pe){if(Ye===this)return We;We._parentOrParents=[Ye,this]}else{if(-1!==Ye.indexOf(this))return We;Ye.push(this)}const ct=this._subscriptions;return null===ct?this._subscriptions=[We]:ct.push(We),We}remove(Ue){const We=this._subscriptions;if(We){const Ye=We.indexOf(Ue);-1!==Ye&&We.splice(Ye,1)}}}var Ce;function lt(Ce){return Ce.reduce((Ue,We)=>Ue.concat(We instanceof Ve?We.errors:We),[])}pe.EMPTY=((Ce=new pe).closed=!0,Ce)},735:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{v:()=>V});let r=!1;const V={Promise:void 0,set useDeprecatedSynchronousErrorHandling(q){if(q){const y=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+y.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=q},get useDeprecatedSynchronousErrorHandling(){return r}}},177:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{Ds:()=>pe,IY:()=>y,ft:()=>Ce});var r=Me(489),V=Me(498),q=Me(249);class y extends r.L{constructor(We){super(),this.parent=We}_next(We){this.parent.notifyNext(We)}_error(We){this.parent.notifyError(We),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class pe extends r.L{notifyNext(We){this.destination.next(We)}notifyError(We){this.destination.error(We)}notifyComplete(){this.destination.complete()}}function Ce(Ue,We){if(We.closed)return;if(Ue instanceof V.y)return Ue.subscribe(We);let Ye;try{Ye=(0,q.s)(Ue)(We)}catch(ct){We.error(ct)}return Ye}},762:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{N:()=>pe,c:()=>Ve});var r=Me(529),V=Me(498),q=Me(654),y=Me(327);class Ve extends V.y{constructor(Ye,ct){super(),this.source=Ye,this.subjectFactory=ct,this._refCount=0,this._isComplete=!1}_subscribe(Ye){return this.getSubject().subscribe(Ye)}getSubject(){const Ye=this._subject;return(!Ye||Ye.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ye=this._connection;return Ye||(this._isComplete=!1,Ye=this._connection=new q.w,Ye.add(this.source.subscribe(new lt(this.getSubject(),this))),Ye.closed&&(this._connection=null,Ye=q.w.EMPTY)),Ye}refCount(){return(0,y.x)()(this)}}const pe=(()=>{const We=Ve.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:We._subscribe},_isComplete:{value:We._isComplete,writable:!0},getSubject:{value:We.getSubject},connect:{value:We.connect},refCount:{value:We.refCount}}})();class lt extends r.Yc{constructor(Ye,ct){super(Ye),this.connectable=ct}_error(Ye){this._unsubscribe(),super._error(Ye)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ye=this.connectable;if(Ye){this.connectable=null;const ct=Ye._connection;Ye._refCount=0,Ye._subject=null,Ye._connection=null,ct&&ct.unsubscribe()}}}},254:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{D:()=>Rn});var r=Me(498),V=Me(249),q=Me(654),y=Me(821),lt=Me(454),Ce=Me(430),Ye=Me(955),ct=Me(515);function Rn(Zt,gt){return gt?function Mt(Zt,gt){if(null!=Zt){if(function We(Zt){return Zt&&"function"==typeof Zt[y.L]}(Zt))return function Ve(Zt,gt){return new r.y(Zi=>{const ni=new q.w;return ni.add(gt.schedule(()=>{const Sr=Zt[y.L]();ni.add(Sr.subscribe({next(Ui){ni.add(gt.schedule(()=>Zi.next(Ui)))},error(Ui){ni.add(gt.schedule(()=>Zi.error(Ui)))},complete(){ni.add(gt.schedule(()=>Zi.complete()))}}))})),ni})}(Zt,gt);if((0,Ye.t)(Zt))return function pe(Zt,gt){return new r.y(Zi=>{const ni=new q.w;return ni.add(gt.schedule(()=>Zt.then(Sr=>{ni.add(gt.schedule(()=>{Zi.next(Sr),ni.add(gt.schedule(()=>Zi.complete()))}))},Sr=>{ni.add(gt.schedule(()=>Zi.error(Sr)))}))),ni})}(Zt,gt);if((0,ct.z)(Zt))return(0,lt.r)(Zt,gt);if(function it(Zt){return Zt&&"function"==typeof Zt[Ce.hZ]}(Zt)||"string"==typeof Zt)return function Ue(Zt,gt){if(!Zt)throw new Error("Iterable cannot be null");return new r.y(Zi=>{const ni=new q.w;let Sr;return ni.add(()=>{Sr&&"function"==typeof Sr.return&&Sr.return()}),ni.add(gt.schedule(()=>{Sr=Zt[Ce.hZ](),ni.add(gt.schedule(function(){if(Zi.closed)return;let Ui,fn;try{const hi=Sr.next();Ui=hi.value,fn=hi.done}catch(hi){return void Zi.error(hi)}fn?Zi.complete():(Zi.next(Ui),this.schedule())}))})),ni})}(Zt,gt)}throw new TypeError((null!==Zt&&typeof Zt||Zt)+" is not observable")}(Zt,gt):Zt instanceof r.y?Zt:new r.y((0,V.s)(Zt))}},9:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{n:()=>y});var r=Me(498),V=Me(650),q=Me(454);function y(Ve,pe){return pe?(0,q.r)(Ve,pe):new r.y((0,V.V)(Ve))}},787:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{T:()=>Ve});var r=Me(498),V=Me(866),q=Me(146),y=Me(9);function Ve(...pe){let lt=Number.POSITIVE_INFINITY,Ce=null,Ue=pe[pe.length-1];return(0,V.K)(Ue)?(Ce=pe.pop(),pe.length>1&&"number"==typeof pe[pe.length-1]&&(lt=pe.pop())):"number"==typeof Ue&&(lt=pe.pop()),null===Ce&&1===pe.length&&pe[0]instanceof r.y?pe[0]:(0,q.J)(lt)((0,y.n)(pe,Ce))}},850:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{U:()=>V});var r=Me(489);function V(Ve,pe){return function(Ce){if("function"!=typeof Ve)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Ce.lift(new q(Ve,pe))}}class q{constructor(pe,lt){this.project=pe,this.thisArg=lt}call(pe,lt){return lt.subscribe(new y(pe,this.project,this.thisArg))}}class y extends r.L{constructor(pe,lt,Ce){super(pe),this.project=lt,this.count=0,this.thisArg=Ce||this}_next(pe){let lt;try{lt=this.project.call(this.thisArg,pe,this.count++)}catch(Ce){return void this.destination.error(Ce)}this.destination.next(lt)}}},146:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{J:()=>q});var r=Me(709),V=Me(379);function q(y=Number.POSITIVE_INFINITY){return(0,r.zg)(V.y,y)}},709:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{zg:()=>y});var r=Me(850),V=Me(254),q=Me(177);function y(Ce,Ue,We=Number.POSITIVE_INFINITY){return"function"==typeof Ue?Ye=>Ye.pipe(y((ct,it)=>(0,V.D)(Ce(ct,it)).pipe((0,r.U)((Mt,Rn)=>Ue(ct,Mt,it,Rn))),We)):("number"==typeof Ue&&(We=Ue),Ye=>Ye.lift(new Ve(Ce,We)))}class Ve{constructor(Ue,We=Number.POSITIVE_INFINITY){this.project=Ue,this.concurrent=We}call(Ue,We){return We.subscribe(new pe(Ue,this.project,this.concurrent))}}class pe extends q.Ds{constructor(Ue,We,Ye=Number.POSITIVE_INFINITY){super(Ue),this.project=We,this.concurrent=Ye,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ue){this.active<this.concurrent?this._tryNext(Ue):this.buffer.push(Ue)}_tryNext(Ue){let We;const Ye=this.index++;try{We=this.project(Ue,Ye)}catch(ct){return void this.destination.error(ct)}this.active++,this._innerSub(We)}_innerSub(Ue){const We=new q.IY(this),Ye=this.destination;Ye.add(We);const ct=(0,q.ft)(Ue,We);ct!==We&&Ye.add(ct)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ue){this.destination.next(Ue)}notifyComplete(){const Ue=this.buffer;this.active--,Ue.length>0?this._next(Ue.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},327:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{x:()=>V});var r=Me(489);function V(){return function(pe){return pe.lift(new q(pe))}}class q{constructor(pe){this.connectable=pe}call(pe,lt){const{connectable:Ce}=this;Ce._refCount++;const Ue=new y(pe,Ce),We=lt.subscribe(Ue);return Ue.closed||(Ue.connection=Ce.connect()),We}}class y extends r.L{constructor(pe,lt){super(pe),this.connectable=lt}_unsubscribe(){const{connectable:pe}=this;if(!pe)return void(this.connection=null);this.connectable=null;const lt=pe._refCount;if(lt<=0)return void(this.connection=null);if(pe._refCount=lt-1,lt>1)return void(this.connection=null);const{connection:Ce}=this,Ue=pe._connection;this.connection=null,Ue&&(!Ce||Ue===Ce)&&Ue.unsubscribe()}}},454:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{r:()=>q});var r=Me(498),V=Me(654);function q(y,Ve){return new r.y(pe=>{const lt=new V.w;let Ce=0;return lt.add(Ve.schedule(function(){Ce!==y.length?(pe.next(y[Ce++]),pe.closed||lt.add(this.schedule())):pe.complete()})),lt})}},430:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{hZ:()=>V});const V=function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},821:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},668:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},279:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{N:()=>V});const V=(()=>{function q(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return q.prototype=Object.create(Error.prototype),q})()},782:(fi,Ot,Me)=>{"use strict";function r(V){setTimeout(()=>{throw V},0)}Me.d(Ot,{z:()=>r})},379:(fi,Ot,Me)=>{"use strict";function r(V){return V}Me.d(Ot,{y:()=>r})},688:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{k:()=>r});const r=Array.isArray||(V=>V&&"number"==typeof V.length)},515:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{z:()=>r});const r=V=>V&&"number"==typeof V.length&&"function"!=typeof V},43:(fi,Ot,Me)=>{"use strict";function r(V){return"function"==typeof V}Me.d(Ot,{m:()=>r})},830:(fi,Ot,Me)=>{"use strict";function r(V){return null!==V&&"object"==typeof V}Me.d(Ot,{K:()=>r})},955:(fi,Ot,Me)=>{"use strict";function r(V){return!!V&&"function"!=typeof V.subscribe&&"function"==typeof V.then}Me.d(Ot,{t:()=>r})},866:(fi,Ot,Me)=>{"use strict";function r(V){return V&&"function"==typeof V.schedule}Me.d(Ot,{K:()=>r})},843:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{U:()=>q,z:()=>V});var r=Me(379);function V(...y){return q(y)}function q(y){return 0===y.length?r.y:1===y.length?y[0]:function(pe){return y.reduce((lt,Ce)=>Ce(lt),pe)}}},249:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{s:()=>Ye});var r=Me(650),V=Me(782),y=Me(430),pe=Me(821),Ce=Me(515),Ue=Me(955),We=Me(830);const Ye=ct=>{if(ct&&"function"==typeof ct[pe.L])return(ct=>it=>{const Mt=ct[pe.L]();if("function"!=typeof Mt.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Mt.subscribe(it)})(ct);if((0,Ce.z)(ct))return(0,r.V)(ct);if((0,Ue.t)(ct))return(ct=>it=>(ct.then(Mt=>{it.closed||(it.next(Mt),it.complete())},Mt=>it.error(Mt)).then(null,V.z),it))(ct);if(ct&&"function"==typeof ct[y.hZ])return(ct=>it=>{const Mt=ct[y.hZ]();for(;;){let Rn;try{Rn=Mt.next()}catch(Zt){return it.error(Zt),it}if(Rn.done){it.complete();break}if(it.next(Rn.value),it.closed)break}return"function"==typeof Mt.return&&it.add(()=>{Mt.return&&Mt.return()}),it})(ct);{const Mt=`You provided ${(0,We.K)(ct)?"an invalid object":`'${ct}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Mt)}}},650:(fi,Ot,Me)=>{"use strict";Me.d(Ot,{V:()=>r});const r=V=>q=>{for(let y=0,Ve=V.length;y<Ve&&!q.closed;y++)q.next(V[y]);q.complete()}},943:function(fi){fi.exports=function(){"use strict";var Ot,Me,r;function V(y,Ve){if(Ot)if(Me){var pe="var sharedChunk = {}; ("+Ot+")(sharedChunk); ("+Me+")(sharedChunk);",lt={};Ot(lt),r=Ve(lt),typeof window<"u"&&(r.workerUrl=window.URL.createObjectURL(new Blob([pe],{type:"text/javascript"})))}else Me=Ve;else Ot=Ve}return V(0,function(y){function Ve(u,o,h,g){return new(h||(h=Promise))(function(w,M){function I($){try{B(g.next($))}catch(Y){M(Y)}}function O($){try{B(g.throw($))}catch(Y){M(Y)}}function B($){var Y;$.done?w($.value):(Y=$.value,Y instanceof h?Y:new h(function(ee){ee(Y)})).then(I,O)}B((g=g.apply(u,o||[])).next())})}function pe(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}"function"==typeof SuppressedError&&SuppressedError;var lt=Ce;function Ce(u,o){this.x=u,this.y=o}Ce.prototype={clone:function(){return new Ce(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,o){return this.clone()._rotateAround(u,o)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var o=u.x-this.x,h=u.y-this.y;return o*o+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,o){return Math.atan2(this.x*o-this.y*u,this.x*u+this.y*o)},_matMult:function(u){var o=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=o,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var o=Math.cos(u),h=Math.sin(u),g=h*this.x+o*this.y;return this.x=o*this.x-h*this.y,this.y=g,this},_rotateAround:function(u,o){var h=Math.cos(u),g=Math.sin(u),w=o.y+g*(this.x-o.x)+h*(this.y-o.y);return this.x=o.x+h*(this.x-o.x)-g*(this.y-o.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ce.convert=function(u){return u instanceof Ce?u:Array.isArray(u)?new Ce(u[0],u[1]):u};var Ue=pe(lt),We=Ye;function Ye(u,o,h,g){this.cx=3*u,this.bx=3*(h-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=o,this.p2x=h,this.p2y=g}Ye.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,o){if(void 0===o&&(o=1e-6),u<0)return 0;if(u>1)return 1;for(var h=u,g=0;g<8;g++){var w=this.sampleCurveX(h)-u;if(Math.abs(w)<o)return h;var M=this.sampleCurveDerivativeX(h);if(Math.abs(M)<1e-6)break;h-=w/M}var I=0,O=1;for(h=u,g=0;g<20&&(w=this.sampleCurveX(h),!(Math.abs(w-u)<o));g++)u>w?I=h:O=h,h=.5*(O-I)+I;return h},solve:function(u,o){return this.sampleCurveY(this.solveCurveX(u,o))}};var ct=pe(We);let it,Mt;function Rn(){return null==it&&(it=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),it}function Zt(){if(null==Mt&&(Mt=!1,Rn())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let g=0;g<25;g++){const w=4*g;o.fillStyle=`rgb(${w},${w+1},${w+2})`,o.fillRect(g%5,Math.floor(g/5),1,1)}const h=o.getImageData(0,0,5,5).data;for(let g=0;g<100;g++)if(g%4!=3&&h[g]!==g){Mt=!0;break}}}return Mt||!1}function gt(u,o,h,g){const w=new ct(u,o,h,g);return function(M){return w.solve(M)}}const Zi=gt(.25,.1,.25,1);function ni(u,o,h){return Math.min(h,Math.max(o,u))}function Sr(u,o,h){const g=h-o,w=((u-o)%g+g)%g+o;return w===o?h:w}function Ui(u,...o){for(const h of o)for(const g in h)u[g]=h[g];return u}let fn=1;function hi(u,o,h){const g={};for(const w in u)g[w]=o.call(h||this,u[w],w,u);return g}function In(u,o,h){const g={};for(const w in u)o.call(h||this,u[w],w,u)&&(g[w]=u[w]);return g}function bn(u){return Array.isArray(u)?u.map(bn):"object"==typeof u&&u?hi(u,bn):u}const Ti={};function Di(u){Ti[u]||(typeof console<"u"&&console.warn(u),Ti[u]=!0)}function Jn(u,o,h){return(h.y-u.y)*(o.x-u.x)>(o.y-u.y)*(h.x-u.x)}function Fn(u){let o=0;for(let h,g,w=0,M=u.length,I=M-1;w<M;I=w++)h=u[w],g=u[I],o+=(g.x-h.x)*(h.y+g.y);return o}function gn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let hn=null;function Un(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function xn(u,o,h,g,w){return Ve(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const M=new VideoFrame(u,{timestamp:0});try{const I=M?.format;if(!I||!I.startsWith("BGR")&&!I.startsWith("RGB"))throw new Error(`Unrecognized format ${I}`);const O=I.startsWith("BGR"),B=new Uint8ClampedArray(g*w*4);if(yield M.copyTo(B,function($,Y,ee,re,ce){const de=4*Math.max(-Y,0),_e=(Math.max(0,ee)-ee)*re*4+de,Ie=4*re,ke=Math.max(0,Y),$e=Math.max(0,ee);return{rect:{x:ke,y:$e,width:Math.min($.width,Y+re)-ke,height:Math.min($.height,ee+ce)-$e},layout:[{offset:_e,stride:Ie}]}}(u,o,h,g,w)),O)for(let $=0;$<B.length;$+=4){const Y=B[$];B[$]=B[$+2],B[$+2]=Y}return B}finally{M.close()}})}let Ii,qn,ji,Ji;const Ci={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(u){const o=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(u,o=0){return this.getImageCanvasContext(u).getImageData(-o,-o,u.width+2*o,u.height+2*o)},getImageCanvasContext(u){const o=window.document.createElement("canvas"),h=o.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return o.width=u.width,o.height=u.height,h.drawImage(u,0,0,u.width,u.height),h},resolveURL:u=>(ji||(ji=document.createElement("a")),ji.href=u,ji.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Ji&&(Ji=matchMedia("(prefers-reduced-motion: reduce)")),Ji.matches)}},Si={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Er extends Error{constructor(o,h,g,w){super(`AJAXError: ${h} (${o}): ${g}`),this.status=o,this.statusText=h,this.url=g,this.body=w}}const _r=gn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,ii=u=>Si.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))];function Yn(u,o){const h=new AbortController,g=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:_r(),signal:h.signal});let w=!1,M=!1;return"json"===u.type&&g.headers.set("Accept","application/json"),M||fetch(g).then(I=>{return I.ok?(O=I,void("arrayBuffer"===u.type||"image"===u.type?O.arrayBuffer():"json"===u.type?O.json():O.text()).then(B=>{M||(w=!0,o(null,B,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(B=>{M||o(new Error(B.message))})):I.blob().then(O=>o(new Er(I.status,I.statusText,u.url,O)));var O}).catch(I=>{20!==I.code&&o(new Error(I.message))}),{cancel:()=>{M=!0,w||h.abort()}}}const Zr=function(u,o){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){if(gn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,o);if(!gn())return(ii(u.url)||Yn)(u,o)}if(!(/^file:/.test(h=u.url)||/^file:/.test(_r())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Yn(u,o);if(gn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,o,void 0,!0)}var h;return function(g,w){const M=new XMLHttpRequest;M.open(g.method||"GET",g.url,!0),"arrayBuffer"!==g.type&&"image"!==g.type||(M.responseType="arraybuffer");for(const I in g.headers)M.setRequestHeader(I,g.headers[I]);return"json"===g.type&&(M.responseType="text",M.setRequestHeader("Accept","application/json")),M.withCredentials="include"===g.credentials,M.onerror=()=>{w(new Error(M.statusText))},M.onload=()=>{if((M.status>=200&&M.status<300||0===M.status)&&null!==M.response){let I=M.response;if("json"===g.type)try{I=JSON.parse(M.response)}catch(O){return w(O)}w(null,I,M.getResponseHeader("Cache-Control"),M.getResponseHeader("Expires"))}else{const I=new Blob([M.response],{type:M.getResponseHeader("Content-Type")});w(new Er(M.status,M.statusText,g.url,I))}},M.send(g.body),{cancel:()=>M.abort()}}(u,o)},Ho=function(u,o){return Zr(Ui(u,{type:"arrayBuffer"}),o)};function $o(u){if(!u||u.indexOf("://")<=0||0===u.indexOf("data:image/")||0===u.indexOf("blob:"))return!0;const o=new URL(u),h=window.location;return o.protocol===h.protocol&&o.host===h.host}function Wi(u,o,h){h[u]&&-1!==h[u].indexOf(o)||(h[u]=h[u]||[],h[u].push(o))}function Po(u,o,h){if(h&&h[u]){const g=h[u].indexOf(o);-1!==g&&h[u].splice(g,1)}}class Br{constructor(o,h={}){Ui(this,h),this.type=o}}class Ke extends Br{constructor(o,h={}){super("error",Ui({error:o},h))}}class dt{on(o,h){return this._listeners=this._listeners||{},Wi(o,h,this._listeners),this}off(o,h){return Po(o,h,this._listeners),Po(o,h,this._oneTimeListeners),this}once(o,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Wi(o,h,this._oneTimeListeners),this):new Promise(g=>this.once(o,g))}fire(o,h){"string"==typeof o&&(o=new Br(o,h||{}));const g=o.type;if(this.listens(g)){o.target=this;const w=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const O of w)O.call(this,o);const M=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const O of M)Po(g,O,this._oneTimeListeners),O.call(this,o);const I=this._eventedParent;I&&(Ui(o,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),I.fire(o))}else o instanceof Ke&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,h){return this._eventedParent=o,this._eventedParentData=h,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const kt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xi(u,o){const h={};for(const g in u)"ref"!==g&&(h[g]=u[g]);return kt.forEach(g=>{g in o&&(h[g]=o[g])}),h}function Dn(u,o){if(Array.isArray(u)){if(!Array.isArray(o)||u.length!==o.length)return!1;for(let h=0;h<u.length;h++)if(!Dn(u[h],o[h]))return!1;return!0}if("object"==typeof u&&null!==u&&null!==o){if("object"!=typeof o||Object.keys(u).length!==Object.keys(o).length)return!1;for(const h in u)if(!Dn(u[h],o[h]))return!1;return!0}return u===o}const an={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Gn(u,o,h){h.push({command:an.addSource,args:[u,o[u]]})}function kr(u,o,h){o.push({command:an.removeSource,args:[u]}),h[u]=!0}function Or(u,o,h,g){kr(u,h,g),Gn(u,o,h)}function Mn(u,o,h){let g;for(g in u[h])if(Object.prototype.hasOwnProperty.call(u[h],g)&&"data"!==g&&!Dn(u[h][g],o[h][g]))return!1;for(g in o[h])if(Object.prototype.hasOwnProperty.call(o[h],g)&&"data"!==g&&!Dn(u[h][g],o[h][g]))return!1;return!0}function qi(u,o,h,g,w,M){let I;for(I in o=o||{},u=u||{})Object.prototype.hasOwnProperty.call(u,I)&&(Dn(u[I],o[I])||h.push({command:M,args:[g,I,o[I],w]}));for(I in o)Object.prototype.hasOwnProperty.call(o,I)&&!Object.prototype.hasOwnProperty.call(u,I)&&(Dn(u[I],o[I])||h.push({command:M,args:[g,I,o[I],w]}))}function Cn(u){return u.id}function yn(u,o){return u[o.id]=o,u}class It{constructor(o,h,g,w){this.message=(o?`${o}: `:"")+g,w&&(this.identifier=w),null!=h&&h.__line__&&(this.line=h.__line__)}}function Ko(u,...o){for(const h of o)for(const g in h)u[g]=h[g];return u}class Vn extends Error{constructor(o,h){super(h),this.message=h,this.key=o}}class Qo{constructor(o,h=[]){this.parent=o,this.bindings={};for(const[g,w]of h)this.bindings[g]=w}concat(o){return new Qo(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Rr={kind:"null"},Lt={kind:"number"},Yt={kind:"string"},Ln={kind:"boolean"},ei={kind:"color"},bo={kind:"object"},Nn={kind:"value"},Fs={kind:"collator"},we={kind:"formatted"},ie={kind:"padding"},oe={kind:"resolvedImage"},me={kind:"variableAnchorOffsetCollection"};function ve(u,o){return{kind:"array",itemType:u,N:o}}function De(u){if("array"===u.kind){const o=De(u.itemType);return"number"==typeof u.N?`array<${o}, ${u.N}>`:"value"===u.itemType.kind?"array":`array<${o}>`}return u.kind}const Ge=[Rr,Lt,Yt,Ln,ei,we,bo,ve(Nn),ie,oe,me];function Oe(u,o){if("error"===o.kind)return null;if("array"===u.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!Oe(u.itemType,o.itemType))&&("number"!=typeof u.N||u.N===o.N))return null}else{if(u.kind===o.kind)return null;if("value"===u.kind)for(const h of Ge)if(!Oe(h,o))return null}return`Expected ${De(u)} but found ${De(o)} instead.`}function Le(u,o){return o.some(h=>h.kind===u.kind)}function Re(u,o){return o.some(h=>"null"===h?null===u:"array"===h?Array.isArray(u):"object"===h?u&&!Array.isArray(u)&&"object"==typeof u:h===typeof u)}function ht(u,o){return"array"===u.kind&&"array"===o.kind?u.itemType.kind===o.itemType.kind&&"number"==typeof u.N:u.kind===o.kind}const ut=.96422,Xe=.82521,Kt=4/29,sn=6/29,Ht=3*sn*sn,Qt=sn*sn*sn,Vt=Math.PI/180,mi=180/Math.PI;function di(u){return(u%=360)<0&&(u+=360),u}function li([u,o,h,g]){let w,M;const I=ir((.2225045*(u=ci(u))+.7168786*(o=ci(o))+.0606169*(h=ci(h)))/1);u===o&&o===h?w=M=I:(w=ir((.4360747*u+.3850649*o+.1430804*h)/ut),M=ir((.0139322*u+.0971045*o+.7141733*h)/Xe));const O=116*I-16;return[O<0?0:O,500*(w-I),200*(I-M),g]}function ci(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function ir(u){return u>Qt?Math.pow(u,1/3):u/Ht+Kt}function Ni([u,o,h,g]){let w=(u+16)/116,M=isNaN(o)?w:w+o/500,I=isNaN(h)?w:w-h/200;return w=1*ur(w),M=ut*ur(M),I=Xe*ur(I),[yr(3.1338561*M-1.6168667*w-.4906146*I),yr(-.9787684*M+1.9161415*w+.033454*I),yr(.0719453*M-.2289914*w+1.4052427*I),g]}function yr(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function ur(u){return u>sn?u*u*u:Ht*(u-Kt)}function Wr(u){return parseInt(u.padEnd(2,u),16)/255}function Js(u,o){return Ca(o?u/100:u,0,1)}function Ca(u,o,h){return Math.min(Math.max(o,u),h)}function ea(u){return!u.some(Number.isNaN)}const hc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Pi{constructor(o,h,g,w=1,M=!0){this.r=o,this.g=h,this.b=g,this.a=w,M||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[o,h,g,w]))}static parse(o){if(o instanceof Pi)return o;if("string"!=typeof o)return;const h=function(g){if("transparent"===(g=g.toLowerCase().trim()))return[0,0,0,0];const w=hc[g];if(w){const[I,O,B]=w;return[I/255,O/255,B/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const I=g.length<6?1:2;let O=1;return[Wr(g.slice(O,O+=I)),Wr(g.slice(O,O+=I)),Wr(g.slice(O,O+=I)),Wr(g.slice(O,O+I)||"ff")]}if(g.startsWith("rgb")){const I=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){const[O,B,$,Y,ee,re,ce,de,_e,Ie,ke,$e]=I,Fe=[Y||" ",ce||" ",Ie].join("");if("  "===Fe||"  /"===Fe||",,"===Fe||",,,"===Fe){const qe=[$,re,_e].join(""),rt="%%%"===qe?100:""===qe?255:0;if(rt){const mt=[Ca(+B/rt,0,1),Ca(+ee/rt,0,1),Ca(+de/rt,0,1),ke?Js(+ke,$e):1];if(ea(mt))return mt}}return}}const M=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){const[I,O,B,$,Y,ee,re,ce,de]=M,_e=[B||" ",Y||" ",re].join("");if("  "===_e||"  /"===_e||",,"===_e||",,,"===_e){const Ie=[+O,Ca(+$,0,100),Ca(+ee,0,100),ce?Js(+ce,de):1];if(ea(Ie))return function([ke,$e,Fe,qe]){function rt(mt){const Ut=(mt+ke/30)%12,tn=$e*Math.min(Fe,1-Fe);return Fe-tn*Math.max(-1,Math.min(Ut-3,9-Ut,1))}return ke=di(ke),$e/=100,Fe/=100,[rt(0),rt(8),rt(4),qe]}(Ie)}}}(o);return h?new Pi(...h,!1):void 0}get rgb(){const{r:o,g:h,b:g,a:w}=this,M=w||1/0;return this.overwriteGetter("rgb",[o/M,h/M,g/M,w])}get hcl(){return this.overwriteGetter("hcl",function(o){const[h,g,w,M]=li(o),I=Math.sqrt(g*g+w*w);return[Math.round(1e4*I)?di(Math.atan2(w,g)*mi):NaN,I,h,M]}(this.rgb))}get lab(){return this.overwriteGetter("lab",li(this.rgb))}overwriteGetter(o,h){return Object.defineProperty(this,o,{value:h}),h}toString(){const[o,h,g,w]=this.rgb;return`rgba(${[o,h,g].map(M=>Math.round(255*M)).join(",")},${w})`}}Pi.black=new Pi(0,0,0,1),Pi.white=new Pi(1,1,1,1),Pi.transparent=new Pi(0,0,0,0),Pi.red=new Pi(1,0,0,1);class z{constructor(o,h,g){this.sensitivity=o?h?"variant":"case":h?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,h){return this.collator.compare(o,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Z{constructor(o,h,g,w,M){this.text=o,this.image=h,this.scale=g,this.fontStack=w,this.textColor=M}}class te{constructor(o){this.sections=o}static fromString(o){return new te([new Z(o,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(o=>0!==o.text.length||o.image&&0!==o.image.name.length)}static factory(o){return o instanceof te?o:te.fromString(o)}toString(){return 0===this.sections.length?"":this.sections.map(o=>o.text).join("")}}class se{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof se)return o;if("number"==typeof o)return new se([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const h of o)if("number"!=typeof h)return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new se(o)}}toString(){return JSON.stringify(this.values)}}const fe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Be{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Be)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let h=0;h<o.length;h+=2){const g=o[h],w=o[h+1];if("string"!=typeof g||!fe.has(g)||!Array.isArray(w)||2!==w.length||"number"!=typeof w[0]||"number"!=typeof w[1])return}return new Be(o)}}toString(){return JSON.stringify(this.values)}}class Ne{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Ne({name:o,available:!1}):null}}function Tt(u,o,h,g){return"number"==typeof u&&u>=0&&u<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof h&&h>=0&&h<=255?void 0===g||"number"==typeof g&&g>=0&&g<=1?null:`Invalid rgba value [${[u,o,h,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof g?[u,o,h,g]:[u,o,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ln(u){if(null===u||"string"==typeof u||"boolean"==typeof u||"number"==typeof u||u instanceof Pi||u instanceof z||u instanceof te||u instanceof se||u instanceof Be||u instanceof Ne)return!0;if(Array.isArray(u)){for(const o of u)if(!ln(o))return!1;return!0}if("object"==typeof u){for(const o in u)if(!ln(u[o]))return!1;return!0}return!1}function vn(u){if(null===u)return Rr;if("string"==typeof u)return Yt;if("boolean"==typeof u)return Ln;if("number"==typeof u)return Lt;if(u instanceof Pi)return ei;if(u instanceof z)return Fs;if(u instanceof te)return we;if(u instanceof se)return ie;if(u instanceof Be)return me;if(u instanceof Ne)return oe;if(Array.isArray(u)){const o=u.length;let h;for(const g of u){const w=vn(g);if(h){if(h===w)continue;h=Nn;break}h=w}return ve(h||Nn,o)}return bo}function dn(u){const o=typeof u;return null===u?"":"string"===o||"number"===o||"boolean"===o?String(u):u instanceof Pi||u instanceof te||u instanceof se||u instanceof Be||u instanceof Ne?u.toString():JSON.stringify(u)}class bt{constructor(o,h){this.type=o,this.value=h}static parse(o,h){if(2!==o.length)return h.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!ln(o[1]))return h.error("invalid value");const g=o[1];let w=vn(g);const M=h.expectedType;return"array"!==w.kind||0!==w.N||!M||"array"!==M.kind||"number"==typeof M.N&&0!==M.N||(w=M),new bt(w,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ft{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const kn={string:Yt,number:Lt,boolean:Ln,object:bo};class on{constructor(o,h){this.type=o,this.args=h}static parse(o,h){if(o.length<2)return h.error("Expected at least one argument.");let g,w=1;const M=o[0];if("array"===M){let O,B;if(o.length>2){const $=o[1];if("string"!=typeof $||!($ in kn)||"object"===$)return h.error('The item type argument of "array" must be one of string, number, boolean',1);O=kn[$],w++}else O=Nn;if(o.length>3){if(null!==o[2]&&("number"!=typeof o[2]||o[2]<0||o[2]!==Math.floor(o[2])))return h.error('The length argument to "array" must be a positive integer literal',2);B=o[2],w++}g=ve(O,B)}else{if(!kn[M])throw new Error(`Types doesn't contain name = ${M}`);g=kn[M]}const I=[];for(;w<o.length;w++){const O=h.parse(o[w],w,Nn);if(!O)return null;I.push(O)}return new on(g,I)}evaluate(o){for(let h=0;h<this.args.length;h++){const g=this.args[h].evaluate(o);if(!Oe(this.type,vn(g)))return g;if(h===this.args.length-1)throw new ft(`Expected value to be of type ${De(this.type)}, but found ${De(vn(g))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Xo={"to-boolean":Ln,"to-color":ei,"to-number":Lt,"to-string":Yt};class Mi{constructor(o,h){this.type=o,this.args=h}static parse(o,h){if(o.length<2)return h.error("Expected at least one argument.");const g=o[0];if(!Xo[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if(("to-boolean"===g||"to-string"===g)&&2!==o.length)return h.error("Expected one argument.");const w=Xo[g],M=[];for(let I=1;I<o.length;I++){const O=h.parse(o[I],I,Nn);if(!O)return null;M.push(O)}return new Mi(w,M)}evaluate(o){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(o));case"color":{let h,g;for(const w of this.args){if(h=w.evaluate(o),g=null,h instanceof Pi)return h;if("string"==typeof h){const M=o.parseColor(h);if(M)return M}else if(Array.isArray(h)&&(g=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Tt(h[0],h[1],h[2],h[3]),!g))return new Pi(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new ft(g||`Could not parse color from value '${"string"==typeof h?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const g of this.args){h=g.evaluate(o);const w=se.parse(h);if(w)return w}throw new ft(`Could not parse padding from value '${"string"==typeof h?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const g of this.args){h=g.evaluate(o);const w=Be.parse(h);if(w)return w}throw new ft(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof h?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const g of this.args){if(h=g.evaluate(o),null===h)return 0;const w=Number(h);if(!isNaN(w))return w}throw new ft(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return te.fromString(dn(this.args[0].evaluate(o)));case"resolvedImage":return Ne.fromString(dn(this.args[0].evaluate(o)));default:return dn(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Ns=["Unknown","Point","LineString","Polygon"];class Yi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ns[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let h=this._parseColorCache[o];return h||(h=this._parseColorCache[o]=Pi.parse(o)),h}}class hs{constructor(o,h,g=[],w,M=new Qo,I=[]){this.registry=o,this.path=g,this.key=g.map(O=>`[${O}]`).join(""),this.scope=M,this.errors=I,this.expectedType=w,this._isConstant=h}parse(o,h,g,w,M={}){return h?this.concat(h,g,w)._parse(o,M):this._parse(o,M)}_parse(o,h){function g(w,M,I){return"assert"===I?new on(M,[w]):"coerce"===I?new Mi(M,[w]):w}if(null!==o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o||(o=["literal",o]),Array.isArray(o)){if(0===o.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=o[0];if("string"!=typeof w)return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const M=this.registry[w];if(M){let I=M.parse(o,this);if(!I)return null;if(this.expectedType){const O=this.expectedType,B=I.type;if("string"!==O.kind&&"number"!==O.kind&&"boolean"!==O.kind&&"object"!==O.kind&&"array"!==O.kind||"value"!==B.kind)if("color"!==O.kind&&"formatted"!==O.kind&&"resolvedImage"!==O.kind||"value"!==B.kind&&"string"!==B.kind)if("padding"!==O.kind||"value"!==B.kind&&"number"!==B.kind&&"array"!==B.kind)if("variableAnchorOffsetCollection"!==O.kind||"value"!==B.kind&&"array"!==B.kind){if(this.checkSubtype(O,B))return null}else I=g(I,O,h.typeAnnotation||"coerce");else I=g(I,O,h.typeAnnotation||"coerce");else I=g(I,O,h.typeAnnotation||"coerce");else I=g(I,O,h.typeAnnotation||"assert")}if(!(I instanceof bt)&&"resolvedImage"!==I.type.kind&&this._isConstant(I)){const O=new Yi;try{I=new bt(I.type,I.evaluate(O))}catch(B){return this.error(B.message),null}}return I}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===o?"'undefined' value invalid. Use null instead.":"object"==typeof o?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,h,g){const w="number"==typeof o?this.path.concat(o):this.path,M=g?this.scope.concat(g):this.scope;return new hs(this.registry,this._isConstant,w,h||null,M,this.errors)}error(o,...h){const g=`${this.key}${h.map(w=>`[${w}]`).join("")}`;this.errors.push(new Vn(g,o))}checkSubtype(o,h){const g=Oe(o,h);return g&&this.error(g),g}}class fr{constructor(o,h,g){this.type=Fs,this.locale=g,this.caseSensitive=o,this.diacriticSensitive=h}static parse(o,h){if(2!==o.length)return h.error("Expected one argument.");const g=o[1];if("object"!=typeof g||Array.isArray(g))return h.error("Collator options argument must be an object.");const w=h.parse(void 0!==g["case-sensitive"]&&g["case-sensitive"],1,Ln);if(!w)return null;const M=h.parse(void 0!==g["diacritic-sensitive"]&&g["diacritic-sensitive"],1,Ln);if(!M)return null;let I=null;return g.locale&&(I=h.parse(g.locale,1,Yt),!I)?null:new fr(w,M,I)}evaluate(o){return new z(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}const zn=8192;function ta(u,o){u[0]=Math.min(u[0],o[0]),u[1]=Math.min(u[1],o[1]),u[2]=Math.max(u[2],o[0]),u[3]=Math.max(u[3],o[1])}function ds(u,o){return!(u[0]<=o[0]||u[2]>=o[2]||u[1]<=o[1]||u[3]>=o[3])}function hl(u,o){const h=(180+u[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,w=Math.pow(2,o.z);return[Math.round(h*w*zn),Math.round(g*w*zn)]}function Es(u,o,h){const g=u[0]-o[0],w=u[1]-o[1],M=u[0]-h[0],I=u[1]-h[1];return g*I-M*w==0&&g*M<=0&&w*I<=0}function qr(u,o){let h=!1;for(let I=0,O=o.length;I<O;I++){const B=o[I];for(let $=0,Y=B.length;$<Y-1;$++){if(Es(u,B[$],B[$+1]))return!1;(w=B[$])[1]>(g=u)[1]!=(M=B[$+1])[1]>g[1]&&g[0]<(M[0]-w[0])*(g[1]-w[1])/(M[1]-w[1])+w[0]&&(h=!h)}}var g,w,M;return h}function Yr(u,o){for(let h=0;h<o.length;h++)if(qr(u,o[h]))return!0;return!1}function na(u,o,h,g){const w=g[0]-h[0],M=g[1]-h[1],I=(u[0]-h[0])*M-w*(u[1]-h[1]),O=(o[0]-h[0])*M-w*(o[1]-h[1]);return I>0&&O<0||I<0&&O>0}function Ts(u,o,h){for(const $ of h)for(let Y=0;Y<$.length-1;++Y)if((O=[(I=$[Y+1])[0]-(M=$[Y])[0],I[1]-M[1]])[0]*(B=[(w=o)[0]-(g=u)[0],w[1]-g[1]])[1]-O[1]*B[0]!=0&&na(g,w,M,I)&&na(M,I,g,w))return!0;var g,w,M,I,O,B;return!1}function Ha(u,o){for(let h=0;h<u.length;++h)if(!qr(u[h],o))return!1;for(let h=0;h<u.length-1;++h)if(Ts(u[h],u[h+1],o))return!1;return!0}function Bl(u,o){for(let h=0;h<o.length;h++)if(Ha(u,o[h]))return!0;return!1}function er(u,o,h){const g=[];for(let w=0;w<u.length;w++){const M=[];for(let I=0;I<u[w].length;I++){const O=hl(u[w][I],h);ta(o,O),M.push(O)}g.push(M)}return g}function Au(u,o,h){const g=[];for(let w=0;w<u.length;w++){const M=er(u[w],o,h);g.push(M)}return g}function Uc(u,o,h,g){if(u[0]<h[0]||u[0]>h[2]){const w=.5*g;let M=u[0]-h[0]>w?-g:h[0]-u[0]>w?g:0;0===M&&(M=u[0]-h[2]>w?-g:h[2]-u[0]>w?g:0),u[0]+=M}ta(o,u)}function $n(u,o,h,g){const w=Math.pow(2,g.z)*zn,M=[g.x*zn,g.y*zn],I=[];for(const O of u)for(const B of O){const $=[B.x+M[0],B.y+M[1]];Uc($,o,h,w),I.push($)}return I}function Go(u,o,h,g){const w=Math.pow(2,g.z)*zn,M=[g.x*zn,g.y*zn],I=[];for(const B of u){const $=[];for(const Y of B){const ee=[Y.x+M[0],Y.y+M[1]];ta(o,ee),$.push(ee)}I.push($)}if(o[2]-o[0]<=w/2){(O=o)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(const B of I)for(const $ of B)Uc($,o,h,w)}var O;return I}class Ai{constructor(o,h){this.type=Ln,this.geojson=o,this.geometries=h}static parse(o,h){if(2!==o.length)return h.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(ln(o[1])){const g=o[1];if("FeatureCollection"===g.type)for(let w=0;w<g.features.length;++w){const M=g.features[w].geometry.type;if("Polygon"===M||"MultiPolygon"===M)return new Ai(g,g.features[w].geometry)}else if("Feature"===g.type){const w=g.geometry.type;if("Polygon"===w||"MultiPolygon"===w)return new Ai(g,g.geometry)}else if("Polygon"===g.type||"MultiPolygon"===g.type)return new Ai(g,g)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(null!=o.geometry()&&null!=o.canonicalID()){if("Point"===o.geometryType())return function(h,g){const w=[1/0,1/0,-1/0,-1/0],M=[1/0,1/0,-1/0,-1/0],I=h.canonicalID();if("Polygon"===g.type){const O=er(g.coordinates,M,I),B=$n(h.geometry(),w,M,I);if(!ds(w,M))return!1;for(const $ of B)if(!qr($,O))return!1}if("MultiPolygon"===g.type){const O=Au(g.coordinates,M,I),B=$n(h.geometry(),w,M,I);if(!ds(w,M))return!1;for(const $ of B)if(!Yr($,O))return!1}return!0}(o,this.geometries);if("LineString"===o.geometryType())return function(h,g){const w=[1/0,1/0,-1/0,-1/0],M=[1/0,1/0,-1/0,-1/0],I=h.canonicalID();if("Polygon"===g.type){const O=er(g.coordinates,M,I),B=Go(h.geometry(),w,M,I);if(!ds(w,M))return!1;for(const $ of B)if(!Ha($,O))return!1}if("MultiPolygon"===g.type){const O=Au(g.coordinates,M,I),B=Go(h.geometry(),w,M,I);if(!ds(w,M))return!1;for(const $ of B)if(!Bl($,O))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ia{constructor(o,h){this.type=h.type,this.name=o,this.boundExpression=h}static parse(o,h){if(2!==o.length||"string"!=typeof o[1])return h.error("'var' expression requires exactly one string literal argument.");const g=o[1];return h.scope.has(g)?new ia(g,h.scope.get(g)):h.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class rr{constructor(o,h,g,w){this.name=o,this.type=h,this._evaluate=g,this.args=w}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,h){const g=o[0],w=rr.definitions[g];if(!w)return h.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const M=Array.isArray(w)?w[0]:w.type,I=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,O=I.filter(([$])=>!Array.isArray($)||$.length===o.length-1);let B=null;for(const[$,Y]of O){B=new hs(h.registry,dl,h.path,null,h.scope);const ee=[];let re=!1;for(let ce=1;ce<o.length;ce++){const de=o[ce],_e=Array.isArray($)?$[ce-1]:$.type,Ie=B.parse(de,1+ee.length,_e);if(!Ie){re=!0;break}ee.push(Ie)}if(!re)if(Array.isArray($)&&$.length!==ee.length)B.error(`Expected ${$.length} arguments, but found ${ee.length} instead.`);else{for(let ce=0;ce<ee.length;ce++){const de=Array.isArray($)?$[ce]:$.type,_e=ee[ce];B.concat(ce+1).checkSubtype(de,_e.type)}if(0===B.errors.length)return new rr(g,M,Y,ee)}}if(1===O.length)h.errors.push(...B.errors);else{const $=(O.length?O:I).map(([ee])=>{return re=ee,Array.isArray(re)?`(${re.map(De).join(", ")})`:`(${De(re.type)}...)`;var re}).join(" | "),Y=[];for(let ee=1;ee<o.length;ee++){const re=h.parse(o[ee],1+Y.length);if(!re)return null;Y.push(De(re.type))}h.error(`Expected arguments of type ${$}, but found (${Y.join(", ")}) instead.`)}return null}static register(o,h){rr.definitions=h;for(const g in h)o[g]=rr}}function dl(u){if(u instanceof ia)return dl(u.boundExpression);if(u instanceof rr&&"error"===u.name||u instanceof fr||u instanceof Ai)return!1;const o=u instanceof Mi||u instanceof on;let h=!0;return u.eachChild(g=>{h=o?h&&dl(g):h&&g instanceof bt}),!!h&&oo(u)&&$a(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oo(u){if(u instanceof rr&&("get"===u.name&&1===u.args.length||"feature-state"===u.name||"has"===u.name&&1===u.args.length||"properties"===u.name||"geometry-type"===u.name||"id"===u.name||/^filter-/.test(u.name))||u instanceof Ai)return!1;let o=!0;return u.eachChild(h=>{o&&!oo(h)&&(o=!1)}),o}function Nr(u){if(u instanceof rr&&"feature-state"===u.name)return!1;let o=!0;return u.eachChild(h=>{o&&!Nr(h)&&(o=!1)}),o}function $a(u,o){if(u instanceof rr&&o.indexOf(u.name)>=0)return!1;let h=!0;return u.eachChild(g=>{h&&!$a(g,o)&&(h=!1)}),h}function Ao(u,o){const h=u.length-1;let g,w,M=0,I=h,O=0;for(;M<=I;)if(O=Math.floor((M+I)/2),g=u[O],w=u[O+1],g<=o){if(O===h||o<w)return O;M=O+1}else{if(!(g>o))throw new ft("Input is not a number.");I=O-1}return 0}class hr{constructor(o,h,g){this.type=o,this.input=h,this.labels=[],this.outputs=[];for(const[w,M]of g)this.labels.push(w),this.outputs.push(M)}static parse(o,h){if(o.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return h.error("Expected an even number of arguments.");const g=h.parse(o[1],1,Lt);if(!g)return null;const w=[];let M=null;h.expectedType&&"value"!==h.expectedType.kind&&(M=h.expectedType);for(let I=1;I<o.length;I+=2){const O=1===I?-1/0:o[I],B=o[I+1],$=I,Y=I+1;if("number"!=typeof O)return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(w.length&&w[w.length-1][0]>=O)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const ee=h.parse(B,Y,M);if(!ee)return null;M=M||ee.type,w.push([O,ee])}return new hr(M,g,w)}evaluate(o){const h=this.labels,g=this.outputs;if(1===h.length)return g[0].evaluate(o);const w=this.input.evaluate(o);if(w<=h[0])return g[0].evaluate(o);const M=h.length;return w>=h[M-1]?g[M-1].evaluate(o):g[Ao(h,w)].evaluate(o)}eachChild(o){o(this.input);for(const h of this.outputs)o(h)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function On(u,o,h){return u+h*(o-u)}function Vl(u,o,h){return u.map((g,w)=>On(g,o[w],h))}const ps={number:On,color:function(u,o,h,g="rgb"){switch(g){case"rgb":{const[w,M,I,O]=Vl(u.rgb,o.rgb,h);return new Pi(w,M,I,O,!1)}case"hcl":{const[w,M,I,O]=u.hcl,[B,$,Y,ee]=o.hcl;let re,ce;if(isNaN(w)||isNaN(B))isNaN(w)?isNaN(B)?re=NaN:(re=B,1!==I&&0!==I||(ce=$)):(re=w,1!==Y&&0!==Y||(ce=M));else{let $e=B-w;B>w&&$e>180?$e-=360:B<w&&w-B>180&&($e+=360),re=w+h*$e}const[de,_e,Ie,ke]=function([$e,Fe,qe,rt]){return $e=isNaN($e)?0:$e*Vt,Ni([qe,Math.cos($e)*Fe,Math.sin($e)*Fe,rt])}([re,ce??On(M,$,h),On(I,Y,h),On(O,ee,h)]);return new Pi(de,_e,Ie,ke,!1)}case"lab":{const[w,M,I,O]=Ni(Vl(u.lab,o.lab,h));return new Pi(w,M,I,O,!1)}}},array:Vl,padding:function(u,o,h){return new se(Vl(u.values,o.values,h))},variableAnchorOffsetCollection:function(u,o,h){const g=u.values,w=o.values;if(g.length!==w.length)throw new ft(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${o.toString()}`);const M=[];for(let I=0;I<g.length;I+=2){if(g[I]!==w[I])throw new ft(`Cannot interpolate values containing mismatched anchors. from[${I}]: ${g[I]}, to[${I}]: ${w[I]}`);M.push(g[I]);const[O,B]=g[I+1],[$,Y]=w[I+1];M.push([On(O,$,h),On(B,Y,h)])}return new Be(M)}};class fs{constructor(o,h,g,w,M){this.type=o,this.operator=h,this.interpolation=g,this.input=w,this.labels=[],this.outputs=[];for(const[I,O]of M)this.labels.push(I),this.outputs.push(O)}static interpolationFactor(o,h,g,w){let M=0;if("exponential"===o.name)M=Hc(h,o.base,g,w);else if("linear"===o.name)M=Hc(h,1,g,w);else if("cubic-bezier"===o.name){const I=o.controlPoints;M=new ct(I[0],I[1],I[2],I[3]).solve(Hc(h,1,g,w))}return M}static parse(o,h){let[g,w,M,...I]=o;if(!Array.isArray(w)||0===w.length)return h.error("Expected an interpolation type expression.",1);if("linear"===w[0])w={name:"linear"};else if("exponential"===w[0]){const $=w[1];if("number"!=typeof $)return h.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:$}}else{if("cubic-bezier"!==w[0])return h.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const $=w.slice(1);if(4!==$.length||$.some(Y=>"number"!=typeof Y||Y<0||Y>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:$}}}if(o.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(M=h.parse(M,2,Lt),!M)return null;const O=[];let B=null;"interpolate-hcl"===g||"interpolate-lab"===g?B=ei:h.expectedType&&"value"!==h.expectedType.kind&&(B=h.expectedType);for(let $=0;$<I.length;$+=2){const Y=I[$],ee=I[$+1],re=$+3,ce=$+4;if("number"!=typeof Y)return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(O.length&&O[O.length-1][0]>=Y)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',re);const de=h.parse(ee,ce,B);if(!de)return null;B=B||de.type,O.push([Y,de])}return ht(B,Lt)||ht(B,ei)||ht(B,ie)||ht(B,me)||ht(B,ve(Lt))?new fs(B,g,w,M,O):h.error(`Type ${De(B)} is not interpolatable.`)}evaluate(o){const h=this.labels,g=this.outputs;if(1===h.length)return g[0].evaluate(o);const w=this.input.evaluate(o);if(w<=h[0])return g[0].evaluate(o);const M=h.length;if(w>=h[M-1])return g[M-1].evaluate(o);const I=Ao(h,w),O=fs.interpolationFactor(this.interpolation,w,h[I],h[I+1]),B=g[I].evaluate(o),$=g[I+1].evaluate(o);switch(this.operator){case"interpolate":return ps[this.type.kind](B,$,O);case"interpolate-hcl":return ps.color(B,$,O,"hcl");case"interpolate-lab":return ps.color(B,$,O,"lab")}}eachChild(o){o(this.input);for(const h of this.outputs)o(h)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Hc(u,o,h,g){const w=g-h,M=u-h;return 0===w?0:1===o?M/w:(Math.pow(o,M)-1)/(Math.pow(o,w)-1)}class pl{constructor(o,h){this.type=o,this.args=h}static parse(o,h){if(o.length<2)return h.error("Expectected at least one argument.");let g=null;const w=h.expectedType;w&&"value"!==w.kind&&(g=w);const M=[];for(const O of o.slice(1)){const B=h.parse(O,1+M.length,g,void 0,{typeAnnotation:"omit"});if(!B)return null;g=g||B.type,M.push(B)}if(!g)throw new Error("No output type");const I=w&&M.some(O=>Oe(w,O.type));return new pl(I?Nn:g,M)}evaluate(o){let h,g=null,w=0;for(const M of this.args)if(w++,g=M.evaluate(o),g&&g instanceof Ne&&!g.available&&(h||(h=g.name),g=null,w===this.args.length&&(g=h)),null!==g)break;return g}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}class dc{constructor(o,h){this.type=h.type,this.bindings=[].concat(o),this.result=h}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const h of this.bindings)o(h[1]);o(this.result)}static parse(o,h){if(o.length<4)return h.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const g=[];for(let M=1;M<o.length-1;M+=2){const I=o[M];if("string"!=typeof I)return h.error(`Expected string, but found ${typeof I} instead.`,M);if(/[^a-zA-Z0-9_]/.test(I))return h.error("Variable names must contain only alphanumeric characters or '_'.",M);const O=h.parse(o[M+1],M+1);if(!O)return null;g.push([I,O])}const w=h.parse(o[o.length-1],o.length-1,h.expectedType,g);return w?new dc(g,w):null}outputDefined(){return this.result.outputDefined()}}class pc{constructor(o,h,g){this.type=o,this.index=h,this.input=g}static parse(o,h){if(3!==o.length)return h.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,Lt),w=h.parse(o[2],2,ve(h.expectedType||Nn));return g&&w?new pc(w.type.itemType,g,w):null}evaluate(o){const h=this.index.evaluate(o),g=this.input.evaluate(o);if(h<0)throw new ft(`Array index out of bounds: ${h} < 0.`);if(h>=g.length)throw new ft(`Array index out of bounds: ${h} > ${g.length-1}.`);if(h!==Math.floor(h))throw new ft(`Array index must be an integer, but found ${h} instead.`);return g[h]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Oi{constructor(o,h){this.type=Ln,this.needle=o,this.haystack=h}static parse(o,h){if(3!==o.length)return h.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,Nn),w=h.parse(o[2],2,Nn);return g&&w?Le(g.type,[Ln,Yt,Lt,Rr,Nn])?new Oi(g,w):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${De(g.type)} instead`):null}evaluate(o){const h=this.needle.evaluate(o),g=this.haystack.evaluate(o);if(!g)return!1;if(!Re(h,["boolean","string","number","null"]))throw new ft(`Expected first argument to be of type boolean, string, number or null, but found ${De(vn(h))} instead.`);if(!Re(g,["string","array"]))throw new ft(`Expected second argument to be of type array or string, but found ${De(vn(g))} instead.`);return g.indexOf(h)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Ri{constructor(o,h,g){this.type=Lt,this.needle=o,this.haystack=h,this.fromIndex=g}static parse(o,h){if(o.length<=2||o.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,Nn),w=h.parse(o[2],2,Nn);if(!g||!w)return null;if(!Le(g.type,[Ln,Yt,Lt,Rr,Nn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${De(g.type)} instead`);if(4===o.length){const M=h.parse(o[3],3,Lt);return M?new Ri(g,w,M):null}return new Ri(g,w)}evaluate(o){const h=this.needle.evaluate(o),g=this.haystack.evaluate(o);if(!Re(h,["boolean","string","number","null"]))throw new ft(`Expected first argument to be of type boolean, string, number or null, but found ${De(vn(h))} instead.`);if(!Re(g,["string","array"]))throw new ft(`Expected second argument to be of type array or string, but found ${De(vn(g))} instead.`);if(this.fromIndex){const w=this.fromIndex.evaluate(o);return g.indexOf(h,w)}return g.indexOf(h)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class ms{constructor(o,h,g,w,M,I){this.inputType=o,this.type=h,this.input=g,this.cases=w,this.outputs=M,this.otherwise=I}static parse(o,h){if(o.length<5)return h.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return h.error("Expected an even number of arguments.");let g,w;h.expectedType&&"value"!==h.expectedType.kind&&(w=h.expectedType);const M={},I=[];for(let $=2;$<o.length-1;$+=2){let Y=o[$];const ee=o[$+1];Array.isArray(Y)||(Y=[Y]);const re=h.concat($);if(0===Y.length)return re.error("Expected at least one branch label.");for(const de of Y){if("number"!=typeof de&&"string"!=typeof de)return re.error("Branch labels must be numbers or strings.");if("number"==typeof de&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof de&&Math.floor(de)!==de)return re.error("Numeric branch labels must be integer values.");if(g){if(re.checkSubtype(g,vn(de)))return null}else g=vn(de);if(void 0!==M[String(de)])return re.error("Branch labels must be unique.");M[String(de)]=I.length}const ce=h.parse(ee,$,w);if(!ce)return null;w=w||ce.type,I.push(ce)}const O=h.parse(o[1],1,Nn);if(!O)return null;const B=h.parse(o[o.length-1],o.length-1,w);return B?"value"!==O.type.kind&&h.concat(1).checkSubtype(g,O.type)?null:new ms(g,w,O,M,I,B):null}evaluate(o){const h=this.input.evaluate(o);return(vn(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class jl{constructor(o,h,g){this.type=o,this.branches=h,this.otherwise=g}static parse(o,h){if(o.length<4)return h.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return h.error("Expected an odd number of arguments.");let g;h.expectedType&&"value"!==h.expectedType.kind&&(g=h.expectedType);const w=[];for(let I=1;I<o.length-1;I+=2){const O=h.parse(o[I],I,Ln);if(!O)return null;const B=h.parse(o[I+1],I+1,g);if(!B)return null;w.push([O,B]),g=g||B.type}const M=h.parse(o[o.length-1],o.length-1,g);if(!M)return null;if(!g)throw new Error("Can't infer output type");return new jl(g,w,M)}evaluate(o){for(const[h,g]of this.branches)if(h.evaluate(o))return g.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[h,g]of this.branches)o(h),o(g);o(this.otherwise)}outputDefined(){return this.branches.every(([o,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class $c{constructor(o,h,g,w){this.type=o,this.input=h,this.beginIndex=g,this.endIndex=w}static parse(o,h){if(o.length<=2||o.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,Nn),w=h.parse(o[2],2,Lt);if(!g||!w)return null;if(!Le(g.type,[ve(Nn),Yt,Nn]))return h.error(`Expected first argument to be of type array or string, but found ${De(g.type)} instead`);if(4===o.length){const M=h.parse(o[3],3,Lt);return M?new $c(g.type,g,w,M):null}return new $c(g.type,g,w)}evaluate(o){const h=this.input.evaluate(o),g=this.beginIndex.evaluate(o);if(!Re(h,["string","array"]))throw new ft(`Expected first argument to be of type array or string, but found ${De(vn(h))} instead.`);if(this.endIndex){const w=this.endIndex.evaluate(o);return h.slice(g,w)}return h.slice(g)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function ld(u,o){return"=="===u||"!="===u?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function Sa(u,o,h,g){return 0===g.compare(o,h)}function Gc(u,o,h){const g="=="!==u&&"!="!==u;return class PA{constructor(M,I,O){this.type=Ln,this.lhs=M,this.rhs=I,this.collator=O,this.hasUntypedArgument="value"===M.type.kind||"value"===I.type.kind}static parse(M,I){if(3!==M.length&&4!==M.length)return I.error("Expected two or three arguments.");const O=M[0];let B=I.parse(M[1],1,Nn);if(!B)return null;if(!ld(O,B.type))return I.concat(1).error(`"${O}" comparisons are not supported for type '${De(B.type)}'.`);let $=I.parse(M[2],2,Nn);if(!$)return null;if(!ld(O,$.type))return I.concat(2).error(`"${O}" comparisons are not supported for type '${De($.type)}'.`);if(B.type.kind!==$.type.kind&&"value"!==B.type.kind&&"value"!==$.type.kind)return I.error(`Cannot compare types '${De(B.type)}' and '${De($.type)}'.`);g&&("value"===B.type.kind&&"value"!==$.type.kind?B=new on($.type,[B]):"value"!==B.type.kind&&"value"===$.type.kind&&($=new on(B.type,[$])));let Y=null;if(4===M.length){if("string"!==B.type.kind&&"string"!==$.type.kind&&"value"!==B.type.kind&&"value"!==$.type.kind)return I.error("Cannot use collator to compare non-string types.");if(Y=I.parse(M[3],3,Fs),!Y)return null}return new PA(B,$,Y)}evaluate(M){const I=this.lhs.evaluate(M),O=this.rhs.evaluate(M);if(g&&this.hasUntypedArgument){const B=vn(I),$=vn(O);if(B.kind!==$.kind||"string"!==B.kind&&"number"!==B.kind)throw new ft(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${B.kind}, ${$.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const B=vn(I),$=vn(O);if("string"!==B.kind||"string"!==$.kind)return o(M,I,O)}return this.collator?h(M,I,O,this.collator.evaluate(M)):o(M,I,O)}eachChild(M){M(this.lhs),M(this.rhs),this.collator&&M(this.collator)}outputDefined(){return!0}}}const mp=Gc("==",function(u,o,h){return o===h},Sa),cd=Gc("!=",function(u,o,h){return o!==h},function(u,o,h,g){return!Sa(0,o,h,g)}),ud=Gc("<",function(u,o,h){return o<h},function(u,o,h,g){return g.compare(o,h)<0}),fh=Gc(">",function(u,o,h){return o>h},function(u,o,h,g){return g.compare(o,h)>0}),gp=Gc("<=",function(u,o,h){return o<=h},function(u,o,h,g){return g.compare(o,h)<=0}),ra=Gc(">=",function(u,o,h){return o>=h},function(u,o,h,g){return g.compare(o,h)>=0});class Ea{constructor(o,h,g,w,M){this.type=Yt,this.number=o,this.locale=h,this.currency=g,this.minFractionDigits=w,this.maxFractionDigits=M}static parse(o,h){if(3!==o.length)return h.error("Expected two arguments.");const g=h.parse(o[1],1,Lt);if(!g)return null;const w=o[2];if("object"!=typeof w||Array.isArray(w))return h.error("NumberFormat options argument must be an object.");let M=null;if(w.locale&&(M=h.parse(w.locale,1,Yt),!M))return null;let I=null;if(w.currency&&(I=h.parse(w.currency,1,Yt),!I))return null;let O=null;if(w["min-fraction-digits"]&&(O=h.parse(w["min-fraction-digits"],1,Lt),!O))return null;let B=null;return w["max-fraction-digits"]&&(B=h.parse(w["max-fraction-digits"],1,Lt),!B)?null:new Ea(g,M,I,O,B)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class fc{constructor(o){this.type=we,this.sections=o}static parse(o,h){if(o.length<2)return h.error("Expected at least one argument.");const g=o[1];if(!Array.isArray(g)&&"object"==typeof g)return h.error("First argument must be an image or text section.");const w=[];let M=!1;for(let I=1;I<=o.length-1;++I){const O=o[I];if(M&&"object"==typeof O&&!Array.isArray(O)){M=!1;let B=null;if(O["font-scale"]&&(B=h.parse(O["font-scale"],1,Lt),!B))return null;let $=null;if(O["text-font"]&&($=h.parse(O["text-font"],1,ve(Yt)),!$))return null;let Y=null;if(O["text-color"]&&(Y=h.parse(O["text-color"],1,ei),!Y))return null;const ee=w[w.length-1];ee.scale=B,ee.font=$,ee.textColor=Y}else{const B=h.parse(o[I],1,Nn);if(!B)return null;const $=B.type.kind;if("string"!==$&&"value"!==$&&"null"!==$&&"resolvedImage"!==$)return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");M=!0,w.push({content:B,scale:null,font:null,textColor:null})}}return new fc(w)}evaluate(o){return new te(this.sections.map(h=>{const g=h.content.evaluate(o);return vn(g)===oe?new Z("",g,null,null,null):new Z(dn(g),null,h.scale?h.scale.evaluate(o):null,h.font?h.font.evaluate(o).join(","):null,h.textColor?h.textColor.evaluate(o):null)}))}eachChild(o){for(const h of this.sections)o(h.content),h.scale&&o(h.scale),h.font&&o(h.font),h.textColor&&o(h.textColor)}outputDefined(){return!1}}class Ds{constructor(o){this.type=oe,this.input=o}static parse(o,h){if(2!==o.length)return h.error("Expected two arguments.");const g=h.parse(o[1],1,Yt);return g?new Ds(g):h.error("No image name provided.")}evaluate(o){const h=this.input.evaluate(o),g=Ne.fromString(h);return g&&o.availableImages&&(g.available=o.availableImages.indexOf(h)>-1),g}eachChild(o){o(this.input)}outputDefined(){return!1}}class Zc{constructor(o){this.type=Lt,this.input=o}static parse(o,h){if(2!==o.length)return h.error(`Expected 1 argument, but found ${o.length-1} instead.`);const g=h.parse(o[1],1);return g?"array"!==g.type.kind&&"string"!==g.type.kind&&"value"!==g.type.kind?h.error(`Expected argument of type string or array, but found ${De(g.type)} instead.`):new Zc(g):null}evaluate(o){const h=this.input.evaluate(o);if("string"==typeof h||Array.isArray(h))return h.length;throw new ft(`Expected value to be of type string or array, but found ${De(vn(h))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Ta={"==":mp,"!=":cd,">":fh,"<":ud,">=":ra,"<=":gp,array:on,at:pc,boolean:on,case:jl,coalesce:pl,collator:fr,format:fc,image:Ds,in:Oi,"index-of":Ri,interpolate:fs,"interpolate-hcl":fs,"interpolate-lab":fs,length:Zc,let:dc,literal:bt,match:ms,number:on,"number-format":Ea,object:on,slice:$c,step:hr,string:on,"to-boolean":Mi,"to-color":Mi,"to-number":Mi,"to-string":Mi,var:ia,within:Ai};function hd(u,[o,h,g,w]){o=o.evaluate(u),h=h.evaluate(u),g=g.evaluate(u);const M=w?w.evaluate(u):1,I=Tt(o,h,g,M);if(I)throw new ft(I);return new Pi(o/255,h/255,g/255,M,!1)}function Lu(u,o){return u in o}function Ul(u,o){const h=o[u];return void 0===h?null:h}function fl(u){return{type:u}}function Ga(u){return{result:"success",value:u}}function Da(u){return{result:"error",value:u}}function Dr(u){return"data-driven"===u["property-type"]||"cross-faded-data-driven"===u["property-type"]}function Ma(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Wc(u){return!!u.expression&&u.expression.interpolated}function Bn(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":null===u?"null":typeof u}function Li(u){return"object"==typeof u&&null!==u&&!Array.isArray(u)}function mc(u){return u}function jn(u,o){const h="color"===o.type,g=u.stops&&"object"==typeof u.stops[0][0],w=g||!(g||void 0!==u.property),M=u.type||(Wc(o)?"exponential":"interval");if(h||"padding"===o.type){const Y=h?Pi.parse:se.parse;(u=Ko({},u)).stops&&(u.stops=u.stops.map(ee=>[ee[0],Y(ee[1])])),u.default=Y(u.default?u.default:o.default)}if(u.colorSpace&&"rgb"!==(I=u.colorSpace)&&"hcl"!==I&&"lab"!==I)throw new Error(`Unknown color space: "${u.colorSpace}"`);var I;let O,B,$;if("exponential"===M)O=so;else if("interval"===M)O=Hi;else if("categorical"===M){O=vr,B=Object.create(null);for(const Y of u.stops)B[Y[0]]=Y[1];$=typeof u.stops[0][0]}else{if("identity"!==M)throw new Error(`Unknown function type "${M}"`);O=qc}if(g){const Y={},ee=[];for(let de=0;de<u.stops.length;de++){const _e=u.stops[de],Ie=_e[0].zoom;void 0===Y[Ie]&&(Y[Ie]={zoom:Ie,type:u.type,property:u.property,default:u.default,stops:[]},ee.push(Ie)),Y[Ie].stops.push([_e[0].value,_e[1]])}const re=[];for(const de of ee)re.push([Y[de].zoom,jn(Y[de],o)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:fs.interpolationFactor.bind(void 0,ce),zoomStops:re.map(de=>de[0]),evaluate:({zoom:de},_e)=>so({stops:re,base:u.base},o,de).evaluate(de,_e)}}if(w){const Y="exponential"===M?{name:"exponential",base:void 0!==u.base?u.base:1}:null;return{kind:"camera",interpolationType:Y,interpolationFactor:fs.interpolationFactor.bind(void 0,Y),zoomStops:u.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>O(u,o,ee,B,$)}}return{kind:"source",evaluate(Y,ee){const re=ee&&ee.properties?ee.properties[u.property]:void 0;return void 0===re?ml(u.default,o.default):O(u,o,re,B,$)}}}function ml(u,o,h){return void 0!==u?u:void 0!==o?o:void 0!==h?h:void 0}function vr(u,o,h,g,w){return ml(typeof h===w?g[h]:void 0,u.default,o.default)}function Hi(u,o,h){if("number"!==Bn(h))return ml(u.default,o.default);const g=u.stops.length;if(1===g||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[g-1][0])return u.stops[g-1][1];const w=Ao(u.stops.map(M=>M[0]),h);return u.stops[w][1]}function so(u,o,h){const g=void 0!==u.base?u.base:1;if("number"!==Bn(h))return ml(u.default,o.default);const w=u.stops.length;if(1===w||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[w-1][0])return u.stops[w-1][1];const M=Ao(u.stops.map(Y=>Y[0]),h),I=function(Y,ee,re,ce){const de=ce-re,_e=Y-re;return 0===de?0:1===ee?_e/de:(Math.pow(ee,_e)-1)/(Math.pow(ee,de)-1)}(h,g,u.stops[M][0],u.stops[M+1][0]),O=u.stops[M][1],B=u.stops[M+1][1],$=ps[o.type]||mc;return"function"==typeof O.evaluate?{evaluate(...Y){const ee=O.evaluate.apply(void 0,Y),re=B.evaluate.apply(void 0,Y);if(void 0!==ee&&void 0!==re)return $(ee,re,I,u.colorSpace)}}:$(O,B,I,u.colorSpace)}function qc(u,o,h){switch(o.type){case"color":h=Pi.parse(h);break;case"formatted":h=te.fromString(h.toString());break;case"resolvedImage":h=Ne.fromString(h.toString());break;case"padding":h=se.parse(h);break;default:Bn(h)===o.type||"enum"===o.type&&o.values[h]||(h=void 0)}return ml(h,u.default,o.default)}rr.register(Ta,{error:[{kind:"error"},[Yt],(u,[o])=>{throw new ft(o.evaluate(u))}],typeof:[Yt,[Nn],(u,[o])=>De(vn(o.evaluate(u)))],"to-rgba":[ve(Lt,4),[ei],(u,[o])=>{const[h,g,w,M]=o.evaluate(u).rgb;return[255*h,255*g,255*w,M]}],rgb:[ei,[Lt,Lt,Lt],hd],rgba:[ei,[Lt,Lt,Lt,Lt],hd],has:{type:Ln,overloads:[[[Yt],(u,[o])=>Lu(o.evaluate(u),u.properties())],[[Yt,bo],(u,[o,h])=>Lu(o.evaluate(u),h.evaluate(u))]]},get:{type:Nn,overloads:[[[Yt],(u,[o])=>Ul(o.evaluate(u),u.properties())],[[Yt,bo],(u,[o,h])=>Ul(o.evaluate(u),h.evaluate(u))]]},"feature-state":[Nn,[Yt],(u,[o])=>Ul(o.evaluate(u),u.featureState||{})],properties:[bo,[],u=>u.properties()],"geometry-type":[Yt,[],u=>u.geometryType()],id:[Nn,[],u=>u.id()],zoom:[Lt,[],u=>u.globals.zoom],"heatmap-density":[Lt,[],u=>u.globals.heatmapDensity||0],"line-progress":[Lt,[],u=>u.globals.lineProgress||0],accumulated:[Nn,[],u=>void 0===u.globals.accumulated?null:u.globals.accumulated],"+":[Lt,fl(Lt),(u,o)=>{let h=0;for(const g of o)h+=g.evaluate(u);return h}],"*":[Lt,fl(Lt),(u,o)=>{let h=1;for(const g of o)h*=g.evaluate(u);return h}],"-":{type:Lt,overloads:[[[Lt,Lt],(u,[o,h])=>o.evaluate(u)-h.evaluate(u)],[[Lt],(u,[o])=>-o.evaluate(u)]]},"/":[Lt,[Lt,Lt],(u,[o,h])=>o.evaluate(u)/h.evaluate(u)],"%":[Lt,[Lt,Lt],(u,[o,h])=>o.evaluate(u)%h.evaluate(u)],ln2:[Lt,[],()=>Math.LN2],pi:[Lt,[],()=>Math.PI],e:[Lt,[],()=>Math.E],"^":[Lt,[Lt,Lt],(u,[o,h])=>Math.pow(o.evaluate(u),h.evaluate(u))],sqrt:[Lt,[Lt],(u,[o])=>Math.sqrt(o.evaluate(u))],log10:[Lt,[Lt],(u,[o])=>Math.log(o.evaluate(u))/Math.LN10],ln:[Lt,[Lt],(u,[o])=>Math.log(o.evaluate(u))],log2:[Lt,[Lt],(u,[o])=>Math.log(o.evaluate(u))/Math.LN2],sin:[Lt,[Lt],(u,[o])=>Math.sin(o.evaluate(u))],cos:[Lt,[Lt],(u,[o])=>Math.cos(o.evaluate(u))],tan:[Lt,[Lt],(u,[o])=>Math.tan(o.evaluate(u))],asin:[Lt,[Lt],(u,[o])=>Math.asin(o.evaluate(u))],acos:[Lt,[Lt],(u,[o])=>Math.acos(o.evaluate(u))],atan:[Lt,[Lt],(u,[o])=>Math.atan(o.evaluate(u))],min:[Lt,fl(Lt),(u,o)=>Math.min(...o.map(h=>h.evaluate(u)))],max:[Lt,fl(Lt),(u,o)=>Math.max(...o.map(h=>h.evaluate(u)))],abs:[Lt,[Lt],(u,[o])=>Math.abs(o.evaluate(u))],round:[Lt,[Lt],(u,[o])=>{const h=o.evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[Lt,[Lt],(u,[o])=>Math.floor(o.evaluate(u))],ceil:[Lt,[Lt],(u,[o])=>Math.ceil(o.evaluate(u))],"filter-==":[Ln,[Yt,Nn],(u,[o,h])=>u.properties()[o.value]===h.value],"filter-id-==":[Ln,[Nn],(u,[o])=>u.id()===o.value],"filter-type-==":[Ln,[Yt],(u,[o])=>u.geometryType()===o.value],"filter-<":[Ln,[Yt,Nn],(u,[o,h])=>{const g=u.properties()[o.value],w=h.value;return typeof g==typeof w&&g<w}],"filter-id-<":[Ln,[Nn],(u,[o])=>{const h=u.id(),g=o.value;return typeof h==typeof g&&h<g}],"filter->":[Ln,[Yt,Nn],(u,[o,h])=>{const g=u.properties()[o.value],w=h.value;return typeof g==typeof w&&g>w}],"filter-id->":[Ln,[Nn],(u,[o])=>{const h=u.id(),g=o.value;return typeof h==typeof g&&h>g}],"filter-<=":[Ln,[Yt,Nn],(u,[o,h])=>{const g=u.properties()[o.value],w=h.value;return typeof g==typeof w&&g<=w}],"filter-id-<=":[Ln,[Nn],(u,[o])=>{const h=u.id(),g=o.value;return typeof h==typeof g&&h<=g}],"filter->=":[Ln,[Yt,Nn],(u,[o,h])=>{const g=u.properties()[o.value],w=h.value;return typeof g==typeof w&&g>=w}],"filter-id->=":[Ln,[Nn],(u,[o])=>{const h=u.id(),g=o.value;return typeof h==typeof g&&h>=g}],"filter-has":[Ln,[Nn],(u,[o])=>o.value in u.properties()],"filter-has-id":[Ln,[],u=>null!==u.id()&&void 0!==u.id()],"filter-type-in":[Ln,[ve(Yt)],(u,[o])=>o.value.indexOf(u.geometryType())>=0],"filter-id-in":[Ln,[ve(Nn)],(u,[o])=>o.value.indexOf(u.id())>=0],"filter-in-small":[Ln,[Yt,ve(Nn)],(u,[o,h])=>h.value.indexOf(u.properties()[o.value])>=0],"filter-in-large":[Ln,[Yt,ve(Nn)],(u,[o,h])=>function(g,w,M,I){for(;M<=I;){const O=M+I>>1;if(w[O]===g)return!0;w[O]>g?I=O-1:M=O+1}return!1}(u.properties()[o.value],h.value,0,h.value.length-1)],all:{type:Ln,overloads:[[[Ln,Ln],(u,[o,h])=>o.evaluate(u)&&h.evaluate(u)],[fl(Ln),(u,o)=>{for(const h of o)if(!h.evaluate(u))return!1;return!0}]]},any:{type:Ln,overloads:[[[Ln,Ln],(u,[o,h])=>o.evaluate(u)||h.evaluate(u)],[fl(Ln),(u,o)=>{for(const h of o)if(h.evaluate(u))return!0;return!1}]]},"!":[Ln,[Ln],(u,[o])=>!o.evaluate(u)],"is-supported-script":[Ln,[Yt],(u,[o])=>{const h=u.globals&&u.globals.isSupportedScript;return!h||h(o.evaluate(u))}],upcase:[Yt,[Yt],(u,[o])=>o.evaluate(u).toUpperCase()],downcase:[Yt,[Yt],(u,[o])=>o.evaluate(u).toLowerCase()],concat:[Yt,fl(Nn),(u,o)=>o.map(h=>dn(h.evaluate(u))).join("")],"resolved-locale":[Yt,[Fs],(u,[o])=>o.evaluate(u).resolvedLocale()]});class Za{constructor(o,h){var g;this.expression=o,this._warningHistory={},this._evaluator=new Yi,this._defaultValue=h?"color"===(g=h).type&&Li(g.default)?new Pi(0,0,0,0):"color"===g.type?Pi.parse(g.default)||null:"padding"===g.type?se.parse(g.default)||null:"variableAnchorOffsetCollection"===g.type?Be.parse(g.default)||null:void 0===g.default?null:g.default:null,this._enumValues=h&&"enum"===h.type?h.values:null}evaluateWithoutErrorHandling(o,h,g,w,M,I){return this._evaluator.globals=o,this._evaluator.feature=h,this._evaluator.featureState=g,this._evaluator.canonical=w,this._evaluator.availableImages=M||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(o,h,g,w,M,I){this._evaluator.globals=o,this._evaluator.feature=h||null,this._evaluator.featureState=g||null,this._evaluator.canonical=w,this._evaluator.availableImages=M||null,this._evaluator.formattedSection=I||null;try{const O=this.expression.evaluate(this._evaluator);if(null==O||"number"==typeof O&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new ft(`Expected value to be one of ${Object.keys(this._enumValues).map(B=>JSON.stringify(B)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function ku(u){return Array.isArray(u)&&u.length>0&&"string"==typeof u[0]&&u[0]in Ta}function zs(u,o){const h=new hs(Ta,dl,[],o?function(w){const M={color:ei,string:Yt,number:Lt,enum:Yt,boolean:Ln,formatted:we,padding:ie,resolvedImage:oe,variableAnchorOffsetCollection:me};return"array"===w.type?ve(M[w.value]||Nn,w.length):M[w.type]}(o):void 0),g=h.parse(u,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return g?Ga(new Za(g,o)):Da(h.errors)}class gc{constructor(o,h){this.kind=o,this._styleExpression=h,this.isStateDependent="constant"!==o&&!Nr(h.expression)}evaluateWithoutErrorHandling(o,h,g,w,M,I){return this._styleExpression.evaluateWithoutErrorHandling(o,h,g,w,M,I)}evaluate(o,h,g,w,M,I){return this._styleExpression.evaluate(o,h,g,w,M,I)}}class Hl{constructor(o,h,g,w){this.kind=o,this.zoomStops=g,this._styleExpression=h,this.isStateDependent="camera"!==o&&!Nr(h.expression),this.interpolationType=w}evaluateWithoutErrorHandling(o,h,g,w,M,I){return this._styleExpression.evaluateWithoutErrorHandling(o,h,g,w,M,I)}evaluate(o,h,g,w,M,I){return this._styleExpression.evaluate(o,h,g,w,M,I)}interpolationFactor(o,h,g){return this.interpolationType?fs.interpolationFactor(this.interpolationType,o,h,g):0}}function Pn(u,o){const h=zs(u,o);if("error"===h.result)return h;const g=h.value.expression,w=oo(g);if(!w&&!Dr(o))return Da([new Vn("","data expressions not supported")]);const M=$a(g,["zoom"]);if(!M&&!Ma(o))return Da([new Vn("","zoom expressions not supported")]);const I=Yc(g);return I||M?I instanceof Vn?Da([I]):I instanceof fs&&!Wc(o)?Da([new Vn("",'"interpolate" expressions cannot be used with this property')]):Ga(I?new Hl(w?"camera":"composite",h.value,I.labels,I instanceof fs?I.interpolation:void 0):new gc(w?"constant":"source",h.value)):Da([new Vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class oa{constructor(o,h){this._parameters=o,this._specification=h,Ko(this,jn(this._parameters,this._specification))}static deserialize(o){return new oa(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Yc(u){let o=null;if(u instanceof dc)o=Yc(u.result);else if(u instanceof pl){for(const h of u.args)if(o=Yc(h),o)break}else(u instanceof hr||u instanceof fs)&&u.input instanceof rr&&"zoom"===u.input.name&&(o=u);return o instanceof Vn||u.eachChild(h=>{const g=Yc(h);g instanceof Vn?o=g:!o&&g?o=new Vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&g&&o!==g&&(o=new Vn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function zi(u){if(!0===u||!1===u)return!0;if(!Array.isArray(u)||0===u.length)return!1;switch(u[0]){case"has":return u.length>=2&&"$id"!==u[1]&&"$type"!==u[1];case"in":return u.length>=3&&("string"!=typeof u[1]||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==u.length||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const o of u.slice(1))if(!zi(o)&&"boolean"!=typeof o)return!1;return!0;default:return!0}}const _p={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gl(u){if(null==u)return{filter:()=>!0,needGeometry:!1};zi(u)||(u=_c(u));const o=zs(u,_p);if("error"===o.result)throw new Error(o.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,g,w)=>o.value.evaluate(h,g,{},w),needGeometry:$l(u)}}function dd(u,o){return u<o?-1:u>o?1:0}function $l(u){if(!Array.isArray(u))return!1;if("within"===u[0])return!0;for(let o=1;o<u.length;o++)if($l(u[o]))return!0;return!1}function _c(u){if(!u)return!0;const o=u[0];return u.length<=1?"any"!==o:"=="===o?xt(u[1],u[2],"=="):"!="===o?Wa(xt(u[1],u[2],"==")):"<"===o||">"===o||"<="===o||">="===o?xt(u[1],u[2],o):"any"===o?(h=u.slice(1),["any"].concat(h.map(_c))):"all"===o?["all"].concat(u.slice(1).map(_c)):"none"===o?["all"].concat(u.slice(1).map(_c).map(Wa)):"in"===o?ki(u[1],u.slice(2)):"!in"===o?Wa(ki(u[1],u.slice(2))):"has"===o?Ia(u[1]):"!has"===o?Wa(Ia(u[1])):"within"!==o||u;var h}function xt(u,o,h){switch(u){case"$type":return[`filter-type-${h}`,o];case"$id":return[`filter-id-${h}`,o];default:return[`filter-${h}`,u,o]}}function ki(u,o){if(0===o.length)return!1;switch(u){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(h=>typeof h!=typeof o[0])?["filter-in-large",u,["literal",o.sort(dd)]]:["filter-in-small",u,["literal",o]]}}function Ia(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Wa(u){return["!",u]}function Kr(u){const o=typeof u;if("number"===o||"boolean"===o||"string"===o||null==u)return JSON.stringify(u);if(Array.isArray(u)){let w="[";for(const M of u)w+=`${Kr(M)},`;return`${w}]`}const h=Object.keys(u).sort();let g="{";for(let w=0;w<h.length;w++)g+=`${JSON.stringify(h[w])}:${Kr(u[h[w]])},`;return`${g}}`}function qa(u){let o="";for(const h of kt)o+=`/${Kr(u[h])}`;return o}function Gl(u){const o=u.value;return o?[new It(u.key,o,"constants have been deprecated as of v8")]:[]}function gi(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Bs(u){if(Array.isArray(u))return u.map(Bs);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const o={};for(const h in u)o[h]=Bs(u[h]);return o}return gi(u)}function br(u){const o=u.key,h=u.value,g=u.valueSpec||{},w=u.objectElementValidators||{},M=u.style,I=u.styleSpec,O=u.validateSpec;let B=[];const $=Bn(h);if("object"!==$)return[new It(o,h,`object expected, ${$} found`)];for(const Y in h){const ee=Y.split(".")[0],re=g[ee]||g["*"];let ce;if(w[ee])ce=w[ee];else if(g[ee])ce=O;else if(w["*"])ce=w["*"];else{if(!g["*"]){B.push(new It(o,h[Y],`unknown property "${Y}"`));continue}ce=O}B=B.concat(ce({key:(o&&`${o}.`)+Y,value:h[Y],valueSpec:re,style:M,styleSpec:I,object:h,objectKey:Y,validateSpec:O},h))}for(const Y in g)w[Y]||g[Y].required&&void 0===g[Y].default&&void 0===h[Y]&&B.push(new It(o,h,`missing required property "${Y}"`));return B}function yc(u){const o=u.value,h=u.valueSpec,g=u.style,w=u.styleSpec,M=u.key,I=u.arrayElementValidator||u.validateSpec;if("array"!==Bn(o))return[new It(M,o,`array expected, ${Bn(o)} found`)];if(h.length&&o.length!==h.length)return[new It(M,o,`array length ${h.length} expected, length ${o.length} found`)];if(h["min-length"]&&o.length<h["min-length"])return[new It(M,o,`array length at least ${h["min-length"]} expected, length ${o.length} found`)];let O={type:h.value,values:h.values};w.$version<7&&(O.function=h.function),"object"===Bn(h.value)&&(O=h.value);let B=[];for(let $=0;$<o.length;$++)B=B.concat(I({array:o,arrayIndex:$,value:o[$],valueSpec:O,validateSpec:u.validateSpec,style:g,styleSpec:w,key:`${M}[${$}]`}));return B}function Vs(u){const o=u.key,h=u.value,g=u.valueSpec;let w=Bn(h);return"number"===w&&h!=h&&(w="NaN"),"number"!==w?[new It(o,h,`number expected, ${w} found`)]:"minimum"in g&&h<g.minimum?[new It(o,h,`${h} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&h>g.maximum?[new It(o,h,`${h} is greater than the maximum value ${g.maximum}`)]:[]}function Pa(u){const o=u.valueSpec,h=gi(u.value.type);let g,w,M,I={};const O="categorical"!==h&&void 0===u.value.property,B=!O,$="array"===Bn(u.value.stops)&&"array"===Bn(u.value.stops[0])&&"object"===Bn(u.value.stops[0][0]),Y=br({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(ce){if("identity"===h)return[new It(ce.key,ce.value,'identity function may not have a "stops" property')];let de=[];const _e=ce.value;return de=de.concat(yc({key:ce.key,value:_e,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:ee})),"array"===Bn(_e)&&0===_e.length&&de.push(new It(ce.key,_e,"array must have at least one stop")),de},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:o,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return"identity"===h&&O&&Y.push(new It(u.key,u.value,'missing required property "property"')),"identity"===h||u.value.stops||Y.push(new It(u.key,u.value,'missing required property "stops"')),"exponential"===h&&u.valueSpec.expression&&!Wc(u.valueSpec)&&Y.push(new It(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(B&&!Dr(u.valueSpec)?Y.push(new It(u.key,u.value,"property functions not supported")):O&&!Ma(u.valueSpec)&&Y.push(new It(u.key,u.value,"zoom functions not supported"))),"categorical"!==h&&!$||void 0!==u.value.property||Y.push(new It(u.key,u.value,'"property" property is required')),Y;function ee(ce){let de=[];const _e=ce.value,Ie=ce.key;if("array"!==Bn(_e))return[new It(Ie,_e,`array expected, ${Bn(_e)} found`)];if(2!==_e.length)return[new It(Ie,_e,`array length 2 expected, length ${_e.length} found`)];if($){if("object"!==Bn(_e[0]))return[new It(Ie,_e,`object expected, ${Bn(_e[0])} found`)];if(void 0===_e[0].zoom)return[new It(Ie,_e,"object stop key must have zoom")];if(void 0===_e[0].value)return[new It(Ie,_e,"object stop key must have value")];if(M&&M>gi(_e[0].zoom))return[new It(Ie,_e[0].zoom,"stop zoom values must appear in ascending order")];gi(_e[0].zoom)!==M&&(M=gi(_e[0].zoom),w=void 0,I={}),de=de.concat(br({key:`${Ie}[0]`,value:_e[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Vs,value:re}}))}else de=de.concat(re({key:`${Ie}[0]`,value:_e[0],valueSpec:{},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},_e));return ku(Bs(_e[1]))?de.concat([new It(`${Ie}[1]`,_e[1],"expressions are not allowed in function stops.")]):de.concat(ce.validateSpec({key:`${Ie}[1]`,value:_e[1],valueSpec:o,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function re(ce,de){const _e=Bn(ce.value),Ie=gi(ce.value),ke=null!==ce.value?ce.value:de;if(g){if(_e!==g)return[new It(ce.key,ke,`${_e} stop domain type must match previous stop domain type ${g}`)]}else g=_e;if("number"!==_e&&"string"!==_e&&"boolean"!==_e)return[new It(ce.key,ke,"stop domain value must be a number, string, or boolean")];if("number"!==_e&&"categorical"!==h){let $e=`number expected, ${_e} found`;return Dr(o)&&void 0===h&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new It(ce.key,ke,$e)]}return"categorical"!==h||"number"!==_e||isFinite(Ie)&&Math.floor(Ie)===Ie?"categorical"!==h&&"number"===_e&&void 0!==w&&Ie<w?[new It(ce.key,ke,"stop domain values must appear in ascending order")]:(w=Ie,"categorical"===h&&Ie in I?[new It(ce.key,ke,"stop domain values must be unique")]:(I[Ie]=!0,[])):[new It(ce.key,ke,`integer expected, found ${Ie}`)]}}function Mr(u){const o=("property"===u.expressionContext?Pn:zs)(Bs(u.value),u.valueSpec);if("error"===o.result)return o.value.map(g=>new It(`${u.key}${g.key}`,u.value,g.message));const h=o.value.expression||o.value._styleExpression.expression;if("property"===u.expressionContext&&"text-font"===u.propertyKey&&!h.outputDefined())return[new It(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===u.expressionContext&&"layout"===u.propertyType&&!Nr(h))return[new It(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===u.expressionContext&&!Nr(h))return[new It(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&0===u.expressionContext.indexOf("cluster")){if(!$a(h,["zoom","feature-state"]))return[new It(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===u.expressionContext&&!oo(h))return[new It(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Jo(u){const o=u.key,h=u.value,g=u.valueSpec,w=[];return Array.isArray(g.values)?-1===g.values.indexOf(gi(h))&&w.push(new It(o,h,`expected one of [${g.values.join(", ")}], ${JSON.stringify(h)} found`)):-1===Object.keys(g.values).indexOf(gi(h))&&w.push(new It(o,h,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(h)} found`)),w}function Aa(u){return zi(Bs(u.value))?Mr(Ko({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):La(u)}function La(u){const o=u.value,h=u.key;if("array"!==Bn(o))return[new It(h,o,`array expected, ${Bn(o)} found`)];const g=u.styleSpec;let w,M=[];if(o.length<1)return[new It(h,o,"filter array must have at least 1 element")];switch(M=M.concat(Jo({key:`${h}[0]`,value:o[0],valueSpec:g.filter_operator,style:u.style,styleSpec:u.styleSpec})),gi(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===gi(o[1])&&M.push(new It(h,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&M.push(new It(h,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(w=Bn(o[1]),"string"!==w&&M.push(new It(`${h}[1]`,o[1],`string expected, ${w} found`)));for(let I=2;I<o.length;I++)w=Bn(o[I]),"$type"===gi(o[1])?M=M.concat(Jo({key:`${h}[${I}]`,value:o[I],valueSpec:g.geometry_type,style:u.style,styleSpec:u.styleSpec})):"string"!==w&&"number"!==w&&"boolean"!==w&&M.push(new It(`${h}[${I}]`,o[I],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let I=1;I<o.length;I++)M=M.concat(La({key:`${h}[${I}]`,value:o[I],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":w=Bn(o[1]),2!==o.length?M.push(new It(h,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==w&&M.push(new It(`${h}[1]`,o[1],`string expected, ${w} found`));break;case"within":w=Bn(o[1]),2!==o.length?M.push(new It(h,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==w&&M.push(new It(`${h}[1]`,o[1],`object expected, ${w} found`))}return M}function es(u,o){const h=u.key,g=u.validateSpec,w=u.style,M=u.styleSpec,I=u.value,O=u.objectKey,B=M[`${o}_${u.layerType}`];if(!B)return[];const $=O.match(/^(.*)-transition$/);if("paint"===o&&$&&B[$[1]]&&B[$[1]].transition)return g({key:h,value:I,valueSpec:M.transition,style:w,styleSpec:M});const Y=u.valueSpec||B[O];if(!Y)return[new It(h,I,`unknown property "${O}"`)];let ee;if("string"===Bn(I)&&Dr(Y)&&!Y.tokens&&(ee=/^{([^}]+)}$/.exec(I)))return[new It(h,I,`"${O}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const re=[];return"symbol"===u.layerType&&("text-field"===O&&w&&!w.glyphs&&re.push(new It(h,I,'use of "text-field" requires a style "glyphs" property')),"text-font"===O&&Li(Bs(I))&&"identity"===gi(I.type)&&re.push(new It(h,I,'"text-font" does not support identity functions'))),re.concat(g({key:u.key,value:I,valueSpec:Y,style:w,styleSpec:M,expressionContext:"property",propertyType:o,propertyKey:O}))}function Zl(u){return es(u,"paint")}function vc(u){return es(u,"layout")}function Ou(u){let o=[];const h=u.value,g=u.key,w=u.style,M=u.styleSpec;h.type||h.ref||o.push(new It(g,h,'either "type" or "ref" is required'));let I=gi(h.type);const O=gi(h.ref);if(h.id){const B=gi(h.id);for(let $=0;$<u.arrayIndex;$++){const Y=w.layers[$];gi(Y.id)===B&&o.push(new It(g,h.id,`duplicate layer id "${h.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in h){let B;["type","source","source-layer","filter","layout"].forEach($=>{$ in h&&o.push(new It(g,h[$],`"${$}" is prohibited for ref layers`))}),w.layers.forEach($=>{gi($.id)===O&&(B=$)}),B?B.ref?o.push(new It(g,h.ref,"ref cannot reference another ref layer")):I=gi(B.type):o.push(new It(g,h.ref,`ref layer "${O}" not found`))}else if("background"!==I)if(h.source){const B=w.sources&&w.sources[h.source],$=B&&gi(B.type);B?"vector"===$&&"raster"===I?o.push(new It(g,h.source,`layer "${h.id}" requires a raster source`)):"raster-dem"!==$&&"hillshade"===I?o.push(new It(g,h.source,`layer "${h.id}" requires a raster-dem source`)):"raster"===$&&"raster"!==I?o.push(new It(g,h.source,`layer "${h.id}" requires a vector source`)):"vector"!==$||h["source-layer"]?"raster-dem"===$&&"hillshade"!==I?o.push(new It(g,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==I||!h.paint||!h.paint["line-gradient"]||"geojson"===$&&B.lineMetrics||o.push(new It(g,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new It(g,h,`layer "${h.id}" must specify a "source-layer"`)):o.push(new It(g,h.source,`source "${h.source}" not found`))}else o.push(new It(g,h,'missing required property "source"'));return o=o.concat(br({key:g,value:h,valueSpec:M.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${g}.type`,value:h.type,valueSpec:M.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:h,objectKey:"type"}),filter:Aa,layout:B=>br({layer:h,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":$=>vc(Ko({layerType:I},$))}}),paint:B=>br({layer:h,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":$=>Zl(Ko({layerType:I},$))}})}})),o}function sa(u){const o=u.value,h=u.key,g=Bn(o);return"string"!==g?[new It(h,o,`string expected, ${g} found`)]:[]}const Wl={promoteId:function({key:u,value:o}){if("string"===Bn(o))return sa({key:u,value:o});{const h=[];for(const g in o)h.push(...sa({key:`${u}.${g}`,value:o[g]}));return h}}};function xo(u){const o=u.value,h=u.key,g=u.styleSpec,w=u.style,M=u.validateSpec;if(!o.type)return[new It(h,o,'"type" is required')];const I=gi(o.type);let O;switch(I){case"vector":case"raster":return O=br({key:h,value:o,valueSpec:g[`source_${I.replace("-","_")}`],style:u.style,styleSpec:g,objectElementValidators:Wl,validateSpec:M}),O;case"raster-dem":return O=function(B){var $;const Y=null!==($=B.sourceName)&&void 0!==$?$:"",ee=B.value,re=B.styleSpec,ce=re.source_raster_dem,de=B.style;let _e=[];const Ie=Bn(ee);if(void 0===ee)return _e;if("object"!==Ie)return _e.push(new It("source_raster_dem",ee,`object expected, ${Ie} found`)),_e;const ke="custom"===gi(ee.encoding),$e=["redFactor","greenFactor","blueFactor","baseShift"],Fe=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const qe in ee)!ke&&$e.includes(qe)?_e.push(new It(qe,ee[qe],`In "${Y}": "${qe}" is only valid when "encoding" is set to "custom". ${Fe} encoding found`)):ce[qe]?_e=_e.concat(B.validateSpec({key:qe,value:ee[qe],valueSpec:ce[qe],validateSpec:B.validateSpec,style:de,styleSpec:re})):_e.push(new It(qe,ee[qe],`unknown property "${qe}"`));return _e}({sourceName:h,value:o,style:u.style,styleSpec:g,validateSpec:M}),O;case"geojson":if(O=br({key:h,value:o,valueSpec:g.source_geojson,style:w,styleSpec:g,validateSpec:M,objectElementValidators:Wl}),o.cluster)for(const B in o.clusterProperties){const[$,Y]=o.clusterProperties[B],ee="string"==typeof $?[$,["accumulated"],["get",B]]:$;O.push(...Mr({key:`${h}.${B}.map`,value:Y,validateSpec:M,expressionContext:"cluster-map"})),O.push(...Mr({key:`${h}.${B}.reduce`,value:ee,validateSpec:M,expressionContext:"cluster-reduce"}))}return O;case"video":return br({key:h,value:o,valueSpec:g.source_video,style:w,validateSpec:M,styleSpec:g});case"image":return br({key:h,value:o,valueSpec:g.source_image,style:w,validateSpec:M,styleSpec:g});case"canvas":return[new It(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Jo({key:`${h}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,validateSpec:M,styleSpec:g})}}function bc(u){const o=u.value,h=u.styleSpec,g=h.light,w=u.style;let M=[];const I=Bn(o);if(void 0===o)return M;if("object"!==I)return M=M.concat([new It("light",o,`object expected, ${I} found`)]),M;for(const O in o){const B=O.match(/^(.*)-transition$/);M=M.concat(B&&g[B[1]]&&g[B[1]].transition?u.validateSpec({key:O,value:o[O],valueSpec:h.transition,validateSpec:u.validateSpec,style:w,styleSpec:h}):g[O]?u.validateSpec({key:O,value:o[O],valueSpec:g[O],validateSpec:u.validateSpec,style:w,styleSpec:h}):[new It(O,o[O],`unknown property "${O}"`)])}return M}function Kc(u){const o=u.value,h=u.styleSpec,g=h.terrain,w=u.style;let M=[];const I=Bn(o);if(void 0===o)return M;if("object"!==I)return M=M.concat([new It("terrain",o,`object expected, ${I} found`)]),M;for(const O in o)M=M.concat(g[O]?u.validateSpec({key:O,value:o[O],valueSpec:g[O],validateSpec:u.validateSpec,style:w,styleSpec:h}):[new It(O,o[O],`unknown property "${O}"`)]);return M}function pd(u){let o=[];const h=u.value,g=u.key;if(Array.isArray(h)){const w=[],M=[];for(const I in h)h[I].id&&w.includes(h[I].id)&&o.push(new It(g,h,`all the sprites' ids must be unique, but ${h[I].id} is duplicated`)),w.push(h[I].id),h[I].url&&M.includes(h[I].url)&&o.push(new It(g,h,`all the sprites' URLs must be unique, but ${h[I].url} is duplicated`)),M.push(h[I].url),o=o.concat(br({key:`${g}[${I}]`,value:h[I],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return o}return sa({key:g,value:h})}const Ru={"*":()=>[],array:yc,boolean:function(u){const o=u.value,h=u.key,g=Bn(o);return"boolean"!==g?[new It(h,o,`boolean expected, ${g} found`)]:[]},number:Vs,color:function(u){const o=u.key,h=u.value,g=Bn(h);return"string"!==g?[new It(o,h,`color expected, ${g} found`)]:Pi.parse(String(h))?[]:[new It(o,h,`color expected, "${h}" found`)]},constants:Gl,enum:Jo,filter:Aa,function:Pa,layer:Ou,object:br,source:xo,light:bc,terrain:Kc,string:sa,formatted:function(u){return 0===sa(u).length?[]:Mr(u)},resolvedImage:function(u){return 0===sa(u).length?[]:Mr(u)},padding:function(u){const o=u.key,h=u.value;if("array"===Bn(h)){if(h.length<1||h.length>4)return[new It(o,h,`padding requires 1 to 4 values; ${h.length} values found`)];const g={type:"number"};let w=[];for(let M=0;M<h.length;M++)w=w.concat(u.validateSpec({key:`${o}[${M}]`,value:h[M],validateSpec:u.validateSpec,valueSpec:g}));return w}return Vs({key:o,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(u){const o=u.key,h=u.value,g=Bn(h),w=u.styleSpec;if("array"!==g||h.length<1||h.length%2!=0)return[new It(o,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let M=[];for(let I=0;I<h.length;I+=2)M=M.concat(Jo({key:`${o}[${I}]`,value:h[I],valueSpec:w.layout_symbol["text-anchor"]})),M=M.concat(yc({key:`${o}[${I+1}]`,value:h[I+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:w}));return M},sprite:pd};function js(u){const o=u.value,h=u.valueSpec,g=u.styleSpec;return u.validateSpec=js,h.expression&&Li(gi(o))?Pa(u):h.expression&&ku(Bs(o))?Mr(u):h.type&&Ru[h.type]?Ru[h.type](u):br(Ko({},u,{valueSpec:h.type?g[h.type]:h}))}function Us(u){const o=u.value,h=u.key,g=sa(u);return g.length||(-1===o.indexOf("{fontstack}")&&g.push(new It(h,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&g.push(new It(h,o,'"glyphs" url must include a "{range}" token'))),g}function Lo(u,o=ze){let h=[];return h=h.concat(js({key:"",value:u,valueSpec:o.$root,styleSpec:o,style:u,validateSpec:js,objectElementValidators:{glyphs:Us,"*":()=>[]}})),u.constants&&(h=h.concat(Gl({key:"constants",value:u.constants,style:u,styleSpec:o,validateSpec:js}))),_l(h)}function aa(u){return function(o){return u({...o,validateSpec:js})}}function _l(u){return[].concat(u).sort((o,h)=>o.line-h.line)}function la(u){return function(...o){return _l(u.apply(this,o))}}Lo.source=la(aa(xo)),Lo.sprite=la(aa(pd)),Lo.glyphs=la(aa(Us)),Lo.light=la(aa(bc)),Lo.terrain=la(aa(Kc)),Lo.layer=la(aa(Ou)),Lo.filter=la(aa(Aa)),Lo.paintProperty=la(aa(Zl)),Lo.layoutProperty=la(aa(vc));const ka=Lo,yp=ka.light,Vr=ka.paintProperty,yl=ka.layoutProperty;function Ki(u,o){let h=!1;if(o&&o.length)for(const g of o)u.fire(new Ke(new Error(g.message))),h=!0;return h}class vl{constructor(o,h,g){const w=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const I=new Int32Array(this.arrayBuffer);o=I[0],this.d=(h=I[1])+2*(g=I[2]);for(let B=0;B<this.d*this.d;B++){const $=I[3+B],Y=I[3+B+1];w.push($===Y?null:I.subarray($,Y))}const O=I[3+w.length+1];this.keys=I.subarray(I[3+w.length],O),this.bboxes=I.subarray(O),this.insert=this._insertReadonly}else{this.d=h+2*g;for(let I=0;I<this.d*this.d;I++)w.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=o,this.padding=g,this.scale=h/o,this.uid=0;const M=g/h*o;this.min=-M,this.max=o+M}insert(o,h,g,w,M){this._forEachCell(h,g,w,M,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(M)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,h,g,w,M,I){this.cells[M].push(I)}query(o,h,g,w,M){const I=this.min,O=this.max;if(o<=I&&h<=I&&O<=g&&O<=w&&!M)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(o,h,g,w,this._queryCell,B,{},M),B}}_queryCell(o,h,g,w,M,I,O,B){const $=this.cells[M];if(null!==$){const Y=this.keys,ee=this.bboxes;for(let re=0;re<$.length;re++){const ce=$[re];if(void 0===O[ce]){const de=4*ce;(B?B(ee[de+0],ee[de+1],ee[de+2],ee[de+3]):o<=ee[de+2]&&h<=ee[de+3]&&g>=ee[de+0]&&w>=ee[de+1])?(O[ce]=!0,I.push(Y[ce])):O[ce]=!1}}}}_forEachCell(o,h,g,w,M,I,O,B){const $=this._convertToCellCoord(o),Y=this._convertToCellCoord(h),ee=this._convertToCellCoord(g),re=this._convertToCellCoord(w);for(let ce=$;ce<=ee;ce++)for(let de=Y;de<=re;de++){const _e=this.d*de+ce;if((!B||B(this._convertFromCellCoord(ce),this._convertFromCellCoord(de),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(de+1)))&&M.call(this,o,h,g,w,_e,I,O,B))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,h=3+this.cells.length+1+1;let g=0;for(let I=0;I<this.cells.length;I++)g+=this.cells[I].length;const w=new Int32Array(h+g+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let M=h;for(let I=0;I<o.length;I++){const O=o[I];w[3+I]=M,w.set(O,M),M+=O.length}return w[3+o.length]=M,w.set(this.keys,M),M+=this.keys.length,w[3+o.length+1]=M,w.set(this.bboxes,M),M+=this.bboxes.length,w.buffer}static serialize(o,h){const g=o.toArrayBuffer();return h&&h.push(g),{buffer:g}}static deserialize(o){return new vl(o.buffer)}}const ca={};function Xt(u,o,h={}){if(ca[u])throw new Error(`${u} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:u,writeable:!1}),ca[u]={klass:o,omit:h.omit||[],shallow:h.shallow||[]}}Xt("Object",Object),Xt("TransferableGridIndex",vl),Xt("Color",Pi),Xt("Error",Error),Xt("AJAXError",Er),Xt("ResolvedImage",Ne),Xt("StylePropertyFunction",oa),Xt("StyleExpression",Za,{omit:["_evaluator"]}),Xt("ZoomDependentExpression",Hl),Xt("ZoomConstantExpression",gc),Xt("CompoundExpression",rr,{omit:["_evaluate"]});for(const u in Ta)Ta[u]._classRegistryKey||Xt(`Expression_${u}`,Ta[u]);function Ms(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&"ArrayBuffer"===u.constructor.name)}function Hs(u,o){if(null==u||"boolean"==typeof u||"number"==typeof u||"string"==typeof u||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob)return u;if(Ms(u)||Un(u))return o&&o.push(u),u;if(ArrayBuffer.isView(u)){const h=u;return o&&o.push(h.buffer),h}if(u instanceof ImageData)return o&&o.push(u.data.buffer),u;if(Array.isArray(u)){const h=[];for(const g of u)h.push(Hs(g,o));return h}if("object"==typeof u){const h=u.constructor,g=h._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!ca[g])throw new Error(`${g} is not registered.`);const w=h.serialize?h.serialize(u,o):{};if(h.serialize){if(o&&w===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const M in u){if(!u.hasOwnProperty(M)||ca[g].omit.indexOf(M)>=0)continue;const I=u[M];w[M]=ca[g].shallow.indexOf(M)>=0?I:Hs(I,o)}u instanceof Error&&(w.message=u.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==g&&(w.$name=g),w}throw new Error("can't serialize object of type "+typeof u)}function $s(u){if(null==u||"boolean"==typeof u||"number"==typeof u||"string"==typeof u||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||Ms(u)||Un(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map($s);if("object"==typeof u){const o=u.$name||"Object";if(!ca[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:h}=ca[o];if(!h)throw new Error(`can't deserialize unregistered class ${o}`);if(h.deserialize)return h.deserialize(u);const g=Object.create(h.prototype);for(const w of Object.keys(u)){if("$name"===w)continue;const M=u[w];g[w]=ca[o].shallow.indexOf(w)>=0?M:$s(M)}return g}throw new Error("can't deserialize object of type "+typeof u)}class Oa{constructor(){this.first=!0}update(o,h){const g=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=h),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=g,!0))}}const Rt={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Ra(u){for(const o of u)if(Qc(o.charCodeAt(0)))return!0;return!1}function ua(u){for(const o of u)if(!Fu(o.charCodeAt(0)))return!1;return!0}function Fu(u){return!(Rt.Arabic(u)||Rt["Arabic Supplement"](u)||Rt["Arabic Extended-A"](u)||Rt["Arabic Presentation Forms-A"](u)||Rt["Arabic Presentation Forms-B"](u))}function Qc(u){return!(746!==u&&747!==u&&(u<4352||!(Rt["Bopomofo Extended"](u)||Rt.Bopomofo(u)||Rt["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Rt["CJK Compatibility Ideographs"](u)||Rt["CJK Compatibility"](u)||Rt["CJK Radicals Supplement"](u)||Rt["CJK Strokes"](u)||!(!Rt["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||12336===u)||Rt["CJK Unified Ideographs Extension A"](u)||Rt["CJK Unified Ideographs"](u)||Rt["Enclosed CJK Letters and Months"](u)||Rt["Hangul Compatibility Jamo"](u)||Rt["Hangul Jamo Extended-A"](u)||Rt["Hangul Jamo Extended-B"](u)||Rt["Hangul Jamo"](u)||Rt["Hangul Syllables"](u)||Rt.Hiragana(u)||Rt["Ideographic Description Characters"](u)||Rt.Kanbun(u)||Rt["Kangxi Radicals"](u)||Rt["Katakana Phonetic Extensions"](u)||Rt.Katakana(u)&&12540!==u||!(!Rt["Halfwidth and Fullwidth Forms"](u)||65288===u||65289===u||65293===u||u>=65306&&u<=65310||65339===u||65341===u||65343===u||u>=65371&&u<=65503||65507===u||u>=65512&&u<=65519)||!(!Rt["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Rt["Unified Canadian Aboriginal Syllabics"](u)||Rt["Unified Canadian Aboriginal Syllabics Extended"](u)||Rt["Vertical Forms"](u)||Rt["Yijing Hexagram Symbols"](u)||Rt["Yi Syllables"](u)||Rt["Yi Radicals"](u))))}function bl(u){return!(Qc(u)||(o=u,Rt["Latin-1 Supplement"](o)&&(167===o||169===o||174===o||177===o||188===o||189===o||190===o||215===o||247===o)||Rt["General Punctuation"](o)&&(8214===o||8224===o||8225===o||8240===o||8241===o||8251===o||8252===o||8258===o||8263===o||8264===o||8265===o||8273===o)||Rt["Letterlike Symbols"](o)||Rt["Number Forms"](o)||Rt["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||9003===o||o>=9085&&o<=9114||o>=9150&&o<=9165||9167===o||o>=9169&&o<=9179||o>=9186&&o<=9215)||Rt["Control Pictures"](o)&&9251!==o||Rt["Optical Character Recognition"](o)||Rt["Enclosed Alphanumerics"](o)||Rt["Geometric Shapes"](o)||Rt["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Rt["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Rt["CJK Symbols and Punctuation"](o)||Rt.Katakana(o)||Rt["Private Use Area"](o)||Rt["CJK Compatibility Forms"](o)||Rt["Small Form Variants"](o)||Rt["Halfwidth and Fullwidth Forms"](o)||8734===o||8756===o||8757===o||o>=9984&&o<=10087||o>=10102&&o<=10131||65532===o||65533===o));var o}function xl(u){return u>=1424&&u<=2303||Rt["Arabic Presentation Forms-A"](u)||Rt["Arabic Presentation Forms-B"](u)}function ql(u,o){return!(!o&&xl(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Rt.Khmer(u))}function Xc(u){for(const o of u)if(xl(o.charCodeAt(0)))return!0;return!1}const wl="deferred",Jc="loading",Cl="loaded";let Yl=null,ko="unavailable",Ya=null;const p=function(u){u&&"string"==typeof u&&u.indexOf("NetworkError")>-1&&(ko="error"),Yl&&Yl(u)};function x(){P.fire(new Br("pluginStateChange",{pluginStatus:ko,pluginURL:Ya}))}const P=new dt,U=function(){return ko},J=function(){if(ko!==wl||!Ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ko=Jc,x(),Ya&&Ho({url:Ya},u=>{u?p(u):(ko=Cl,x())})},ue={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ko===Cl||null!=ue.applyArabicShaping,isLoading:()=>ko===Jc,setState(u){if(!gn())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ko=u.pluginStatus,Ya=u.pluginURL},isParsed(){if(!gn())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=ue.applyArabicShaping&&null!=ue.processBidirectionalText&&null!=ue.processStyledBidirectionalText},getPluginURL(){if(!gn())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ya}};class Pe{constructor(o,h){this.zoom=o,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oa,this.transition={})}isSupportedScript(o){return function(h,g){for(const w of h)if(!ql(w.charCodeAt(0),g))return!1;return!0}(o,ue.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,h=o-Math.floor(o),g=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*h}}}class tt{constructor(o,h){this.property=o,this.value=h,this.expression=function(g,w){if(Li(g))return new oa(g,w);if(ku(g)){const M=Pn(g,w);if("error"===M.result)throw new Error(M.value.map(I=>`${I.key}: ${I.message}`).join(", "));return M.value}{let M=g;return"color"===w.type&&"string"==typeof g?M=Pi.parse(g):"padding"!==w.type||"number"!=typeof g&&!Array.isArray(g)?"variableAnchorOffsetCollection"===w.type&&Array.isArray(g)&&(M=Be.parse(g)):M=se.parse(g),{kind:"constant",evaluate:()=>M}}}(void 0===h?o.specification.default:h,o.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(o,h,g){return this.property.possiblyEvaluate(this,o,h,g)}}class at{constructor(o){this.property=o,this.value=new tt(o,void 0)}transitioned(o,h){return new qt(this.property,this.value,h,Ui({},o.transition,this.transition),o.now)}untransitioned(){return new qt(this.property,this.value,null,{},0)}}class wt{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return bn(this._values[o].value.value)}setValue(o,h){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new at(this._values[o].property)),this._values[o].value=new tt(this._values[o].property,null===h?void 0:bn(h))}getTransition(o){return bn(this._values[o].transition)}setTransition(o,h){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new at(this._values[o].property)),this._values[o].transition=bn(h)||void 0}serialize(){const o={};for(const h of Object.keys(this._values)){const g=this.getValue(h);void 0!==g&&(o[h]=g);const w=this.getTransition(h);void 0!==w&&(o[`${h}-transition`]=w)}return o}transitioned(o,h){const g=new Kn(this._properties);for(const w of Object.keys(this._values))g._values[w]=this._values[w].transitioned(o,h._values[w]);return g}untransitioned(){const o=new Kn(this._properties);for(const h of Object.keys(this._values))o._values[h]=this._values[h].untransitioned();return o}}class qt{constructor(o,h,g,w,M){this.property=o,this.value=h,this.begin=M+w.delay||0,this.end=this.begin+w.duration||0,o.specification.transition&&(w.delay||w.duration)&&(this.prior=g)}possiblyEvaluate(o,h,g){const w=o.now||0,M=this.value.possiblyEvaluate(o,h,g),I=this.prior;if(I){if(w>this.end)return this.prior=null,M;if(this.value.isDataDriven())return this.prior=null,M;if(w<this.begin)return I.possiblyEvaluate(o,h,g);{const O=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(o,h,g),M,function(B){if(B<=0)return 0;if(B>=1)return 1;const $=B*B,Y=$*B;return 4*(B<.5?Y:3*(B-$)+Y-.75)}(O))}}return M}}class Kn{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,h,g){const w=new ha(this._properties);for(const M of Object.keys(this._values))w._values[M]=this._values[M].possiblyEvaluate(o,h,g);return w}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Ei{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return void 0!==this._values[o].value}getValue(o){return bn(this._values[o].value)}setValue(o,h){this._values[o]=new tt(this._values[o].property,null===h?void 0:bn(h))}serialize(){const o={};for(const h of Object.keys(this._values)){const g=this.getValue(h);void 0!==g&&(o[h]=g)}return o}possiblyEvaluate(o,h,g){const w=new ha(this._properties);for(const M of Object.keys(this._values))w._values[M]=this._values[M].possiblyEvaluate(o,h,g);return w}}class or{constructor(o,h,g){this.property=o,this.value=h,this.parameters=g}isConstant(){return"constant"===this.value.kind}constantOr(o){return"constant"===this.value.kind?this.value.value:o}evaluate(o,h,g,w){return this.property.evaluate(this.value,this.parameters,o,h,g,w)}}class ha{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Wt{constructor(o){this.specification=o}possiblyEvaluate(o,h){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(h)}interpolate(o,h,g){const w=ps[this.specification.type];return w?w(o,h,g):o}}class pn{constructor(o,h){this.specification=o,this.overrides=h}possiblyEvaluate(o,h,g,w){return new or(this,"constant"===o.expression.kind||"camera"===o.expression.kind?{kind:"constant",value:o.expression.evaluate(h,null,{},g,w)}:o.expression,h)}interpolate(o,h,g){if("constant"!==o.value.kind||"constant"!==h.value.kind)return o;if(void 0===o.value.value||void 0===h.value.value)return new or(this,{kind:"constant",value:void 0},o.parameters);const w=ps[this.specification.type];if(w){const M=w(o.value.value,h.value.value,g);return new or(this,{kind:"constant",value:M},o.parameters)}return o}evaluate(o,h,g,w,M,I){return"constant"===o.kind?o.value:o.evaluate(h,g,w,M,I)}}class da extends pn{possiblyEvaluate(o,h,g,w){if(void 0===o.value)return new or(this,{kind:"constant",value:void 0},h);if("constant"===o.expression.kind){const M=o.expression.evaluate(h,null,{},g,w),I="resolvedImage"===o.property.specification.type&&"string"!=typeof M?M.name:M,O=this._calculate(I,I,I,h);return new or(this,{kind:"constant",value:O},h)}if("camera"===o.expression.kind){const M=this._calculate(o.expression.evaluate({zoom:h.zoom-1}),o.expression.evaluate({zoom:h.zoom}),o.expression.evaluate({zoom:h.zoom+1}),h);return new or(this,{kind:"constant",value:M},h)}return new or(this,o.expression,h)}evaluate(o,h,g,w,M,I){if("source"===o.kind){const O=o.evaluate(h,g,w,M,I);return this._calculate(O,O,O,h)}return"composite"===o.kind?this._calculate(o.evaluate({zoom:Math.floor(h.zoom)-1},g,w),o.evaluate({zoom:Math.floor(h.zoom)},g,w),o.evaluate({zoom:Math.floor(h.zoom)+1},g,w),h):o.value}_calculate(o,h,g,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:o,to:h}:{from:g,to:h}}interpolate(o){return o}}class Kl{constructor(o){this.specification=o}possiblyEvaluate(o,h,g,w){if(void 0!==o.value){if("constant"===o.expression.kind){const M=o.expression.evaluate(h,null,{},g,w);return this._calculate(M,M,M,h)}return this._calculate(o.expression.evaluate(new Pe(Math.floor(h.zoom-1),h)),o.expression.evaluate(new Pe(Math.floor(h.zoom),h)),o.expression.evaluate(new Pe(Math.floor(h.zoom+1),h)),h)}}_calculate(o,h,g,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:o,to:h}:{from:g,to:h}}interpolate(o){return o}}class eu{constructor(o){this.specification=o}possiblyEvaluate(o,h,g,w){return!!o.expression.evaluate(h,null,{},g,w)}interpolate(){return!1}}class Ir{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in o){const g=o[h];g.specification.overridable&&this.overridableProperties.push(h);const w=this.defaultPropertyValues[h]=new tt(g,void 0),M=this.defaultTransitionablePropertyValues[h]=new at(g);this.defaultTransitioningPropertyValues[h]=M.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=w.possiblyEvaluate({})}}}Xt("DataDrivenProperty",pn),Xt("DataConstantProperty",Wt),Xt("CrossFadedDataDrivenProperty",da),Xt("CrossFadedProperty",Kl),Xt("ColorRampProperty",eu);const Ql="-transition";class ts extends dt{constructor(o,h){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),h.layout&&(this._unevaluatedLayout=new Ei(h.layout)),h.paint)){this._transitionablePaint=new wt(h.paint);for(const g in o.paint)this.setPaintProperty(g,o.paint[g],{validate:!1});for(const g in o.layout)this.setLayoutProperty(g,o.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ha(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return"visibility"===o?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,h,g={}){null!=h&&this._validate(yl,`layers.${this.id}.layout.${o}`,o,h,g)||("visibility"!==o?this._unevaluatedLayout.setValue(o,h):this.visibility=h)}getPaintProperty(o){return o.endsWith(Ql)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,h,g={}){if(null!=h&&this._validate(Vr,`layers.${this.id}.paint.${o}`,o,h,g))return!1;if(o.endsWith(Ql))return this._transitionablePaint.setTransition(o.slice(0,-11),h||void 0),!1;{const w=this._transitionablePaint._values[o],M="cross-faded-data-driven"===w.property.specification["property-type"],I=w.value.isDataDriven(),O=w.value;this._transitionablePaint.setValue(o,h),this._handleSpecialPaintPropertyUpdate(o);const B=this._transitionablePaint._values[o].value;return B.isDataDriven()||I||M||this._handleOverridablePaintPropertyUpdate(o,O,B)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,h,g){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||"none"===this.visibility}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,h){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,h)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),In(o,(h,g)=>!(void 0===h||"layout"===g&&!Object.keys(h).length||"paint"===g&&!Object.keys(h).length))}_validate(o,h,g,w,M={}){return(!M||!1!==M.validate)&&Ki(this,o.call(ka,{key:h,layerType:this.type,objectKey:g,value:w,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const h=this.paint.get(o);if(h instanceof or&&Dr(h.property.specification)&&("source"===h.value.kind||"composite"===h.value.kind)&&h.value.isStateDependent)return!0}return!1}}const Nu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class mr{constructor(o,h){this._structArray=o,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class sr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,h){return o._trim(),h&&(o.isTransferred=!0,h.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const h=Object.create(this.prototype);return h.arrayBuffer=o.arrayBuffer,h.length=o.length,h.capacity=o.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Tr(u,o=1){let h=0,g=0;return{members:u.map(w=>{const M=Nu[w.type].BYTES_PER_ELEMENT,I=h=Xl(h,Math.max(o,M)),O=w.components||1;return g=Math.max(g,M),h+=M*O,{name:w.name,type:w.type,components:O,offset:I}}),size:Xl(h,Math.max(g,o)),alignment:o}}function Xl(u,o){return Math.ceil(u/o)*o}class Ka extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,h)}emplace(o,h,g){const w=2*o;return this.int16[w+0]=h,this.int16[w+1]=g,o}}Ka.prototype.bytesPerElement=4,Xt("StructArrayLayout2i4",Ka);class gs extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g){const w=this.length;return this.resize(w+1),this.emplace(w,o,h,g)}emplace(o,h,g,w){const M=3*o;return this.int16[M+0]=h,this.int16[M+1]=g,this.int16[M+2]=w,o}}gs.prototype.bytesPerElement=6,Xt("StructArrayLayout3i6",gs);class Fa extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,w){const M=this.length;return this.resize(M+1),this.emplace(M,o,h,g,w)}emplace(o,h,g,w,M){const I=4*o;return this.int16[I+0]=h,this.int16[I+1]=g,this.int16[I+2]=w,this.int16[I+3]=M,o}}Fa.prototype.bytesPerElement=8,Xt("StructArrayLayout4i8",Fa);class tu extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I){const O=this.length;return this.resize(O+1),this.emplace(O,o,h,g,w,M,I)}emplace(o,h,g,w,M,I,O){const B=6*o;return this.int16[B+0]=h,this.int16[B+1]=g,this.int16[B+2]=w,this.int16[B+3]=M,this.int16[B+4]=I,this.int16[B+5]=O,o}}tu.prototype.bytesPerElement=12,Xt("StructArrayLayout2i4i12",tu);class zu extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I){const O=this.length;return this.resize(O+1),this.emplace(O,o,h,g,w,M,I)}emplace(o,h,g,w,M,I,O){const B=4*o,$=8*o;return this.int16[B+0]=h,this.int16[B+1]=g,this.uint8[$+4]=w,this.uint8[$+5]=M,this.uint8[$+6]=I,this.uint8[$+7]=O,o}}zu.prototype.bytesPerElement=8,Xt("StructArrayLayout2i4ub8",zu);class pa extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,h)}emplace(o,h,g){const w=2*o;return this.float32[w+0]=h,this.float32[w+1]=g,o}}pa.prototype.bytesPerElement=8,Xt("StructArrayLayout2f8",pa);class mh extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I,O,B,$,Y){const ee=this.length;return this.resize(ee+1),this.emplace(ee,o,h,g,w,M,I,O,B,$,Y)}emplace(o,h,g,w,M,I,O,B,$,Y,ee){const re=10*o;return this.uint16[re+0]=h,this.uint16[re+1]=g,this.uint16[re+2]=w,this.uint16[re+3]=M,this.uint16[re+4]=I,this.uint16[re+5]=O,this.uint16[re+6]=B,this.uint16[re+7]=$,this.uint16[re+8]=Y,this.uint16[re+9]=ee,o}}mh.prototype.bytesPerElement=20,Xt("StructArrayLayout10ui20",mh);class nu extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I,O,B,$,Y,ee,re){const ce=this.length;return this.resize(ce+1),this.emplace(ce,o,h,g,w,M,I,O,B,$,Y,ee,re)}emplace(o,h,g,w,M,I,O,B,$,Y,ee,re,ce){const de=12*o;return this.int16[de+0]=h,this.int16[de+1]=g,this.int16[de+2]=w,this.int16[de+3]=M,this.uint16[de+4]=I,this.uint16[de+5]=O,this.uint16[de+6]=B,this.uint16[de+7]=$,this.int16[de+8]=Y,this.int16[de+9]=ee,this.int16[de+10]=re,this.int16[de+11]=ce,o}}nu.prototype.bytesPerElement=24,Xt("StructArrayLayout4i4ui4i24",nu);class Bi extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g){const w=this.length;return this.resize(w+1),this.emplace(w,o,h,g)}emplace(o,h,g,w){const M=3*o;return this.float32[M+0]=h,this.float32[M+1]=g,this.float32[M+2]=w,o}}Bi.prototype.bytesPerElement=12,Xt("StructArrayLayout3f12",Bi);class E extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const h=this.length;return this.resize(h+1),this.emplace(h,o)}emplace(o,h){return this.uint32[1*o+0]=h,o}}E.prototype.bytesPerElement=4,Xt("StructArrayLayout1ul4",E);class s extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I,O,B,$){const Y=this.length;return this.resize(Y+1),this.emplace(Y,o,h,g,w,M,I,O,B,$)}emplace(o,h,g,w,M,I,O,B,$,Y){const ee=10*o,re=5*o;return this.int16[ee+0]=h,this.int16[ee+1]=g,this.int16[ee+2]=w,this.int16[ee+3]=M,this.int16[ee+4]=I,this.int16[ee+5]=O,this.uint32[re+3]=B,this.uint16[ee+8]=$,this.uint16[ee+9]=Y,o}}s.prototype.bytesPerElement=20,Xt("StructArrayLayout6i1ul2ui20",s);class f extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I){const O=this.length;return this.resize(O+1),this.emplace(O,o,h,g,w,M,I)}emplace(o,h,g,w,M,I,O){const B=6*o;return this.int16[B+0]=h,this.int16[B+1]=g,this.int16[B+2]=w,this.int16[B+3]=M,this.int16[B+4]=I,this.int16[B+5]=O,o}}f.prototype.bytesPerElement=12,Xt("StructArrayLayout2i2i2i12",f);class v extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M){const I=this.length;return this.resize(I+1),this.emplace(I,o,h,g,w,M)}emplace(o,h,g,w,M,I){const O=4*o,B=8*o;return this.float32[O+0]=h,this.float32[O+1]=g,this.float32[O+2]=w,this.int16[B+6]=M,this.int16[B+7]=I,o}}v.prototype.bytesPerElement=16,Xt("StructArrayLayout2f1f2i16",v);class S extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g,w){const M=this.length;return this.resize(M+1),this.emplace(M,o,h,g,w)}emplace(o,h,g,w,M){const I=12*o,O=3*o;return this.uint8[I+0]=h,this.uint8[I+1]=g,this.float32[O+1]=w,this.float32[O+2]=M,o}}S.prototype.bytesPerElement=12,Xt("StructArrayLayout2ub2f12",S);class D extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g){const w=this.length;return this.resize(w+1),this.emplace(w,o,h,g)}emplace(o,h,g,w){const M=3*o;return this.uint16[M+0]=h,this.uint16[M+1]=g,this.uint16[M+2]=w,o}}D.prototype.bytesPerElement=6,Xt("StructArrayLayout3ui6",D);class R extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de,_e,Ie,ke){const $e=this.length;return this.resize($e+1),this.emplace($e,o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de,_e,Ie,ke)}emplace(o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de,_e,Ie,ke,$e){const Fe=24*o,qe=12*o,rt=48*o;return this.int16[Fe+0]=h,this.int16[Fe+1]=g,this.uint16[Fe+2]=w,this.uint16[Fe+3]=M,this.uint32[qe+2]=I,this.uint32[qe+3]=O,this.uint32[qe+4]=B,this.uint16[Fe+10]=$,this.uint16[Fe+11]=Y,this.uint16[Fe+12]=ee,this.float32[qe+7]=re,this.float32[qe+8]=ce,this.uint8[rt+36]=de,this.uint8[rt+37]=_e,this.uint8[rt+38]=Ie,this.uint32[qe+10]=ke,this.int16[Fe+22]=$e,o}}R.prototype.bytesPerElement=48,Xt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",R);class N extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de,_e,Ie,ke,$e,Fe,qe,rt,mt,Ut,tn,$t,jt,Pt,nn){const Ft=this.length;return this.resize(Ft+1),this.emplace(Ft,o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de,_e,Ie,ke,$e,Fe,qe,rt,mt,Ut,tn,$t,jt,Pt,nn)}emplace(o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de,_e,Ie,ke,$e,Fe,qe,rt,mt,Ut,tn,$t,jt,Pt,nn,Ft){const Et=32*o,Sn=16*o;return this.int16[Et+0]=h,this.int16[Et+1]=g,this.int16[Et+2]=w,this.int16[Et+3]=M,this.int16[Et+4]=I,this.int16[Et+5]=O,this.int16[Et+6]=B,this.int16[Et+7]=$,this.uint16[Et+8]=Y,this.uint16[Et+9]=ee,this.uint16[Et+10]=re,this.uint16[Et+11]=ce,this.uint16[Et+12]=de,this.uint16[Et+13]=_e,this.uint16[Et+14]=Ie,this.uint16[Et+15]=ke,this.uint16[Et+16]=$e,this.uint16[Et+17]=Fe,this.uint16[Et+18]=qe,this.uint16[Et+19]=rt,this.uint16[Et+20]=mt,this.uint16[Et+21]=Ut,this.uint16[Et+22]=tn,this.uint32[Sn+12]=$t,this.float32[Sn+13]=jt,this.float32[Sn+14]=Pt,this.uint16[Et+30]=nn,this.uint16[Et+31]=Ft,o}}N.prototype.bytesPerElement=64,Xt("StructArrayLayout8i15ui1ul2f2ui64",N);class H extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const h=this.length;return this.resize(h+1),this.emplace(h,o)}emplace(o,h){return this.float32[1*o+0]=h,o}}H.prototype.bytesPerElement=4,Xt("StructArrayLayout1f4",H);class W extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g){const w=this.length;return this.resize(w+1),this.emplace(w,o,h,g)}emplace(o,h,g,w){const M=3*o;return this.uint16[6*o+0]=h,this.float32[M+1]=g,this.float32[M+2]=w,o}}W.prototype.bytesPerElement=12,Xt("StructArrayLayout1ui2f12",W);class Q extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g){const w=this.length;return this.resize(w+1),this.emplace(w,o,h,g)}emplace(o,h,g,w){const M=4*o;return this.uint32[2*o+0]=h,this.uint16[M+2]=g,this.uint16[M+3]=w,o}}Q.prototype.bytesPerElement=8,Xt("StructArrayLayout1ul2ui8",Q);class X extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,h)}emplace(o,h,g){const w=2*o;return this.uint16[w+0]=h,this.uint16[w+1]=g,o}}X.prototype.bytesPerElement=4,Xt("StructArrayLayout2ui4",X);class ae extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const h=this.length;return this.resize(h+1),this.emplace(h,o)}emplace(o,h){return this.uint16[1*o+0]=h,o}}ae.prototype.bytesPerElement=2,Xt("StructArrayLayout1ui2",ae);class be extends sr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g,w){const M=this.length;return this.resize(M+1),this.emplace(M,o,h,g,w)}emplace(o,h,g,w,M){const I=4*o;return this.float32[I+0]=h,this.float32[I+1]=g,this.float32[I+2]=w,this.float32[I+3]=M,o}}be.prototype.bytesPerElement=16,Xt("StructArrayLayout4f16",be);class ye extends mr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ue(this.anchorPointX,this.anchorPointY)}}ye.prototype.size=20;class Te extends s{get(o){return new ye(this,o)}}Xt("CollisionBoxArray",Te);class ge extends mr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class je extends R{get(o){return new ge(this,o)}}Xt("PlacedSymbolArray",je);class nt extends mr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}nt.prototype.size=64;class Se extends N{get(o){return new nt(this,o)}}Xt("SymbolInstanceArray",Se);class Ze extends H{getoffsetX(o){return this.float32[1*o+0]}}Xt("GlyphOffsetArray",Ze);class st extends gs{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Xt("SymbolLineVertexArray",st);class Je extends mr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Je.prototype.size=12;class pt extends W{get(o){return new Je(this,o)}}Xt("TextAnchorOffsetArray",pt);class Ct extends mr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ct.prototype.size=8;class vt extends Q{get(o){return new Ct(this,o)}}Xt("FeatureIndexArray",vt);class St extends Ka{}class Jt extends Ka{}class _i extends Ka{}class zt extends tu{}class mn extends zu{}class cn extends pa{}class dr extends mh{}class A extends nu{}class ri extends Bi{}class An extends E{}class Fr extends f{}class $i extends S{}class ns extends D{}class Qr extends X{}const Xr=Tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gs}=Xr;class xr{constructor(o=[]){this.segments=o}prepareSegment(o,h,g,w){let M=this.segments[this.segments.length-1];return o>xr.MAX_VERTEX_ARRAY_LENGTH&&Di(`Max vertices per segment is ${xr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!M||M.vertexLength+o>xr.MAX_VERTEX_ARRAY_LENGTH||M.sortKey!==w)&&(M={vertexOffset:h.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},void 0!==w&&(M.sortKey=w),this.segments.push(M)),M}get(){return this.segments}destroy(){for(const o of this.segments)for(const h in o.vaos)o.vaos[h].destroy()}static simpleSegment(o,h,g,w){return new xr([{vertexOffset:o,primitiveOffset:h,vertexLength:g,primitiveLength:w,vaos:{},sortKey:0}])}}function Pr(u,o){return 256*(u=ni(Math.floor(u),0,255))+ni(Math.floor(o),0,255)}xr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xt("SegmentVector",xr);const Qa=Tr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Xa={exports:{}},Jr=function(u,o){var h,g,w,M,I,O,B,$;for(g=u.length-(h=3&u.length),w=o,I=3432918353,O=461845907,$=0;$<g;)B=255&u.charCodeAt($)|(255&u.charCodeAt(++$))<<8|(255&u.charCodeAt(++$))<<16|(255&u.charCodeAt(++$))<<24,++$,w=27492+(65535&(M=5*(65535&(w=(w^=B=(65535&(B=(B=(65535&B)*I+(((B>>>16)*I&65535)<<16)&4294967295)<<15|B>>>17))*O+(((B>>>16)*O&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(B=0,h){case 3:B^=(255&u.charCodeAt($+2))<<16;case 2:B^=(255&u.charCodeAt($+1))<<8;case 1:w^=B=(65535&(B=(B=(65535&(B^=255&u.charCodeAt($)))*I+(((B>>>16)*I&65535)<<16)&4294967295)<<15|B>>>17))*O+(((B>>>16)*O&65535)<<16)&4294967295}return w^=u.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0},Co=function(u,o){for(var h,g=u.length,w=o^g,M=0;g>=4;)h=1540483477*(65535&(h=255&u.charCodeAt(M)|(255&u.charCodeAt(++M))<<8|(255&u.charCodeAt(++M))<<16|(255&u.charCodeAt(++M))<<24))+((1540483477*(h>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),g-=4,++M;switch(g){case 3:w^=(255&u.charCodeAt(M+2))<<16;case 2:w^=(255&u.charCodeAt(M+1))<<8;case 1:w=1540483477*(65535&(w^=255&u.charCodeAt(M)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0};Xa.exports=Jr,Xa.exports.murmur3=Jr,Xa.exports.murmur2=Co;var _s=pe(Xa.exports);class zr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,h,g,w){this.ids.push(ao(o)),this.positions.push(h,g,w)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ao(o);let g=0,w=this.ids.length-1;for(;g<w;){const I=g+w>>1;this.ids[I]>=h?w=I:g=I+1}const M=[];for(;this.ids[g]===h;)M.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return M}static serialize(o,h){const g=new Float64Array(o.ids),w=new Uint32Array(o.positions);return Oo(g,w,0,g.length-1),h&&h.push(g.buffer,w.buffer),{ids:g,positions:w}}static deserialize(o){const h=new zr;return h.ids=o.ids,h.positions=o.positions,h.indexed=!0,h}}function ao(u){const o=+u;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:_s(String(u))}function Oo(u,o,h,g){for(;h<g;){const w=u[h+g>>1];let M=h-1,I=g+1;for(;;){do{M++}while(u[M]<w);do{I--}while(u[I]>w);if(M>=I)break;Ar(u,M,I),Ar(o,3*M,3*I),Ar(o,3*M+1,3*I+1),Ar(o,3*M+2,3*I+2)}I-h<g-I?(Oo(u,o,h,I),h=I+1):(Oo(u,o,I+1,g),g=I)}}function Ar(u,o,h){const g=u[o];u[o]=u[h],u[h]=g}Xt("FeaturePositionMap",zr);class Na{constructor(o,h){this.gl=o.gl,this.location=h}}class Bu extends Na{constructor(o,h){super(o,h),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class iu extends Na{constructor(o,h){super(o,h),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class xc extends Na{constructor(o,h){super(o,h),this.current=Pi.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const Vu=new Float32Array(16);function gh(u){return[Pr(255*u.r,255*u.g),Pr(255*u.b,255*u.a)]}class Ja{constructor(o,h,g){this.value=o,this.uniformNames=h.map(w=>`u_${w}`),this.type=g}setUniform(o,h,g){o.set(g.constantOr(this.value))}getBinding(o,h,g){return"color"===this.type?new xc(o,h):new Bu(o,h)}}class Jl{constructor(o,h){this.uniformNames=h.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=o.tlbr}setUniform(o,h,g,w){const M="u_pattern_to"===w?this.patternTo:"u_pattern_from"===w?this.patternFrom:"u_pixel_ratio_to"===w?this.pixelRatioTo:"u_pixel_ratio_from"===w?this.pixelRatioFrom:null;M&&o.set(M)}getBinding(o,h,g){return"u_pattern"===g.substr(0,9)?new iu(o,h):new Bu(o,h)}}class Zs{constructor(o,h,g,w){this.expression=o,this.type=g,this.maxValue=0,this.paintVertexAttributes=h.map(M=>({name:`a_${M}`,type:"Float32",components:"color"===g?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,h,g,w,M){const I=this.paintVertexArray.length,O=this.expression.evaluate(new Pe(0),h,{},w,[],M);this.paintVertexArray.resize(o),this._setPaintValue(I,o,O)}updatePaintArray(o,h,g,w){const M=this.expression.evaluate({zoom:0},g,w);this._setPaintValue(o,h,M)}_setPaintValue(o,h,g){if("color"===this.type){const w=gh(g);for(let M=o;M<h;M++)this.paintVertexArray.emplace(M,w[0],w[1])}else{for(let w=o;w<h;w++)this.paintVertexArray.emplace(w,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class wn{constructor(o,h,g,w,M,I){this.expression=o,this.uniformNames=h.map(O=>`u_${O}_t`),this.type=g,this.useIntegerZoom=w,this.zoom=M,this.maxValue=0,this.paintVertexAttributes=h.map(O=>({name:`a_${O}`,type:"Float32",components:"color"===g?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(o,h,g,w,M){const I=this.expression.evaluate(new Pe(this.zoom),h,{},w,[],M),O=this.expression.evaluate(new Pe(this.zoom+1),h,{},w,[],M),B=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(B,o,I,O)}updatePaintArray(o,h,g,w){const M=this.expression.evaluate({zoom:this.zoom},g,w),I=this.expression.evaluate({zoom:this.zoom+1},g,w);this._setPaintValue(o,h,M,I)}_setPaintValue(o,h,g,w){if("color"===this.type){const M=gh(g),I=gh(w);for(let O=o;O<h;O++)this.paintVertexArray.emplace(O,M[0],M[1],I[0],I[1])}else{for(let M=o;M<h;M++)this.paintVertexArray.emplace(M,g,w);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(w))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,h){const g=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=ni(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);o.set(w)}getBinding(o,h,g){return new Bu(o,h)}}class en{constructor(o,h,g,w,M,I){this.expression=o,this.type=h,this.useIntegerZoom=g,this.zoom=w,this.layerId=I,this.zoomInPaintVertexArray=new M,this.zoomOutPaintVertexArray=new M}populatePaintArray(o,h,g){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(w,o,h.patterns&&h.patterns[this.layerId],g)}updatePaintArray(o,h,g,w,M){this._setPaintValues(o,h,g.patterns&&g.patterns[this.layerId],M)}_setPaintValues(o,h,g,w){if(!w||!g)return;const{min:M,mid:I,max:O}=g,B=w[M],$=w[I],Y=w[O];if(B&&$&&Y)for(let ee=o;ee<h;ee++)this.zoomInPaintVertexArray.emplace(ee,$.tl[0],$.tl[1],$.br[0],$.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],$.pixelRatio,B.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,$.tl[0],$.tl[1],$.br[0],$.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],$.pixelRatio,Y.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Qa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Qa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class fd{constructor(o,h,g){this.binders={},this._buffers=[];const w=[];for(const M in o.paint._values){if(!g(M))continue;const I=o.paint.get(M);if(!(I instanceof or&&Dr(I.property.specification)))continue;const O=El(M,o.type),B=I.value,$=I.property.specification.type,Y=I.property.useIntegerZoom,ee=I.property.specification["property-type"],re="cross-faded"===ee||"cross-faded-data-driven"===ee;if("constant"===B.kind)this.binders[M]=re?new Jl(B.value,O):new Ja(B.value,O,$),w.push(`/u_${M}`);else if("source"===B.kind||re){const ce=md(M,$,"source");this.binders[M]=re?new en(B,$,Y,h,ce,o.id):new Zs(B,O,$,ce),w.push(`/a_${M}`)}else{const ce=md(M,$,"composite");this.binders[M]=new wn(B,O,$,Y,h,ce),w.push(`/z_${M}`)}}this.cacheKey=w.sort().join("")}getMaxValue(o){const h=this.binders[o];return h instanceof Zs||h instanceof wn?h.maxValue:0}populatePaintArrays(o,h,g,w,M){for(const I in this.binders){const O=this.binders[I];(O instanceof Zs||O instanceof wn||O instanceof en)&&O.populatePaintArray(o,h,g,w,M)}}setConstantPatternPositions(o,h){for(const g in this.binders){const w=this.binders[g];w instanceof Jl&&w.setConstantPatternPositions(o,h)}}updatePaintArrays(o,h,g,w,M){let I=!1;for(const O in o){const B=h.getPositions(O);for(const $ of B){const Y=g.feature($.index);for(const ee in this.binders){const re=this.binders[ee];if((re instanceof Zs||re instanceof wn||re instanceof en)&&!0===re.expression.isStateDependent){const ce=w.paint.get(ee);re.expression=ce.value,re.updatePaintArray($.start,$.end,Y,o[O],M),I=!0}}}}return I}defines(){const o=[];for(const h in this.binders){const g=this.binders[h];(g instanceof Ja||g instanceof Jl)&&o.push(...g.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return o}getBinderAttributes(){const o=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof Zs||g instanceof wn)for(let w=0;w<g.paintVertexAttributes.length;w++)o.push(g.paintVertexAttributes[w].name);else if(g instanceof en)for(let w=0;w<Qa.members.length;w++)o.push(Qa.members[w].name)}return o}getBinderUniforms(){const o=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof Ja||g instanceof Jl||g instanceof wn)for(const w of g.uniformNames)o.push(w)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,h){const g=[];for(const w in this.binders){const M=this.binders[w];if(M instanceof Ja||M instanceof Jl||M instanceof wn)for(const I of M.uniformNames)if(h[I]){const O=M.getBinding(o,h[I],I);g.push({name:I,property:w,binding:O})}}return g}setUniforms(o,h,g,w){for(const{name:M,property:I,binding:O}of h)this.binders[I].setUniform(O,w,g.get(I),M)}updatePaintBuffers(o){this._buffers=[];for(const h in this.binders){const g=this.binders[h];if(o&&g instanceof en){const w=2===o.fromScale?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(g instanceof Zs||g instanceof wn)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(o){for(const h in this.binders){const g=this.binders[h];(g instanceof Zs||g instanceof wn||g instanceof en)&&g.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const h=this.binders[o];(h instanceof Zs||h instanceof wn||h instanceof en)&&h.destroy()}}}class el{constructor(o,h,g=(()=>!0)){this.programConfigurations={};for(const w of o)this.programConfigurations[w.id]=new fd(w,h,g);this.needsUpload=!1,this._featureMap=new zr,this._bufferOffset=0}populatePaintArrays(o,h,g,w,M,I){for(const O in this.programConfigurations)this.programConfigurations[O].populatePaintArrays(o,h,w,M,I);void 0!==h.id&&this._featureMap.add(h.id,g,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,h,g,w){for(const M of g)this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(o,this._featureMap,h,M,w)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function El(u,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${o}-`,"").replace(/-/g,"_")]}function md(u,o,h){const w={"line-pattern":{source:dr,composite:dr},"fill-pattern":{source:dr,composite:dr},"fill-extrusion-pattern":{source:dr,composite:dr}}[u];return w&&w[h]||{color:{source:pa,composite:be},number:{source:H,composite:pa}}[o][h]}Xt("ConstantBinder",Ja),Xt("CrossFadedConstantBinder",Jl),Xt("SourceExpressionBinder",Zs),Xt("CrossFadedCompositeBinder",en),Xt("CompositeExpressionBinder",wn),Xt("ProgramConfiguration",fd,{omit:["_buffers"]}),Xt("ProgramConfigurationSet",el);const eo=8192,_h=Math.pow(2,14)-1,ru=-_h-1;function Tl(u){const o=eo/u.extent,h=u.loadGeometry();for(let g=0;g<h.length;g++){const w=h[g];for(let M=0;M<w.length;M++){const I=w[M],O=Math.round(I.x*o),B=Math.round(I.y*o);I.x=ni(O,ru,_h),I.y=ni(B,ru,_h),(O<I.x||O>I.x+1||B<I.y||B>I.y+1)&&Di("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function ju(u,o){return{type:u.type,id:u.id,properties:u.properties,geometry:o?Tl(u):[]}}function yh(u,o,h,g,w){u.emplaceBack(2*o+(g+1)/2,2*h+(w+1)/2)}class Hn{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(h=>h.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.indexArray=new ns,this.segments=new xr,this.programConfigurations=new el(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(o,h,g){const w=this.layers[0],M=[];let I=null,O=!1;"circle"===w.type&&(I=w.layout.get("circle-sort-key"),O=!I.isConstant());for(const{feature:B,id:$,index:Y,sourceLayerIndex:ee}of o){const re=this.layers[0]._featureFilter.needGeometry,ce=ju(B,re);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),ce,g))continue;const de=O?I.evaluate(ce,{},g):void 0,_e={id:$,properties:B.properties,type:B.type,sourceLayerIndex:ee,index:Y,geometry:re?ce.geometry:Tl(B),patterns:{},sortKey:de};M.push(_e)}O&&M.sort((B,$)=>B.sortKey-$.sortKey);for(const B of M){const{geometry:$,index:Y,sourceLayerIndex:ee}=B,re=o[Y].feature;this.addFeature(B,$,Y,g),h.featureIndex.insert(re,$,Y,ee,this.index)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Gs),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,h,g,w){for(const M of h)for(const I of M){const O=I.x,B=I.y;if(O<0||O>=eo||B<0||B>=eo)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Y=$.vertexLength;yh(this.layoutVertexArray,O,B,-1,-1),yh(this.layoutVertexArray,O,B,1,-1),yh(this.layoutVertexArray,O,B,1,1),yh(this.layoutVertexArray,O,B,-1,1),this.indexArray.emplaceBack(Y,Y+1,Y+2),this.indexArray.emplaceBack(Y,Y+3,Y+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,{},w)}}function Af(u,o){for(let h=0;h<u.length;h++)if(vh(o,u[h]))return!0;for(let h=0;h<o.length;h++)if(vh(u,o[h]))return!0;return!!Mg(u,o)}function f0(u,o,h){return!!vh(u,o)||!!Qy(o,u,h)}function Ky(u,o){if(1===u.length)return Lf(o,u[0]);for(let h=0;h<o.length;h++){const g=o[h];for(let w=0;w<g.length;w++)if(vh(u,g[w]))return!0}for(let h=0;h<u.length;h++)if(Lf(o,u[h]))return!0;for(let h=0;h<o.length;h++)if(Mg(u,o[h]))return!0;return!1}function Dg(u,o,h){if(u.length>1){if(Mg(u,o))return!0;for(let g=0;g<o.length;g++)if(Qy(o[g],u,h))return!0}for(let g=0;g<u.length;g++)if(Qy(u[g],o,h))return!0;return!1}function Mg(u,o){if(0===u.length||0===o.length)return!1;for(let h=0;h<u.length-1;h++){const g=u[h],w=u[h+1];for(let M=0;M<o.length-1;M++)if(m0(g,w,o[M],o[M+1]))return!0}return!1}function m0(u,o,h,g){return Jn(u,h,g)!==Jn(o,h,g)&&Jn(u,o,h)!==Jn(u,o,g)}function Qy(u,o,h){const g=h*h;if(1===o.length)return u.distSqr(o[0])<g;for(let w=1;w<o.length;w++)if(g0(u,o[w-1],o[w])<g)return!0;return!1}function g0(u,o,h){const g=o.distSqr(h);if(0===g)return u.distSqr(o);const w=((u.x-o.x)*(h.x-o.x)+(u.y-o.y)*(h.y-o.y))/g;return u.distSqr(w<0?o:w>1?h:h.sub(o)._mult(w)._add(o))}function Lf(u,o){let h,g,w,M=!1;for(let I=0;I<u.length;I++){h=u[I];for(let O=0,B=h.length-1;O<h.length;B=O++)g=h[O],w=h[B],g.y>o.y!=w.y>o.y&&o.x<(w.x-g.x)*(o.y-g.y)/(w.y-g.y)+g.x&&(M=!M)}return M}function vh(u,o){let h=!1;for(let g=0,w=u.length-1;g<u.length;w=g++){const M=u[g],I=u[w];M.y>o.y!=I.y>o.y&&o.x<(I.x-M.x)*(o.y-M.y)/(I.y-M.y)+M.x&&(h=!h)}return h}function Ig(u,o,h){const g=h[0],w=h[2];if(u.x<g.x&&o.x<g.x||u.x>w.x&&o.x>w.x||u.y<g.y&&o.y<g.y||u.y>w.y&&o.y>w.y)return!1;const M=Jn(u,o,h[0]);return M!==Jn(u,o,h[1])||M!==Jn(u,o,h[2])||M!==Jn(u,o,h[3])}function tr(u,o,h){const g=o.paint.get(u).value;return"constant"===g.kind?g.value:h.programConfigurations.get(o.id).getMaxValue(u)}function lo(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Uu(u,o,h,g,w){if(!o[0]&&!o[1])return u;const M=Ue.convert(o)._mult(w);"viewport"===h&&M._rotate(-g);const I=[];for(let O=0;O<u.length;O++)I.push(u[O].sub(M));return I}let vp,Dl;Xt("CircleBucket",Hn,{omit:["layers"]});var Zn={get paint(){return Dl=Dl||new Ir({"circle-radius":new pn(ze.paint_circle["circle-radius"]),"circle-color":new pn(ze.paint_circle["circle-color"]),"circle-blur":new pn(ze.paint_circle["circle-blur"]),"circle-opacity":new pn(ze.paint_circle["circle-opacity"]),"circle-translate":new Wt(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Wt(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wt(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wt(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pn(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pn(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pn(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return vp=vp||new Ir({"circle-sort-key":new pn(ze.layout_circle["circle-sort-key"])})}},pi=1e-6,bh=typeof Float32Array<"u"?Float32Array:Array;function Ws(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function kf(u,o,h){var g=o[0],w=o[1],M=o[2],I=o[3],O=o[4],B=o[5],$=o[6],Y=o[7],ee=o[8],re=o[9],ce=o[10],de=o[11],_e=o[12],Ie=o[13],ke=o[14],$e=o[15],Fe=h[0],qe=h[1],rt=h[2],mt=h[3];return u[0]=Fe*g+qe*O+rt*ee+mt*_e,u[1]=Fe*w+qe*B+rt*re+mt*Ie,u[2]=Fe*M+qe*$+rt*ce+mt*ke,u[3]=Fe*I+qe*Y+rt*de+mt*$e,u[4]=(Fe=h[4])*g+(qe=h[5])*O+(rt=h[6])*ee+(mt=h[7])*_e,u[5]=Fe*w+qe*B+rt*re+mt*Ie,u[6]=Fe*M+qe*$+rt*ce+mt*ke,u[7]=Fe*I+qe*Y+rt*de+mt*$e,u[8]=(Fe=h[8])*g+(qe=h[9])*O+(rt=h[10])*ee+(mt=h[11])*_e,u[9]=Fe*w+qe*B+rt*re+mt*Ie,u[10]=Fe*M+qe*$+rt*ce+mt*ke,u[11]=Fe*I+qe*Y+rt*de+mt*$e,u[12]=(Fe=h[12])*g+(qe=h[13])*O+(rt=h[14])*ee+(mt=h[15])*_e,u[13]=Fe*w+qe*B+rt*re+mt*Ie,u[14]=Fe*M+qe*$+rt*ce+mt*ke,u[15]=Fe*I+qe*Y+rt*de+mt*$e,u}Math.hypot||(Math.hypot=function(){for(var u=0,o=arguments.length;o--;)u+=arguments[o]*arguments[o];return Math.sqrt(u)});var ou,Of=kf;function ys(u,o,h){var g=o[0],w=o[1],M=o[2],I=o[3];return u[0]=h[0]*g+h[4]*w+h[8]*M+h[12]*I,u[1]=h[1]*g+h[5]*w+h[9]*M+h[13]*I,u[2]=h[2]*g+h[6]*w+h[10]*M+h[14]*I,u[3]=h[3]*g+h[7]*w+h[11]*M+h[15]*I,u}ou=new bh(4),bh!=Float32Array&&(ou[0]=0,ou[1]=0,ou[2]=0,ou[3]=0);class Pg extends ts{constructor(o){super(o,Zn)}createBucket(o){return new Hn(o)}queryRadius(o){const h=o;return tr("circle-radius",this,h)+tr("circle-stroke-width",this,h)+lo(this.paint.get("circle-translate"))}queryIntersectsFeature(o,h,g,w,M,I,O,B){const $=Uu(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,O),Y=this.paint.get("circle-radius").evaluate(h,g)+this.paint.get("circle-stroke-width").evaluate(h,g),ee="map"===this.paint.get("circle-pitch-alignment"),re=ee?$:(_e=B,$.map(Ie=>Ag(Ie,_e))),ce=ee?Y*O:Y;var _e;for(const de of w)for(const _e of de){const Ie=ee?_e:Ag(_e,B);let ke=ce;const $e=ys([],[_e.x,_e.y,0,1],B);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ke*=$e[3]/I.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ke*=I.cameraToCenterDistance/$e[3]),f0(re,Ie,ke))return!0}return!1}}function Ag(u,o){const h=ys([],[u.x,u.y,0,1],o);return new Ue(h[0]/h[3],h[1]/h[3])}class Rf extends Hn{}let jr;Xt("HeatmapBucket",Rf,{omit:["layers"]});var Ff={get paint(){return jr=jr||new Ir({"heatmap-radius":new pn(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pn(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wt(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new eu(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wt(ze.paint_heatmap["heatmap-opacity"])})}};function gd(u,{width:o,height:h},g,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==o*h*g)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${o*h*g}`)}else w=new Uint8Array(o*h*g);return u.width=o,u.height=h,u.data=w,u}function _d(u,{width:o,height:h},g){if(o===u.width&&h===u.height)return;const w=gd({},{width:o,height:h},g);is(u,w,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,o),height:Math.min(u.height,h)},g),u.width=o,u.height=h,u.data=w.data}function is(u,o,h,g,w,M){if(0===w.width||0===w.height)return o;if(w.width>u.width||w.height>u.height||h.x>u.width-w.width||h.y>u.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>o.width||w.height>o.height||g.x>o.width-w.width||g.y>o.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const I=u.data,O=o.data;if(I===O)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<w.height;B++){const $=((h.y+B)*u.width+h.x)*M,Y=((g.y+B)*o.width+g.x)*M;for(let ee=0;ee<w.width*M;ee++)O[Y+ee]=I[$+ee]}return o}class wc{constructor(o,h){gd(this,o,1,h)}resize(o){_d(this,o,1)}clone(){return new wc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,h,g,w,M){is(o,h,g,w,M,1)}}class rs{constructor(o,h){gd(this,o,4,h)}resize(o){_d(this,o,4)}replace(o,h){h?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new rs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,h,g,w,M){is(o,h,g,w,M,4)}}function Nf(u){const o={},h=u.resolution||256,g=u.clips?u.clips.length:1,w=u.image||new rs({width:h,height:g});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const M=(I,O,B)=>{o[u.evaluationKey]=B;const $=u.expression.evaluate(o);w.data[I+O+0]=Math.floor(255*$.r/$.a),w.data[I+O+1]=Math.floor(255*$.g/$.a),w.data[I+O+2]=Math.floor(255*$.b/$.a),w.data[I+O+3]=Math.floor(255*$.a)};if(u.clips)for(let I=0,O=0;I<g;++I,O+=4*h)for(let B=0,$=0;B<h;B++,$+=4){const Y=B/(h-1),{start:ee,end:re}=u.clips[I];M(O,$,ee*(1-Y)+re*Y)}else for(let I=0,O=0;I<h;I++,O+=4)M(0,O,I/(h-1));return w}Xt("AlphaImage",wc),Xt("RGBAImage",rs);class zf extends ts{createBucket(o){return new Rf(o)}constructor(o){super(o,Ff),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){"heatmap-color"===o&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Nf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Cc;var Bf={get paint(){return Cc=Cc||new Ir({"hillshade-illumination-direction":new Wt(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wt(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wt(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wt(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wt(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wt(ze.paint_hillshade["hillshade-accent-color"])})}};class Lg extends ts{constructor(o){super(o,Bf)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const kg=Tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Og}=kg;var Hu={exports:{}};function bp(u,o,h){h=h||2;var g,w,M,I,O,B,$,Y=o&&o.length,ee=Y?o[0]*h:u.length,re=yd(u,0,ee,h,!0),ce=[];if(!re||re.next===re.prev)return ce;if(Y&&(re=function(_e,Ie,ke,$e){var Fe,qe,rt,mt=[];for(Fe=0,qe=Ie.length;Fe<qe;Fe++)(rt=yd(_e,Ie[Fe]*$e,Fe<qe-1?Ie[Fe+1]*$e:_e.length,$e,!1))===rt.next&&(rt.steiner=!0),mt.push(Fg(rt));for(mt.sort(xp),Fe=0;Fe<mt.length;Fe++)ke=$u(mt[Fe],ke);return ke}(u,o,re,h)),u.length>80*h){g=M=u[0],w=I=u[1];for(var de=h;de<ee;de+=h)(O=u[de])<g&&(g=O),(B=u[de+1])<w&&(w=B),O>M&&(M=O),B>I&&(I=B);$=0!==($=Math.max(M-g,I-w))?32767/$:0}return za(re,ce,h,g,w,$,0),ce}function yd(u,o,h,g,w){var M,I;if(w===ec(u,o,h,g)>0)for(M=o;M<h;M+=g)I=Sp(M,u[M],u[M+1],I);else for(M=h-g;M>=o;M-=g)I=Sp(M,u[M],u[M+1],I);return I&&vs(I,I.next)&&(Ch(I),I=I.next),I}function Qn(u,o){if(!u)return u;o||(o=u);var h,g=u;do{if(h=!1,g.steiner||!vs(g,g.next)&&0!==to(g.prev,g,g.next))g=g.next;else{if(Ch(g),(g=o=g.prev)===g.next)break;h=!0}}while(h||g!==o);return o}function za(u,o,h,g,w,M,I){if(u){!I&&M&&function(Y,ee,re,ce){var de=Y;do{0===de.z&&(de.z=vd(de.x,de.y,ee,re,ce)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next}while(de!==Y);de.prevZ.nextZ=null,de.prevZ=null,function(_e){var Ie,ke,$e,Fe,qe,rt,mt,Ut,tn=1;do{for(ke=_e,_e=null,qe=null,rt=0;ke;){for(rt++,$e=ke,mt=0,Ie=0;Ie<tn&&(mt++,$e=$e.nextZ);Ie++);for(Ut=tn;mt>0||Ut>0&&$e;)0!==mt&&(0===Ut||!$e||ke.z<=$e.z)?(Fe=ke,ke=ke.nextZ,mt--):(Fe=$e,$e=$e.nextZ,Ut--),qe?qe.nextZ=Fe:_e=Fe,Fe.prevZ=qe,qe=Fe;ke=$e}qe.nextZ=null,tn*=2}while(rt>1)}(de)}(u,g,w,M);for(var O,B,$=u;u.prev!==u.next;)if(O=u.prev,B=u.next,M?Xy(u,g,w,M):qs(u))o.push(O.i/h|0),o.push(u.i/h|0),o.push(B.i/h|0),Ch(u),u=B.next,$=B.next;else if((u=B)===$){I?1===I?za(u=Jy(Qn(u),o,h),o,h,g,w,M,2):2===I&&Rg(u,o,h,g,w,M):za(Qn(u),o,h,g,w,M,1);break}}}function qs(u){var o=u.prev,h=u,g=u.next;if(to(o,h,g)>=0)return!1;for(var w=o.x,M=h.x,I=g.x,O=o.y,B=h.y,$=g.y,Y=w<M?w<I?w:I:M<I?M:I,ee=O<B?O<$?O:$:B<$?B:$,re=w>M?w>I?w:I:M>I?M:I,ce=O>B?O>$?O:$:B>$?B:$,de=g.next;de!==o;){if(de.x>=Y&&de.x<=re&&de.y>=ee&&de.y<=ce&&fa(w,O,M,B,I,$,de.x,de.y)&&to(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function Xy(u,o,h,g){var w=u.prev,M=u,I=u.next;if(to(w,M,I)>=0)return!1;for(var O=w.x,B=M.x,$=I.x,Y=w.y,ee=M.y,re=I.y,ce=O<B?O<$?O:$:B<$?B:$,de=Y<ee?Y<re?Y:re:ee<re?ee:re,_e=O>B?O>$?O:$:B>$?B:$,Ie=Y>ee?Y>re?Y:re:ee>re?ee:re,ke=vd(ce,de,o,h,g),$e=vd(_e,Ie,o,h,g),Fe=u.prevZ,qe=u.nextZ;Fe&&Fe.z>=ke&&qe&&qe.z<=$e;){if(Fe.x>=ce&&Fe.x<=_e&&Fe.y>=de&&Fe.y<=Ie&&Fe!==w&&Fe!==I&&fa(O,Y,B,ee,$,re,Fe.x,Fe.y)&&to(Fe.prev,Fe,Fe.next)>=0||(Fe=Fe.prevZ,qe.x>=ce&&qe.x<=_e&&qe.y>=de&&qe.y<=Ie&&qe!==w&&qe!==I&&fa(O,Y,B,ee,$,re,qe.x,qe.y)&&to(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Fe&&Fe.z>=ke;){if(Fe.x>=ce&&Fe.x<=_e&&Fe.y>=de&&Fe.y<=Ie&&Fe!==w&&Fe!==I&&fa(O,Y,B,ee,$,re,Fe.x,Fe.y)&&to(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.prevZ}for(;qe&&qe.z<=$e;){if(qe.x>=ce&&qe.x<=_e&&qe.y>=de&&qe.y<=Ie&&qe!==w&&qe!==I&&fa(O,Y,B,ee,$,re,qe.x,qe.y)&&to(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function Jy(u,o,h){var g=u;do{var w=g.prev,M=g.next.next;!vs(w,M)&&bd(w,g,g.next,M)&&wh(w,M)&&wh(M,w)&&(o.push(w.i/h|0),o.push(g.i/h|0),o.push(M.i/h|0),Ch(g),Ch(g.next),g=u=M),g=g.next}while(g!==u);return Qn(g)}function Rg(u,o,h,g,w,M){var I=u;do{for(var O=I.next.next;O!==I.prev;){if(I.i!==O.i&&Vf(I,O)){var B=jf(I,O);return I=Qn(I,I.next),B=Qn(B,B.next),za(I,o,h,g,w,M,0),void za(B,o,h,g,w,M,0)}O=O.next}I=I.next}while(I!==u)}function xp(u,o){return u.x-o.x}function $u(u,o){var h=function(w,M){var I,O=M,B=w.x,$=w.y,Y=-1/0;do{if($<=O.y&&$>=O.next.y&&O.next.y!==O.y){var ee=O.x+($-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(ee<=B&&ee>Y&&(Y=ee,I=O.x<O.next.x?O:O.next,ee===B))return I}O=O.next}while(O!==M);if(!I)return null;var re,ce=I,de=I.x,_e=I.y,Ie=1/0;O=I;do{B>=O.x&&O.x>=de&&B!==O.x&&fa($<_e?B:Y,$,de,_e,$<_e?Y:B,$,O.x,O.y)&&(re=Math.abs($-O.y)/(B-O.x),wh(O,w)&&(re<Ie||re===Ie&&(O.x>I.x||O.x===I.x&&xh(I,O)))&&(I=O,Ie=re)),O=O.next}while(O!==ce);return I}(u,o);if(!h)return o;var g=jf(h,u);return Qn(g,g.next),Qn(h,h.next)}function xh(u,o){return to(u.prev,u,o.prev)<0&&to(o.next,u,u.next)<0}function vd(u,o,h,g,w){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-h)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-g)*w|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Fg(u){var o=u,h=u;do{(o.x<h.x||o.x===h.x&&o.y<h.y)&&(h=o),o=o.next}while(o!==u);return h}function fa(u,o,h,g,w,M,I,O){return(w-I)*(o-O)>=(u-I)*(M-O)&&(u-I)*(g-O)>=(h-I)*(o-O)&&(h-I)*(M-O)>=(w-I)*(g-O)}function Vf(u,o){return u.next.i!==o.i&&u.prev.i!==o.i&&!function(h,g){var w=h;do{if(w.i!==h.i&&w.next.i!==h.i&&w.i!==g.i&&w.next.i!==g.i&&bd(w,w.next,h,g))return!0;w=w.next}while(w!==h);return!1}(u,o)&&(wh(u,o)&&wh(o,u)&&function(h,g){var w=h,M=!1,I=(h.x+g.x)/2,O=(h.y+g.y)/2;do{w.y>O!=w.next.y>O&&w.next.y!==w.y&&I<(w.next.x-w.x)*(O-w.y)/(w.next.y-w.y)+w.x&&(M=!M),w=w.next}while(w!==h);return M}(u,o)&&(to(u.prev,u,o.prev)||to(u,o.prev,o))||vs(u,o)&&to(u.prev,u,u.next)>0&&to(o.prev,o,o.next)>0)}function to(u,o,h){return(o.y-u.y)*(h.x-o.x)-(o.x-u.x)*(h.y-o.y)}function vs(u,o){return u.x===o.x&&u.y===o.y}function bd(u,o,h,g){var w=Cp(to(u,o,h)),M=Cp(to(u,o,g)),I=Cp(to(h,g,u)),O=Cp(to(h,g,o));return w!==M&&I!==O||!(0!==w||!wp(u,h,o))||!(0!==M||!wp(u,g,o))||!(0!==I||!wp(h,u,g))||!(0!==O||!wp(h,o,g))}function wp(u,o,h){return o.x<=Math.max(u.x,h.x)&&o.x>=Math.min(u.x,h.x)&&o.y<=Math.max(u.y,h.y)&&o.y>=Math.min(u.y,h.y)}function Cp(u){return u>0?1:u<0?-1:0}function wh(u,o){return to(u.prev,u,u.next)<0?to(u,o,u.next)>=0&&to(u,u.prev,o)>=0:to(u,o,u.prev)<0||to(u,u.next,o)<0}function jf(u,o){var h=new Sh(u.i,u.x,u.y),g=new Sh(o.i,o.x,o.y),w=u.next,M=o.prev;return u.next=o,o.prev=u,h.next=w,w.prev=h,g.next=h,h.prev=g,M.next=g,g.prev=M,g}function Sp(u,o,h,g){var w=new Sh(u,o,h);return g?(w.next=g.next,w.prev=g,g.next.prev=w,g.next=w):(w.prev=w,w.next=w),w}function Ch(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Sh(u,o,h){this.i=u,this.x=o,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ec(u,o,h,g){for(var w=0,M=o,I=h-g;M<h;M+=g)w+=(u[I]-u[M])*(u[M+1]+u[I+1]),I=M;return w}Hu.exports=bp,Hu.exports.default=bp,bp.deviation=function(u,o,h,g){var w=o&&o.length,M=Math.abs(ec(u,0,w?o[0]*h:u.length,h));if(w)for(var I=0,O=o.length;I<O;I++)M-=Math.abs(ec(u,o[I]*h,I<O-1?o[I+1]*h:u.length,h));var B=0;for(I=0;I<g.length;I+=3){var $=g[I]*h,Y=g[I+1]*h,ee=g[I+2]*h;B+=Math.abs((u[$]-u[ee])*(u[Y+1]-u[$+1])-(u[$]-u[Y])*(u[ee+1]-u[$+1]))}return 0===M&&0===B?0:Math.abs((B-M)/M)},bp.flatten=function(u){for(var o=u[0][0].length,h={vertices:[],holes:[],dimensions:o},g=0,w=0;w<u.length;w++){for(var M=0;M<u[w].length;M++)for(var I=0;I<o;I++)h.vertices.push(u[w][M][I]);w>0&&h.holes.push(g+=u[w-1].length)}return h};var su=pe(Hu.exports);function Sc(u,o,h,g,w){Uf(u,o,h||0,g||u.length-1,w||Ng)}function Uf(u,o,h,g,w){for(;g>h;){if(g-h>600){var M=g-h+1,I=o-h+1,O=Math.log(M),B=.5*Math.exp(2*O/3),$=.5*Math.sqrt(O*B*(M-B)/M)*(I-M/2<0?-1:1);Uf(u,o,Math.max(h,Math.floor(o-I*B/M+$)),Math.min(g,Math.floor(o+(M-I)*B/M+$)),w)}var Y=u[o],ee=h,re=g;for(ar(u,h,o),w(u[g],Y)>0&&ar(u,h,g);ee<re;){for(ar(u,ee,re),ee++,re--;w(u[ee],Y)<0;)ee++;for(;w(u[re],Y)>0;)re--}0===w(u[h],Y)?ar(u,h,re):ar(u,++re,g),re<=o&&(h=re+1),o<=re&&(g=re-1)}}function ar(u,o,h){var g=u[o];u[o]=u[h],u[h]=g}function Ng(u,o){return u<o?-1:u>o?1:0}function Ep(u,o){const h=u.length;if(h<=1)return[u];const g=[];let w,M;for(let I=0;I<h;I++){const O=Fn(u[I]);0!==O&&(u[I].area=Math.abs(O),void 0===M&&(M=O<0),M===O<0?(w&&g.push(w),w=[u[I]]):w.push(u[I]))}if(w&&g.push(w),o>1)for(let I=0;I<g.length;I++)g[I].length<=o||(Sc(g[I],o,1,g[I].length-1,Gu),g[I]=g[I].slice(0,o));return g}function Gu(u,o){return o.area-u.area}function zg(u,o,h){const g=h.patternDependencies;let w=!1;for(const M of o){const I=M.paint.get(`${u}-pattern`);I.isConstant()||(w=!0);const O=I.constantOr(null);O&&(w=!0,g[O.to]=!0,g[O.from]=!0)}return w}function Eh(u,o,h,g,w){const M=w.patternDependencies;for(const I of o){const O=I.paint.get(`${u}-pattern`).value;if("constant"!==O.kind){let B=O.evaluate({zoom:g-1},h,{},w.availableImages),$=O.evaluate({zoom:g},h,{},w.availableImages),Y=O.evaluate({zoom:g+1},h,{},w.availableImages);B=B&&B.name?B.name:B,$=$&&$.name?$.name:$,Y=Y&&Y.name?Y.name:Y,M[B]=!0,M[$]=!0,M[Y]=!0,h.patterns[I.id]={min:B,mid:$,max:Y}}}return h}class Tp{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(h=>h.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new _i,this.indexArray=new ns,this.indexArray2=new Qr,this.programConfigurations=new el(o.layers,o.zoom),this.segments=new xr,this.segments2=new xr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(o,h,g){this.hasPattern=zg("fill",this.layers,h);const w=this.layers[0].layout.get("fill-sort-key"),M=!w.isConstant(),I=[];for(const{feature:O,id:B,index:$,sourceLayerIndex:Y}of o){const ee=this.layers[0]._featureFilter.needGeometry,re=ju(O,ee);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),re,g))continue;const ce=M?w.evaluate(re,{},g,h.availableImages):void 0,de={id:B,properties:O.properties,type:O.type,sourceLayerIndex:Y,index:$,geometry:ee?re.geometry:Tl(O),patterns:{},sortKey:ce};I.push(de)}M&&I.sort((O,B)=>O.sortKey-B.sortKey);for(const O of I){const{geometry:B,index:$,sourceLayerIndex:Y}=O;if(this.hasPattern){const ee=Eh("fill",this.layers,O,this.zoom,h);this.patternFeatures.push(ee)}else this.addFeature(O,B,$,g,{});h.featureIndex.insert(o[$].feature,B,$,Y,this.index)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}addFeatures(o,h,g){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Og),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,h,g,w,M){for(const I of Ep(h,500)){let O=0;for(const ce of I)O+=ce.length;const B=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray),$=B.vertexLength,Y=[],ee=[];for(const ce of I){if(0===ce.length)continue;ce!==I[0]&&ee.push(Y.length/2);const de=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),_e=de.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(_e+ce.length-1,_e),Y.push(ce[0].x),Y.push(ce[0].y);for(let Ie=1;Ie<ce.length;Ie++)this.layoutVertexArray.emplaceBack(ce[Ie].x,ce[Ie].y),this.indexArray2.emplaceBack(_e+Ie-1,_e+Ie),Y.push(ce[Ie].x),Y.push(ce[Ie].y);de.vertexLength+=ce.length,de.primitiveLength+=ce.length}const re=su(Y,ee);for(let ce=0;ce<re.length;ce+=3)this.indexArray.emplaceBack($+re[ce],$+re[ce+1],$+re[ce+2]);B.vertexLength+=O,B.primitiveLength+=re.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,M,w)}}let Hf,$f;Xt("FillBucket",Tp,{omit:["layers","patternFeatures"]});var Dp={get paint(){return $f=$f||new Ir({"fill-antialias":new Wt(ze.paint_fill["fill-antialias"]),"fill-opacity":new pn(ze.paint_fill["fill-opacity"]),"fill-color":new pn(ze.paint_fill["fill-color"]),"fill-outline-color":new pn(ze.paint_fill["fill-outline-color"]),"fill-translate":new Wt(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Wt(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new da(ze.paint_fill["fill-pattern"])})},get layout(){return Hf=Hf||new Ir({"fill-sort-key":new pn(ze.layout_fill["fill-sort-key"])})}};class Gf extends ts{constructor(o){super(o,Dp)}recalculate(o,h){super.recalculate(o,h);const g=this.paint._values["fill-outline-color"];"constant"===g.value.kind&&void 0===g.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Tp(o)}queryRadius(){return lo(this.paint.get("fill-translate"))}queryIntersectsFeature(o,h,g,w,M,I,O){return Ky(Uu(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,O),w)}isTileClipped(){return!0}}const Bg=Tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xd=Tr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Mp}=Bg;var Ec={},Zf=lt,Ip=au;function au(u,o,h,g,w){this.properties={},this.extent=h,this.type=0,this._pbf=u,this._geometry=-1,this._keys=g,this._values=w,u.readFields(wd,this,o)}function wd(u,o,h){1==u?o.id=h.readVarint():2==u?function(g,w){for(var M=g.readVarint()+g.pos;g.pos<M;){var I=w._keys[g.readVarint()],O=w._values[g.readVarint()];w.properties[I]=O}}(h,o):3==u?o.type=h.readVarint():4==u&&(o._geometry=h.pos)}function Vg(u){for(var o,h,g=0,w=0,M=u.length,I=M-1;w<M;I=w++)g+=((h=u[I]).x-(o=u[w]).x)*(o.y+h.y);return g}au.types=["Unknown","Point","LineString","Polygon"],au.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var o,h=u.readVarint()+u.pos,g=1,w=0,M=0,I=0,O=[];u.pos<h;){if(w<=0){var B=u.readVarint();g=7&B,w=B>>3}if(w--,1===g||2===g)M+=u.readSVarint(),I+=u.readSVarint(),1===g&&(o&&O.push(o),o=[]),o.push(new Zf(M,I));else{if(7!==g)throw new Error("unknown command "+g);o&&o.push(o[0].clone())}}return o&&O.push(o),O},au.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var o=u.readVarint()+u.pos,h=1,g=0,w=0,M=0,I=1/0,O=-1/0,B=1/0,$=-1/0;u.pos<o;){if(g<=0){var Y=u.readVarint();h=7&Y,g=Y>>3}if(g--,1===h||2===h)(w+=u.readSVarint())<I&&(I=w),w>O&&(O=w),(M+=u.readSVarint())<B&&(B=M),M>$&&($=M);else if(7!==h)throw new Error("unknown command "+h)}return[I,B,O,$]},au.prototype.toGeoJSON=function(u,o,h){var g,w,M=this.extent*Math.pow(2,h),I=this.extent*u,O=this.extent*o,B=this.loadGeometry(),$=au.types[this.type];function Y(ce){for(var de=0;de<ce.length;de++){var _e=ce[de];ce[de]=[360*(_e.x+I)/M-180,360/Math.PI*Math.atan(Math.exp((180-360*(_e.y+O)/M)*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(g=0;g<B.length;g++)ee[g]=B[g][0];Y(B=ee);break;case 2:for(g=0;g<B.length;g++)Y(B[g]);break;case 3:for(B=function(ce){var de=ce.length;if(de<=1)return[ce];for(var _e,Ie,ke=[],$e=0;$e<de;$e++){var Fe=Vg(ce[$e]);0!==Fe&&(void 0===Ie&&(Ie=Fe<0),Ie===Fe<0?(_e&&ke.push(_e),_e=[ce[$e]]):_e.push(ce[$e]))}return _e&&ke.push(_e),ke}(B),g=0;g<B.length;g++)for(w=0;w<B[g].length;w++)Y(B[g][w])}1===B.length?B=B[0]:$="Multi"+$;var re={type:"Feature",geometry:{type:$,coordinates:B},properties:this.properties};return"id"in this&&(re.id=this.id),re};var Pp=Ip,jg=Ug;function Ug(u,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(Hg,this,o),this.length=this._features.length}function Hg(u,o,h){15===u?o.version=h.readVarint():1===u?o.name=h.readString():5===u?o.extent=h.readVarint():2===u?o._features.push(h.pos):3===u?o._keys.push(h.readString()):4===u&&o._values.push(function(g){for(var w=null,M=g.readVarint()+g.pos;g.pos<M;){var I=g.readVarint()>>3;w=1===I?g.readString():2===I?g.readFloat():3===I?g.readDouble():4===I?g.readVarint64():5===I?g.readVarint():6===I?g.readSVarint():7===I?g.readBoolean():null}return w}(h))}Ug.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var o=this._pbf.readVarint()+this._pbf.pos;return new Pp(this._pbf,o,this.extent,this._keys,this._values)};var yi=jg;function Th(u,o,h){if(3===u){var g=new yi(h,h.readVarint()+h.pos);g.length&&(o[g.name]=g)}}Ec.VectorTile=function(u,o){this.layers=u.readFields(Th,{},o)},Ec.VectorTileFeature=Ip,Ec.VectorTileLayer=jg;const Ap=Ec.VectorTileFeature.types,tc=Math.pow(2,13);function nc(u,o,h,g,w,M,I,O){u.emplaceBack(o,h,2*Math.floor(g*tc)+I,w*tc*2,M*tc*2,Math.round(O))}class Wf{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(h=>h.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new zt,this.centroidVertexArray=new St,this.indexArray=new ns,this.programConfigurations=new el(o.layers,o.zoom),this.segments=new xr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(o,h,g){this.features=[],this.hasPattern=zg("fill-extrusion",this.layers,h);for(const{feature:w,id:M,index:I,sourceLayerIndex:O}of o){const B=this.layers[0]._featureFilter.needGeometry,$=ju(w,B);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),$,g))continue;const Y={id:M,sourceLayerIndex:O,index:I,geometry:B?$.geometry:Tl(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(Eh("fill-extrusion",this.layers,Y,this.zoom,h)):this.addFeature(Y,Y.geometry,I,g,{}),h.featureIndex.insert(w,Y.geometry,I,O,this.index,!0)}}addFeatures(o,h,g){for(const w of this.features){const{geometry:M}=w;this.addFeature(w,M,w.index,h,g)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Mp),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,xd.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,h,g,w,M){const I={x:0,y:0,vertexCount:0};for(const O of Ep(h,500)){let B=0;for(const de of O)B+=de.length;let $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const de of O){if(0===de.length||((u=de).every(o=>o.x<0)||u.every(o=>o.x>eo)||u.every(o=>o.y<0)||u.every(o=>o.y>eo)))continue;let _e=0;for(let Ie=0;Ie<de.length;Ie++){const ke=de[Ie];if(Ie>=1){const $e=de[Ie-1];if(!ic(ke,$e)){$.vertexLength+4>xr.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Fe=ke.sub($e)._perp()._unit(),qe=$e.dist(ke);_e+qe>32768&&(_e=0),nc(this.layoutVertexArray,ke.x,ke.y,Fe.x,Fe.y,0,0,_e),nc(this.layoutVertexArray,ke.x,ke.y,Fe.x,Fe.y,0,1,_e),I.x+=2*ke.x,I.y+=2*ke.y,I.vertexCount+=2,_e+=qe,nc(this.layoutVertexArray,$e.x,$e.y,Fe.x,Fe.y,0,0,_e),nc(this.layoutVertexArray,$e.x,$e.y,Fe.x,Fe.y,0,1,_e),I.x+=2*$e.x,I.y+=2*$e.y,I.vertexCount+=2;const rt=$.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),$.vertexLength+=4,$.primitiveLength+=2}}}}if($.vertexLength+B>xr.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray)),"Polygon"!==Ap[o.type])continue;const Y=[],ee=[],re=$.vertexLength;for(const de of O)if(0!==de.length){de!==O[0]&&ee.push(Y.length/2);for(let _e=0;_e<de.length;_e++){const Ie=de[_e];nc(this.layoutVertexArray,Ie.x,Ie.y,0,0,1,1,0),I.x+=Ie.x,I.y+=Ie.y,I.vertexCount+=1,Y.push(Ie.x),Y.push(Ie.y)}}const ce=su(Y,ee);for(let de=0;de<ce.length;de+=3)this.indexArray.emplaceBack(re+ce[de],re+ce[de+2],re+ce[de+1]);$.primitiveLength+=ce.length/3,$.vertexLength+=B}var u;for(let O=0;O<I.vertexCount;O++)this.centroidVertexArray.emplaceBack(Math.floor(I.x/I.vertexCount),Math.floor(I.y/I.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,M,w)}}function ic(u,o){return u.x===o.x&&(u.x<0||u.x>eo)||u.y===o.y&&(u.y<0||u.y>eo)}let Lp;Xt("FillExtrusionBucket",Wf,{omit:["layers","features"]});var kp={get paint(){return Lp=Lp||new Ir({"fill-extrusion-opacity":new Wt(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pn(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wt(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wt(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new da(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pn(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pn(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wt(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _0 extends ts{constructor(o){super(o,kp)}createBucket(o){return new Wf(o)}queryRadius(){return lo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,h,g,w,M,I,O,B){const $=Uu(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,O),Y=this.paint.get("fill-extrusion-height").evaluate(h,g),ee=this.paint.get("fill-extrusion-base").evaluate(h,g),re=function(de,_e,Ie,ke){const $e=[];for(const Fe of de){const qe=[Fe.x,Fe.y,0,1];ys(qe,qe,_e),$e.push(new Ue(qe[0]/qe[3],qe[1]/qe[3]))}return $e}($,B),ce=function(de,_e,Ie,ke){const $e=[],Fe=[],qe=ke[8]*_e,rt=ke[9]*_e,mt=ke[10]*_e,Ut=ke[11]*_e,tn=ke[8]*Ie,$t=ke[9]*Ie,jt=ke[10]*Ie,Pt=ke[11]*Ie;for(const nn of de){const Ft=[],Et=[];for(const Sn of nn){const un=Sn.x,si=Sn.y,Qi=ke[0]*un+ke[4]*si+ke[12],gr=ke[1]*un+ke[5]*si+ke[13],Hr=ke[2]*un+ke[6]*si+ke[14],xs=ke[3]*un+ke[7]*si+ke[15],Ro=Hr+mt,no=xs+Ut,Eo=Qi+tn,Fo=gr+$t,os=Hr+jt,ws=xs+Pt,io=new Ue((Qi+qe)/no,(gr+rt)/no);io.z=Ro/no,Ft.push(io);const ho=new Ue(Eo/ws,Fo/ws);ho.z=os/ws,Et.push(ho)}$e.push(Ft),Fe.push(Et)}return[$e,Fe]}(w,ee,Y,B);return function(de,_e,Ie){let ke=1/0;Ky(Ie,_e)&&(ke=tl(Ie,_e[0]));for(let $e=0;$e<_e.length;$e++){const Fe=_e[$e],qe=de[$e];for(let rt=0;rt<Fe.length-1;rt++){const mt=Fe[rt],Ut=[mt,Fe[rt+1],qe[rt+1],qe[rt],mt];Af(Ie,Ut)&&(ke=Math.min(ke,tl(Ie,Ut)))}}return ke!==1/0&&ke}(ce[0],ce[1],re)}}function co(u,o){return u.x*o.x+u.y*o.y}function tl(u,o){if(1===u.length){let h=0;const g=o[h++];let w;for(;!w||g.equals(w);)if(w=o[h++],!w)return 1/0;for(;h<o.length;h++){const M=o[h],I=u[0],O=w.sub(g),B=M.sub(g),$=I.sub(g),Y=co(O,O),ee=co(O,B),re=co(B,B),ce=co($,O),de=co($,B),_e=Y*re-ee*ee,Ie=(re*ce-ee*de)/_e,ke=(Y*de-ee*ce)/_e,$e=g.z*(1-Ie-ke)+w.z*Ie+M.z*ke;if(isFinite($e))return $e}return 1/0}{let h=1/0;for(const g of o)h=Math.min(h,g.z);return h}}const Dh=Tr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:$g}=Dh,qf=Tr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Yf}=qf,Zu=Ec.VectorTileFeature.types,Gg=Math.cos(Math.PI/180*37.5),Zg=Math.pow(2,14)/.5;class Op{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(h=>h.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new mn,this.layoutVertexArray2=new cn,this.indexArray=new ns,this.programConfigurations=new el(o.layers,o.zoom),this.segments=new xr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(o,h,g){this.hasPattern=zg("line",this.layers,h);const w=this.layers[0].layout.get("line-sort-key"),M=!w.isConstant(),I=[];for(const{feature:O,id:B,index:$,sourceLayerIndex:Y}of o){const ee=this.layers[0]._featureFilter.needGeometry,re=ju(O,ee);if(!this.layers[0]._featureFilter.filter(new Pe(this.zoom),re,g))continue;const ce=M?w.evaluate(re,{},g):void 0,de={id:B,properties:O.properties,type:O.type,sourceLayerIndex:Y,index:$,geometry:ee?re.geometry:Tl(O),patterns:{},sortKey:ce};I.push(de)}M&&I.sort((O,B)=>O.sortKey-B.sortKey);for(const O of I){const{geometry:B,index:$,sourceLayerIndex:Y}=O;if(this.hasPattern){const ee=Eh("line",this.layers,O,this.zoom,h);this.patternFeatures.push(ee)}else this.addFeature(O,B,$,g,{});h.featureIndex.insert(o[$].feature,B,$,Y,this.index)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}addFeatures(o,h,g){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,Yf)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,$g),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,h,g,w,M){const I=this.layers[0].layout,O=I.get("line-join").evaluate(o,{}),B=I.get("line-cap"),$=I.get("line-miter-limit"),Y=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const ee of h)this.addLine(ee,o,O,B,$,Y);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,M,w)}addLine(o,h,g,w,M,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ke=0;ke<o.length-1;ke++)this.totalDistance+=o[ke].dist(o[ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O="Polygon"===Zu[h.type];let B=o.length;for(;B>=2&&o[B-1].equals(o[B-2]);)B--;let $=0;for(;$<B-1&&o[$].equals(o[$+1]);)$++;if(B<(O?3:2))return;"bevel"===g&&(M=1.05);const Y=this.overscaling<=16?15*eo/(512*this.overscaling):0,ee=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let re,ce,de,_e,Ie;this.e1=this.e2=-1,O&&(re=o[B-2],Ie=o[$].sub(re)._unit()._perp());for(let ke=$;ke<B;ke++){if(de=ke===B-1?O?o[$+1]:void 0:o[ke+1],de&&o[ke].equals(de))continue;Ie&&(_e=Ie),re&&(ce=re),re=o[ke],Ie=de?de.sub(re)._unit()._perp():_e,_e=_e||Ie;let $e=_e.add(Ie);0===$e.x&&0===$e.y||$e._unit();const Fe=_e.x*Ie.x+_e.y*Ie.y,qe=$e.x*Ie.x+$e.y*Ie.y,rt=0!==qe?1/qe:1/0,mt=2*Math.sqrt(2-2*qe),Ut=qe<Gg&&ce&&de,tn=_e.x*Ie.y-_e.y*Ie.x>0;if(Ut&&ke>$){const Pt=re.dist(ce);if(Pt>2*Y){const nn=re.sub(re.sub(ce)._mult(Y/Pt)._round());this.updateDistance(ce,nn),this.addCurrentVertex(nn,_e,0,0,ee),ce=nn}}const $t=ce&&de;let jt=$t?g:O?"butt":w;if($t&&"round"===jt&&(rt<I?jt="miter":rt<=2&&(jt="fakeround")),"miter"===jt&&rt>M&&(jt="bevel"),"bevel"===jt&&(rt>2&&(jt="flipbevel"),rt<M&&(jt="miter")),ce&&this.updateDistance(ce,re),"miter"===jt)$e._mult(rt),this.addCurrentVertex(re,$e,0,0,ee);else if("flipbevel"===jt){if(rt>100)$e=Ie.mult(-1);else{const Pt=rt*_e.add(Ie).mag()/_e.sub(Ie).mag();$e._perp()._mult(Pt*(tn?-1:1))}this.addCurrentVertex(re,$e,0,0,ee),this.addCurrentVertex(re,$e.mult(-1),0,0,ee)}else if("bevel"===jt||"fakeround"===jt){const Pt=-Math.sqrt(rt*rt-1),nn=tn?Pt:0,Ft=tn?0:Pt;if(ce&&this.addCurrentVertex(re,_e,nn,Ft,ee),"fakeround"===jt){const Et=Math.round(180*mt/Math.PI/20);for(let Sn=1;Sn<Et;Sn++){let un=Sn/Et;if(.5!==un){const Qi=un-.5;un+=un*Qi*(un-1)*((1.0904+Fe*(Fe*(3.55645-1.43519*Fe)-3.2452))*Qi*Qi+(.848013+Fe*(.215638*Fe-1.06021)))}const si=Ie.sub(_e)._mult(un)._add(_e)._unit()._mult(tn?-1:1);this.addHalfVertex(re,si.x,si.y,!1,tn,0,ee)}}de&&this.addCurrentVertex(re,Ie,-nn,-Ft,ee)}else if("butt"===jt)this.addCurrentVertex(re,$e,0,0,ee);else if("square"===jt){const Pt=ce?1:-1;this.addCurrentVertex(re,$e,Pt,Pt,ee)}else"round"===jt&&(ce&&(this.addCurrentVertex(re,_e,0,0,ee),this.addCurrentVertex(re,_e,1,1,ee,!0)),de&&(this.addCurrentVertex(re,Ie,-1,-1,ee,!0),this.addCurrentVertex(re,Ie,0,0,ee)));if(Ut&&ke<B-1){const Pt=re.dist(de);if(Pt>2*Y){const nn=re.add(de.sub(re)._mult(Y/Pt)._round());this.updateDistance(re,nn),this.addCurrentVertex(nn,Ie,0,0,ee),re=nn}}}}addCurrentVertex(o,h,g,w,M,I=!1){const O=h.y*w-h.x,B=-h.y-h.x*w;this.addHalfVertex(o,h.x+h.y*g,h.y-h.x*g,I,!1,g,M),this.addHalfVertex(o,O,B,I,!0,-w,M),this.distance>Zg/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,h,g,w,M,I))}addHalfVertex({x:o,y:h},g,w,M,I,O,B){const $=.5*(this.lineClips?this.scaledDistance*(Zg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(M?1:0),(h<<1)+(I?1:0),Math.round(63*g)+128,Math.round(63*w)+128,1+(0===O?0:O<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Y=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Y),B.primitiveLength++),I?this.e2=Y:this.e1=Y}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,h){this.distance+=o.dist(h),this.updateScaledDistance()}}let Kf,Cd;Xt("LineBucket",Op,{omit:["layers","patternFeatures"]});var bs={get paint(){return Cd=Cd||new Ir({"line-opacity":new pn(ze.paint_line["line-opacity"]),"line-color":new pn(ze.paint_line["line-color"]),"line-translate":new Wt(ze.paint_line["line-translate"]),"line-translate-anchor":new Wt(ze.paint_line["line-translate-anchor"]),"line-width":new pn(ze.paint_line["line-width"]),"line-gap-width":new pn(ze.paint_line["line-gap-width"]),"line-offset":new pn(ze.paint_line["line-offset"]),"line-blur":new pn(ze.paint_line["line-blur"]),"line-dasharray":new Kl(ze.paint_line["line-dasharray"]),"line-pattern":new da(ze.paint_line["line-pattern"]),"line-gradient":new eu(ze.paint_line["line-gradient"])})},get layout(){return Kf=Kf||new Ir({"line-cap":new Wt(ze.layout_line["line-cap"]),"line-join":new pn(ze.layout_line["line-join"]),"line-miter-limit":new Wt(ze.layout_line["line-miter-limit"]),"line-round-limit":new Wt(ze.layout_line["line-round-limit"]),"line-sort-key":new pn(ze.layout_line["line-sort-key"])})}};class vi extends pn{possiblyEvaluate(o,h){return h=new Pe(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(o,h)}evaluate(o,h,g,w){return h=Ui({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(o,h,g,w)}}let Tc;class tv extends ts{constructor(o){super(o,bs),this.gradientVersion=0,Tc||(Tc=new vi(bs.paint.properties["line-width"].specification),Tc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if("line-gradient"===o){const h=this.gradientExpression();this.stepInterpolant=!(void 0===h._styleExpression)&&h._styleExpression.expression instanceof hr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,h){super.recalculate(o,h),this.paint._values["line-floorwidth"]=Tc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Op(o)}queryRadius(o){const h=o,g=lu(tr("line-width",this,h),tr("line-gap-width",this,h)),w=tr("line-offset",this,h);return g/2+Math.abs(w)+lo(this.paint.get("line-translate"))}queryIntersectsFeature(o,h,g,w,M,I,O){const B=Uu(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,O),$=O/2*lu(this.paint.get("line-width").evaluate(h,g),this.paint.get("line-gap-width").evaluate(h,g)),Y=this.paint.get("line-offset").evaluate(h,g);return Y&&(w=function(ee,re){const ce=[];for(let de=0;de<ee.length;de++){const _e=ee[de],Ie=[];for(let ke=0;ke<_e.length;ke++){const $e=_e[ke-1],Fe=_e[ke],qe=_e[ke+1],rt=0===ke?new Ue(0,0):Fe.sub($e)._unit()._perp(),mt=ke===_e.length-1?new Ue(0,0):qe.sub(Fe)._unit()._perp(),Ut=rt._add(mt)._unit(),tn=Ut.x*mt.x+Ut.y*mt.y;0!==tn&&Ut._mult(1/tn),Ie.push(Ut._mult(re)._add(Fe))}ce.push(Ie)}return ce}(w,Y*O)),function(ee,re,ce){for(let de=0;de<re.length;de++){const _e=re[de];if(ee.length>=3)for(let Ie=0;Ie<_e.length;Ie++)if(vh(ee,_e[Ie]))return!0;if(Dg(ee,_e,ce))return!0}return!1}(B,w,$)}isTileClipped(){return!0}}function lu(u,o){return o>0?o+2*u:u}const nv=Tr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Sd=Tr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Tr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Qf=Tr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Tr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Xf=Tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Rp=Tr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ed(u,o,h){return u.sections.forEach(g=>{g.text=function(w,M,I){const O=M.layout.get("text-transform").evaluate(I,{});return"uppercase"===O?w=w.toLocaleUpperCase():"lowercase"===O&&(w=w.toLocaleLowerCase()),ue.applyArabicShaping&&(w=ue.applyArabicShaping(w)),w}(g.text,o,h)}),u}Tr([{name:"triangle",components:3,type:"Uint16"}]),Tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Tr([{type:"Float32",name:"offsetX"}]),Tr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Tr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Mh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Ur=24,Td=nr,nl=function(u,o,h,g,w){var M,I,O=8*w-g-1,B=(1<<O)-1,$=B>>1,Y=-7,ee=h?w-1:0,re=h?-1:1,ce=u[o+ee];for(ee+=re,M=ce&(1<<-Y)-1,ce>>=-Y,Y+=O;Y>0;M=256*M+u[o+ee],ee+=re,Y-=8);for(I=M&(1<<-Y)-1,M>>=-Y,Y+=g;Y>0;I=256*I+u[o+ee],ee+=re,Y-=8);if(0===M)M=1-$;else{if(M===B)return I?NaN:1/0*(ce?-1:1);I+=Math.pow(2,g),M-=$}return(ce?-1:1)*I*Math.pow(2,M-g)},Dc=function(u,o,h,g,w,M){var I,O,B,$=8*M-w-1,Y=(1<<$)-1,ee=Y>>1,re=23===w?Math.pow(2,-24)-Math.pow(2,-77):0,ce=g?0:M-1,de=g?1:-1,_e=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(O=isNaN(o)?1:0,I=Y):(I=Math.floor(Math.log(o)/Math.LN2),o*(B=Math.pow(2,-I))<1&&(I--,B*=2),(o+=I+ee>=1?re/B:re*Math.pow(2,1-ee))*B>=2&&(I++,B/=2),I+ee>=Y?(O=0,I=Y):I+ee>=1?(O=(o*B-1)*Math.pow(2,w),I+=ee):(O=o*Math.pow(2,ee-1)*Math.pow(2,w),I=0));w>=8;u[h+ce]=255&O,ce+=de,O/=256,w-=8);for(I=I<<w|O,$+=w;$>0;u[h+ce]=255&I,ce+=de,I/=256,$-=8);u[h+ce-de]|=128*_e};function nr(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}nr.Varint=0,nr.Fixed64=1,nr.Bytes=2,nr.Fixed32=5;var Dd=4294967296,Jf=1/Dd,iv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function cu(u){return u.type===nr.Bytes?u.readVarint()+u.pos:u.pos+1}function Fp(u,o,h){var g=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));h.realloc(g);for(var w=h.pos-1;w>=u;w--)h.buf[w+g]=h.buf[w]}function em(u,o){for(var h=0;h<u.length;h++)o.writeVarint(u[h])}function y0(u,o){for(var h=0;h<u.length;h++)o.writeSVarint(u[h])}function v0(u,o){for(var h=0;h<u.length;h++)o.writeFloat(u[h])}function Wg(u,o){for(var h=0;h<u.length;h++)o.writeDouble(u[h])}function tm(u,o){for(var h=0;h<u.length;h++)o.writeBoolean(u[h])}function Np(u,o){for(var h=0;h<u.length;h++)o.writeFixed32(u[h])}function rv(u,o){for(var h=0;h<u.length;h++)o.writeSFixed32(u[h])}function Wu(u,o){for(var h=0;h<u.length;h++)o.writeFixed64(u[h])}function zp(u,o){for(var h=0;h<u.length;h++)o.writeSFixed64(u[h])}function Ih(u,o){return(u[o]|u[o+1]<<8|u[o+2]<<16)+16777216*u[o+3]}function hu(u,o,h){u[h]=o,u[h+1]=o>>>8,u[h+2]=o>>>16,u[h+3]=o>>>24}function Md(u,o){return(u[o]|u[o+1]<<8|u[o+2]<<16)+(u[o+3]<<24)}nr.prototype={destroy:function(){this.buf=null},readFields:function(u,o,h){for(h=h||this.length;this.pos<h;){var g=this.readVarint(),w=g>>3,M=this.pos;this.type=7&g,u(w,o,this),this.pos===M&&this.skip(g)}return o},readMessage:function(u,o){return this.readFields(u,o,this.readVarint()+this.pos)},readFixed32:function(){var u=Ih(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=Md(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=Ih(this.buf,this.pos)+Ih(this.buf,this.pos+4)*Dd;return this.pos+=8,u},readSFixed64:function(){var u=Ih(this.buf,this.pos)+Md(this.buf,this.pos+4)*Dd;return this.pos+=8,u},readFloat:function(){var u=nl(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=nl(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var o,h,g=this.buf;return o=127&(h=g[this.pos++]),h<128?o:(o|=(127&(h=g[this.pos++]))<<7,h<128?o:(o|=(127&(h=g[this.pos++]))<<14,h<128?o:(o|=(127&(h=g[this.pos++]))<<21,h<128?o:function(w,M,I){var O,B,$=I.buf;if(O=(112&(B=$[I.pos++]))>>4,B<128||(O|=(127&(B=$[I.pos++]))<<3,B<128)||(O|=(127&(B=$[I.pos++]))<<10,B<128)||(O|=(127&(B=$[I.pos++]))<<17,B<128)||(O|=(127&(B=$[I.pos++]))<<24,B<128)||(O|=(1&(B=$[I.pos++]))<<31,B<128))return function uu(u,o,h){return h?4294967296*o+(u>>>0):4294967296*(o>>>0)+(u>>>0)}(w,O,M);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(h=g[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var u=this.readVarint()+this.pos,o=this.pos;return this.pos=u,u-o>=12&&iv?iv.decode(this.buf.subarray(o,u)):function(h,g,w){for(var M="",I=g;I<w;){var O,B,$,Y=h[I],ee=null,re=Y>239?4:Y>223?3:Y>191?2:1;if(I+re>w)break;1===re?Y<128&&(ee=Y):2===re?128==(192&(O=h[I+1]))&&(ee=(31&Y)<<6|63&O)<=127&&(ee=null):3===re?(B=h[I+2],128==(192&(O=h[I+1]))&&128==(192&B)&&((ee=(15&Y)<<12|(63&O)<<6|63&B)<=2047||ee>=55296&&ee<=57343)&&(ee=null)):4===re&&(B=h[I+2],$=h[I+3],128==(192&(O=h[I+1]))&&128==(192&B)&&128==(192&$)&&((ee=(15&Y)<<18|(63&O)<<12|(63&B)<<6|63&$)<=65535||ee>=1114112)&&(ee=null)),null===ee?(ee=65533,re=1):ee>65535&&(ee-=65536,M+=String.fromCharCode(ee>>>10&1023|55296),ee=56320|1023&ee),M+=String.fromCharCode(ee),I+=re}return M}(this.buf,o,u)},readBytes:function(){var u=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,u);return this.pos=u,o},readPackedVarint:function(u,o){if(this.type!==nr.Bytes)return u.push(this.readVarint(o));var h=cu(this);for(u=u||[];this.pos<h;)u.push(this.readVarint(o));return u},readPackedSVarint:function(u){if(this.type!==nr.Bytes)return u.push(this.readSVarint());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==nr.Bytes)return u.push(this.readBoolean());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==nr.Bytes)return u.push(this.readFloat());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==nr.Bytes)return u.push(this.readDouble());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==nr.Bytes)return u.push(this.readFixed32());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==nr.Bytes)return u.push(this.readSFixed32());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==nr.Bytes)return u.push(this.readFixed64());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==nr.Bytes)return u.push(this.readSFixed64());var o=cu(this);for(u=u||[];this.pos<o;)u.push(this.readSFixed64());return u},skip:function(u){var o=7&u;if(o===nr.Varint)for(;this.buf[this.pos++]>127;);else if(o===nr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===nr.Fixed32)this.pos+=4;else{if(o!==nr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(u,o){this.writeVarint(u<<3|o)},realloc:function(u){for(var o=this.length||16;o<this.pos+u;)o*=2;if(o!==this.length){var h=new Uint8Array(o);h.set(this.buf),this.buf=h,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),hu(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),hu(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),hu(this.buf,-1&u,this.pos),hu(this.buf,Math.floor(u*Jf),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),hu(this.buf,-1&u,this.pos),hu(this.buf,Math.floor(u*Jf),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(o,h){var g,w,M,O;if(o>=0?(g=o%4294967296|0,w=o/4294967296|0):(w=~(-o/4294967296),4294967295^(g=~(-o%4294967296))?g=g+1|0:(g=0,w=w+1|0)),o>=0x10000000000000000||o<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),M=g,(O=h).buf[O.pos++]=127&M|128,M>>>=7,O.buf[O.pos++]=127&M|128,M>>>=7,O.buf[O.pos++]=127&M|128,M>>>=7,O.buf[O.pos++]=127&M|128,O.buf[O.pos]=127&(M>>>=7),function(M,I){var O=(7&M)<<4;I.buf[I.pos++]|=O|((M>>>=3)?128:0),M&&(I.buf[I.pos++]=127&M|((M>>>=7)?128:0),M&&(I.buf[I.pos++]=127&M|((M>>>=7)?128:0),M&&(I.buf[I.pos++]=127&M|((M>>>=7)?128:0),M&&(I.buf[I.pos++]=127&M|((M>>>=7)?128:0),M&&(I.buf[I.pos++]=127&M)))))}(w,h)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(Boolean(u))},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var o=this.pos;this.pos=function(g,w,M){for(var I,O,B=0;B<w.length;B++){if((I=w.charCodeAt(B))>55295&&I<57344){if(!O){I>56319||B+1===w.length?(g[M++]=239,g[M++]=191,g[M++]=189):O=I;continue}if(I<56320){g[M++]=239,g[M++]=191,g[M++]=189,O=I;continue}I=O-55296<<10|I-56320|65536,O=null}else O&&(g[M++]=239,g[M++]=191,g[M++]=189,O=null);I<128?g[M++]=I:(I<2048?g[M++]=I>>6|192:(I<65536?g[M++]=I>>12|224:(g[M++]=I>>18|240,g[M++]=I>>12&63|128),g[M++]=I>>6&63|128),g[M++]=63&I|128)}return M}(this.buf,u,this.pos);var h=this.pos-o;h>=128&&Fp(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeFloat:function(u){this.realloc(4),Dc(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),Dc(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var o=u.length;this.writeVarint(o),this.realloc(o);for(var h=0;h<o;h++)this.buf[this.pos++]=u[h]},writeRawMessage:function(u,o){this.pos++;var h=this.pos;u(o,this);var g=this.pos-h;g>=128&&Fp(h,g,this),this.pos=h-1,this.writeVarint(g),this.pos+=g},writeMessage:function(u,o,h){this.writeTag(u,nr.Bytes),this.writeRawMessage(o,h)},writePackedVarint:function(u,o){o.length&&this.writeMessage(u,em,o)},writePackedSVarint:function(u,o){o.length&&this.writeMessage(u,y0,o)},writePackedBoolean:function(u,o){o.length&&this.writeMessage(u,tm,o)},writePackedFloat:function(u,o){o.length&&this.writeMessage(u,v0,o)},writePackedDouble:function(u,o){o.length&&this.writeMessage(u,Wg,o)},writePackedFixed32:function(u,o){o.length&&this.writeMessage(u,Np,o)},writePackedSFixed32:function(u,o){o.length&&this.writeMessage(u,rv,o)},writePackedFixed64:function(u,o){o.length&&this.writeMessage(u,Wu,o)},writePackedSFixed64:function(u,o){o.length&&this.writeMessage(u,zp,o)},writeBytesField:function(u,o){this.writeTag(u,nr.Bytes),this.writeBytes(o)},writeFixed32Field:function(u,o){this.writeTag(u,nr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(u,o){this.writeTag(u,nr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(u,o){this.writeTag(u,nr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(u,o){this.writeTag(u,nr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(u,o){this.writeTag(u,nr.Varint),this.writeVarint(o)},writeSVarintField:function(u,o){this.writeTag(u,nr.Varint),this.writeSVarint(o)},writeStringField:function(u,o){this.writeTag(u,nr.Bytes),this.writeString(o)},writeFloatField:function(u,o){this.writeTag(u,nr.Fixed32),this.writeFloat(o)},writeDoubleField:function(u,o){this.writeTag(u,nr.Fixed64),this.writeDouble(o)},writeBooleanField:function(u,o){this.writeVarintField(u,Boolean(o))}};var nm=pe(Td);const Lr=3;function Ph(u,o,h){1===u&&h.readMessage(qu,o)}function qu(u,o,h){if(3===u){const{id:g,bitmap:w,width:M,height:I,left:O,top:B,advance:$}=h.readMessage(Bp,{});o.push({id:g,bitmap:new wc({width:M+2*Lr,height:I+2*Lr},w),metrics:{width:M,height:I,left:O,top:B,advance:$}})}}function Bp(u,o,h){1===u?o.id=h.readVarint():2===u?o.bitmap=h.readBytes():3===u?o.width=h.readVarint():4===u?o.height=h.readVarint():5===u?o.left=h.readSVarint():6===u?o.top=h.readSVarint():7===u&&(o.advance=h.readVarint())}const Id=Lr;function Vp(u){let o=0,h=0;for(const I of u)o+=I.w*I.h,h=Math.max(h,I.w);u.sort((I,O)=>O.h-I.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),h),h:1/0}];let w=0,M=0;for(const I of u)for(let O=g.length-1;O>=0;O--){const B=g[O];if(!(I.w>B.w||I.h>B.h)){if(I.x=B.x,I.y=B.y,M=Math.max(M,I.y+I.h),w=Math.max(w,I.x+I.w),I.w===B.w&&I.h===B.h){const $=g.pop();O<g.length&&(g[O]=$)}else I.h===B.h?(B.x+=I.w,B.w-=I.w):I.w===B.w?(B.y+=I.h,B.h-=I.h):(g.push({x:B.x+I.w,y:B.y,w:B.w-I.w,h:I.h}),B.y+=I.h,B.h-=I.h);break}}return{w,h:M,fill:o/(w*M)||0}}const So=1;class jp{constructor(o,{pixelRatio:h,version:g,stretchX:w,stretchY:M,content:I}){this.paddedRect=o,this.pixelRatio=h,this.stretchX=w,this.stretchY=M,this.content=I,this.version=g}get tl(){return[this.paddedRect.x+So,this.paddedRect.y+So]}get br(){return[this.paddedRect.x+this.paddedRect.w-So,this.paddedRect.y+this.paddedRect.h-So]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*So)/this.pixelRatio,(this.paddedRect.h-2*So)/this.pixelRatio]}}class qg{constructor(o,h){const g={},w={};this.haveRenderCallbacks=[];const M=[];this.addImages(o,g,M),this.addImages(h,w,M);const{w:I,h:O}=Vp(M),B=new rs({width:I||1,height:O||1});for(const $ in o){const Y=o[$],ee=g[$].paddedRect;rs.copy(Y.data,B,{x:0,y:0},{x:ee.x+So,y:ee.y+So},Y.data)}for(const $ in h){const Y=h[$],ee=w[$].paddedRect,re=ee.x+So,ce=ee.y+So,de=Y.data.width,_e=Y.data.height;rs.copy(Y.data,B,{x:0,y:0},{x:re,y:ce},Y.data),rs.copy(Y.data,B,{x:0,y:_e-1},{x:re,y:ce-1},{width:de,height:1}),rs.copy(Y.data,B,{x:0,y:0},{x:re,y:ce+_e},{width:de,height:1}),rs.copy(Y.data,B,{x:de-1,y:0},{x:re-1,y:ce},{width:1,height:_e}),rs.copy(Y.data,B,{x:0,y:0},{x:re+de,y:ce},{width:1,height:_e})}this.image=B,this.iconPositions=g,this.patternPositions=w}addImages(o,h,g){for(const w in o){const M=o[w],I={x:0,y:0,w:M.data.width+2*So,h:M.data.height+2*So};g.push(I),h[w]=new jp(I,M),M.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(o,h){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in o.updatedImages)this.patchUpdatedImage(this.iconPositions[g],o.getImage(g),h),this.patchUpdatedImage(this.patternPositions[g],o.getImage(g),h)}patchUpdatedImage(o,h,g){if(!o||!h||o.version===h.version)return;o.version=h.version;const[w,M]=o.tl;g.update(h.data,void 0,{x:w,y:M})}}var rc;Xt("ImagePosition",jp),Xt("ImageAtlas",qg),y.ai=void 0,(rc=y.ai||(y.ai={}))[rc.none=0]="none",rc[rc.horizontal=1]="horizontal",rc[rc.vertical=2]="vertical",rc[rc.horizontalOnly=3]="horizontalOnly";const Up=-17;class Ah{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,h){const g=new Ah;return g.scale=o||1,g.fontStack=h,g}static forImage(o){const h=new Ah;return h.imageName=o,h}}class Ys{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,h){const g=new Ys;for(let w=0;w<o.sections.length;w++){const M=o.sections[w];M.image?g.addImageSection(M):g.addTextSection(M,h)}return g}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let h="";for(let g=0;g<o.length;g++){const w=o.charCodeAt(g+1)||null,M=o.charCodeAt(g-1)||null;h+=w&&bl(w)&&!Mh[o[g+1]]||M&&bl(M)&&!Mh[o[g-1]]||!Mh[o[g]]?o[g]:Mh[o[g]]}return h}(this.text)}trim(){let o=0;for(let g=0;g<this.text.length&&du[this.text.charCodeAt(g)];g++)o++;let h=this.text.length;for(let g=this.text.length-1;g>=0&&g>=o&&du[this.text.charCodeAt(g)];g--)h--;this.text=this.text.substring(o,h),this.sectionIndex=this.sectionIndex.slice(o,h)}substring(o,h){const g=new Ys;return g.text=this.text.substring(o,h),g.sectionIndex=this.sectionIndex.slice(o,h),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,h)=>Math.max(o,this.sections[h].scale),0)}addTextSection(o,h){this.text+=o.text,this.sections.push(Ah.forText(o.scale,o.fontStack||h));const g=this.sections.length-1;for(let w=0;w<o.text.length;++w)this.sectionIndex.push(g)}addImageSection(o){const h=o.image?o.image.name:"";if(0===h.length)return void Di("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Ah.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Di("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lh(u,o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de,_e){const Ie=Ys.fromFeature(u,w);let ke;ee===y.ai.vertical&&Ie.verticalizePunctuation();const{processBidirectionalText:$e,processStyledBidirectionalText:Fe}=ue;if($e&&1===Ie.sections.length){ke=[];const mt=$e(Ie.toString(),rl(Ie,$,M,o,g,ce,de));for(const Ut of mt){const tn=new Ys;tn.text=Ut,tn.sections=Ie.sections;for(let $t=0;$t<Ut.length;$t++)tn.sectionIndex.push(0);ke.push(tn)}}else if(Fe){ke=[];const mt=Fe(Ie.text,Ie.sectionIndex,rl(Ie,$,M,o,g,ce,de));for(const Ut of mt){const tn=new Ys;tn.text=Ut[0],tn.sectionIndex=Ut[1],tn.sections=Ie.sections,ke.push(tn)}}else ke=function(mt,Ut){const tn=[],$t=mt.text;let jt=0;for(const Pt of Ut)tn.push(mt.substring(jt,Pt)),jt=Pt;return jt<$t.length&&tn.push(mt.substring(jt,$t.length)),tn}(Ie,rl(Ie,$,M,o,g,ce,de));const qe=[],rt={positionedLines:qe,text:Ie.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return function(mt,Ut,tn,$t,jt,Pt,nn,Ft,Et,Sn,un,si){let Qi=0,gr=Up,Hr=0,xs=0;const Ro="right"===Ft?1:"left"===Ft?0:.5;let no=0;for(const io of jt){io.trim();const ho=io.getMaxScale(),Zo=(ho-1)*Ur,ss={positionedGlyphs:[],lineOffset:0};mt.positionedLines[no]=ss;const po=ss.positionedGlyphs;let as=0;if(!io.length()){gr+=Pt,++no;continue}for(let fo=0;fo<io.length();fo++){const bi=io.getSection(fo),lr=io.getSectionIndex(fo),Wo=io.getCharCode(fo);let mo=0,Ll=null,Ba=null,sl=null,Pc=Ur;const al=!(Et===y.ai.horizontal||!un&&!Qc(Wo)||un&&(du[Wo]||(Eo=Wo,Rt.Arabic(Eo)||Rt["Arabic Supplement"](Eo)||Rt["Arabic Extended-A"](Eo)||Rt["Arabic Presentation Forms-A"](Eo)||Rt["Arabic Presentation Forms-B"](Eo))));if(bi.imageName){const Ps=$t[bi.imageName];if(!Ps)continue;sl=bi.imageName,mt.iconsInText=mt.iconsInText||!0,Ba=Ps.paddedRect;const As=Ps.displaySize;bi.scale=bi.scale*Ur/si,Ll={width:As[0],height:As[1],left:So,top:-Id,advance:al?As[1]:As[0]},mo=Zo+(Ur-As[1]*bi.scale),Pc=Ll.advance;const Ac=al?As[0]*bi.scale-Ur*ho:As[1]*bi.scale-Ur*ho;Ac>0&&Ac>as&&(as=Ac)}else{const Ps=tn[bi.fontStack],As=Ps&&Ps[Wo];if(As&&As.rect)Ba=As.rect,Ll=As.metrics;else{const Ac=Ut[bi.fontStack],th=Ac&&Ac[Wo];if(!th)continue;Ll=th.metrics}mo=(ho-bi.scale)*Ur}al?(mt.verticalizable=!0,po.push({glyph:Wo,imageName:sl,x:Qi,y:gr+mo,vertical:al,scale:bi.scale,fontStack:bi.fontStack,sectionIndex:lr,metrics:Ll,rect:Ba}),Qi+=Pc*bi.scale+Sn):(po.push({glyph:Wo,imageName:sl,x:Qi,y:gr+mo,vertical:al,scale:bi.scale,fontStack:bi.fontStack,sectionIndex:lr,metrics:Ll,rect:Ba}),Qi+=Ll.advance*bi.scale+Sn)}0!==po.length&&(Hr=Math.max(Qi-Sn,Hr),Oh(po,0,po.length-1,Ro,as)),Qi=0;const Is=Pt*ho+as;ss.lineOffset=Math.max(as,Zo),gr+=Is,xs=Math.max(Is,xs),++no}var Eo;const Fo=gr-Up,{horizontalAlign:os,verticalAlign:ws}=Ad(nn);(function(io,ho,Zo,ss,po,as,Is,fo,bi){const lr=(ho-Zo)*po;let Wo=0;Wo=as!==Is?-fo*ss-Up:(-ss*bi+.5)*Is;for(const mo of io)for(const Ll of mo.positionedGlyphs)Ll.x+=lr,Ll.y+=Wo})(mt.positionedLines,Ro,os,ws,Hr,xs,Pt,Fo,jt.length),mt.top+=-ws*Fo,mt.bottom=mt.top+Fo,mt.left+=-os*Hr,mt.right=mt.left+Hr}(rt,o,h,g,ke,I,O,B,ee,$,re,_e),!function(mt){for(const Ut of mt)if(0!==Ut.positionedGlyphs.length)return!1;return!0}(qe)&&rt}const du={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Hp(u,o,h,g,w,M){if(o.imageName){const I=g[o.imageName];return I?I.displaySize[0]*o.scale*Ur/M+w:0}{const I=h[o.fontStack],O=I&&I[u];return O?O.metrics.advance*o.scale+w:0}}function im(u,o,h,g){const w=Math.pow(u-o,2);return g?u<o?w/2:2*w:w+Math.abs(h)*h}function kh(u,o,h){let g=0;return 10===u&&(g-=1e4),h&&(g+=150),40!==u&&65288!==u||(g+=50),41!==o&&65289!==o||(g+=50),g}function il(u,o,h,g,w,M){let I=null,O=im(o,h,w,M);for(const B of g){const $=im(o-B.x,h,w,M)+B.badness;$<=O&&(I=B,O=$)}return{index:u,x:o,priorBreak:I,badness:O}}function Pd(u){return u?Pd(u.priorBreak).concat(u.index):[]}function rl(u,o,h,g,w,M,I){if("point"!==M)return[];if(!u)return[];const O=[],B=function(re,ce,de,_e,Ie,ke){let $e=0;for(let Fe=0;Fe<re.length();Fe++){const qe=re.getSection(Fe);$e+=Hp(re.getCharCode(Fe),qe,_e,Ie,ce,ke)}return $e/Math.max(1,Math.ceil($e/de))}(u,o,h,g,w,I),$=u.text.indexOf("\u200b")>=0;let Y=0;for(let re=0;re<u.length();re++){const ce=u.getSection(re),de=u.getCharCode(re);if(du[de]||(Y+=Hp(de,ce,g,w,o,I)),re<u.length()-1){const _e=!((ee=de)<11904||!(Rt["Bopomofo Extended"](ee)||Rt.Bopomofo(ee)||Rt["CJK Compatibility Forms"](ee)||Rt["CJK Compatibility Ideographs"](ee)||Rt["CJK Compatibility"](ee)||Rt["CJK Radicals Supplement"](ee)||Rt["CJK Strokes"](ee)||Rt["CJK Symbols and Punctuation"](ee)||Rt["CJK Unified Ideographs Extension A"](ee)||Rt["CJK Unified Ideographs"](ee)||Rt["Enclosed CJK Letters and Months"](ee)||Rt["Halfwidth and Fullwidth Forms"](ee)||Rt.Hiragana(ee)||Rt["Ideographic Description Characters"](ee)||Rt["Kangxi Radicals"](ee)||Rt["Katakana Phonetic Extensions"](ee)||Rt.Katakana(ee)||Rt["Vertical Forms"](ee)||Rt["Yi Radicals"](ee)||Rt["Yi Syllables"](ee)));(Yg[de]||_e||ce.imageName)&&O.push(il(re+1,Y,B,O,kh(de,u.getCharCode(re+1),_e&&$),!1))}}var ee;return Pd(il(u.length(),Y,B,O,0,!0))}function Ad(u){let o=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:o,verticalAlign:h}}function Oh(u,o,h,g,w){if(!g&&!w)return;const M=u[h],I=(u[h].x+M.metrics.advance*M.scale)*g;for(let O=o;O<=h;O++)u[O].x-=I,u[O].y+=w}function rm(u,o,h){const{horizontalAlign:g,verticalAlign:w}=Ad(h),M=o[0]-u.displaySize[0]*g,I=o[1]-u.displaySize[1]*w;return{image:u,top:I,bottom:I+u.displaySize[1],left:M,right:M+u.displaySize[0]}}function $p(u,o,h,g,w,M){const I=u.image;let O;if(I.content){const Ie=I.content,ke=I.pixelRatio||1;O=[Ie[0]/ke,Ie[1]/ke,I.displaySize[0]-Ie[2]/ke,I.displaySize[1]-Ie[3]/ke]}const B=o.left*M,$=o.right*M;let Y,ee,re,ce;"width"===h||"both"===h?(ce=w[0]+B-g[3],ee=w[0]+$+g[1]):(ce=w[0]+(B+$-I.displaySize[0])/2,ee=ce+I.displaySize[0]);const de=o.top*M,_e=o.bottom*M;return"height"===h||"both"===h?(Y=w[1]+de-g[0],re=w[1]+_e+g[2]):(Y=w[1]+(de+_e-I.displaySize[1])/2,re=Y+I.displaySize[1]),{image:I,top:Y,right:ee,bottom:re,left:ce,collisionPadding:O}}const Rh=255,Ml=128,ma=Rh*Ml;function Kg(u,o){const{expression:h}=o;if("constant"===h.kind)return{kind:"constant",layoutSize:h.evaluate(new Pe(u+1))};if("source"===h.kind)return{kind:"source"};{const{zoomStops:g,interpolationType:w}=h;let M=0;for(;M<g.length&&g[M]<=u;)M++;M=Math.max(0,M-1);let I=M;for(;I<g.length&&g[I]<u+1;)I++;I=Math.min(g.length-1,I);const O=g[M],B=g[I];return"composite"===h.kind?{kind:"composite",minZoom:O,maxZoom:B,interpolationType:w}:{kind:"camera",minZoom:O,maxZoom:B,minSize:h.evaluate(new Pe(O)),maxSize:h.evaluate(new Pe(B)),interpolationType:w}}}function Ld(u,o,h){let g="never";const w=u.get(o);return w?g=w:u.get(h)&&(g="always"),g}const Gp=Ec.VectorTileFeature.types,ov=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fh(u,o,h,g,w,M,I,O,B,$,Y,ee,re){const ce=O?Math.min(ma,Math.round(O[0])):0,de=O?Math.min(ma,Math.round(O[1])):0;u.emplaceBack(o,h,Math.round(32*g),Math.round(32*w),M,I,(ce<<1)+(B?1:0),de,16*$,16*Y,256*ee,256*re)}function Nh(u,o,h){u.emplaceBack(o.x,o.y,h),u.emplaceBack(o.x,o.y,h),u.emplaceBack(o.x,o.y,h),u.emplaceBack(o.x,o.y,h)}function Yu(u){for(const o of u.sections)if(Xc(o.text))return!0;return!1}class kd{constructor(o){this.layoutVertexArray=new A,this.indexArray=new ns,this.programConfigurations=o,this.segments=new xr,this.dynamicLayoutVertexArray=new ri,this.opacityVertexArray=new An,this.hasVisibleVertices=!1,this.placedSymbolArray=new je}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(o,h,g,w){this.isEmpty()||(g&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,nv.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,Sd.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,ov,!0),this.opacityVertexBuffer.itemSize=1),(g||w)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xt("SymbolBuffers",kd);class Od{constructor(o,h,g){this.layoutVertexArray=new o,this.layoutAttributes=h,this.indexArray=new g,this.segments=new xr,this.collisionVertexArray=new $i}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,Qf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xt("CollisionBuffers",Od);class zh{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(I=>I.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ws([]),this.placementViewportMatrix=Ws([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Kg(this.zoom,h["text-size"]),this.iconSizeData=Kg(this.zoom,h["icon-size"]);const g=this.layers[0].layout,w=g.get("symbol-sort-key"),M=g.get("symbol-z-order");this.canOverlap="never"!==Ld(g,"text-overlap","text-allow-overlap")||"never"!==Ld(g,"icon-overlap","icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==M&&!w.isConstant(),this.sortFeaturesByY=("viewport-y"===M||"auto"===M&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===g.get("symbol-placement")&&(this.writingModes=g.get("text-writing-mode").map(I=>y.ai[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=o.sourceID}createArrays(){this.text=new kd(new el(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new kd(new el(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new Ze,this.lineVertexArray=new st,this.symbolInstances=new Se,this.textAnchorOffsets=new pt}calculateGlyphDependencies(o,h,g,w,M){for(let I=0;I<o.length;I++)if(h[o.charCodeAt(I)]=!0,(g||w)&&M){const O=Mh[o.charAt(I)];O&&(h[O.charCodeAt(0)]=!0)}}populate(o,h,g){const w=this.layers[0],M=w.layout,I=M.get("text-font"),O=M.get("text-field"),B=M.get("icon-image"),$=("constant"!==O.value.kind||O.value.value instanceof te&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&("constant"!==I.value.kind||I.value.value.length>0),Y="constant"!==B.value.kind||!!B.value.value||Object.keys(B.parameters).length>0,ee=M.get("symbol-sort-key");if(this.features=[],!$&&!Y)return;const re=h.iconDependencies,ce=h.glyphDependencies,de=h.availableImages,_e=new Pe(this.zoom);for(const{feature:Ie,id:ke,index:$e,sourceLayerIndex:Fe}of o){const qe=w._featureFilter.needGeometry,rt=ju(Ie,qe);if(!w._featureFilter.filter(_e,rt,g))continue;let mt,Ut;if(qe||(rt.geometry=Tl(Ie)),$){const $t=w.getValueAndResolveTokens("text-field",rt,g,de),jt=te.factory($t);Yu(jt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===U()||this.hasRTLText&&ue.isParsed())&&(mt=Ed(jt,w,rt))}if(Y){const $t=w.getValueAndResolveTokens("icon-image",rt,g,de);Ut=$t instanceof Ne?$t:Ne.fromString($t)}if(!mt&&!Ut)continue;const tn=this.sortFeaturesByKey?ee.evaluate(rt,{},g):void 0;if(this.features.push({id:ke,text:mt,icon:Ut,index:$e,sourceLayerIndex:Fe,geometry:rt.geometry,properties:Ie.properties,type:Gp[Ie.type],sortKey:tn}),Ut&&(re[Ut.name]=!0),mt){const $t=I.evaluate(rt,{},g).join(","),jt="viewport"!==M.get("text-rotation-alignment")&&"point"!==M.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(y.ai.vertical)>=0;for(const Pt of mt.sections)if(Pt.image)re[Pt.image.name]=!0;else{const nn=Ra(mt.toString()),Ft=Pt.fontStack||$t,Et=ce[Ft]=ce[Ft]||{};this.calculateGlyphDependencies(Pt.text,Et,jt,this.allowVerticalPlacement,nn)}}}"line"===M.get("symbol-placement")&&(this.features=function(Ie){const ke={},$e={},Fe=[];let qe=0;function rt($t){Fe.push(Ie[$t]),qe++}function mt($t,jt,Pt){const nn=$e[$t];return delete $e[$t],$e[jt]=nn,Fe[nn].geometry[0].pop(),Fe[nn].geometry[0]=Fe[nn].geometry[0].concat(Pt[0]),nn}function Ut($t,jt,Pt){const nn=ke[jt];return delete ke[jt],ke[$t]=nn,Fe[nn].geometry[0].shift(),Fe[nn].geometry[0]=Pt[0].concat(Fe[nn].geometry[0]),nn}function tn($t,jt,Pt){const nn=Pt?jt[0][jt[0].length-1]:jt[0][0];return`${$t}:${nn.x}:${nn.y}`}for(let $t=0;$t<Ie.length;$t++){const jt=Ie[$t],Pt=jt.geometry,nn=jt.text?jt.text.toString():null;if(!nn){rt($t);continue}const Ft=tn(nn,Pt),Et=tn(nn,Pt,!0);if(Ft in $e&&Et in ke&&$e[Ft]!==ke[Et]){const Sn=Ut(Ft,Et,Pt),un=mt(Ft,Et,Fe[Sn].geometry);delete ke[Ft],delete $e[Et],$e[tn(nn,Fe[un].geometry,!0)]=un,Fe[Sn].geometry=null}else Ft in $e?mt(Ft,Et,Pt):Et in ke?Ut(Ft,Et,Pt):(rt($t),ke[Ft]=qe-1,$e[Et]=qe-1)}return Fe.filter($t=>$t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ie,ke)=>Ie.sortKey-ke.sortKey)}update(o,h,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,h,this.layers,g),this.icon.programConfigurations.updatePaintArrays(o,h,this.layers,g))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,h){const g=this.lineVertexArray.length;if(void 0!==o.segment){let w=o.dist(h[o.segment+1]),M=o.dist(h[o.segment]);const I={};for(let O=o.segment+1;O<h.length;O++)I[O]={x:h[O].x,y:h[O].y,tileUnitDistanceFromAnchor:w},O<h.length-1&&(w+=h[O+1].dist(h[O]));for(let O=o.segment||0;O>=0;O--)I[O]={x:h[O].x,y:h[O].y,tileUnitDistanceFromAnchor:M},O>0&&(M+=h[O-1].dist(h[O]));for(let O=0;O<h.length;O++){const B=I[O];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(o,h,g,w,M,I,O,B,$,Y,ee,re){const ce=o.indexArray,de=o.layoutVertexArray,_e=o.segments.prepareSegment(4*h.length,de,ce,this.canOverlap?I.sortKey:void 0),Ie=this.glyphOffsetArray.length,ke=_e.vertexLength,$e=this.allowVerticalPlacement&&O===y.ai.vertical?Math.PI/2:0,Fe=I.text&&I.text.sections;for(let qe=0;qe<h.length;qe++){const{tl:rt,tr:mt,bl:Ut,br:tn,tex:$t,pixelOffsetTL:jt,pixelOffsetBR:Pt,minFontScaleX:nn,minFontScaleY:Ft,glyphOffset:Et,isSDF:Sn,sectionIndex:un}=h[qe],si=_e.vertexLength,Qi=Et[1];Fh(de,B.x,B.y,rt.x,Qi+rt.y,$t.x,$t.y,g,Sn,jt.x,jt.y,nn,Ft),Fh(de,B.x,B.y,mt.x,Qi+mt.y,$t.x+$t.w,$t.y,g,Sn,Pt.x,jt.y,nn,Ft),Fh(de,B.x,B.y,Ut.x,Qi+Ut.y,$t.x,$t.y+$t.h,g,Sn,jt.x,Pt.y,nn,Ft),Fh(de,B.x,B.y,tn.x,Qi+tn.y,$t.x+$t.w,$t.y+$t.h,g,Sn,Pt.x,Pt.y,nn,Ft),Nh(o.dynamicLayoutVertexArray,B,$e),ce.emplaceBack(si,si+1,si+2),ce.emplaceBack(si+1,si+2,si+3),_e.vertexLength+=4,_e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),qe!==h.length-1&&un===h[qe+1].sectionIndex||o.programConfigurations.populatePaintArrays(de.length,I,I.index,{},re,Fe&&Fe[un])}o.placedSymbolArray.emplaceBack(B.x,B.y,Ie,this.glyphOffsetArray.length-Ie,ke,$,Y,B.segment,g?g[0]:0,g?g[1]:0,w[0],w[1],O,0,!1,0,ee)}_addCollisionDebugVertex(o,h,g,w,M,I){return h.emplaceBack(0,0),o.emplaceBack(g.x,g.y,w,M,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(o,h,g,w,M,I,O){const B=M.segments.prepareSegment(4,M.layoutVertexArray,M.indexArray),$=B.vertexLength,Y=M.layoutVertexArray,ee=M.collisionVertexArray,re=O.anchorX,ce=O.anchorY;this._addCollisionDebugVertex(Y,ee,I,re,ce,new Ue(o,h)),this._addCollisionDebugVertex(Y,ee,I,re,ce,new Ue(g,h)),this._addCollisionDebugVertex(Y,ee,I,re,ce,new Ue(g,w)),this._addCollisionDebugVertex(Y,ee,I,re,ce,new Ue(o,w)),B.vertexLength+=4;const de=M.indexArray;de.emplaceBack($,$+1),de.emplaceBack($+1,$+2),de.emplaceBack($+2,$+3),de.emplaceBack($+3,$),B.primitiveLength+=4}addDebugCollisionBoxes(o,h,g,w){for(let M=o;M<h;M++){const I=this.collisionBoxArray.get(M);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,w?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Od(Fr,Xf.members,Qr),this.iconCollisionBox=new Od(Fr,Xf.members,Qr);for(let o=0;o<this.symbolInstances.length;o++){const h=this.symbolInstances.get(o);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(o,h,g,w,M,I,O,B,$){const Y={};for(let ee=h;ee<g;ee++){const re=o.get(ee);Y.textBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},Y.textFeatureIndex=re.featureIndex;break}for(let ee=w;ee<M;ee++){const re=o.get(ee);Y.verticalTextBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},Y.verticalTextFeatureIndex=re.featureIndex;break}for(let ee=I;ee<O;ee++){const re=o.get(ee);Y.iconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},Y.iconFeatureIndex=re.featureIndex;break}for(let ee=B;ee<$;ee++){const re=o.get(ee);Y.verticalIconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},Y.verticalIconFeatureIndex=re.featureIndex;break}return Y}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const g=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,h){const g=o.placedSymbolArray.get(h),w=g.vertexStartIndex+4*g.numGlyphs;for(let M=g.vertexStartIndex;M<w;M+=4)o.indexArray.emplaceBack(M,M+1,M+2),o.indexArray.emplaceBack(M+1,M+2,M+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const h=Math.sin(o),g=Math.cos(o),w=[],M=[],I=[];for(let O=0;O<this.symbolInstances.length;++O){I.push(O);const B=this.symbolInstances.get(O);w.push(0|Math.round(h*B.anchorX+g*B.anchorY)),M.push(B.featureIndex)}return I.sort((O,B)=>w[O]-w[B]||M[B]-M[O]),I}addToSortKeyRanges(o,h){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===h?g.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const g=this.symbolInstances.get(h);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((w,M,I)=>{w>=0&&I.indexOf(w)===M&&this.addIndicesForPlacedSymbol(this.text,w)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Qg,om;Xt("SymbolBucket",zh,{omit:["layers","collisionBoxArray","features","compareText"]}),zh.MAX_GLYPHS=65535,zh.addDynamicAttributes=Nh;var pu={get paint(){return om=om||new Ir({"icon-opacity":new pn(ze.paint_symbol["icon-opacity"]),"icon-color":new pn(ze.paint_symbol["icon-color"]),"icon-halo-color":new pn(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new pn(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pn(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Wt(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wt(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new pn(ze.paint_symbol["text-opacity"]),"text-color":new pn(ze.paint_symbol["text-color"],{runtimeType:ei,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new pn(ze.paint_symbol["text-halo-color"]),"text-halo-width":new pn(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new pn(ze.paint_symbol["text-halo-blur"]),"text-translate":new Wt(ze.paint_symbol["text-translate"]),"text-translate-anchor":new Wt(ze.paint_symbol["text-translate-anchor"])})},get layout(){return Qg=Qg||new Ir({"symbol-placement":new Wt(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Wt(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wt(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pn(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wt(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wt(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Wt(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Wt(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wt(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wt(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new pn(ze.layout_symbol["icon-size"]),"icon-text-fit":new Wt(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wt(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new pn(ze.layout_symbol["icon-image"]),"icon-rotate":new pn(ze.layout_symbol["icon-rotate"]),"icon-padding":new pn(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Wt(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new pn(ze.layout_symbol["icon-offset"]),"icon-anchor":new pn(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wt(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wt(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wt(ze.layout_symbol["text-rotation-alignment"]),"text-field":new pn(ze.layout_symbol["text-field"]),"text-font":new pn(ze.layout_symbol["text-font"]),"text-size":new pn(ze.layout_symbol["text-size"]),"text-max-width":new pn(ze.layout_symbol["text-max-width"]),"text-line-height":new Wt(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new pn(ze.layout_symbol["text-letter-spacing"]),"text-justify":new pn(ze.layout_symbol["text-justify"]),"text-radial-offset":new pn(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wt(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new pn(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new pn(ze.layout_symbol["text-anchor"]),"text-max-angle":new Wt(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Wt(ze.layout_symbol["text-writing-mode"]),"text-rotate":new pn(ze.layout_symbol["text-rotate"]),"text-padding":new Wt(ze.layout_symbol["text-padding"]),"text-keep-upright":new Wt(ze.layout_symbol["text-keep-upright"]),"text-transform":new pn(ze.layout_symbol["text-transform"]),"text-offset":new pn(ze.layout_symbol["text-offset"]),"text-allow-overlap":new Wt(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Wt(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Wt(ze.layout_symbol["text-ignore-placement"]),"text-optional":new Wt(ze.layout_symbol["text-optional"])})}};class sm{constructor(o){if(void 0===o.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Rr,this.defaultValue=o}evaluate(o){if(o.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(o.formattedSection))return h.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xt("FormatSectionOverride",sm,{omit:["defaultValue"]});class Bh extends ts{constructor(o){super(o,pu)}recalculate(o,h){if(super.recalculate(o,h),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const g=this.layout.get("text-writing-mode");if(g){const w=[];for(const M of g)w.indexOf(M)<0&&w.push(M);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,h,g,w){const M=this.layout.get(o).evaluate(h,{},g,w),I=this._unevaluatedLayout._values[o];return I.isDataDriven()||ku(I.value)||!M?M:(O=h.properties,M.replace(/{([^{}]+)}/g,($,Y)=>O&&Y in O?String(O[Y]):""));var O}createBucket(o){return new zh(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of pu.paint.overridableProperties){if(!Bh.hasPaintOverride(this.layout,o))continue;const h=this.paint.get(o),g=new sm(h),w=new Za(g,h.property.specification);let M=null;M="constant"===h.value.kind||"source"===h.value.kind?new gc("source",w):new Hl("composite",w,h.value.zoomStops),this.paint._values[o]=new or(h.property,M,h.parameters)}}_handleOverridablePaintPropertyUpdate(o,h,g){return!(!this.layout||h.isDataDriven()||g.isDataDriven())&&Bh.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,h){const g=o.get("text-field"),w=pu.paint.properties[h];let M=!1;const I=O=>{for(const B of O)if(w.overrides&&w.overrides.hasOverride(B))return void(M=!0)};if("constant"===g.value.kind&&g.value.value instanceof te)I(g.value.value.sections);else if("source"===g.value.kind){const O=$=>{M||($ instanceof bt&&vn($.value)===we?I($.value.sections):$ instanceof fc?I($.sections):$.eachChild(O))},B=g.value;B._styleExpression&&O(B._styleExpression.expression)}return M}}let Zp;var Il={get paint(){return Zp=Zp||new Ir({"background-color":new Wt(ze.paint_background["background-color"]),"background-pattern":new Kl(ze.paint_background["background-pattern"]),"background-opacity":new Wt(ze.paint_background["background-opacity"])})}};class Ku extends ts{constructor(o){super(o,Il)}}let Vh;var Xg={get paint(){return Vh=Vh||new Ir({"raster-opacity":new Wt(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wt(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wt(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wt(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Wt(ze.paint_raster["raster-saturation"]),"raster-contrast":new Wt(ze.paint_raster["raster-contrast"]),"raster-resampling":new Wt(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Wt(ze.paint_raster["raster-fade-duration"])})}};class Jg extends ts{constructor(o){super(o,Xg)}}class jh extends ts{constructor(o){super(o,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=o}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class e_{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Qu=6371008.8;class Pl{constructor(o,h){if(isNaN(o)||isNaN(h))throw new Error(`Invalid LngLat object: (${o}, ${h})`);if(this.lng=+o,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pl(Sr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const h=Math.PI/180,g=this.lat*h,w=o.lat*h,M=Math.sin(g)*Math.sin(w)+Math.cos(g)*Math.cos(w)*Math.cos((o.lng-this.lng)*h);return Qu*Math.acos(Math.min(M,1))}static convert(o){if(o instanceof Pl)return o;if(Array.isArray(o)&&(2===o.length||3===o.length))return new Pl(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&"object"==typeof o&&null!==o)return new Pl(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const fu=2*Math.PI*Qu;function mu(u){return fu*Math.cos(u*Math.PI/180)}function am(u){return(180+u)/360}function Rd(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Wp(u,o){return u/mu(o)}function t_(u){return 360*u-180}function gu(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class Fd{constructor(o,h,g=0){this.x=+o,this.y=+h,this.z=+g}static fromLngLat(o,h=0){const g=Pl.convert(o);return new Fd(am(g.lng),Rd(g.lat),Wp(h,g.lat))}toLngLat(){return new Pl(t_(this.x),gu(this.y))}toAltitude(){return this.z*mu(gu(this.y))}meterInMercatorCoordinateUnits(){return 1/fu*(o=gu(this.y),1/Math.cos(o*Math.PI/180));var o}}function lm(u,o,h){var g=2*Math.PI*6378137/256/Math.pow(2,h);return[u*g-2*Math.PI*6378137/2,o*g-2*Math.PI*6378137/2]}class _u{constructor(o,h,g){if(o<0||o>25||g<0||g>=Math.pow(2,o)||h<0||h>=Math.pow(2,o))throw new Error(`x=${h}, y=${g}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=h,this.y=g,this.key=yu(0,o,o,h,g)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,h,g){const w=(I=this.y,O=this.z,B=lm(256*(M=this.x),256*(I=Math.pow(2,O)-I-1),O),$=lm(256*(M+1),256*(I+1),O),B[0]+","+B[1]+","+$[0]+","+$[1]);var M,I,O,B,$;const Y=function(ee,re,ce){let de,_e="";for(let Ie=ee;Ie>0;Ie--)de=1<<Ie-1,_e+=(re&de?1:0)+(ce&de?2:0);return _e}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===g?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,Y).replace(/{bbox-epsg-3857}/g,w)}isChildOf(o){const h=this.z-o.z;return h>0&&o.x===this.x>>h&&o.y===this.y>>h}getTilePoint(o){const h=Math.pow(2,this.z);return new Ue((o.x*h-this.x)*eo,(o.y*h-this.y)*eo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Nd{constructor(o,h){this.wrap=o,this.canonical=h,this.key=yu(o,h.z,h.z,h.x,h.y)}}class ga{constructor(o,h,g,w,M){if(o<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${g}`);this.overscaledZ=o,this.wrap=h,this.canonical=new _u(g,+w,+M),this.key=yu(h,o,g,w,M)}clone(){return new ga(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-o;return o>this.canonical.z?new ga(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ga(o,this.wrap,o,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(o,h){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-o;return o>this.canonical.z?yu(this.wrap*+h,o,this.canonical.z,this.canonical.x,this.canonical.y):yu(this.wrap*+h,o,o,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const h=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>h&&o.canonical.y===this.canonical.y>>h}children(o){if(this.overscaledZ>=o)return[new ga(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,g=2*this.canonical.x,w=2*this.canonical.y;return[new ga(h,this.wrap,h,g,w),new ga(h,this.wrap,h,g+1,w),new ga(h,this.wrap,h,g,w+1),new ga(h,this.wrap,h,g+1,w+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new ga(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new ga(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Nd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Fd(o.x-this.wrap,o.y))}}function yu(u,o,h,g,w){(u*=2)<0&&(u=-1*u-1);const M=1<<h;return(M*M*u+M*w+g).toString(36)+h.toString(36)+o.toString(36)}Xt("CanonicalTileID",_u),Xt("OverscaledTileID",ga,{omit:["posMatrix"]});class Xu{constructor(o,h,g,w=1,M=1,I=1,O=0){if(this.uid=o,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void Di(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const B=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=M,this.blueFactor=I,this.baseShift=O;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let $=0;$<B;$++)this.data[this._idx(-1,$)]=this.data[this._idx(0,$)],this.data[this._idx(B,$)]=this.data[this._idx(B-1,$)],this.data[this._idx($,-1)]=this.data[this._idx($,0)],this.data[this._idx($,B)]=this.data[this._idx($,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let $=0;$<B;$++)for(let Y=0;Y<B;Y++){const ee=this.get($,Y);ee>this.max&&(this.max=ee),ee<this.min&&(this.min=ee)}}get(o,h){const g=new Uint8Array(this.data.buffer),w=4*this._idx(o,h);return this.unpack(g[w],g[w+1],g[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,h){if(o<-1||o>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(o+1)}unpack(o,h,g){return o*this.redFactor+h*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new rs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,h,g){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let w=h*this.dim,M=h*this.dim+this.dim,I=g*this.dim,O=g*this.dim+this.dim;switch(h){case-1:w=M-1;break;case 1:M=w+1}switch(g){case-1:I=O-1;break;case 1:O=I+1}const B=-h*this.dim,$=-g*this.dim;for(let Y=I;Y<O;Y++)for(let ee=w;ee<M;ee++)this.data[this._idx(ee,Y)]=o.data[this._idx(ee+B,Y+$)]}}Xt("DEMData",Xu);class n_{constructor(o){this._stringToNumber={},this._numberToString=[];for(let h=0;h<o.length;h++){const g=o[h];this._stringToNumber[g]=h,this._numberToString[h]=g}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class Uh{constructor(o,h,g,w,M){this.type="Feature",this._vectorTileFeature=o,o._z=h,o._x=g,o._y=w,this.properties=o.properties,this.id=M}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const h in this)"_geometry"!==h&&"_vectorTileFeature"!==h&&(o[h]=this[h]);return o}}class zd{constructor(o,h){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new vl(eo,16,0),this.grid3D=new vl(eo,16,0),this.featureIndexArray=new vt,this.promoteId=h}insert(o,h,g,w,M,I){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,w,M);const B=I?this.grid3D:this.grid;for(let $=0;$<h.length;$++){const Y=h[$],ee=[1/0,1/0,-1/0,-1/0];for(let re=0;re<Y.length;re++){const ce=Y[re];ee[0]=Math.min(ee[0],ce.x),ee[1]=Math.min(ee[1],ce.y),ee[2]=Math.max(ee[2],ce.x),ee[3]=Math.max(ee[3],ce.y)}ee[0]<eo&&ee[1]<eo&&ee[2]>=0&&ee[3]>=0&&B.insert(O,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ec.VectorTile(new nm(this.rawTileData)).layers,this.sourceLayerCoder=new n_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,h,g,w){this.loadVTLayers();const M=o.params||{},I=eo/o.tileSize/o.scale,O=gl(M.filter),B=o.queryGeometry,$=o.queryPadding*I,Y=cm(B),ee=this.grid.query(Y.minX-$,Y.minY-$,Y.maxX+$,Y.maxY+$),re=cm(o.cameraQueryGeometry),ce=this.grid3D.query(re.minX-$,re.minY-$,re.maxX+$,re.maxY+$,(Ie,ke,$e,Fe)=>function(qe,rt,mt,Ut,tn){for(const jt of qe)if(rt<=jt.x&&mt<=jt.y&&Ut>=jt.x&&tn>=jt.y)return!0;const $t=[new Ue(rt,mt),new Ue(rt,tn),new Ue(Ut,tn),new Ue(Ut,mt)];if(qe.length>2)for(const jt of $t)if(vh(qe,jt))return!0;for(let jt=0;jt<qe.length-1;jt++)if(Ig(qe[jt],qe[jt+1],$t))return!0;return!1}(o.cameraQueryGeometry,Ie-$,ke-$,$e+$,Fe+$));for(const Ie of ce)ee.push(Ie);ee.sort(i_);const de={};let _e;for(let Ie=0;Ie<ee.length;Ie++){const ke=ee[Ie];if(ke===_e)continue;_e=ke;const $e=this.featureIndexArray.get(ke);let Fe=null;this.loadMatchingFeature(de,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,O,M.layers,M.availableImages,h,g,w,(qe,rt,mt)=>(Fe||(Fe=Tl(qe)),rt.queryIntersectsFeature(B,qe,mt,Fe,this.z,o.transform,I,o.pixelPosMatrix)))}return de}loadMatchingFeature(o,h,g,w,M,I,O,B,$,Y,ee){const re=this.bucketLayerIDs[h];if(I&&!function(Ie,ke){for(let $e=0;$e<Ie.length;$e++)if(ke.indexOf(Ie[$e])>=0)return!0;return!1}(I,re))return;const ce=this.sourceLayerCoder.decode(g),de=this.vtLayers[ce].feature(w);if(M.needGeometry){const Ie=ju(de,!0);if(!M.filter(new Pe(this.tileID.overscaledZ),Ie,this.tileID.canonical))return}else if(!M.filter(new Pe(this.tileID.overscaledZ),de))return;const _e=this.getId(de,ce);for(let Ie=0;Ie<re.length;Ie++){const ke=re[Ie];if(I&&I.indexOf(ke)<0)continue;const $e=B[ke];if(!$e)continue;let Fe={};_e&&Y&&(Fe=Y.getState($e.sourceLayer||"_geojsonTileLayer",_e));const qe=Ui({},$[ke]);qe.paint=Ju(qe.paint,$e.paint,de,Fe,O),qe.layout=Ju(qe.layout,$e.layout,de,Fe,O);const rt=!ee||ee(de,$e,Fe);if(!rt)continue;const mt=new Uh(de,this.z,this.x,this.y,_e);mt.layer=qe;let Ut=o[ke];void 0===Ut&&(Ut=o[ke]=[]),Ut.push({featureIndex:w,feature:mt,intersectionZ:rt})}}lookupSymbolFeatures(o,h,g,w,M,I,O,B){const $={};this.loadVTLayers();const Y=gl(M);for(const ee of o)this.loadMatchingFeature($,g,w,ee,Y,I,O,B,h);return $}hasLayer(o){for(const h of this.bucketLayerIDs)for(const g of h)if(o===g)return!0;return!1}getId(o,h){let g=o.id;return this.promoteId&&(g=o.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[h]],"boolean"==typeof g&&(g=Number(g))),g}}function Ju(u,o,h,g,w){return hi(u,(M,I)=>{const O=o instanceof ha?o.get(I):null;return O&&O.evaluate?O.evaluate(h,g,w):O})}function cm(u){let o=1/0,h=1/0,g=-1/0,w=-1/0;for(const M of u)o=Math.min(o,M.x),h=Math.min(h,M.y),g=Math.max(g,M.x),w=Math.max(w,M.y);return{minX:o,minY:h,maxX:g,maxY:w}}function i_(u,o){return o-u}function Bd(u,o,h,g,w){const M=[];for(let I=0;I<u.length;I++){const O=u[I];let B;for(let $=0;$<O.length-1;$++){let Y=O[$],ee=O[$+1];Y.x<o&&ee.x<o||(Y.x<o?Y=new Ue(o,Y.y+(o-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round():ee.x<o&&(ee=new Ue(o,Y.y+(o-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round()),Y.y<h&&ee.y<h||(Y.y<h?Y=new Ue(Y.x+(h-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),h)._round():ee.y<h&&(ee=new Ue(Y.x+(h-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),h)._round()),Y.x>=g&&ee.x>=g||(Y.x>=g?Y=new Ue(g,Y.y+(g-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round():ee.x>=g&&(ee=new Ue(g,Y.y+(g-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round()),Y.y>=w&&ee.y>=w||(Y.y>=w?Y=new Ue(Y.x+(w-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),w)._round():ee.y>=w&&(ee=new Ue(Y.x+(w-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),w)._round()),B&&Y.equals(B[B.length-1])||(B=[Y],M.push(B)),B.push(ee)))))}}return M}Xt("FeatureIndex",zd,{omit:["rawTileData","sourceLayerCoder"]});class _a extends Ue{constructor(o,h,g,w){super(o,h),this.angle=g,void 0!==w&&(this.segment=w)}clone(){return new _a(this.x,this.y,this.angle,this.segment)}}function Mc(u,o,h,g,w){if(void 0===o.segment||0===h)return!0;let M=o,I=o.segment+1,O=0;for(;O>-h/2;){if(I--,I<0)return!1;O-=u[I].dist(M),M=u[I]}O+=u[I].dist(u[I+1]),I++;const B=[];let $=0;for(;O<h/2;){const Y=u[I],ee=u[I+1];if(!ee)return!1;let re=u[I-1].angleTo(Y)-Y.angleTo(ee);for(re=Math.abs((re+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:O,angleDelta:re}),$+=re;O-B[0].distance>g;)$-=B.shift().angleDelta;if($>w)return!1;I++,O+=Y.dist(ee)}return!0}function sv(u){let o=0;for(let h=0;h<u.length-1;h++)o+=u[h].dist(u[h+1]);return o}function av(u,o,h){return u?.6*o*h:0}function b0(u,o){return Math.max(u?u.right-u.left:0,o?o.right-o.left:0)}function r_(u,o,h,g,w,M){const I=av(h,w,M),O=b0(h,g)*M;let B=0;const $=sv(u)/2;for(let Y=0;Y<u.length-1;Y++){const ee=u[Y],re=u[Y+1],ce=ee.dist(re);if(B+ce>$){const de=($-B)/ce,_e=ps.number(ee.x,re.x,de),Ie=ps.number(ee.y,re.y,de),ke=new _a(_e,Ie,re.angleTo(ee),Y);return ke._round(),!I||Mc(u,ke,O,I,o)?ke:void 0}B+=ce}}function o_(u,o,h,g,w,M,I,O,B){const $=av(g,M,I),Y=b0(g,w),ee=Y*I,re=0===u[0].x||u[0].x===B||0===u[0].y||u[0].y===B;return o-ee<o/4&&(o=ee+o/4),lv(u,re?o/2*O%o:(Y/2+2*M)*I*O%o,o,$,h,ee,re,!1,B)}function lv(u,o,h,g,w,M,I,O,B){const $=M/2,Y=sv(u);let ee=0,re=o-h,ce=[];for(let de=0;de<u.length-1;de++){const _e=u[de],Ie=u[de+1],ke=_e.dist(Ie),$e=Ie.angleTo(_e);for(;re+h<ee+ke;){re+=h;const Fe=(re-ee)/ke,qe=ps.number(_e.x,Ie.x,Fe),rt=ps.number(_e.y,Ie.y,Fe);if(qe>=0&&qe<B&&rt>=0&&rt<B&&re-$>=0&&re+$<=Y){const mt=new _a(qe,rt,$e,de);mt._round(),g&&!Mc(u,mt,M,g,w)||ce.push(mt)}}ee+=ke}return O||ce.length||I||(ce=lv(u,ee/2,h,g,w,M,I,!0,B)),ce}Xt("Anchor",_a);const eh=So;function Vd(u,o,h,g){const w=[],M=u.image,I=M.pixelRatio,O=M.paddedRect.w-2*eh,B=M.paddedRect.h-2*eh,$=u.right-u.left,Y=u.bottom-u.top,ee=M.stretchX||[[0,O]],re=M.stretchY||[[0,B]],ce=(Pt,nn)=>Pt+nn[1]-nn[0],de=ee.reduce(ce,0),_e=re.reduce(ce,0),Ie=O-de,ke=B-_e;let $e=0,Fe=de,qe=0,rt=_e,mt=0,Ut=Ie,tn=0,$t=ke;if(M.content&&g){const Pt=M.content;$e=Ks(ee,0,Pt[0]),qe=Ks(re,0,Pt[1]),Fe=Ks(ee,Pt[0],Pt[2]),rt=Ks(re,Pt[1],Pt[3]),mt=Pt[0]-$e,tn=Pt[1]-qe,Ut=Pt[2]-Pt[0]-Fe,$t=Pt[3]-Pt[1]-rt}const jt=(Pt,nn,Ft,Et)=>{const Sn=vu(Pt.stretch-$e,Fe,$,u.left),un=Yp(Pt.fixed-mt,Ut,Pt.stretch,de),si=vu(nn.stretch-qe,rt,Y,u.top),Qi=Yp(nn.fixed-tn,$t,nn.stretch,_e),gr=vu(Ft.stretch-$e,Fe,$,u.left),Hr=Yp(Ft.fixed-mt,Ut,Ft.stretch,de),xs=vu(Et.stretch-qe,rt,Y,u.top),Ro=Yp(Et.fixed-tn,$t,Et.stretch,_e),no=new Ue(Sn,si),Eo=new Ue(gr,si),Fo=new Ue(gr,xs),os=new Ue(Sn,xs),ws=new Ue(un/I,Qi/I),io=new Ue(Hr/I,Ro/I),ho=o*Math.PI/180;if(ho){const po=Math.sin(ho),as=Math.cos(ho),Is=[as,-po,po,as];no._matMult(Is),Eo._matMult(Is),os._matMult(Is),Fo._matMult(Is)}const Zo=Pt.stretch+Pt.fixed,ss=nn.stretch+nn.fixed;return{tl:no,tr:Eo,bl:os,br:Fo,tex:{x:M.paddedRect.x+eh+Zo,y:M.paddedRect.y+eh+ss,w:Ft.stretch+Ft.fixed-Zo,h:Et.stretch+Et.fixed-ss},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ws,pixelOffsetBR:io,minFontScaleX:Ut/I/$,minFontScaleY:$t/I/Y,isSDF:h}};if(g&&(M.stretchX||M.stretchY)){const Pt=qp(ee,Ie,de),nn=qp(re,ke,_e);for(let Ft=0;Ft<Pt.length-1;Ft++){const Et=Pt[Ft],Sn=Pt[Ft+1];for(let un=0;un<nn.length-1;un++)w.push(jt(Et,nn[un],Sn,nn[un+1]))}}else w.push(jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:B+1}));return w}function Ks(u,o,h){let g=0;for(const w of u)g+=Math.max(o,Math.min(h,w[1]))-Math.max(o,Math.min(h,w[0]));return g}function qp(u,o,h){const g=[{fixed:-eh,stretch:0}];for(const[w,M]of u){const I=g[g.length-1];g.push({fixed:w-I.stretch,stretch:I.stretch}),g.push({fixed:w-I.stretch,stretch:I.stretch+(M-w)})}return g.push({fixed:o+eh,stretch:h}),g}function vu(u,o,h,g){return u/o*h+g}function Yp(u,o,h,g){return u-o*h/g}class ya{constructor(o,h,g,w,M,I,O,B,$,Y){if(this.boxStartIndex=o.length,$){let ee=I.top,re=I.bottom;const ce=I.collisionPadding;ce&&(ee-=ce[1],re+=ce[3]);let de=re-ee;de>0&&(de=Math.max(10,de),this.circleDiameter=de)}else{let ee=I.top*O-B[0],re=I.bottom*O+B[2],ce=I.left*O-B[3],de=I.right*O+B[1];const _e=I.collisionPadding;if(_e&&(ce-=_e[0]*O,ee-=_e[1]*O,de+=_e[2]*O,re+=_e[3]*O),Y){const Ie=new Ue(ce,ee),ke=new Ue(de,ee),$e=new Ue(ce,re),Fe=new Ue(de,re),qe=Y*Math.PI/180;Ie._rotate(qe),ke._rotate(qe),$e._rotate(qe),Fe._rotate(qe),ce=Math.min(Ie.x,ke.x,$e.x,Fe.x),de=Math.max(Ie.x,ke.x,$e.x,Fe.x),ee=Math.min(Ie.y,ke.y,$e.y,Fe.y),re=Math.max(Ie.y,ke.y,$e.y,Fe.y)}o.emplaceBack(h.x,h.y,ce,ee,de,re,g,w,M)}this.boxEndIndex=o.length}}class s_{constructor(o=[],h=jd){if(this.data=o,this.length=this.data.length,this.compare=h,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const o=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:h,compare:g}=this,w=h[o];for(;o>0;){const M=o-1>>1,I=h[M];if(g(w,I)>=0)break;h[o]=I,o=M}h[o]=w}_down(o){const{data:h,compare:g}=this,w=this.length>>1,M=h[o];for(;o<w;){let I=1+(o<<1),O=h[I];const B=I+1;if(B<this.length&&g(h[B],O)<0&&(I=B,O=h[B]),g(O,M)>=0)break;h[o]=O,o=I}h[o]=M}}function jd(u,o){return u<o?-1:u>o?1:0}function cv(u,o=1,h=!1){let g=1/0,w=1/0,M=-1/0,I=-1/0;const O=u[0];for(let ce=0;ce<O.length;ce++){const de=O[ce];(!ce||de.x<g)&&(g=de.x),(!ce||de.y<w)&&(w=de.y),(!ce||de.x>M)&&(M=de.x),(!ce||de.y>I)&&(I=de.y)}const B=Math.min(M-g,I-w);let $=B/2;const Y=new s_([],uv);if(0===B)return new Ue(g,w);for(let ce=g;ce<M;ce+=B)for(let de=w;de<I;de+=B)Y.push(new Al(ce+$,de+$,$,u));let ee=function(ce){let de=0,_e=0,Ie=0;const ke=ce[0];for(let $e=0,Fe=ke.length,qe=Fe-1;$e<Fe;qe=$e++){const rt=ke[$e],mt=ke[qe],Ut=rt.x*mt.y-mt.x*rt.y;_e+=(rt.x+mt.x)*Ut,Ie+=(rt.y+mt.y)*Ut,de+=3*Ut}return new Al(_e/de,Ie/de,0,ce)}(u),re=Y.length;for(;Y.length;){const ce=Y.pop();(ce.d>ee.d||!ee.d)&&(ee=ce,h&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,re)),ce.max-ee.d<=o||($=ce.h/2,Y.push(new Al(ce.p.x-$,ce.p.y-$,$,u)),Y.push(new Al(ce.p.x+$,ce.p.y-$,$,u)),Y.push(new Al(ce.p.x-$,ce.p.y+$,$,u)),Y.push(new Al(ce.p.x+$,ce.p.y+$,$,u)),re+=4)}return h&&(console.log(`num probes: ${re}`),console.log(`best distance: ${ee.d}`)),ee.p}function uv(u,o){return o.max-u.max}function Al(u,o,h,g){this.p=new Ue(u,o),this.h=h,this.d=function(w,M){let I=!1,O=1/0;for(let B=0;B<M.length;B++){const $=M[B];for(let Y=0,ee=$.length,re=ee-1;Y<ee;re=Y++){const ce=$[Y],de=$[re];ce.y>w.y!=de.y>w.y&&w.x<(de.x-ce.x)*(w.y-ce.y)/(de.y-ce.y)+ce.x&&(I=!I),O=Math.min(O,g0(w,ce,de))}}return(I?1:-1)*Math.sqrt(O)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var uo;y.aq=void 0,(uo=y.aq||(y.aq={}))[uo.center=1]="center",uo[uo.left=2]="left",uo[uo.right=3]="right",uo[uo.top=4]="top",uo[uo.bottom=5]="bottom",uo[uo["top-left"]=6]="top-left",uo[uo["top-right"]=7]="top-right",uo[uo["bottom-left"]=8]="bottom-left",uo[uo["bottom-right"]=9]="bottom-right";const Ic=7,um=Number.POSITIVE_INFINITY;function Hh(u,o){return o[1]!==um?function(h,g,w){let M=0,I=0;switch(g=Math.abs(g),w=Math.abs(w),h){case"top-right":case"top-left":case"top":I=w-Ic;break;case"bottom-right":case"bottom-left":case"bottom":I=-w+Ic}switch(h){case"top-right":case"bottom-right":case"right":M=-g;break;case"top-left":case"bottom-left":case"left":M=g}return[M,I]}(u,o[0],o[1]):function(h,g){let w=0,M=0;g<0&&(g=0);const I=g/Math.SQRT2;switch(h){case"top-right":case"top-left":M=I-Ic;break;case"bottom-right":case"bottom-left":M=-I+Ic;break;case"bottom":M=-g+Ic;break;case"top":M=g-Ic}switch(h){case"top-right":case"bottom-right":w=-I;break;case"top-left":case"bottom-left":w=I;break;case"left":w=g;break;case"right":w=-g}return[w,M]}(u,o[0])}function $h(u,o,h){var g;const w=u.layout,M=null===(g=w.get("text-variable-anchor-offset"))||void 0===g?void 0:g.evaluate(o,{},h);if(M){const O=M.values,B=[];for(let $=0;$<O.length;$+=2){const Y=B[$]=O[$],ee=O[$+1].map(re=>re*Ur);Y.startsWith("top")?ee[1]-=Ic:Y.startsWith("bottom")&&(ee[1]+=Ic),B[$+1]=ee}return new Be(B)}const I=w.get("text-variable-anchor");if(I){let O;O=void 0!==u._unevaluatedLayout.getValue("text-radial-offset")?[w.get("text-radial-offset").evaluate(o,{},h)*Ur,um]:w.get("text-offset").evaluate(o,{},h).map($=>$*Ur);const B=[];for(const $ of I)B.push($,Hh($,O));return new Be(B)}return null}function oi(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function a_(u,o,h,g,w,M,I,O,B,$,Y){let ee=M.textMaxSize.evaluate(o,{});void 0===ee&&(ee=I);const re=u.layers[0].layout,ce=re.get("icon-offset").evaluate(o,{},Y),de=dm(h.horizontal),_e=I/24,Ie=u.tilePixelRatio*_e,ke=u.tilePixelRatio*ee/24,$e=u.tilePixelRatio*O,Fe=u.tilePixelRatio*re.get("symbol-spacing"),qe=re.get("text-padding")*u.tilePixelRatio,rt=function(Et,Sn,un,si=1){const Qi=Et.get("icon-padding").evaluate(Sn,{},un),gr=Qi&&Qi.values;return[gr[0]*si,gr[1]*si,gr[2]*si,gr[3]*si]}(re,o,Y,u.tilePixelRatio),mt=re.get("text-max-angle")/180*Math.PI,Ut="viewport"!==re.get("text-rotation-alignment")&&"point"!==re.get("symbol-placement"),tn="map"===re.get("icon-rotation-alignment")&&"point"!==re.get("symbol-placement"),$t=re.get("symbol-placement"),jt=Fe/2,Pt=re.get("icon-text-fit");let nn;g&&"none"!==Pt&&(u.allowVerticalPlacement&&h.vertical&&(nn=$p(g,h.vertical,Pt,re.get("icon-text-fit-padding"),ce,_e)),de&&(g=$p(g,de,Pt,re.get("icon-text-fit-padding"),ce,_e)));const Ft=(Et,Sn)=>{Sn.x<0||Sn.x>=eo||Sn.y<0||Sn.y>=eo||function(un,si,Qi,gr,Hr,xs,Ro,no,Eo,Fo,os,ws,io,ho,Zo,ss,po,as,Is,fo,bi,lr,Wo,mo,Ll){const Ba=un.addToLineVertexArray(si,Qi);let sl,Pc,al,Ps,As=0,Ac=0,th=0,Kp=0,gm=-1,_m=-1;const Lc={};let Ls=_s("");if(un.allowVerticalPlacement&&gr.vertical){const ro=no.layout.get("text-rotate").evaluate(bi,{},mo)+90;al=new ya(Eo,si,Fo,os,ws,gr.vertical,io,ho,Zo,ro),Ro&&(Ps=new ya(Eo,si,Fo,os,ws,Ro,po,as,Zo,ro))}if(Hr){const ro=no.layout.get("icon-rotate").evaluate(bi,{}),Cs="none"!==no.layout.get("icon-text-fit"),Gh=Vd(Hr,ro,Wo,Cs),kl=Ro?Vd(Ro,ro,Wo,Cs):void 0;Pc=new ya(Eo,si,Fo,os,ws,Hr,po,as,!1,ro),As=4*Gh.length;const nh=un.iconSizeData;let ll=null;"source"===nh.kind?(ll=[Ml*no.layout.get("icon-size").evaluate(bi,{})],ll[0]>ma&&Di(`${un.layerIds[0]}: Value for "icon-size" is >= ${Rh}. Reduce your "icon-size".`)):"composite"===nh.kind&&(ll=[Ml*lr.compositeIconSizes[0].evaluate(bi,{},mo),Ml*lr.compositeIconSizes[1].evaluate(bi,{},mo)],(ll[0]>ma||ll[1]>ma)&&Di(`${un.layerIds[0]}: Value for "icon-size" is >= ${Rh}. Reduce your "icon-size".`)),un.addSymbols(un.icon,Gh,ll,fo,Is,bi,y.ai.none,si,Ba.lineStartIndex,Ba.lineLength,-1,mo),gm=un.icon.placedSymbolArray.length-1,kl&&(Ac=4*kl.length,un.addSymbols(un.icon,kl,ll,fo,Is,bi,y.ai.vertical,si,Ba.lineStartIndex,Ba.lineLength,-1,mo),_m=un.icon.placedSymbolArray.length-1)}const u_=Object.keys(gr.horizontal);for(const ro of u_){const Cs=gr.horizontal[ro];if(!sl){Ls=_s(Cs.text);const kl=no.layout.get("text-rotate").evaluate(bi,{},mo);sl=new ya(Eo,si,Fo,os,ws,Cs,io,ho,Zo,kl)}const Gh=1===Cs.positionedLines.length;if(th+=hm(un,si,Cs,xs,no,Zo,bi,ss,Ba,gr.vertical?y.ai.horizontal:y.ai.horizontalOnly,Gh?u_:[ro],Lc,gm,lr,mo),Gh)break}gr.vertical&&(Kp+=hm(un,si,gr.vertical,xs,no,Zo,bi,ss,Ba,y.ai.vertical,["vertical"],Lc,_m,lr,mo));const va=sl?sl.boxStartIndex:un.collisionBoxArray.length,Qp=sl?sl.boxEndIndex:un.collisionBoxArray.length,pv=al?al.boxStartIndex:un.collisionBoxArray.length,h_=al?al.boxEndIndex:un.collisionBoxArray.length,fv=Pc?Pc.boxStartIndex:un.collisionBoxArray.length,x0=Pc?Pc.boxEndIndex:un.collisionBoxArray.length,mv=Ps?Ps.boxStartIndex:un.collisionBoxArray.length,ym=Ps?Ps.boxEndIndex:un.collisionBoxArray.length;let ba=-1;const ks=(ro,Cs)=>ro&&ro.circleDiameter?Math.max(ro.circleDiameter,Cs):Cs;ba=ks(sl,ba),ba=ks(al,ba),ba=ks(Pc,ba),ba=ks(Ps,ba);const d_=ba>-1?1:0;d_&&(ba*=Ll/Ur),un.glyphOffsetArray.length>=zh.MAX_GLYPHS&&Di("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==bi.sortKey&&un.addToSortKeyRanges(un.symbolInstances.length,bi.sortKey);const kc=$h(no,bi,mo),[vm,Wd]=function(ro,Cs){const Gh=ro.length,kl=Cs?.values;if(kl?.length>0)for(let nh=0;nh<kl.length;nh+=2){const ll=kl[nh+1];ro.emplaceBack(y.aq[kl[nh]],ll[0],ll[1])}return[Gh,ro.length]}(un.textAnchorOffsets,kc);un.symbolInstances.emplaceBack(si.x,si.y,Lc.right>=0?Lc.right:-1,Lc.center>=0?Lc.center:-1,Lc.left>=0?Lc.left:-1,Lc.vertical||-1,gm,_m,Ls,va,Qp,pv,h_,fv,x0,mv,ym,Fo,th,Kp,As,Ac,d_,0,io,ba,vm,Wd)}(u,Sn,Et,h,g,w,nn,u.layers[0],u.collisionBoxArray,o.index,o.sourceLayerIndex,u.index,Ie,[qe,qe,qe,qe],Ut,B,$e,rt,tn,ce,o,M,$,Y,I)};if("line"===$t)for(const Et of Bd(o.geometry,0,0,eo,eo)){const Sn=o_(Et,Fe,mt,h.vertical||de,g,24,ke,u.overscaling,eo);for(const un of Sn)de&&hv(u,de.text,jt,un)||Ft(Et,un)}else if("line-center"===$t){for(const Et of o.geometry)if(Et.length>1){const Sn=r_(Et,mt,h.vertical||de,g,24,ke);Sn&&Ft(Et,Sn)}}else if("Polygon"===o.type)for(const Et of Ep(o.geometry,0)){const Sn=cv(Et,16);Ft(Et[0],new _a(Sn.x,Sn.y,0))}else if("LineString"===o.type)for(const Et of o.geometry)Ft(Et,new _a(Et[0].x,Et[0].y,0));else if("Point"===o.type)for(const Et of o.geometry)for(const Sn of Et)Ft([Sn],new _a(Sn.x,Sn.y,0))}function hm(u,o,h,g,w,M,I,O,B,$,Y,ee,re,ce,de){const _e=function($e,Fe,qe,rt,mt,Ut,tn,$t){const jt=rt.layout.get("text-rotate").evaluate(Ut,{})*Math.PI/180,Pt=[];for(const nn of Fe.positionedLines)for(const Ft of nn.positionedGlyphs){if(!Ft.rect)continue;const Et=Ft.rect||{};let Sn=Id+1,un=!0,si=1,Qi=0;const gr=(mt||$t)&&Ft.vertical,Hr=Ft.metrics.advance*Ft.scale/2;if($t&&Fe.verticalizable&&(Qi=nn.lineOffset/2-(Ft.imageName?-(Ur-Ft.metrics.width*Ft.scale)/2:(Ft.scale-1)*Ur)),Ft.imageName){const fo=tn[Ft.imageName];un=fo.sdf,si=fo.pixelRatio,Sn=So/si}const xs=mt?[Ft.x+Hr,Ft.y]:[0,0];let Ro=mt?[0,0]:[Ft.x+Hr+qe[0],Ft.y+qe[1]-Qi],no=[0,0];gr&&(no=Ro,Ro=[0,0]);const Eo=Ft.metrics.isDoubleResolution?2:1,Fo=(Ft.metrics.left-Sn)*Ft.scale-Hr+Ro[0],os=(-Ft.metrics.top-Sn)*Ft.scale+Ro[1],ws=Fo+Et.w/Eo*Ft.scale/si,io=os+Et.h/Eo*Ft.scale/si,ho=new Ue(Fo,os),Zo=new Ue(ws,os),ss=new Ue(Fo,io),po=new Ue(ws,io);if(gr){const fo=new Ue(-Hr,Hr-Up),bi=-Math.PI/2,lr=Ur/2-Hr,Wo=new Ue(5-Up-lr,-(Ft.imageName?lr:0)),mo=new Ue(...no);ho._rotateAround(bi,fo)._add(Wo)._add(mo),Zo._rotateAround(bi,fo)._add(Wo)._add(mo),ss._rotateAround(bi,fo)._add(Wo)._add(mo),po._rotateAround(bi,fo)._add(Wo)._add(mo)}if(jt){const fo=Math.sin(jt),bi=Math.cos(jt),lr=[bi,-fo,fo,bi];ho._matMult(lr),Zo._matMult(lr),ss._matMult(lr),po._matMult(lr)}const as=new Ue(0,0),Is=new Ue(0,0);Pt.push({tl:ho,tr:Zo,bl:ss,br:po,tex:Et,writingMode:Fe.writingMode,glyphOffset:xs,sectionIndex:Ft.sectionIndex,isSDF:un,pixelOffsetTL:as,pixelOffsetBR:Is,minFontScaleX:0,minFontScaleY:0})}return Pt}(0,h,O,w,M,I,g,u.allowVerticalPlacement),Ie=u.textSizeData;let ke=null;"source"===Ie.kind?(ke=[Ml*w.layout.get("text-size").evaluate(I,{})],ke[0]>ma&&Di(`${u.layerIds[0]}: Value for "text-size" is >= ${Rh}. Reduce your "text-size".`)):"composite"===Ie.kind&&(ke=[Ml*ce.compositeTextSizes[0].evaluate(I,{},de),Ml*ce.compositeTextSizes[1].evaluate(I,{},de)],(ke[0]>ma||ke[1]>ma)&&Di(`${u.layerIds[0]}: Value for "text-size" is >= ${Rh}. Reduce your "text-size".`)),u.addSymbols(u.text,_e,ke,O,M,I,$,o,B.lineStartIndex,B.lineLength,re,de);for(const $e of Y)ee[$e]=u.text.placedSymbolArray.length-1;return 4*_e.length}function dm(u){for(const o in u)return u[o];return null}function hv(u,o,h,g){const w=u.compareText;if(o in w){const M=w[o];for(let I=M.length-1;I>=0;I--)if(g.dist(M[I])<h)return!0}else w[o]=[];return w[o].push(g),!1}const l_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pm{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,g]=new Uint8Array(o,0,2);if(219!==h)throw new Error("Data does not appear to be in a KDBush format.");const w=g>>4;if(1!==w)throw new Error(`Got v${w} data when expected v1.`);const M=l_[15&g];if(!M)throw new Error("Unrecognized array type.");const[I]=new Uint16Array(o,2,1),[O]=new Uint32Array(o,4,1);return new pm(O,I,M,o)}constructor(o,h=64,g=Float64Array,w){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=g,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const M=l_.indexOf(this.ArrayType),I=2*o*this.ArrayType.BYTES_PER_ELEMENT,O=o*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-O%8)%8;if(M<0)throw new Error(`Unexpected typed array class: ${g}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+O+B,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+I+O+B),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+O+B,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+M]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=o)}add(o,h){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=o,this.coords[this._pos++]=h,g}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return fm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,h,g,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:I,nodeSize:O}=this,B=[0,M.length-1,0],$=[];for(;B.length;){const Y=B.pop()||0,ee=B.pop()||0,re=B.pop()||0;if(ee-re<=O){for(let Ie=re;Ie<=ee;Ie++){const ke=I[2*Ie],$e=I[2*Ie+1];ke>=o&&ke<=g&&$e>=h&&$e<=w&&$.push(M[Ie])}continue}const ce=re+ee>>1,de=I[2*ce],_e=I[2*ce+1];de>=o&&de<=g&&_e>=h&&_e<=w&&$.push(M[ce]),(0===Y?o<=de:h<=_e)&&(B.push(re),B.push(ce-1),B.push(1-Y)),(0===Y?g>=de:w>=_e)&&(B.push(ce+1),B.push(ee),B.push(1-Y))}return $}within(o,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:M,nodeSize:I}=this,O=[0,w.length-1,0],B=[],$=g*g;for(;O.length;){const Y=O.pop()||0,ee=O.pop()||0,re=O.pop()||0;if(ee-re<=I){for(let Ie=re;Ie<=ee;Ie++)c_(M[2*Ie],M[2*Ie+1],o,h)<=$&&B.push(w[Ie]);continue}const ce=re+ee>>1,de=M[2*ce],_e=M[2*ce+1];c_(de,_e,o,h)<=$&&B.push(w[ce]),(0===Y?o-g<=de:h-g<=_e)&&(O.push(re),O.push(ce-1),O.push(1-Y)),(0===Y?o+g>=de:h+g>=_e)&&(O.push(ce+1),O.push(ee),O.push(1-Y))}return B}}function fm(u,o,h,g,w,M){if(w-g<=h)return;const I=g+w>>1;Ud(u,o,I,g,w,M),fm(u,o,h,g,I-1,1-M),fm(u,o,h,I+1,w,1-M)}function Ud(u,o,h,g,w,M){for(;w>g;){if(w-g>600){const $=w-g+1,Y=h-g+1,ee=Math.log($),re=.5*Math.exp(2*ee/3),ce=.5*Math.sqrt(ee*re*($-re)/$)*(Y-$/2<0?-1:1);Ud(u,o,h,Math.max(g,Math.floor(h-Y*re/$+ce)),Math.min(w,Math.floor(h+($-Y)*re/$+ce)),M)}const I=o[2*h+M];let O=g,B=w;for(bu(u,o,g,h),o[2*w+M]>I&&bu(u,o,g,w);O<B;){for(bu(u,o,O,B),O++,B--;o[2*O+M]<I;)O++;for(;o[2*B+M]>I;)B--}o[2*g+M]===I?bu(u,o,g,B):(B++,bu(u,o,B,w)),B<=h&&(g=B+1),h<=B&&(w=B-1)}}function bu(u,o,h,g){xu(u,h,g),xu(o,2*h,2*g),xu(o,2*h+1,2*g+1)}function xu(u,o,h){const g=u[o];u[o]=u[h],u[h]=g}function c_(u,o,h,g){const w=u-h,M=o-g;return w*w+M*M}var Hd;y.bh=void 0,(Hd=y.bh||(y.bh={})).create="create",Hd.load="load",Hd.fullLoad="fullLoad";let $d=null,ol=[];const mm=1e3/60,Gd="loadTime",Zd="fullLoadTime",dv={mark(u){performance.mark(u)},frame(u){const o=u;null!=$d&&ol.push(o-$d),$d=o},clearMetrics(){$d=null,ol=[],performance.clearMeasures(Gd),performance.clearMeasures(Zd);for(const u in y.bh)performance.clearMarks(y.bh[u])},getPerformanceMetrics(){performance.measure(Gd,y.bh.create,y.bh.load),performance.measure(Zd,y.bh.create,y.bh.fullLoad);const u=performance.getEntriesByName(Gd)[0].duration,o=performance.getEntriesByName(Zd)[0].duration,h=ol.length,g=1/(ol.reduce((M,I)=>M+I,0)/h/1e3),w=ol.filter(M=>M>mm).reduce((M,I)=>M+(I-mm)/mm,0);return{loadTime:u,fullLoadTime:o,fps:g,percentDroppedFrames:w/(h+w)*100,totalFrames:h}}};y.$=function(u,o,h){var g,w,M,I,O,B,$,Y,ee,re,ce,de,_e=h[0],Ie=h[1],ke=h[2];return o===u?(u[12]=o[0]*_e+o[4]*Ie+o[8]*ke+o[12],u[13]=o[1]*_e+o[5]*Ie+o[9]*ke+o[13],u[14]=o[2]*_e+o[6]*Ie+o[10]*ke+o[14],u[15]=o[3]*_e+o[7]*Ie+o[11]*ke+o[15]):(w=o[1],M=o[2],I=o[3],O=o[4],B=o[5],$=o[6],Y=o[7],ee=o[8],re=o[9],ce=o[10],de=o[11],u[0]=g=o[0],u[1]=w,u[2]=M,u[3]=I,u[4]=O,u[5]=B,u[6]=$,u[7]=Y,u[8]=ee,u[9]=re,u[10]=ce,u[11]=de,u[12]=g*_e+O*Ie+ee*ke+o[12],u[13]=w*_e+B*Ie+re*ke+o[13],u[14]=M*_e+$*Ie+ce*ke+o[14],u[15]=I*_e+Y*Ie+de*ke+o[15]),u},y.A=bh,y.B=ps,y.C=class{constructor(u,o,h){this.receive=g=>{const w=g.data,M=w.id;if(M&&(!w.targetMapId||this.mapId===w.targetMapId))if("<cancel>"===w.type){delete this.tasks[M];const I=this.cancelCallbacks[M];delete this.cancelCallbacks[M],I&&I()}else gn()||w.mustQueue?(this.tasks[M]=w,this.taskQueue.push(M),this.invoker.trigger()):this.processTask(M,w)},this.process=()=>{if(!this.taskQueue.length)return;const g=this.taskQueue.shift(),w=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),w&&this.processTask(g,w)},this.target=u,this.parent=o,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new e_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=gn()?u:window}send(u,o,h,g,w=!1){const M=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[M]=h);const I=[],O={id:M,type:u,hasCallback:!!h,targetMapId:g,mustQueue:w,sourceMapId:this.mapId,data:Hs(o,I)};return this.target.postMessage(O,{transfer:I}),{cancel:()=>{h&&delete this.callbacks[M],this.target.postMessage({id:M,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}processTask(u,o){if("<response>"===o.type){const h=this.callbacks[u];delete this.callbacks[u],h&&(o.error?h($s(o.error)):h(null,$s(o.data)))}else{let h=!1;const g=[],w=o.hasCallback?(O,B)=>{h=!0,delete this.cancelCallbacks[u];const $={id:u,type:"<response>",sourceMapId:this.mapId,error:O?Hs(O):null,data:Hs(B,g)};this.target.postMessage($,{transfer:g})}:O=>{h=!0};let M=null;const I=$s(o.data);if(this.parent[o.type])M=this.parent[o.type](o.sourceMapId,I,w);else if("getWorkerSource"in this.parent){const O=o.type.split(".");M=this.parent.getWorkerSource(o.sourceMapId,O[0],I.source)[O[1]](I,w)}else w(new Error(`Could not find function ${o.type}`));!h&&M&&M.cancel&&(this.cancelCallbacks[u]=M.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},y.D=Wt,y.E=dt,y.F=function(u,o){const h={};for(let g=0;g<o.length;g++){const w=o[g];w in u&&(h[w]=u[w])}return h},y.G=am,y.H=Rd,y.I=jp,y.J=Rn,y.K=Zt,y.L=Pl,y.M=xn,y.N=eo,y.O=ga,y.P=Ue,y.Q=Tr,y.R=rs,y.S=xr,y.T=wt,y.U=Fd,y.V=class extends Fa{},y.W=_u,y.X=function(u,o){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){o(null,h)};for(let g=0;g<u.length;g++){const w=window.document.createElement("source");$o(u[g])||(h.crossOrigin="Anonymous"),w.src=u[g],h.appendChild(w)}return{cancel:()=>{}}},y.Y=It,y.Z=function(){var u=new bh(16);return bh!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},y._=Ve,y.a=Un,y.a$=class extends ae{},y.a0=function(u,o,h){var g=h[0],w=h[1],M=h[2];return u[0]=o[0]*g,u[1]=o[1]*g,u[2]=o[2]*g,u[3]=o[3]*g,u[4]=o[4]*w,u[5]=o[5]*w,u[6]=o[6]*w,u[7]=o[7]*w,u[8]=o[8]*M,u[9]=o[9]*M,u[10]=o[10]*M,u[11]=o[11]*M,u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u},y.a1=kf,y.a2=function(){return fn++},y.a3=Te,y.a4=zh,y.a5=function(){ue.isLoading()||ue.isLoaded()||"deferred"!==U()||J()},y.a6=gl,y.a7=ju,y.a8=Pe,y.a9=Uh,y.aA=p,y.aB=function(u){u=u.slice();const o=Object.create(null);for(let h=0;h<u.length;h++)o[u[h].id]=u[h];for(let h=0;h<u.length;h++)"ref"in u[h]&&(u[h]=xi(u[h],o[u[h].ref]));return u},y.aC=function(u){if("custom"===u.type)return new jh(u);switch(u.type){case"background":return new Ku(u);case"circle":return new Pg(u);case"fill":return new Gf(u);case"fill-extrusion":return new _0(u);case"heatmap":return new zf(u);case"hillshade":return new Lg(u);case"line":return new tv(u);case"raster":return new Jg(u);case"symbol":return new Bh(u)}},y.aD=bn,y.aE=function(u,o){if(!u)return[{command:an.setStyle,args:[o]}];let h=[];try{if(!Dn(u.version,o.version))return[{command:an.setStyle,args:[o]}];Dn(u.center,o.center)||h.push({command:an.setCenter,args:[o.center]}),Dn(u.zoom,o.zoom)||h.push({command:an.setZoom,args:[o.zoom]}),Dn(u.bearing,o.bearing)||h.push({command:an.setBearing,args:[o.bearing]}),Dn(u.pitch,o.pitch)||h.push({command:an.setPitch,args:[o.pitch]}),Dn(u.sprite,o.sprite)||h.push({command:an.setSprite,args:[o.sprite]}),Dn(u.glyphs,o.glyphs)||h.push({command:an.setGlyphs,args:[o.glyphs]}),Dn(u.transition,o.transition)||h.push({command:an.setTransition,args:[o.transition]}),Dn(u.light,o.light)||h.push({command:an.setLight,args:[o.light]});const g={},w=[];!function(I,O,B,$){let Y;for(Y in O=O||{},I=I||{})Object.prototype.hasOwnProperty.call(I,Y)&&(Object.prototype.hasOwnProperty.call(O,Y)||kr(Y,B,$));for(Y in O)Object.prototype.hasOwnProperty.call(O,Y)&&(Object.prototype.hasOwnProperty.call(I,Y)?Dn(I[Y],O[Y])||("geojson"===I[Y].type&&"geojson"===O[Y].type&&Mn(I,O,Y)?B.push({command:an.setGeoJSONSourceData,args:[Y,O[Y].data]}):Or(Y,O,B,$)):Gn(Y,O,B))}(u.sources,o.sources,w,g);const M=[];u.layers&&u.layers.forEach(I=>{g[I.source]?h.push({command:an.removeLayer,args:[I.id]}):M.push(I)}),h=h.concat(w),function(I,O,B){O=O||[];const $=(I=I||[]).map(Cn),Y=O.map(Cn),ee=I.reduce(yn,{}),re=O.reduce(yn,{}),ce=$.slice(),de=Object.create(null);let _e,Ie,ke,$e,Fe,qe,rt;for(_e=0,Ie=0;_e<$.length;_e++)ke=$[_e],Object.prototype.hasOwnProperty.call(re,ke)?Ie++:(B.push({command:an.removeLayer,args:[ke]}),ce.splice(ce.indexOf(ke,Ie),1));for(_e=0,Ie=0;_e<Y.length;_e++)ke=Y[Y.length-1-_e],ce[ce.length-1-_e]!==ke&&(Object.prototype.hasOwnProperty.call(ee,ke)?(B.push({command:an.removeLayer,args:[ke]}),ce.splice(ce.lastIndexOf(ke,ce.length-Ie),1)):Ie++,qe=ce[ce.length-_e],B.push({command:an.addLayer,args:[re[ke],qe]}),ce.splice(ce.length-_e,0,ke),de[ke]=!0);for(_e=0;_e<Y.length;_e++)if(ke=Y[_e],$e=ee[ke],Fe=re[ke],!de[ke]&&!Dn($e,Fe))if(Dn($e.source,Fe.source)&&Dn($e["source-layer"],Fe["source-layer"])&&Dn($e.type,Fe.type)){for(rt in qi($e.layout,Fe.layout,B,ke,null,an.setLayoutProperty),qi($e.paint,Fe.paint,B,ke,null,an.setPaintProperty),Dn($e.filter,Fe.filter)||B.push({command:an.setFilter,args:[ke,Fe.filter]}),Dn($e.minzoom,Fe.minzoom)&&Dn($e.maxzoom,Fe.maxzoom)||B.push({command:an.setLayerZoomRange,args:[ke,Fe.minzoom,Fe.maxzoom]}),$e)Object.prototype.hasOwnProperty.call($e,rt)&&"layout"!==rt&&"paint"!==rt&&"filter"!==rt&&"metadata"!==rt&&"minzoom"!==rt&&"maxzoom"!==rt&&(0===rt.indexOf("paint.")?qi($e[rt],Fe[rt],B,ke,rt.slice(6),an.setPaintProperty):Dn($e[rt],Fe[rt])||B.push({command:an.setLayerProperty,args:[ke,rt,Fe[rt]]}));for(rt in Fe)Object.prototype.hasOwnProperty.call(Fe,rt)&&!Object.prototype.hasOwnProperty.call($e,rt)&&"layout"!==rt&&"paint"!==rt&&"filter"!==rt&&"metadata"!==rt&&"minzoom"!==rt&&"maxzoom"!==rt&&(0===rt.indexOf("paint.")?qi($e[rt],Fe[rt],B,ke,rt.slice(6),an.setPaintProperty):Dn($e[rt],Fe[rt])||B.push({command:an.setLayerProperty,args:[ke,rt,Fe[rt]]}))}else B.push({command:an.removeLayer,args:[ke]}),qe=ce[ce.lastIndexOf(ke)+1],B.push({command:an.addLayer,args:[Fe,qe]})}(M,o.layers,h)}catch(g){console.warn("Unable to compute style diff:",g),h=[{command:an.setStyle,args:[o]}]}return h},y.aF=function(u){const o=[],h=u.id;return void 0===h&&o.push({message:`layers.${h}: missing required property "id"`}),void 0===u.render&&o.push({message:`layers.${h}: missing required method "render"`}),u.renderingMode&&"2d"!==u.renderingMode&&"3d"!==u.renderingMode&&o.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),o},y.aG=function u(o,h){if(Array.isArray(o)){if(!Array.isArray(h)||o.length!==h.length)return!1;for(let g=0;g<o.length;g++)if(!u(o[g],h[g]))return!1;return!0}if("object"==typeof o&&null!==o&&null!==h){if("object"!=typeof h||Object.keys(o).length!==Object.keys(h).length)return!1;for(const g in o)if(!u(o[g],h[g]))return!1;return!0}return o===h},y.aH=hi,y.aI=In,y.aJ=P,y.aK=function(u){return u({pluginStatus:ko,pluginURL:Ya}),P.on("pluginStateChange",u),u},y.aL=class extends Na{constructor(u,o){super(u,o),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},y.aM=Bu,y.aN=class extends Na{constructor(u,o){super(u,o),this.current=Vu}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let o=1;o<16;o++)if(u[o]!==this.current[o]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},y.aO=iu,y.aP=class extends Na{constructor(u,o){super(u,o),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},y.aQ=class extends Na{constructor(u,o){super(u,o),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},y.aR=xc,y.aS=function(u,o,h,g,w,M,I){var O=1/(o-h),B=1/(g-w),$=1/(M-I);return u[0]=-2*O,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*B,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*$,u[11]=0,u[12]=(o+h)*O,u[13]=(w+g)*B,u[14]=(I+M)*$,u[15]=1,u},y.aT=Pi,y.aU=Of,y.aV=class extends v{},y.aW=Rp,y.aX=class extends D{},y.aY=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},y.aZ=Nf,y.a_=St,y.aa=function(u){const o={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,g,w,M)=>{const I=w||M;return o[g]=!I||I.toLowerCase(),""}),o["max-age"]){const h=parseInt(o["max-age"],10);isNaN(h)?delete o["max-age"]:o["max-age"]=h}return o},y.ab=function(u,o){const h=[];for(const g in u)g in o||h.push(g);return h},y.ac=function(u){if(null==hn){const o=u.navigator?u.navigator.userAgent:null;hn=!!u.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return hn},y.ad=ni,y.ae=function(u,o,h){var g=Math.sin(h),w=Math.cos(h),M=o[0],I=o[1],O=o[2],B=o[3],$=o[4],Y=o[5],ee=o[6],re=o[7];return o!==u&&(u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[0]=M*w+$*g,u[1]=I*w+Y*g,u[2]=O*w+ee*g,u[3]=B*w+re*g,u[4]=$*w-M*g,u[5]=Y*w-I*g,u[6]=ee*w-O*g,u[7]=re*w-B*g,u},y.af=function(u){var o=new bh(16);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],o[9]=u[9],o[10]=u[10],o[11]=u[11],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15],o},y.ag=ys,y.ah=function(u,o){let h=0,g=0;if("constant"===u.kind)g=u.layoutSize;else if("source"!==u.kind){const{interpolationType:w,minZoom:M,maxZoom:I}=u,O=w?ni(fs.interpolationFactor(w,o,M,I),0,1):0;"camera"===u.kind?g=ps.number(u.minSize,u.maxSize,O):h=O}return{uSizeT:h,uSize:g}},y.aj=function(u,{uSize:o,uSizeT:h},{lowerSize:g,upperSize:w}){return"source"===u.kind?g/Ml:"composite"===u.kind?ps.number(g/Ml,w/Ml,h):o},y.ak=Nh,y.al=function(u,o,h,g){const w=o.y-u.y,M=o.x-u.x,I=g.y-h.y,O=g.x-h.x,B=I*M-O*w;if(0===B)return null;const $=(O*(u.y-h.y)-I*(u.x-h.x))/B;return new Ue(u.x+$*M,u.y+$*w)},y.am=Bd,y.an=Af,y.ao=Ws,y.ap=Ur,y.ar=Ld,y.as=function(u,o){var h=o[0],g=o[1],w=o[2],M=o[3],I=o[4],O=o[5],B=o[6],$=o[7],Y=o[8],ee=o[9],re=o[10],ce=o[11],de=o[12],_e=o[13],Ie=o[14],ke=o[15],$e=h*O-g*I,Fe=h*B-w*I,qe=h*$-M*I,rt=g*B-w*O,mt=g*$-M*O,Ut=w*$-M*B,tn=Y*_e-ee*de,$t=Y*Ie-re*de,jt=Y*ke-ce*de,Pt=ee*Ie-re*_e,nn=ee*ke-ce*_e,Ft=re*ke-ce*Ie,Et=$e*Ft-Fe*nn+qe*Pt+rt*jt-mt*$t+Ut*tn;return Et?(u[0]=(O*Ft-B*nn+$*Pt)*(Et=1/Et),u[1]=(w*nn-g*Ft-M*Pt)*Et,u[2]=(_e*Ut-Ie*mt+ke*rt)*Et,u[3]=(re*mt-ee*Ut-ce*rt)*Et,u[4]=(B*jt-I*Ft-$*$t)*Et,u[5]=(h*Ft-w*jt+M*$t)*Et,u[6]=(Ie*qe-de*Ut-ke*Fe)*Et,u[7]=(Y*Ut-re*qe+ce*Fe)*Et,u[8]=(I*nn-O*jt+$*tn)*Et,u[9]=(g*jt-h*nn-M*tn)*Et,u[10]=(de*mt-_e*qe+ke*$e)*Et,u[11]=(ee*qe-Y*mt-ce*$e)*Et,u[12]=(O*$t-I*Pt-B*tn)*Et,u[13]=(h*Pt-g*$t+w*tn)*Et,u[14]=(_e*Fe-de*rt-Ie*$e)*Et,u[15]=(Y*rt-ee*Fe+re*$e)*Et,u):null},y.at=oi,y.au=Ad,y.av=pm,y.aw=function(){const u={},o=ze.$version;for(const h in ze.$root){const g=ze.$root[h];if(g.required){let w=null;w="version"===h?o:"array"===g.type?[]:{},null!=w&&(u[h]=w)}}return u},y.ax=an,y.ay=Oa,y.az=_r,y.b=function(u,o){const h=new Blob([new Uint8Array(u)],{type:"image/png"});createImageBitmap(h).then(g=>{o(null,g)}).catch(g=>{o(new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},y.b0=ns,y.b1=function(u,o){var h=u[0],g=u[1],w=u[2],M=u[3],I=u[4],O=u[5],B=u[6],$=u[7],Y=u[8],ee=u[9],re=u[10],ce=u[11],de=u[12],_e=u[13],Ie=u[14],ke=u[15],$e=o[0],Fe=o[1],qe=o[2],rt=o[3],mt=o[4],Ut=o[5],tn=o[6],$t=o[7],jt=o[8],Pt=o[9],nn=o[10],Ft=o[11],Et=o[12],Sn=o[13],un=o[14],si=o[15];return Math.abs(h-$e)<=pi*Math.max(1,Math.abs(h),Math.abs($e))&&Math.abs(g-Fe)<=pi*Math.max(1,Math.abs(g),Math.abs(Fe))&&Math.abs(w-qe)<=pi*Math.max(1,Math.abs(w),Math.abs(qe))&&Math.abs(M-rt)<=pi*Math.max(1,Math.abs(M),Math.abs(rt))&&Math.abs(I-mt)<=pi*Math.max(1,Math.abs(I),Math.abs(mt))&&Math.abs(O-Ut)<=pi*Math.max(1,Math.abs(O),Math.abs(Ut))&&Math.abs(B-tn)<=pi*Math.max(1,Math.abs(B),Math.abs(tn))&&Math.abs($-$t)<=pi*Math.max(1,Math.abs($),Math.abs($t))&&Math.abs(Y-jt)<=pi*Math.max(1,Math.abs(Y),Math.abs(jt))&&Math.abs(ee-Pt)<=pi*Math.max(1,Math.abs(ee),Math.abs(Pt))&&Math.abs(re-nn)<=pi*Math.max(1,Math.abs(re),Math.abs(nn))&&Math.abs(ce-Ft)<=pi*Math.max(1,Math.abs(ce),Math.abs(Ft))&&Math.abs(de-Et)<=pi*Math.max(1,Math.abs(de),Math.abs(Et))&&Math.abs(_e-Sn)<=pi*Math.max(1,Math.abs(_e),Math.abs(Sn))&&Math.abs(Ie-un)<=pi*Math.max(1,Math.abs(Ie),Math.abs(un))&&Math.abs(ke-si)<=pi*Math.max(1,Math.abs(ke),Math.abs(si))},y.b2=function(u,o){return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[4]=o[4],u[5]=o[5],u[6]=o[6],u[7]=o[7],u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u},y.b3=function(u,o,h){return u[0]=o[0]*h[0],u[1]=o[1]*h[1],u[2]=o[2]*h[2],u[3]=o[3]*h[3],u},y.b4=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]+u[3]*o[3]},y.b5=Sr,y.b6=Nd,y.b7=Wp,y.b8=function(u,o,h,g,w){var M,I=1/Math.tan(o/2);return u[0]=I/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=I,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,null!=w&&w!==1/0?(u[10]=(w+g)*(M=1/(g-w)),u[14]=2*w*g*M):(u[10]=-1,u[14]=-2*g),u},y.b9=function(u,o,h){var g=Math.sin(h),w=Math.cos(h),M=o[4],I=o[5],O=o[6],B=o[7],$=o[8],Y=o[9],ee=o[10],re=o[11];return o!==u&&(u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[4]=M*w+$*g,u[5]=I*w+Y*g,u[6]=O*w+ee*g,u[7]=B*w+re*g,u[8]=$*w-M*g,u[9]=Y*w-I*g,u[10]=ee*w-O*g,u[11]=re*w-B*g,u},y.bA=lt,y.bB=Td,y.bC=zs,y.bD=ue,y.ba=gt,y.bb=Zi,y.bc=function(u,o){return u[0]=o[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=o[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=o[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},y.bd=class extends gs{},y.be=Qu,y.bf=t_,y.bg=dv,y.bi=Er,y.bj=function(u,o,h=!1){if(ko===wl||ko===Jc||ko===Cl)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ya=Ci.resolveURL(u),ko=wl,Yl=o,x(),h||J()},y.bk=U,y.bl=function(u,o){const h={};for(let w=0;w<u.length;w++){const M=o&&o[u[w].id]||qa(u[w]);o&&(o[u[w].id]=M);let I=h[M];I||(I=h[M]=[]),I.push(u[w])}const g=[];for(const w in h)g.push(h[w]);return g},y.bm=Xt,y.bn=n_,y.bo=zd,y.bp=qg,y.bq=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=eo/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const o=u.bucket.layers[0],h=o.layout,g=o._unevaluatedLayout._values,w={layoutIconSize:g["icon-size"].possiblyEvaluate(new Pe(u.bucket.zoom+1),u.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Pe(u.bucket.zoom+1),u.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Pe(18))};if("composite"===u.bucket.textSizeData.kind){const{minZoom:$,maxZoom:Y}=u.bucket.textSizeData;w.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Pe($),u.canonical),g["text-size"].possiblyEvaluate(new Pe(Y),u.canonical)]}if("composite"===u.bucket.iconSizeData.kind){const{minZoom:$,maxZoom:Y}=u.bucket.iconSizeData;w.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Pe($),u.canonical),g["icon-size"].possiblyEvaluate(new Pe(Y),u.canonical)]}const M=h.get("text-line-height")*Ur,I="viewport"!==h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),O=h.get("text-keep-upright"),B=h.get("text-size");for(const $ of u.bucket.features){const Y=h.get("text-font").evaluate($,{},u.canonical).join(","),ee=B.evaluate($,{},u.canonical),re=w.layoutTextSize.evaluate($,{},u.canonical),ce=w.layoutIconSize.evaluate($,{},u.canonical),de={horizontal:{},vertical:void 0},_e=$.text;let Ie,ke=[0,0];if(_e){const qe=_e.toString(),rt=h.get("text-letter-spacing").evaluate($,{},u.canonical)*Ur,mt=ua(qe)?rt:0,Ut=h.get("text-anchor").evaluate($,{},u.canonical),tn=$h(o,$,u.canonical);if(!tn){const Ft=h.get("text-radial-offset").evaluate($,{},u.canonical);ke=Ft?Hh(Ut,[Ft*Ur,um]):h.get("text-offset").evaluate($,{},u.canonical).map(Et=>Et*Ur)}let $t=I?"center":h.get("text-justify").evaluate($,{},u.canonical);const jt=h.get("symbol-placement"),Pt="point"===jt?h.get("text-max-width").evaluate($,{},u.canonical)*Ur:0,nn=()=>{u.bucket.allowVerticalPlacement&&Ra(qe)&&(de.vertical=Lh(_e,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Pt,M,Ut,"left",mt,ke,y.ai.vertical,!0,jt,re,ee))};if(!I&&tn){const Ft=new Set;if("auto"===$t)for(let Sn=0;Sn<tn.values.length;Sn+=2)Ft.add(oi(tn.values[Sn]));else Ft.add($t);let Et=!1;for(const Sn of Ft)if(!de.horizontal[Sn])if(Et)de.horizontal[Sn]=de.horizontal[0];else{const un=Lh(_e,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Pt,M,"center",Sn,mt,ke,y.ai.horizontal,!1,jt,re,ee);un&&(de.horizontal[Sn]=un,Et=1===un.positionedLines.length)}nn()}else{"auto"===$t&&($t=oi(Ut));const Ft=Lh(_e,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Pt,M,Ut,$t,mt,ke,y.ai.horizontal,!1,jt,re,ee);Ft&&(de.horizontal[$t]=Ft),nn(),Ra(qe)&&I&&O&&(de.vertical=Lh(_e,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Pt,M,Ut,$t,mt,ke,y.ai.vertical,!1,jt,re,ee))}}let $e=!1;if($.icon&&$.icon.name){const qe=u.imageMap[$.icon.name];qe&&(Ie=rm(u.imagePositions[$.icon.name],h.get("icon-offset").evaluate($,{},u.canonical),h.get("icon-anchor").evaluate($,{},u.canonical)),$e=!!qe.sdf,void 0===u.bucket.sdfIcons?u.bucket.sdfIcons=$e:u.bucket.sdfIcons!==$e&&Di("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==u.bucket.pixelRatio||0!==h.get("icon-rotate").constantOr(1))&&(u.bucket.iconsNeedLinear=!0))}const Fe=dm(de.horizontal)||de.vertical;u.bucket.iconsInText=!!Fe&&Fe.iconsInText,(Fe||Ie)&&a_(u.bucket,$,de,Ie,u.imageMap,w,re,ce,ke,$e,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},y.br=Op,y.bs=Tp,y.bt=Wf,y.bu=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return 0===u.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},y.bv=nm,y.bw=Ec,y.bx=function(u,o,h,g,w){return Ve(this,void 0,void 0,function*(){if(Zt())try{return yield xn(u,o,h,g,w)}catch{}return function(M,I,O,B,$){const Y=M.width,ee=M.height;Ii&&qn||(Ii=new OffscreenCanvas(Y,ee),qn=Ii.getContext("2d",{willReadFrequently:!0})),Ii.width=Y,Ii.height=ee,qn.drawImage(M,0,0,Y,ee);const re=qn.getImageData(I,O,B,$);return qn.clearRect(0,0,Y,ee),re.data}(u,o,h,g,w)})},y.by=Xu,y.bz=pe,y.c=Si,y.d=function(u,o){const h=new Image;h.onload=()=>{o(null,h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=wa})},h.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(u)],{type:"image/png"});h.src=u.byteLength?URL.createObjectURL(g):wa},y.e=Ui,y.f=function(u,o){return Zr(Ui(u,{type:"json"}),o)},y.g=ii,y.h=Ci,y.i=gn,y.j=Ke,y.k=Br,y.l=Ho,y.m=Zr,y.n=function(u){return new nm(u).readFields(Ph,[])},y.o=function(u,o,h){if(!u.length)return h(null,[]);let g=u.length;const w=new Array(u.length);let M=null;u.forEach((I,O)=>{o(I,(B,$)=>{B&&(M=B),w[O]=$,0==--g&&h(M,w)})})},y.p=Vp,y.q=wc,y.r=Ir,y.s=$o,y.t=yp,y.u=Rt,y.v=ze,y.w=Di,y.x=Ki,y.y=ka,y.z=function([u,o,h]){return o+=90,o*=Math.PI/180,h*=Math.PI/180,{x:u*Math.cos(o)*Math.sin(h),y:u*Math.sin(o)*Math.sin(h),z:u*Math.cos(h)}}}),V(0,function(y){class Ve{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,oe){for(const ve of ie){this._layerConfigs[ve.id]=ve;const De=this._layers[ve.id]=y.aC(ve);De._featureFilter=y.a6(De.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(const ve of oe)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};const me=y.bl(Object.values(this._layerConfigs),this.keyCache);for(const ve of me){const De=ve.map(ut=>this._layers[ut.id]),Ge=De[0];if("none"===Ge.visibility)continue;const Oe=Ge.source||"";let Le=this.familiesBySource[Oe];Le||(Le=this.familiesBySource[Oe]={});const Re=Ge.sourceLayer||"_geojsonTileLayer";let ht=Le[Re];ht||(ht=Le[Re]=[]),ht.push(De)}}}class pe{constructor(ie){const oe={},me=[];for(const Oe in ie){const Le=ie[Oe],Re=oe[Oe]={};for(const ht in Le){const ut=Le[+ht];if(!ut||0===ut.bitmap.width||0===ut.bitmap.height)continue;const Xe={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};me.push(Xe),Re[ht]={rect:Xe,metrics:ut.metrics}}}const{w:ve,h:De}=y.p(me),Ge=new y.q({width:ve||1,height:De||1});for(const Oe in ie){const Le=ie[Oe];for(const Re in Le){const ht=Le[+Re];if(!ht||0===ht.bitmap.width||0===ht.bitmap.height)continue;const ut=oe[Oe][Re].rect;y.q.copy(ht.bitmap,Ge,{x:0,y:0},{x:ut.x+1,y:ut.y+1},ht.bitmap)}}this.image=Ge,this.positions=oe}}y.bm("GlyphAtlas",pe);class lt{constructor(ie){this.tileID=new y.O(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(ie,oe,me,ve,De){this.status="parsing",this.data=ie,this.collisionBoxArray=new y.a3;const Ge=new y.bn(Object.keys(ie.layers).sort()),Oe=new y.bo(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const Le={},Re={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me},ht=oe.familiesBySource[this.source];for(const li in ht){const ci=ie.layers[li];if(!ci)continue;1===ci.version&&y.w(`Vector tile source "${this.source}" layer "${li}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ir=Ge.encode(li),Ni=[];for(let yr=0;yr<ci.length;yr++){const ur=ci.feature(yr),Wr=Oe.getId(ur,li);Ni.push({feature:ur,id:Wr,index:yr,sourceLayerIndex:ir})}for(const yr of ht[li]){const ur=yr[0];ur.source!==this.source&&y.w(`layer.source = ${ur.source} does not equal this.source = ${this.source}`),ur.minzoom&&this.zoom<Math.floor(ur.minzoom)||ur.maxzoom&&this.zoom>=ur.maxzoom||"none"!==ur.visibility&&(Ce(yr,this.zoom,me),(Le[ur.id]=ur.createBucket({index:Oe.bucketLayerIDs.length,layers:yr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ir,sourceID:this.source})).populate(Ni,Re,this.tileID.canonical),Oe.bucketLayerIDs.push(yr.map(Wr=>Wr.id)))}}let ut,Xe,Kt,sn;const Ht=y.aH(Re.glyphDependencies,li=>Object.keys(li).map(Number));this.inFlightDependencies.forEach(li=>li?.cancel()),this.inFlightDependencies=[];const Qt=++this.dependencySentinel;Object.keys(Ht).length?this.inFlightDependencies.push(ve.send("getGlyphs",{uid:this.uid,stacks:Ht,source:this.source,tileID:this.tileID,type:"glyphs"},(li,ci)=>{Qt===this.dependencySentinel&&(ut||(ut=li,Xe=ci,di.call(this)))})):Xe={};const Vt=Object.keys(Re.iconDependencies);Vt.length?this.inFlightDependencies.push(ve.send("getImages",{icons:Vt,source:this.source,tileID:this.tileID,type:"icons"},(li,ci)=>{Qt===this.dependencySentinel&&(ut||(ut=li,Kt=ci,di.call(this)))})):Kt={};const mi=Object.keys(Re.patternDependencies);function di(){if(ut)return De(ut);if(Xe&&Kt&&sn){const li=new pe(Xe),ci=new y.bp(Kt,sn);for(const ir in Le){const Ni=Le[ir];Ni instanceof y.a4?(Ce(Ni.layers,this.zoom,me),y.bq({bucket:Ni,glyphMap:Xe,glyphPositions:li.positions,imageMap:Kt,imagePositions:ci.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ni.hasPattern&&(Ni instanceof y.br||Ni instanceof y.bs||Ni instanceof y.bt)&&(Ce(Ni.layers,this.zoom,me),Ni.addFeatures(Re,this.tileID.canonical,ci.patternPositions))}this.status="done",De(null,{buckets:Object.values(Le).filter(ir=>!ir.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:li.image,imageAtlas:ci,glyphMap:this.returnDependencies?Xe:null,iconMap:this.returnDependencies?Kt:null,glyphPositions:this.returnDependencies?li.positions:null})}}mi.length?this.inFlightDependencies.push(ve.send("getImages",{icons:mi,source:this.source,tileID:this.tileID,type:"patterns"},(li,ci)=>{Qt===this.dependencySentinel&&(ut||(ut=li,sn=ci,di.call(this)))})):sn={},di.call(this)}}function Ce(we,ie,oe){const me=new y.a8(ie);for(const ve of we)ve.recalculate(me,oe)}function Ue(we,ie){const oe=y.l(we.request,(me,ve,De,Ge)=>{if(me)ie(me);else if(ve)try{const Oe=new y.bw.VectorTile(new y.bv(ve));ie(null,{vectorTile:Oe,rawData:ve,cacheControl:De,expires:Ge})}catch(Oe){const Le=new Uint8Array(ve);let Re=`Unable to parse the tile at ${we.request.url}, `;Re+=31===Le[0]&&139===Le[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Oe.messge}`,ie(new Error(Re))}});return()=>{oe.cancel(),ie()}}class We{constructor(ie,oe,me,ve){this.actor=ie,this.layerIndex=oe,this.availableImages=me,this.loadVectorData=ve||Ue,this.fetching={},this.loading={},this.loaded={}}loadTile(ie,oe){const me=ie.uid;this.loading||(this.loading={});const ve=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new y.bu(ie.request),De=this.loading[me]=new lt(ie);De.abort=this.loadVectorData(ie,(Ge,Oe)=>{if(delete this.loading[me],Ge||!Oe)return De.status="done",this.loaded[me]=De,oe(Ge);const Le=Oe.rawData,Re={};Oe.expires&&(Re.expires=Oe.expires),Oe.cacheControl&&(Re.cacheControl=Oe.cacheControl);const ht={};if(ve){const ut=ve.finish();ut&&(ht.resourceTiming=JSON.parse(JSON.stringify(ut)))}De.vectorTile=Oe.vectorTile,De.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(ut,Xe)=>{if(delete this.fetching[me],ut||!Xe)return oe(ut);oe(null,y.e({rawTileData:Le.slice(0)},Xe,Re,ht))}),this.loaded=this.loaded||{},this.loaded[me]=De,this.fetching[me]={rawTileData:Le,cacheControl:Re,resourceTiming:ht}})}reloadTile(ie,oe){const me=this.loaded,ve=ie.uid;if(me&&me[ve]){const De=me[ve];De.showCollisionBoxes=ie.showCollisionBoxes,"parsing"===De.status?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ge,Oe)=>{if(Ge||!Oe)return oe(Ge,Oe);let Le;if(this.fetching[ve]){const{rawTileData:Re,cacheControl:ht,resourceTiming:ut}=this.fetching[ve];delete this.fetching[ve],Le=y.e({rawTileData:Re.slice(0)},Oe,ht,ut)}else Le=Oe;oe(null,Le)}):"done"===De.status&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,oe):oe())}}abortTile(ie,oe){const me=this.loading,ve=ie.uid;me&&me[ve]&&me[ve].abort&&(me[ve].abort(),delete me[ve]),oe()}removeTile(ie,oe){const me=this.loaded,ve=ie.uid;me&&me[ve]&&delete me[ve],oe()}}class Ye{constructor(){this.loaded={}}loadTile(ie,oe){return y._(this,void 0,void 0,function*(){const{uid:me,encoding:ve,rawImageData:De,redFactor:Ge,greenFactor:Oe,blueFactor:Le,baseShift:Re}=ie,ht=De.width+2,ut=De.height+2,Xe=y.a(De)?new y.R({width:ht,height:ut},yield y.bx(De,-1,-1,ht,ut)):De,Kt=new y.by(me,Xe,ve,Ge,Oe,Le,Re);this.loaded=this.loaded||{},this.loaded[me]=Kt,oe(null,Kt)})}removeTile(ie){const oe=this.loaded,me=ie.uid;oe&&oe[me]&&delete oe[me]}}function ct(we,ie){if(0!==we.length){it(we[0],ie);for(var oe=1;oe<we.length;oe++)it(we[oe],!ie)}}function it(we,ie){for(var oe=0,me=0,ve=0,De=we.length,Ge=De-1;ve<De;Ge=ve++){var Oe=(we[ve][0]-we[Ge][0])*(we[Ge][1]+we[ve][1]),Le=oe+Oe;me+=Math.abs(oe)>=Math.abs(Oe)?oe-Le+Oe:Oe-Le+oe,oe=Le}oe+me>=0!=!!ie&&we.reverse()}var Mt=y.bz(function we(ie,oe){var me,ve=ie&&ie.type;if("FeatureCollection"===ve)for(me=0;me<ie.features.length;me++)we(ie.features[me],oe);else if("GeometryCollection"===ve)for(me=0;me<ie.geometries.length;me++)we(ie.geometries[me],oe);else if("Feature"===ve)we(ie.geometry,oe);else if("Polygon"===ve)ct(ie.coordinates,oe);else if("MultiPolygon"===ve)for(me=0;me<ie.coordinates.length;me++)ct(ie.coordinates[me],oe);return ie});const Rn=y.bw.VectorTileFeature.prototype.toGeoJSON;var Zt={exports:{}},gt=y.bA,Zi=y.bw.VectorTileFeature,ni=Sr;function Sr(we,ie){this.options=ie||{},this.features=we,this.length=we.length}function Ui(we,ie){this.id="number"==typeof we.id?we.id:void 0,this.type=we.type,this.rawGeometry=1===we.type?[we.geometry]:we.geometry,this.properties=we.tags,this.extent=ie||4096}Sr.prototype.feature=function(we){return new Ui(this.features[we],this.options.extent)},Ui.prototype.loadGeometry=function(){var we=this.rawGeometry;this.geometry=[];for(var ie=0;ie<we.length;ie++){for(var oe=we[ie],me=[],ve=0;ve<oe.length;ve++)me.push(new gt(oe[ve][0],oe[ve][1]));this.geometry.push(me)}return this.geometry},Ui.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var we=this.geometry,ie=1/0,oe=-1/0,me=1/0,ve=-1/0,De=0;De<we.length;De++)for(var Ge=we[De],Oe=0;Oe<Ge.length;Oe++){var Le=Ge[Oe];ie=Math.min(ie,Le.x),oe=Math.max(oe,Le.x),me=Math.min(me,Le.y),ve=Math.max(ve,Le.y)}return[ie,me,oe,ve]},Ui.prototype.toGeoJSON=Zi.prototype.toGeoJSON;var fn=y.bB,hi=ni;function In(we){var ie=new fn;return function(oe,me){for(var ve in oe.layers)me.writeMessage(3,bn,oe.layers[ve])}(we,ie),ie.finish()}function bn(we,ie){var oe;ie.writeVarintField(15,we.version||1),ie.writeStringField(1,we.name||""),ie.writeVarintField(5,we.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<we.length;oe++)me.feature=we.feature(oe),ie.writeMessage(2,Ti,me);var ve=me.keys;for(oe=0;oe<ve.length;oe++)ie.writeStringField(3,ve[oe]);var De=me.values;for(oe=0;oe<De.length;oe++)ie.writeMessage(4,hn,De[oe])}function Ti(we,ie){var oe=we.feature;void 0!==oe.id&&ie.writeVarintField(1,oe.id),ie.writeMessage(2,Di,we),ie.writeVarintField(3,oe.type),ie.writeMessage(4,gn,oe)}function Di(we,ie){var oe=we.feature,me=we.keys,ve=we.values,De=we.keycache,Ge=we.valuecache;for(var Oe in oe.properties){var Le=oe.properties[Oe],Re=De[Oe];if(null!==Le){void 0===Re&&(me.push(Oe),De[Oe]=Re=me.length-1),ie.writeVarint(Re);var ht=typeof Le;"string"!==ht&&"boolean"!==ht&&"number"!==ht&&(Le=JSON.stringify(Le));var ut=ht+":"+Le,Xe=Ge[ut];void 0===Xe&&(ve.push(Le),Ge[ut]=Xe=ve.length-1),ie.writeVarint(Xe)}}}function Jn(we,ie){return(ie<<3)+(7&we)}function Fn(we){return we<<1^we>>31}function gn(we,ie){for(var oe=we.loadGeometry(),me=we.type,ve=0,De=0,Ge=oe.length,Oe=0;Oe<Ge;Oe++){var Le=oe[Oe],Re=1;1===me&&(Re=Le.length),ie.writeVarint(Jn(1,Re));for(var ht=3===me?Le.length-1:Le.length,ut=0;ut<ht;ut++){1===ut&&1!==me&&ie.writeVarint(Jn(2,ht-1));var Xe=Le[ut].x-ve,Kt=Le[ut].y-De;ie.writeVarint(Fn(Xe)),ie.writeVarint(Fn(Kt)),ve+=Xe,De+=Kt}3===me&&ie.writeVarint(Jn(7,1))}}function hn(we,ie){var oe=typeof we;"string"===oe?ie.writeStringField(1,we):"boolean"===oe?ie.writeBooleanField(7,we):"number"===oe&&(we%1!=0?ie.writeDoubleField(3,we):we<0?ie.writeSVarintField(6,we):ie.writeVarintField(5,we))}Zt.exports=In,Zt.exports.fromVectorTileJs=In,Zt.exports.fromGeojsonVt=function(we,ie){ie=ie||{};var oe={};for(var me in we)oe[me]=new hi(we[me].features,ie),oe[me].name=me,oe[me].version=ie.version,oe[me].extent=ie.extent;return In({layers:oe})},Zt.exports.GeoJSONWrapper=hi;var Un=y.bz(Zt.exports);const wa={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:we=>we},xn=Math.fround||(Ii=new Float32Array(1),we=>(Ii[0]=+we,Ii[0]));var Ii;const qn=3,ji=5,Ji=6;class Ci{constructor(ie){this.options=Object.assign(Object.create(wa),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:oe,minZoom:me,maxZoom:ve}=this.options;oe&&console.time("total time");const De=`prepare ${ie.length} points`;oe&&console.time(De),this.points=ie;const Ge=[];for(let Le=0;Le<ie.length;Le++){const Re=ie[Le];if(!Re.geometry)continue;const[ht,ut]=Re.geometry.coordinates,Xe=xn(_r(ht)),Kt=xn(ii(ut));Ge.push(Xe,Kt,1/0,Le,-1,1),this.options.reduce&&Ge.push(0)}let Oe=this.trees[ve+1]=this._createTree(Ge);oe&&console.timeEnd(De);for(let Le=ve;Le>=me;Le--){const Re=+Date.now();Oe=this.trees[Le]=this._createTree(this._cluster(Oe,Le)),oe&&console.log("z%d: %d clusters in %dms",Le,Oe.numItems,+Date.now()-Re)}return oe&&console.timeEnd("total time"),this}getClusters(ie,oe){let me=((ie[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,ie[1]));let De=180===ie[2]?180:((ie[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)me=-180,De=180;else if(me>De){const ut=this.getClusters([me,ve,180,Ge],oe),Xe=this.getClusters([-180,ve,De,Ge],oe);return ut.concat(Xe)}const Oe=this.trees[this._limitZoom(oe)],Le=Oe.range(_r(me),ii(Ge),_r(De),ii(ve)),Re=Oe.data,ht=[];for(const ut of Le){const Xe=this.stride*ut;ht.push(Re[Xe+ji]>1?Si(Re,Xe,this.clusterProps):this.points[Re[Xe+qn]])}return ht}getChildren(ie){const oe=this._getOriginId(ie),me=this._getOriginZoom(ie),ve="No cluster with the specified id.",De=this.trees[me];if(!De)throw new Error(ve);const Ge=De.data;if(oe*this.stride>=Ge.length)throw new Error(ve);const Oe=this.options.radius/(this.options.extent*Math.pow(2,me-1)),Le=De.within(Ge[oe*this.stride],Ge[oe*this.stride+1],Oe),Re=[];for(const ht of Le){const ut=ht*this.stride;Ge[ut+4]===ie&&Re.push(Ge[ut+ji]>1?Si(Ge,ut,this.clusterProps):this.points[Ge[ut+qn]])}if(0===Re.length)throw new Error(ve);return Re}getLeaves(ie,oe,me){const ve=[];return this._appendLeaves(ve,ie,oe=oe||10,me=me||0,0),ve}getTile(ie,oe,me){const ve=this.trees[this._limitZoom(ie)],De=Math.pow(2,ie),{extent:Ge,radius:Oe}=this.options,Le=Oe/Ge,Re=(me-Le)/De,ht=(me+1+Le)/De,ut={features:[]};return this._addTileFeatures(ve.range((oe-Le)/De,Re,(oe+1+Le)/De,ht),ve.data,oe,me,De,ut),0===oe&&this._addTileFeatures(ve.range(1-Le/De,Re,1,ht),ve.data,De,me,De,ut),oe===De-1&&this._addTileFeatures(ve.range(0,Re,Le/De,ht),ve.data,-1,me,De,ut),ut.features.length?ut:null}getClusterExpansionZoom(ie){let oe=this._getOriginZoom(ie)-1;for(;oe<=this.options.maxZoom;){const me=this.getChildren(ie);if(oe++,1!==me.length)break;ie=me[0].properties.cluster_id}return oe}_appendLeaves(ie,oe,me,ve,De){const Ge=this.getChildren(oe);for(const Oe of Ge){const Le=Oe.properties;if(Le&&Le.cluster?De+Le.point_count<=ve?De+=Le.point_count:De=this._appendLeaves(ie,Le.cluster_id,me,ve,De):De<ve?De++:ie.push(Oe),ie.length===me)break}return De}_createTree(ie){const oe=new y.av(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<ie.length;me+=this.stride)oe.add(ie[me],ie[me+1]);return oe.finish(),oe.data=ie,oe}_addTileFeatures(ie,oe,me,ve,De,Ge){for(const Oe of ie){const Le=Oe*this.stride,Re=oe[Le+ji]>1;let ht,ut,Xe;if(Re)ht=Er(oe,Le,this.clusterProps),ut=oe[Le],Xe=oe[Le+1];else{const Ht=this.points[oe[Le+qn]];ht=Ht.properties;const[Qt,Vt]=Ht.geometry.coordinates;ut=_r(Qt),Xe=ii(Vt)}const Kt={type:1,geometry:[[Math.round(this.options.extent*(ut*De-me)),Math.round(this.options.extent*(Xe*De-ve))]],tags:ht};let sn;sn=Re||this.options.generateId?oe[Le+qn]:this.points[oe[Le+qn]].id,void 0!==sn&&(Kt.id=sn),Ge.features.push(Kt)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,oe){const{radius:me,extent:ve,reduce:De,minPoints:Ge}=this.options,Oe=me/(ve*Math.pow(2,oe)),Le=ie.data,Re=[],ht=this.stride;for(let ut=0;ut<Le.length;ut+=ht){if(Le[ut+2]<=oe)continue;Le[ut+2]=oe;const Xe=Le[ut],Kt=Le[ut+1],sn=ie.within(Le[ut],Le[ut+1],Oe),Ht=Le[ut+ji];let Qt=Ht;for(const Vt of sn){const mi=Vt*ht;Le[mi+2]>oe&&(Qt+=Le[mi+ji])}if(Qt>Ht&&Qt>=Ge){let Vt,mi=Xe*Ht,di=Kt*Ht,li=-1;const ci=((ut/ht|0)<<5)+(oe+1)+this.points.length;for(const ir of sn){const Ni=ir*ht;if(Le[Ni+2]<=oe)continue;Le[Ni+2]=oe;const yr=Le[Ni+ji];mi+=Le[Ni]*yr,di+=Le[Ni+1]*yr,Le[Ni+4]=ci,De&&(Vt||(Vt=this._map(Le,ut,!0),li=this.clusterProps.length,this.clusterProps.push(Vt)),De(Vt,this._map(Le,Ni)))}Le[ut+4]=ci,Re.push(mi/Qt,di/Qt,1/0,ci,-1,Qt),De&&Re.push(li)}else{for(let Vt=0;Vt<ht;Vt++)Re.push(Le[ut+Vt]);if(Qt>1)for(const Vt of sn){const mi=Vt*ht;if(!(Le[mi+2]<=oe)){Le[mi+2]=oe;for(let di=0;di<ht;di++)Re.push(Le[mi+di])}}}}return Re}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,oe,me){if(ie[oe+ji]>1){const Ge=this.clusterProps[ie[oe+Ji]];return me?Object.assign({},Ge):Ge}const ve=this.points[ie[oe+qn]].properties,De=this.options.map(ve);return me&&De===ve?Object.assign({},De):De}}function Si(we,ie,oe){return{type:"Feature",id:we[ie+qn],properties:Er(we,ie,oe),geometry:{type:"Point",coordinates:[(me=we[ie],360*(me-.5)),Yn(we[ie+1])]}};var me}function Er(we,ie,oe){const me=we[ie+ji],ve=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,De=we[ie+Ji],Ge=-1===De?{}:Object.assign({},oe[De]);return Object.assign(Ge,{cluster:!0,cluster_id:we[ie+qn],point_count:me,point_count_abbreviated:ve})}function _r(we){return we/360+.5}function ii(we){const ie=Math.sin(we*Math.PI/180),oe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return oe<0?0:oe>1?1:oe}function Yn(we){const ie=(180-360*we)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function Zr(we,ie,oe,me){for(var ve,De=me,Ge=oe-ie>>1,Oe=oe-ie,Le=we[ie],Re=we[ie+1],ht=we[oe],ut=we[oe+1],Xe=ie+3;Xe<oe;Xe+=3){var Kt=Ho(we[Xe],we[Xe+1],Le,Re,ht,ut);if(Kt>De)ve=Xe,De=Kt;else if(Kt===De){var sn=Math.abs(Xe-Ge);sn<Oe&&(ve=Xe,Oe=sn)}}De>me&&(ve-ie>3&&Zr(we,ie,ve,me),we[ve+2]=De,oe-ve>3&&Zr(we,ve,oe,me))}function Ho(we,ie,oe,me,ve,De){var Ge=ve-oe,Oe=De-me;if(0!==Ge||0!==Oe){var Le=((we-oe)*Ge+(ie-me)*Oe)/(Ge*Ge+Oe*Oe);Le>1?(oe=ve,me=De):Le>0&&(oe+=Ge*Le,me+=Oe*Le)}return(Ge=we-oe)*Ge+(Oe=ie-me)*Oe}function $o(we,ie,oe,me){var ve={id:void 0===we?null:we,type:ie,geometry:oe,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(De){var Ge=De.geometry,Oe=De.type;if("Point"===Oe||"MultiPoint"===Oe||"LineString"===Oe)Wi(De,Ge);else if("Polygon"===Oe||"MultiLineString"===Oe)for(var Le=0;Le<Ge.length;Le++)Wi(De,Ge[Le]);else if("MultiPolygon"===Oe)for(Le=0;Le<Ge.length;Le++)for(var Re=0;Re<Ge[Le].length;Re++)Wi(De,Ge[Le][Re])}(ve),ve}function Wi(we,ie){for(var oe=0;oe<ie.length;oe+=3)we.minX=Math.min(we.minX,ie[oe]),we.minY=Math.min(we.minY,ie[oe+1]),we.maxX=Math.max(we.maxX,ie[oe]),we.maxY=Math.max(we.maxY,ie[oe+1])}function Po(we,ie,oe,me){if(ie.geometry){var ve=ie.geometry.coordinates,De=ie.geometry.type,Ge=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),Oe=[],Le=ie.id;if(oe.promoteId?Le=ie.properties[oe.promoteId]:oe.generateId&&(Le=me||0),"Point"===De)Br(ve,Oe);else if("MultiPoint"===De)for(var Re=0;Re<ve.length;Re++)Br(ve[Re],Oe);else if("LineString"===De)Ke(ve,Oe,Ge,!1);else if("MultiLineString"===De){if(oe.lineMetrics){for(Re=0;Re<ve.length;Re++)Ke(ve[Re],Oe=[],Ge,!1),we.push($o(Le,"LineString",Oe,ie.properties));return}dt(ve,Oe,Ge,!1)}else if("Polygon"===De)dt(ve,Oe,Ge,!0);else{if("MultiPolygon"!==De){if("GeometryCollection"===De){for(Re=0;Re<ie.geometry.geometries.length;Re++)Po(we,{id:Le,geometry:ie.geometry.geometries[Re],properties:ie.properties},oe,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Re=0;Re<ve.length;Re++){var ht=[];dt(ve[Re],ht,Ge,!0),Oe.push(ht)}}we.push($o(Le,De,Oe,ie.properties))}}function Br(we,ie){ie.push(ze(we[0])),ie.push(kt(we[1])),ie.push(0)}function Ke(we,ie,oe,me){for(var ve,De,Ge=0,Oe=0;Oe<we.length;Oe++){var Le=ze(we[Oe][0]),Re=kt(we[Oe][1]);ie.push(Le),ie.push(Re),ie.push(0),Oe>0&&(Ge+=me?(ve*Re-Le*De)/2:Math.sqrt(Math.pow(Le-ve,2)+Math.pow(Re-De,2))),ve=Le,De=Re}var ht=ie.length-3;ie[2]=1,Zr(ie,0,ht,oe),ie[ht+2]=1,ie.size=Math.abs(Ge),ie.start=0,ie.end=ie.size}function dt(we,ie,oe,me){for(var ve=0;ve<we.length;ve++){var De=[];Ke(we[ve],De,oe,me),ie.push(De)}}function ze(we){return we/360+.5}function kt(we){var ie=Math.sin(we*Math.PI/180),oe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return oe<0?0:oe>1?1:oe}function xi(we,ie,oe,me,ve,De,Ge,Oe){if(me/=ie,De>=(oe/=ie)&&Ge<me)return we;if(Ge<oe||De>=me)return null;for(var Le=[],Re=0;Re<we.length;Re++){var ht=we[Re],ut=ht.geometry,Xe=ht.type,Kt=0===ve?ht.minX:ht.minY,sn=0===ve?ht.maxX:ht.maxY;if(Kt>=oe&&sn<me)Le.push(ht);else if(!(sn<oe||Kt>=me)){var Ht=[];if("Point"===Xe||"MultiPoint"===Xe)Dn(ut,Ht,oe,me,ve);else if("LineString"===Xe)an(ut,Ht,oe,me,ve,!1,Oe.lineMetrics);else if("MultiLineString"===Xe)kr(ut,Ht,oe,me,ve,!1);else if("Polygon"===Xe)kr(ut,Ht,oe,me,ve,!0);else if("MultiPolygon"===Xe)for(var Qt=0;Qt<ut.length;Qt++){var Vt=[];kr(ut[Qt],Vt,oe,me,ve,!0),Vt.length&&Ht.push(Vt)}if(Ht.length){if(Oe.lineMetrics&&"LineString"===Xe){for(Qt=0;Qt<Ht.length;Qt++)Le.push($o(ht.id,Xe,Ht[Qt],ht.tags));continue}"LineString"!==Xe&&"MultiLineString"!==Xe||(1===Ht.length?(Xe="LineString",Ht=Ht[0]):Xe="MultiLineString"),"Point"!==Xe&&"MultiPoint"!==Xe||(Xe=3===Ht.length?"Point":"MultiPoint"),Le.push($o(ht.id,Xe,Ht,ht.tags))}}}return Le.length?Le:null}function Dn(we,ie,oe,me,ve){for(var De=0;De<we.length;De+=3){var Ge=we[De+ve];Ge>=oe&&Ge<=me&&(ie.push(we[De]),ie.push(we[De+1]),ie.push(we[De+2]))}}function an(we,ie,oe,me,ve,De,Ge){for(var Oe,Le,Re=Gn(we),ht=0===ve?Mn:qi,ut=we.start,Xe=0;Xe<we.length-3;Xe+=3){var Kt=we[Xe],sn=we[Xe+1],Ht=we[Xe+2],Qt=we[Xe+3],Vt=we[Xe+4],mi=0===ve?Kt:sn,di=0===ve?Qt:Vt,li=!1;Ge&&(Oe=Math.sqrt(Math.pow(Kt-Qt,2)+Math.pow(sn-Vt,2))),mi<oe?di>oe&&(Le=ht(Re,Kt,sn,Qt,Vt,oe),Ge&&(Re.start=ut+Oe*Le)):mi>me?di<me&&(Le=ht(Re,Kt,sn,Qt,Vt,me),Ge&&(Re.start=ut+Oe*Le)):Or(Re,Kt,sn,Ht),di<oe&&mi>=oe&&(Le=ht(Re,Kt,sn,Qt,Vt,oe),li=!0),di>me&&mi<=me&&(Le=ht(Re,Kt,sn,Qt,Vt,me),li=!0),!De&&li&&(Ge&&(Re.end=ut+Oe*Le),ie.push(Re),Re=Gn(we)),Ge&&(ut+=Oe)}var ci=we.length-3;Kt=we[ci],sn=we[ci+1],Ht=we[ci+2],(mi=0===ve?Kt:sn)>=oe&&mi<=me&&Or(Re,Kt,sn,Ht),ci=Re.length-3,De&&ci>=3&&(Re[ci]!==Re[0]||Re[ci+1]!==Re[1])&&Or(Re,Re[0],Re[1],Re[2]),Re.length&&ie.push(Re)}function Gn(we){var ie=[];return ie.size=we.size,ie.start=we.start,ie.end=we.end,ie}function kr(we,ie,oe,me,ve,De){for(var Ge=0;Ge<we.length;Ge++)an(we[Ge],ie,oe,me,ve,De,!1)}function Or(we,ie,oe,me){we.push(ie),we.push(oe),we.push(me)}function Mn(we,ie,oe,me,ve,De){var Ge=(De-ie)/(me-ie);return we.push(De),we.push(oe+(ve-oe)*Ge),we.push(1),Ge}function qi(we,ie,oe,me,ve,De){var Ge=(De-oe)/(ve-oe);return we.push(ie+(me-ie)*Ge),we.push(De),we.push(1),Ge}function Cn(we,ie){for(var oe=[],me=0;me<we.length;me++){var ve,De=we[me],Ge=De.type;if("Point"===Ge||"MultiPoint"===Ge||"LineString"===Ge)ve=yn(De.geometry,ie);else if("MultiLineString"===Ge||"Polygon"===Ge){ve=[];for(var Oe=0;Oe<De.geometry.length;Oe++)ve.push(yn(De.geometry[Oe],ie))}else if("MultiPolygon"===Ge)for(ve=[],Oe=0;Oe<De.geometry.length;Oe++){for(var Le=[],Re=0;Re<De.geometry[Oe].length;Re++)Le.push(yn(De.geometry[Oe][Re],ie));ve.push(Le)}oe.push($o(De.id,Ge,ve,De.tags))}return oe}function yn(we,ie){var oe=[];oe.size=we.size,void 0!==we.start&&(oe.start=we.start,oe.end=we.end);for(var me=0;me<we.length;me+=3)oe.push(we[me]+ie,we[me+1],we[me+2]);return oe}function It(we,ie){if(we.transformed)return we;var oe,me,ve,De=1<<we.z,Ge=we.x,Oe=we.y;for(oe=0;oe<we.features.length;oe++){var Le=we.features[oe],Re=Le.geometry,ht=Le.type;if(Le.geometry=[],1===ht)for(me=0;me<Re.length;me+=2)Le.geometry.push(Ko(Re[me],Re[me+1],ie,De,Ge,Oe));else for(me=0;me<Re.length;me++){var ut=[];for(ve=0;ve<Re[me].length;ve+=2)ut.push(Ko(Re[me][ve],Re[me][ve+1],ie,De,Ge,Oe));Le.geometry.push(ut)}}return we.transformed=!0,we}function Ko(we,ie,oe,me,ve,De){return[Math.round(oe*(we*me-ve)),Math.round(oe*(ie*me-De))]}function Vn(we,ie,oe,me,ve){for(var De=ie===ve.maxZoom?0:ve.tolerance/((1<<ie)*ve.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:me,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Oe=0;Oe<we.length;Oe++){Ge.numFeatures++,Qo(Ge,we[Oe],De,ve);var Le=we[Oe].minX,Re=we[Oe].minY,ht=we[Oe].maxX,ut=we[Oe].maxY;Le<Ge.minX&&(Ge.minX=Le),Re<Ge.minY&&(Ge.minY=Re),ht>Ge.maxX&&(Ge.maxX=ht),ut>Ge.maxY&&(Ge.maxY=ut)}return Ge}function Qo(we,ie,oe,me){var ve=ie.geometry,De=ie.type,Ge=[];if("Point"===De||"MultiPoint"===De)for(var Oe=0;Oe<ve.length;Oe+=3)Ge.push(ve[Oe]),Ge.push(ve[Oe+1]),we.numPoints++,we.numSimplified++;else if("LineString"===De)Rr(Ge,ve,we,oe,!1,!1);else if("MultiLineString"===De||"Polygon"===De)for(Oe=0;Oe<ve.length;Oe++)Rr(Ge,ve[Oe],we,oe,"Polygon"===De,0===Oe);else if("MultiPolygon"===De)for(var Le=0;Le<ve.length;Le++){var Re=ve[Le];for(Oe=0;Oe<Re.length;Oe++)Rr(Ge,Re[Oe],we,oe,!0,0===Oe)}if(Ge.length){var ht=ie.tags||null;if("LineString"===De&&me.lineMetrics){for(var ut in ht={},ie.tags)ht[ut]=ie.tags[ut];ht.mapbox_clip_start=ve.start/ve.size,ht.mapbox_clip_end=ve.end/ve.size}var Xe={geometry:Ge,type:"Polygon"===De||"MultiPolygon"===De?3:"LineString"===De||"MultiLineString"===De?2:1,tags:ht};null!==ie.id&&(Xe.id=ie.id),we.features.push(Xe)}}function Rr(we,ie,oe,me,ve,De){var Ge=me*me;if(me>0&&ie.size<(ve?Ge:me))oe.numPoints+=ie.length/3;else{for(var Oe=[],Le=0;Le<ie.length;Le+=3)(0===me||ie[Le+2]>Ge)&&(oe.numSimplified++,Oe.push(ie[Le]),Oe.push(ie[Le+1])),oe.numPoints++;ve&&function(Re,ht){for(var ut=0,Xe=0,Kt=Re.length,sn=Kt-2;Xe<Kt;sn=Xe,Xe+=2)ut+=(Re[Xe]-Re[sn])*(Re[Xe+1]+Re[sn+1]);if(ut>0===ht)for(Xe=0,Kt=Re.length;Xe<Kt/2;Xe+=2){var Ht=Re[Xe],Qt=Re[Xe+1];Re[Xe]=Re[Kt-2-Xe],Re[Xe+1]=Re[Kt-1-Xe],Re[Kt-2-Xe]=Ht,Re[Kt-1-Xe]=Qt}}(Oe,De),we.push(Oe)}}function Lt(we,ie){var oe=(ie=this.options=function(ve,De){for(var Ge in De)ve[Ge]=De[Ge];return ve}(Object.create(this.options),ie)).debug;if(oe&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var ve,De,Ge,Oe,Le,Re,me=function(ve,De){var Ge=[];if("FeatureCollection"===ve.type)for(var Oe=0;Oe<ve.features.length;Oe++)Po(Ge,ve.features[Oe],De,Oe);else Po(Ge,"Feature"===ve.type?ve:{geometry:ve},De);return Ge}(we,ie);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Oe=ve=me,Le=xi(ve,1,-1-(Ge=(De=ie).buffer/De.extent),Ge,0,-1,2,De),Re=xi(ve,1,1-Ge,2+Ge,0,-1,2,De),(Le||Re)&&(Oe=xi(ve,1,-Ge,1+Ge,0,-1,2,De)||[],Le&&(Oe=Cn(Le,1).concat(Oe)),Re&&(Oe=Oe.concat(Cn(Re,-1)))),(me=Oe).length&&this.splitTile(me,0,0,0),oe&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yt(we,ie,oe){return 32*((1<<we)*oe+ie)+we}function Ln(we,ie){return ie?we.properties[ie]:we.id}function ei(we,ie){if(null==we)return!0;if("Feature"===we.type)return null!=Ln(we,ie);if("FeatureCollection"===we.type){const oe=new Set;for(const me of we.features){const ve=Ln(me,ie);if(null==ve||oe.has(ve))return!1;oe.add(ve)}return!0}return!1}function bo(we,ie){const oe=new Map;if(null!=we)if("Feature"===we.type)oe.set(Ln(we,ie),we);else for(const me of we.features)oe.set(Ln(me,ie),me);return oe}Lt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Lt.prototype.splitTile=function(we,ie,oe,me,ve,De,Ge){for(var Oe=[we,ie,oe,me],Le=this.options,Re=Le.debug;Oe.length;){me=Oe.pop(),oe=Oe.pop(),ie=Oe.pop(),we=Oe.pop();var ht=1<<ie,ut=Yt(ie,oe,me),Xe=this.tiles[ut];if(!Xe&&(Re>1&&console.time("creation"),Xe=this.tiles[ut]=Vn(we,ie,oe,me,Le),this.tileCoords.push({z:ie,x:oe,y:me}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,oe,me,Xe.numFeatures,Xe.numPoints,Xe.numSimplified),console.timeEnd("creation"));var Kt="z"+ie;this.stats[Kt]=(this.stats[Kt]||0)+1,this.total++}if(Xe.source=we,ve){if(ie===Le.maxZoom||ie===ve)continue;var sn=1<<ve-ie;if(oe!==Math.floor(De/sn)||me!==Math.floor(Ge/sn))continue}else if(ie===Le.indexMaxZoom||Xe.numPoints<=Le.indexMaxPoints)continue;if(Xe.source=null,0!==we.length){Re>1&&console.time("clipping");var Ht,Qt,Vt,mi,di,li,ci=.5*Le.buffer/Le.extent,ir=.5-ci,Ni=.5+ci,yr=1+ci;Ht=Qt=Vt=mi=null,di=xi(we,ht,oe-ci,oe+Ni,0,Xe.minX,Xe.maxX,Le),li=xi(we,ht,oe+ir,oe+yr,0,Xe.minX,Xe.maxX,Le),we=null,di&&(Ht=xi(di,ht,me-ci,me+Ni,1,Xe.minY,Xe.maxY,Le),Qt=xi(di,ht,me+ir,me+yr,1,Xe.minY,Xe.maxY,Le),di=null),li&&(Vt=xi(li,ht,me-ci,me+Ni,1,Xe.minY,Xe.maxY,Le),mi=xi(li,ht,me+ir,me+yr,1,Xe.minY,Xe.maxY,Le),li=null),Re>1&&console.timeEnd("clipping"),Oe.push(Ht||[],ie+1,2*oe,2*me),Oe.push(Qt||[],ie+1,2*oe,2*me+1),Oe.push(Vt||[],ie+1,2*oe+1,2*me),Oe.push(mi||[],ie+1,2*oe+1,2*me+1)}}},Lt.prototype.getTile=function(we,ie,oe){var me=this.options,ve=me.extent,De=me.debug;if(we<0||we>24)return null;var Ge=1<<we,Oe=Yt(we,ie=(ie%Ge+Ge)%Ge,oe);if(this.tiles[Oe])return It(this.tiles[Oe],ve);De>1&&console.log("drilling down to z%d-%d-%d",we,ie,oe);for(var Le,Re=we,ht=ie,ut=oe;!Le&&Re>0;)Re--,ht=Math.floor(ht/2),ut=Math.floor(ut/2),Le=this.tiles[Yt(Re,ht,ut)];return Le&&Le.source?(De>1&&console.log("found parent tile z%d-%d-%d",Re,ht,ut),De>1&&console.time("drilling down"),this.splitTile(Le.source,Re,ht,ut,we,ie,oe),De>1&&console.timeEnd("drilling down"),this.tiles[Oe]?It(this.tiles[Oe],ve):null):null};class Nn extends We{constructor(ie,oe,me,ve){super(ie,oe,me),this._dataUpdateable=new Map,this.loadGeoJSON=(De,Ge)=>{const{promoteId:Oe}=De;if(De.request)return y.f(De.request,(Le,Re,ht,ut)=>{this._dataUpdateable=ei(Re,Oe)?bo(Re,Oe):void 0,Ge(Le,Re,ht,ut)});if("string"==typeof De.data)try{const Le=JSON.parse(De.data);this._dataUpdateable=ei(Le,Oe)?bo(Le,Oe):void 0,Ge(null,Le)}catch{Ge(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`))}else De.dataDiff?this._dataUpdateable?(function(Le,Re,ht){var ut,Xe,Kt,sn;if(Re.removeAll&&Le.clear(),Re.remove)for(const Ht of Re.remove)Le.delete(Ht);if(Re.add)for(const Ht of Re.add){const Qt=Ln(Ht,ht);null!=Qt&&Le.set(Qt,Ht)}if(Re.update)for(const Ht of Re.update){let Qt=Le.get(Ht.id);if(null==Qt)continue;const Vt=!Ht.removeAllProperties&&((null===(ut=Ht.removeProperties)||void 0===ut?void 0:ut.length)>0||(null===(Xe=Ht.addOrUpdateProperties)||void 0===Xe?void 0:Xe.length)>0);if((Ht.newGeometry||Ht.removeAllProperties||Vt)&&(Qt=Object.assign({},Qt),Le.set(Ht.id,Qt),Vt&&(Qt.properties=Object.assign({},Qt.properties))),Ht.newGeometry&&(Qt.geometry=Ht.newGeometry),Ht.removeAllProperties)Qt.properties={};else if((null===(Kt=Ht.removeProperties)||void 0===Kt?void 0:Kt.length)>0)for(const mi of Ht.removeProperties)Object.prototype.hasOwnProperty.call(Qt.properties,mi)&&delete Qt.properties[mi];if((null===(sn=Ht.addOrUpdateProperties)||void 0===sn?void 0:sn.length)>0)for(const{key:mi,value:di}of Ht.addOrUpdateProperties)Qt.properties[mi]=di}}(this._dataUpdateable,De.dataDiff,Oe),Ge(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ge(new Error(`Cannot update existing geojson data in ${De.source}`)):Ge(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ve&&(this.loadGeoJSON=ve)}loadGeoJSONTile(ie,oe){const me=ie.tileID.canonical;if(!this._geoJSONIndex)return oe(null,null);const ve=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!ve)return oe(null,null);const De=new class{constructor(Oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=y.N,this.length=Oe.length,this._features=Oe}feature(Oe){return new class{constructor(Le){this._feature=Le,this.extent=y.N,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(1===this._feature.type){const Le=[];for(const Re of this._feature.geometry)Le.push([new y.P(Re[0],Re[1])]);return Le}{const Le=[];for(const Re of this._feature.geometry){const ht=[];for(const ut of Re)ht.push(new y.P(ut[0],ut[1]));Le.push(ht)}return Le}}toGeoJSON(Le,Re,ht){return Rn.call(this,Le,Re,ht)}}(this._features[Oe])}}(ve.features);let Ge=Un(De);0===Ge.byteOffset&&Ge.byteLength===Ge.buffer.byteLength||(Ge=new Uint8Array(Ge)),oe(null,{vectorTile:De,rawData:Ge.buffer})}loadData(ie,oe){var me;null===(me=this._pendingRequest)||void 0===me||me.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ve=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new y.bu(ie.request);this._pendingCallback=oe,this._pendingRequest=this.loadGeoJSON(ie,(De,Ge)=>{if(delete this._pendingCallback,delete this._pendingRequest,De||!Ge)return oe(De);if("object"!=typeof Ge)return oe(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));{Mt(Ge,!0);try{if(ie.filter){const Le=y.bC(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Le.result)throw new Error(Le.value.map(ht=>`${ht.key}: ${ht.message}`).join(", "));Ge={type:"FeatureCollection",features:Ge.features.filter(ht=>Le.value.evaluate({zoom:0},ht))}}this._geoJSONIndex=ie.cluster?new Ci(function({superclusterOptions:Le,clusterProperties:Re}){if(!Re||!Le)return Le;const ht={},ut={},Xe={accumulated:null,zoom:0},Kt={properties:null},sn=Object.keys(Re);for(const Ht of sn){const[Qt,Vt]=Re[Ht],mi=y.bC(Vt),di=y.bC("string"==typeof Qt?[Qt,["accumulated"],["get",Ht]]:Qt);ht[Ht]=mi.value,ut[Ht]=di.value}return Le.map=Ht=>{Kt.properties=Ht;const Qt={};for(const Vt of sn)Qt[Vt]=ht[Vt].evaluate(Xe,Kt);return Qt},Le.reduce=(Ht,Qt)=>{Kt.properties=Qt;for(const Vt of sn)Xe.accumulated=Ht[Vt],Ht[Vt]=ut[Vt].evaluate(Xe,Kt)},Le}(ie)).load(Ge.features):new Lt(Le=Ge,ie.geojsonVtOptions)}catch(Le){return oe(Le)}this.loaded={};const Oe={};if(ve){const Le=ve.finish();Le&&(Oe.resourceTiming={},Oe.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Le)))}oe(null,Oe)}var Le})}reloadTile(ie,oe){const me=this.loaded;return me&&me[ie.uid]?super.reloadTile(ie,oe):this.loadTile(ie,oe)}removeSource(ie,oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),oe()}getClusterExpansionZoom(ie,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId))}catch(me){oe(me)}}getClusterChildren(ie,oe){try{oe(null,this._geoJSONIndex.getChildren(ie.clusterId))}catch(me){oe(me)}}getClusterLeaves(ie,oe){try{oe(null,this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset))}catch(me){oe(me)}}}class Fs{constructor(ie){this.self=ie,this.actor=new y.C(ie,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:We,geojson:Nn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,me)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=me},this.self.registerRTLTextPlugin=oe=>{if(y.bD.isParsed())throw new Error("RTL text plugin already registered.");y.bD.applyArabicShaping=oe.applyArabicShaping,y.bD.processBidirectionalText=oe.processBidirectionalText,y.bD.processStyledBidirectionalText=oe.processStyledBidirectionalText}}setReferrer(ie,oe){this.referrer=oe}setImages(ie,oe,me){this.availableImages[ie]=oe;for(const ve in this.workerSources[ie]){const De=this.workerSources[ie][ve];for(const Ge in De)De[Ge].availableImages=oe}me()}setLayers(ie,oe,me){this.getLayerIndex(ie).replace(oe),me()}updateLayers(ie,oe,me){this.getLayerIndex(ie).update(oe.layers,oe.removedIds),me()}loadTile(ie,oe,me){this.getWorkerSource(ie,oe.type,oe.source).loadTile(oe,me)}loadDEMTile(ie,oe,me){this.getDEMWorkerSource(ie,oe.source).loadTile(oe,me)}reloadTile(ie,oe,me){this.getWorkerSource(ie,oe.type,oe.source).reloadTile(oe,me)}abortTile(ie,oe,me){this.getWorkerSource(ie,oe.type,oe.source).abortTile(oe,me)}removeTile(ie,oe,me){this.getWorkerSource(ie,oe.type,oe.source).removeTile(oe,me)}removeDEMTile(ie,oe){this.getDEMWorkerSource(ie,oe.source).removeTile(oe)}removeSource(ie,oe,me){if(!this.workerSources[ie]||!this.workerSources[ie][oe.type]||!this.workerSources[ie][oe.type][oe.source])return;const ve=this.workerSources[ie][oe.type][oe.source];delete this.workerSources[ie][oe.type][oe.source],void 0!==ve.removeSource?ve.removeSource(oe,me):me()}loadWorkerSource(ie,oe,me){try{this.self.importScripts(oe.url),me()}catch(ve){me(ve.toString())}}syncRTLPluginState(ie,oe,me){try{y.bD.setState(oe);const ve=y.bD.getPluginURL();if(y.bD.isLoaded()&&!y.bD.isParsed()&&null!=ve){this.self.importScripts(ve);const De=y.bD.isParsed();me(De?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ve}`),De)}}catch(ve){me(ve.toString())}}getAvailableImages(ie){let oe=this.availableImages[ie];return oe||(oe=[]),oe}getLayerIndex(ie){let oe=this.layerIndexes[ie];return oe||(oe=this.layerIndexes[ie]=new Ve),oe}getWorkerSource(ie,oe,me){return this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][oe]||(this.workerSources[ie][oe]={}),this.workerSources[ie][oe][me]||(this.workerSources[ie][oe][me]=new this.workerSourceTypes[oe]({send:(ve,De,Ge)=>{this.actor.send(ve,De,Ge,ie)}},this.getLayerIndex(ie),this.getAvailableImages(ie))),this.workerSources[ie][oe][me]}getDEMWorkerSource(ie,oe){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][oe]||(this.demWorkerSources[ie][oe]=new Ye),this.demWorkerSources[ie][oe]}}return y.i()&&(self.worker=new Fs(self)),Fs}),V(0,function(y){class pe{static testProp(s){if(!pe.docStyle)return s[0];for(let f=0;f<s.length;f++)if(s[f]in pe.docStyle)return s[f];return s[0]}static create(s,f,v){const S=window.document.createElement(s);return void 0!==f&&(S.className=f),v&&v.appendChild(S),S}static createNS(s,f){return window.document.createElementNS(s,f)}static disableDrag(){pe.docStyle&&pe.selectProp&&(pe.userSelect=pe.docStyle[pe.selectProp],pe.docStyle[pe.selectProp]="none")}static enableDrag(){pe.docStyle&&pe.selectProp&&(pe.docStyle[pe.selectProp]=pe.userSelect)}static setTransform(s,f){s.style[pe.transformProp]=f}static addEventListener(s,f,v,S={}){s.addEventListener(f,v,"passive"in S?S:S.capture)}static removeEventListener(s,f,v,S={}){s.removeEventListener(f,v,"passive"in S?S:S.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",pe.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",pe.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",pe.suppressClickInternal,!0)},0)}static mousePos(s,f){const v=s.getBoundingClientRect();return new y.P(f.clientX-v.left-s.clientLeft,f.clientY-v.top-s.clientTop)}static touchPos(s,f){const v=s.getBoundingClientRect(),S=[];for(let D=0;D<f.length;D++)S.push(new y.P(f[D].clientX-v.left-s.clientLeft,f[D].clientY-v.top-s.clientTop));return S}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}pe.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,pe.selectProp=pe.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),pe.transformProp=pe.testProp(["transform","WebkitTransform"]);const lt={supported:!1,testSupport:function(E){!We&&Ue&&(Ye?ct(E):Ce=E)}};let Ce,Ue,We=!1,Ye=!1;function ct(E){const s=E.createTexture();E.bindTexture(E.TEXTURE_2D,s);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,Ue),E.isContextLost())return;lt.supported=!0}catch{}E.deleteTexture(s),We=!0}var it,Mt,E;typeof document<"u"&&(Ue=document.createElement("img"),Ue.onload=function(){Ce&&ct(Ce),Ce=null,Ye=!0},Ue.onerror=function(){We=!0,Ce=null},Ue.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(E){let s,f,v,S;E.resetRequestQueue=()=>{s=[],f=0,v=0,S={}},E.addThrottleControl=W=>{const Q=v++;return S[Q]=W,Q},E.removeThrottleControl=W=>{delete S[W],N()},E.getImage=(W,Q,X=!0)=>{lt.supported&&(W.headers||(W.headers={}),W.headers.accept="image/webp,*/*");const ae={requestParameters:W,supportImageRefresh:X,callback:Q,cancelled:!1,completed:!1,cancel:()=>{ae.completed||ae.cancelled||(ae.cancelled=!0,ae.innerRequest&&(ae.innerRequest.cancel(),f--),N())}};return s.push(ae),N(),ae};const D=W=>{const{requestParameters:Q,supportImageRefresh:X,callback:ae}=W;return y.e(Q,{type:"image"}),(!1!==X||y.i()||y.g(Q.url)||Q.headers&&!Object.keys(Q.headers).reduce((be,ye)=>be&&"accept"===ye,!0)?y.m:H)(Q,(be,ye,Te,ge)=>{R(W,ae,be,ye,Te,ge)})},R=(W,Q,X,ae,be,ye)=>{var Te,ge;X?Q(X):ae instanceof HTMLImageElement||y.a(ae)?Q(null,ae):ae&&(Te=ae,ge=(Te,ge)=>{null!=Te?Q(Te):null!=ge&&Q(null,ge,{cacheControl:be,expires:ye})},"function"==typeof createImageBitmap?y.b(Te,ge):y.d(Te,ge)),W.cancelled||(W.completed=!0,f--,N())},N=()=>{const W=(()=>{const Q=Object.keys(S);let X=!1;if(Q.length>0)for(const ae of Q)if(X=S[ae](),X)break;return X})()?y.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:y.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let Q=f;Q<W&&s.length>0;Q++){const X=s.shift();if(X.cancelled){Q--;continue}const ae=D(X);f++,X.innerRequest=ae}},H=(W,Q)=>{const X=new Image,ae=W.url;let be=!1;const ye=W.credentials;return ye&&"include"===ye?X.crossOrigin="use-credentials":(ye&&"same-origin"===ye||!y.s(ae))&&(X.crossOrigin="anonymous"),X.fetchPriority="high",X.onload=()=>{Q(null,X),X.onerror=X.onload=null},X.onerror=()=>{be||Q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),X.onerror=X.onload=null},X.src=ae,{cancel:()=>{be=!0,X.src=""}}}}(it||(it={})),it.resetRequestQueue(),(E=Mt||(Mt={})).Glyphs="Glyphs",E.Image="Image",E.Source="Source",E.SpriteImage="SpriteImage",E.SpriteJSON="SpriteJSON",E.Style="Style",E.Tile="Tile",E.Unknown="Unknown";class Rn{constructor(s){this._transformRequestFn=s}transformRequest(s,f){return this._transformRequestFn&&this._transformRequestFn(s,f)||{url:s}}normalizeSpriteURL(s,f,v){const S=function(D){const R=D.match(Zt);if(!R)throw new Error(`Unable to parse URL "${D}"`);return{protocol:R[1],authority:R[2],path:R[3]||"/",params:R[4]?R[4].split("&"):[]}}(s);return S.path+=`${f}${v}`,function(D){const R=D.params.length?`?${D.params.join("&")}`:"";return`${D.protocol}://${D.authority}${D.path}${R}`}(S)}setTransformRequest(s){this._transformRequestFn=s}}const Zt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function gt(E){var s=new y.A(3);return s[0]=E[0],s[1]=E[1],s[2]=E[2],s}var Zi,ni=function(E,s,f){return E[0]=s[0]-f[0],E[1]=s[1]-f[1],E[2]=s[2]-f[2],E};Zi=new y.A(3),y.A!=Float32Array&&(Zi[0]=0,Zi[1]=0,Zi[2]=0);var Sr=function(E){var s=E[0],f=E[1];return s*s+f*f};function Ui(E){const s=[];if("string"==typeof E)s.push({id:"default",url:E});else if(E&&E.length>0){const f=[];for(const{id:v,url:S}of E){const D=`${v}${S}`;-1===f.indexOf(D)&&(f.push(D),s.push({id:v,url:S}))}}return s}function fn(E,s,f,v,S){if(v)return void E(v);if(S!==Object.values(s).length||S!==Object.values(f).length)return;const D={};for(const R in s){D[R]={};const N=y.h.getImageCanvasContext(f[R]),H=s[R];for(const W in H){const{width:Q,height:X,x:ae,y:be,sdf:ye,pixelRatio:Te,stretchX:ge,stretchY:je,content:nt}=H[W];D[R][W]={data:null,pixelRatio:Te,sdf:ye,stretchX:ge,stretchY:je,content:nt,spriteData:{width:Q,height:X,x:ae,y:be,context:N}}}}E(null,D)}!function(){var E=new y.A(2);y.A!=Float32Array&&(E[0]=0,E[1]=0)}();class hi{constructor(s,f,v,S){this.context=s,this.format=v,this.texture=s.gl.createTexture(),this.update(f,S)}update(s,f,v){const{width:S,height:D}=s,R=!(this.size&&this.size[0]===S&&this.size[1]===D||v),{context:N}=this,{gl:H}=N;if(this.useMipmap=Boolean(f&&f.useMipmap),H.bindTexture(H.TEXTURE_2D,this.texture),N.pixelStoreUnpackFlipY.set(!1),N.pixelStoreUnpack.set(1),N.pixelStoreUnpackPremultiplyAlpha.set(this.format===H.RGBA&&(!f||!1!==f.premultiply)),R)this.size=[S,D],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||y.a(s)?H.texImage2D(H.TEXTURE_2D,0,this.format,this.format,H.UNSIGNED_BYTE,s):H.texImage2D(H.TEXTURE_2D,0,this.format,S,D,0,this.format,H.UNSIGNED_BYTE,s.data);else{const{x:W,y:Q}=v||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||y.a(s)?H.texSubImage2D(H.TEXTURE_2D,0,W,Q,H.RGBA,H.UNSIGNED_BYTE,s):H.texSubImage2D(H.TEXTURE_2D,0,W,Q,S,D,H.RGBA,H.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&H.generateMipmap(H.TEXTURE_2D)}bind(s,f,v){const{context:S}=this,{gl:D}=S;D.bindTexture(D.TEXTURE_2D,this.texture),v!==D.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=D.LINEAR),s!==this.filter&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,s),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,v||s),this.filter=s),f!==this.wrap&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,f),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function In(E){const{userImage:s}=E;return!!(s&&s.render&&s.render())&&(E.data.replace(new Uint8Array(s.data.buffer)),!0)}class bn extends y.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new y.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:f,callback:v}of this.requestors)this._notify(f,v);this.requestors=[]}}getImage(s){const f=this.images[s];if(f&&!f.data&&f.spriteData){const v=f.spriteData;f.data=new y.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),f.spriteData=null}return f}addImage(s,f){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,f)&&(this.images[s]=f)}_validate(s,f){let v=!0;const S=f.data||f.spriteData;return this._validateStretch(f.stretchX,S&&S.width)||(this.fire(new y.j(new Error(`Image "${s}" has invalid "stretchX" value`))),v=!1),this._validateStretch(f.stretchY,S&&S.height)||(this.fire(new y.j(new Error(`Image "${s}" has invalid "stretchY" value`))),v=!1),this._validateContent(f.content,f)||(this.fire(new y.j(new Error(`Image "${s}" has invalid "content" value`))),v=!1),v}_validateStretch(s,f){if(!s)return!0;let v=0;for(const S of s){if(S[0]<v||S[1]<S[0]||f<S[1])return!1;v=S[1]}return!0}_validateContent(s,f){if(!s)return!0;if(4!==s.length)return!1;const v=f.spriteData,S=v&&v.width||f.data.width,D=v&&v.height||f.data.height;return!(s[0]<0||S<s[0]||s[1]<0||D<s[1]||s[2]<0||S<s[2]||s[3]<0||D<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,f,v=!0){const S=this.getImage(s);if(v&&(S.data.width!==f.data.width||S.data.height!==f.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=S.version+1,this.images[s]=f,this.updatedImages[s]=!0}removeImage(s){const f=this.images[s];delete this.images[s],delete this.patterns[s],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,f){let v=!0;if(!this.isLoaded())for(const S of s)this.images[S]||(v=!1);this.isLoaded()||v?this._notify(s,f):this.requestors.push({ids:s,callback:f})}_notify(s,f){const v={};for(const S of s){let D=this.getImage(S);D||(this.fire(new y.k("styleimagemissing",{id:S})),D=this.getImage(S)),D?v[S]={data:D.data.clone(),pixelRatio:D.pixelRatio,sdf:D.sdf,version:D.version,stretchX:D.stretchX,stretchY:D.stretchY,content:D.content,hasRenderCallback:Boolean(D.userImage&&D.userImage.render)}:y.w(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,v)}getPixelSize(){const{width:s,height:f}=this.atlasImage;return{width:s,height:f}}getPattern(s){const f=this.patterns[s],v=this.getImage(s);if(!v)return null;if(f&&f.position.version===v.version)return f.position;if(f)f.position.version=v.version;else{const S={w:v.data.width+2,h:v.data.height+2,x:0,y:0},D=new y.I(S,v);this.patterns[s]={bin:S,position:D}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const f=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new hi(s,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const D in this.patterns)s.push(this.patterns[D].bin);const{w:f,h:v}=y.p(s),S=this.atlasImage;S.resize({width:f||1,height:v||1});for(const D in this.patterns){const{bin:R}=this.patterns[D],N=R.x+1,H=R.y+1,W=this.getImage(D).data,Q=W.width,X=W.height;y.R.copy(W,S,{x:0,y:0},{x:N,y:H},{width:Q,height:X}),y.R.copy(W,S,{x:0,y:X-1},{x:N,y:H-1},{width:Q,height:1}),y.R.copy(W,S,{x:0,y:0},{x:N,y:H+X},{width:Q,height:1}),y.R.copy(W,S,{x:Q-1,y:0},{x:N-1,y:H},{width:1,height:X}),y.R.copy(W,S,{x:0,y:0},{x:N+Q,y:H},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const f of s){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const v=this.getImage(f);v||y.w(`Image with ID: "${f}" was not found`),In(v)&&this.updateImage(f,v)}}}const Ti=1e20;function Di(E,s,f,v,S,D,R,N,H){for(let W=s;W<s+v;W++)Jn(E,f*D+W,D,S,R,N,H);for(let W=f;W<f+S;W++)Jn(E,W*D+s,1,v,R,N,H)}function Jn(E,s,f,v,S,D,R){D[0]=0,R[0]=-Ti,R[1]=Ti,S[0]=E[s];for(let N=1,H=0,W=0;N<v;N++){S[N]=E[s+N*f];const Q=N*N;do{const X=D[H];W=(S[N]-S[X]+Q-X*X)/(N-X)/2}while(W<=R[H]&&--H>-1);H++,D[H]=N,R[H]=W,R[H+1]=Ti}for(let N=0,H=0;N<v;N++){for(;R[H+1]<N;)H++;const W=D[H],Q=N-W;E[s+N*f]=S[W]+Q*Q}}class Fn{constructor(s,f){this.requestManager=s,this.localIdeographFontFamily=f,this.entries={}}setURL(s){this.url=s}getGlyphs(s,f){const v=[];for(const S in s)for(const D of s[S])v.push({stack:S,id:D});y.o(v,({stack:S,id:D},R)=>{let N=this.entries[S];N||(N=this.entries[S]={glyphs:{},requests:{},ranges:{}});let H=N.glyphs[D];if(void 0!==H)return void R(null,{stack:S,id:D,glyph:H});if(H=this._tinySDF(N,S,D),H)return N.glyphs[D]=H,void R(null,{stack:S,id:D,glyph:H});const W=Math.floor(D/256);if(256*W>65535)return void R(new Error("glyphs > 65535 not supported"));if(N.ranges[W])return void R(null,{stack:S,id:D,glyph:H});if(!this.url)return void R(new Error("glyphsUrl is not set"));let Q=N.requests[W];Q||(Q=N.requests[W]=[],Fn.loadGlyphRange(S,W,this.url,this.requestManager,(X,ae)=>{if(ae){for(const be in ae)this._doesCharSupportLocalGlyph(+be)||(N.glyphs[+be]=ae[+be]);N.ranges[W]=!0}for(const be of Q)be(X,ae);delete N.requests[W]})),Q.push((X,ae)=>{X?R(X):ae&&R(null,{stack:S,id:D,glyph:ae[D]||null})})},(S,D)=>{if(S)f(S);else if(D){const R={};for(const{stack:N,id:H,glyph:W}of D)(R[N]||(R[N]={}))[H]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics};f(null,R)}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(y.u["CJK Unified Ideographs"](s)||y.u["Hangul Syllables"](s)||y.u.Hiragana(s)||y.u.Katakana(s))}_tinySDF(s,f,v){const S=this.localIdeographFontFamily;if(!S||!this._doesCharSupportLocalGlyph(v))return;let D=s.tinySDF;if(!D){let N="400";/bold/i.test(f)?N="900":/medium/i.test(f)?N="500":/light/i.test(f)&&(N="200"),D=s.tinySDF=new Fn.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:S,fontWeight:N})}const R=D.draw(String.fromCharCode(v));return{id:v,bitmap:new y.q({width:R.width||60,height:R.height||60},R.data),metrics:{width:R.glyphWidth/2||24,height:R.glyphHeight/2||24,left:R.glyphLeft/2+.5||0,top:R.glyphTop/2-27.5||-8,advance:R.glyphAdvance/2||24,isDoubleResolution:!0}}}}Fn.loadGlyphRange=function(E,s,f,v,S){const D=256*s,R=D+255,N=v.transformRequest(f.replace("{fontstack}",E).replace("{range}",`${D}-${R}`),Mt.Glyphs);y.l(N,(H,W)=>{if(H)S(H);else if(W){const Q={};for(const X of y.n(W))Q[X.id]=X;S(null,Q)}})},Fn.TinySDF=class{constructor({fontSize:E=24,buffer:s=3,radius:f=8,cutoff:v=.25,fontFamily:S="sans-serif",fontWeight:D="normal",fontStyle:R="normal"}={}){this.buffer=s,this.cutoff=v,this.radius=f;const N=this.size=E+4*s,H=this._createCanvas(N),W=this.ctx=H.getContext("2d",{willReadFrequently:!0});W.font=`${R} ${D} ${E}px ${S}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(E){const s=document.createElement("canvas");return s.width=s.height=E,s}draw(E){const{width:s,actualBoundingBoxAscent:f,actualBoundingBoxDescent:v,actualBoundingBoxLeft:S,actualBoundingBoxRight:D}=this.ctx.measureText(E),R=Math.ceil(f),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(D-S))),H=Math.min(this.size-this.buffer,R+Math.ceil(v)),W=N+2*this.buffer,Q=H+2*this.buffer,X=Math.max(W*Q,0),ae=new Uint8ClampedArray(X),be={data:ae,width:W,height:Q,glyphWidth:N,glyphHeight:H,glyphTop:R,glyphLeft:0,glyphAdvance:s};if(0===N||0===H)return be;const{ctx:ye,buffer:Te,gridInner:ge,gridOuter:je}=this;ye.clearRect(Te,Te,N,H),ye.fillText(E,Te,Te+R);const nt=ye.getImageData(Te,Te,N,H);je.fill(Ti,0,X),ge.fill(0,0,X);for(let Se=0;Se<H;Se++)for(let Ze=0;Ze<N;Ze++){const st=nt.data[4*(Se*N+Ze)+3]/255;if(0===st)continue;const Je=(Se+Te)*W+Ze+Te;if(1===st)je[Je]=0,ge[Je]=Ti;else{const pt=.5-st;je[Je]=pt>0?pt*pt:0,ge[Je]=pt<0?pt*pt:0}}Di(je,0,0,W,Q,W,this.f,this.v,this.z),Di(ge,Te,Te,N,H,W,this.f,this.v,this.z);for(let Se=0;Se<X;Se++){const Ze=Math.sqrt(je[Se])-Math.sqrt(ge[Se]);ae[Se]=Math.round(255-255*(Ze/this.radius+this.cutoff))}return be}};class gn{constructor(){this.specification=y.v.light.position}possiblyEvaluate(s,f){return y.z(s.expression.evaluate(f))}interpolate(s,f,v){return{x:y.B.number(s.x,f.x,v),y:y.B.number(s.y,f.y,v),z:y.B.number(s.z,f.z,v)}}}let hn;class Un extends y.E{constructor(s){super(),hn=hn||new y.r({anchor:new y.D(y.v.light.anchor),position:new gn,color:new y.D(y.v.light.color),intensity:new y.D(y.v.light.intensity)}),this._transitionable=new y.T(hn),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,f={}){if(!this._validate(y.t,s,f))for(const v in s){const S=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),S):this._transitionable.setValue(v,S)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,f,v){return(!v||!1!==v.validate)&&y.x(this,s.call(y.y,y.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:y.v})))}}class wa{constructor(s,f){this.width=s,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,f){const v=s.join(",")+String(f);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(s,f)),this.dashEntry[v]}getDashRanges(s,f,v){const S=[];let D=s.length%2==1?-s[s.length-1]*v:0,R=s[0]*v,N=!0;S.push({left:D,right:R,isDash:N,zeroLength:0===s[0]});let H=s[0];for(let W=1;W<s.length;W++){N=!N;const Q=s[W];D=H*v,H+=Q,R=H*v,S.push({left:D,right:R,isDash:N,zeroLength:0===Q})}return S}addRoundDash(s,f,v){const S=f/2;for(let D=-v;D<=v;D++){const R=this.width*(this.nextRow+v+D);let N=0,H=s[N];for(let W=0;W<this.width;W++){W/H.right>1&&(H=s[++N]);const Q=Math.abs(W-H.left),X=Math.abs(W-H.right),ae=Math.min(Q,X);let be;const ye=D/v*(S+1);if(H.isDash){const Te=S-Math.abs(ye);be=Math.sqrt(ae*ae+Te*Te)}else be=S-Math.sqrt(ae*ae+ye*ye);this.data[R+W]=Math.max(0,Math.min(255,be+128))}}}addRegularDash(s){for(let N=s.length-1;N>=0;--N){const H=s[N],W=s[N+1];H.zeroLength?s.splice(N,1):W&&W.isDash===H.isDash&&(W.left=H.left,s.splice(N,1))}const f=s[0],v=s[s.length-1];f.isDash===v.isDash&&(f.left=v.left-this.width,v.right=f.right+this.width);const S=this.width*this.nextRow;let D=0,R=s[D];for(let N=0;N<this.width;N++){N/R.right>1&&(R=s[++D]);const H=Math.abs(N-R.left),W=Math.abs(N-R.right),Q=Math.min(H,W);this.data[S+N]=Math.max(0,Math.min(255,(R.isDash?Q:-Q)+128))}}addDash(s,f){const v=f?7:0,S=2*v+1;if(this.nextRow+S>this.height)return y.w("LineAtlas out of space"),null;let D=0;for(let N=0;N<s.length;N++)D+=s[N];if(0!==D){const N=this.width/D,H=this.getDashRanges(s,this.width,N);f?this.addRoundDash(H,N,v):this.addRegularDash(H)}const R={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:D};return this.nextRow+=S,this.dirty=!0,R}bind(s){const f=s.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}class xn{constructor(s,f,v){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=v;const S=this.workerPool.acquire(v);for(let D=0;D<S.length;D++){const R=new y.C(S[D],f,v);R.name=`Worker ${D}`,this.actors.push(R)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,f,v){y.o(this.actors,(S,D)=>{S.send(s,f,D)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}}function Ii(E,s,f){const v=function(S,D){if(S)return f(S);if(D){const R=y.F(y.e(D,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(R.vectorLayers=D.vector_layers,R.vectorLayerIds=R.vectorLayers.map(N=>N.id)),f(null,R)}};return E.url?y.f(s.transformRequest(E.url,Mt.Source),v):y.h.frame(()=>v(null,E))}class qn{constructor(s,f){s&&(f?this.setSouthWest(s).setNorthEast(f):Array.isArray(s)&&(4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof y.L?new y.L(s.lng,s.lat):y.L.convert(s),this}setSouthWest(s){return this._sw=s instanceof y.L?new y.L(s.lng,s.lat):y.L.convert(s),this}extend(s){const f=this._sw,v=this._ne;let S,D;if(s instanceof y.L)S=s,D=s;else{if(!(s instanceof qn))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(qn.convert(s)):this.extend(y.L.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(y.L.convert(s)):this;if(S=s._sw,D=s._ne,!S||!D)return this}return f||v?(f.lng=Math.min(S.lng,f.lng),f.lat=Math.min(S.lat,f.lat),v.lng=Math.max(D.lng,v.lng),v.lat=Math.max(D.lat,v.lat)):(this._sw=new y.L(S.lng,S.lat),this._ne=new y.L(D.lng,D.lat)),this}getCenter(){return new y.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new y.L(this.getWest(),this.getNorth())}getSouthEast(){return new y.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:f,lat:v}=y.L.convert(s);let S=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&S}static convert(s){return s instanceof qn?s:s&&new qn(s)}static fromLngLat(s,f=0){const v=360*f/40075017,S=v/Math.cos(Math.PI/180*s.lat);return new qn(new y.L(s.lng-S,s.lat-v),new y.L(s.lng+S,s.lat+v))}}class ji{constructor(s,f,v){this.bounds=qn.convert(this.validateBounds(s)),this.minzoom=f||0,this.maxzoom=v||24}validateBounds(s){return Array.isArray(s)&&4===s.length?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const f=Math.pow(2,s.z),v=Math.floor(y.G(this.bounds.getWest())*f),S=Math.floor(y.H(this.bounds.getNorth())*f),D=Math.ceil(y.G(this.bounds.getEast())*f),R=Math.ceil(y.H(this.bounds.getSouth())*f);return s.x>=v&&s.x<D&&s.y>=S&&s.y<R}}class Ji extends y.E{constructor(s,f,v,S){if(super(),this.load=()=>{this._loaded=!1,this.fire(new y.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ii(this._options,this.map._requestManager,(D,R)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),D?this.fire(new y.j(D)):R&&(y.e(this,R),R.bounds&&(this.tileBounds=new ji(R.bounds,this.minzoom,this.maxzoom)),this.fire(new y.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new y.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>y.e({},this._options),this.id=s,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,y.e(this,y.F(f,["url","scheme","tileSize","promoteId"])),this._options=y.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(s,f){const v=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),S={request:this.map._requestManager.transformRequest(v,Mt.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function D(R,N){return delete s.request,s.aborted?f(null):R&&404!==R.status?f(R):(N&&N.resourceTiming&&(s.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&N&&s.setExpiryData(N),s.loadVectorData(N,this.map.painter),f(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}S.request.collectResourceTiming=this._collectResourceTiming,s.actor&&"expired"!==s.state?"loading"===s.state?s.reloadCallback=f:s.request=s.actor.send("reloadTile",S,D.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",S,D.bind(this)))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ci extends y.E{constructor(s,f,v,S){super(),this.id=s,this.dispatcher=v,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=y.e({type:"raster"},f),y.e(this,y.F(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new y.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ii(this._options,this.map._requestManager,(s,f)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new y.j(s)):f&&(y.e(this,f),f.bounds&&(this.tileBounds=new ji(f.bounds,this.minzoom,this.maxzoom)),this.fire(new y.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new y.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}serialize(){return y.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,f){const v=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.request=it.getImage(this.map._requestManager.transformRequest(v,Mt.Tile),(S,D,R)=>{if(delete s.request,s.aborted)s.state="unloaded",f(null);else if(S)s.state="errored",f(S);else if(D){this.map._refreshExpiredTiles&&R&&s.setExpiryData(R);const N=this.map.painter.context,H=N.gl;s.texture=this.map.painter.getTileTexture(D.width),s.texture?s.texture.update(D,{useMipmap:!0}):(s.texture=new hi(N,D,H.RGBA,{useMipmap:!0}),s.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),N.extTextureFilterAnisotropic&&H.texParameterf(H.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax)),s.state="loaded",f(null)}},this.map._refreshExpiredTiles)}abortTile(s,f){s.request&&(s.request.cancel(),delete s.request),f()}unloadTile(s,f){s.texture&&this.map.painter.saveTileTexture(s.texture),f()}hasTransition(){return!1}}class Si extends Ci{constructor(s,f,v,S){super(s,f,v,S),this.type="raster-dem",this.maxzoom=22,this._options=y.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(s,f){const v=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),S=this.map._requestManager.transformRequest(v,Mt.Tile);function D(R,N){R&&(s.state="errored",f(R)),N&&(s.dem=N,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded",f(null))}s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.request=it.getImage(S,(R,N,H)=>y._(this,void 0,void 0,function*(){if(delete s.request,s.aborted)s.state="unloaded",f(null);else if(R)s.state="errored",f(R);else if(N){this.map._refreshExpiredTiles&&s.setExpiryData(H);const W=y.a(N)&&y.J()?N:yield function(X){return y._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&y.K()){const ae=X.width+2,be=X.height+2;try{return new y.R({width:ae,height:be},yield y.M(X,-1,-1,ae,be))}catch{}}return y.h.getImageData(X,1)})}(N),Q={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:W,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};s.actor&&"expired"!==s.state||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",Q,D))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(s){const f=s.canonical,v=Math.pow(2,f.z),S=(f.x-1+v)%v,D=0===f.x?s.wrap-1:s.wrap,R=(f.x+1+v)%v,N=f.x+1===v?s.wrap+1:s.wrap,H={};return H[new y.O(s.overscaledZ,D,f.z,S,f.y).key]={backfilled:!1},H[new y.O(s.overscaledZ,N,f.z,R,f.y).key]={backfilled:!1},f.y>0&&(H[new y.O(s.overscaledZ,D,f.z,S,f.y-1).key]={backfilled:!1},H[new y.O(s.overscaledZ,s.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},H[new y.O(s.overscaledZ,N,f.z,R,f.y-1).key]={backfilled:!1}),f.y+1<v&&(H[new y.O(s.overscaledZ,D,f.z,S,f.y+1).key]={backfilled:!1},H[new y.O(s.overscaledZ,s.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},H[new y.O(s.overscaledZ,N,f.z,R,f.y+1).key]={backfilled:!1}),H}unloadTile(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})}}class Er extends y.E{constructor(s,f,v,S){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>y.e({},this._options,{type:this.type,data:this._data}),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(S),this._data=f.data,this._options=y.e({},f),this._collectResourceTiming=f.collectResourceTiming,void 0!==f.maxzoom&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const D=y.N/this.tileSize;this.workerOptions=y.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(void 0!==f.buffer?f.buffer:128)*D,tolerance:(void 0!==f.tolerance?f.tolerance:.375)*D,extent:y.N,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:void 0!==f.clusterMaxZoom?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:y.N,radius:(f.clusterRadius||50)*D,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(void 0!==s.clusterRadius&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),void 0!==s.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},f),this}getClusterChildren(s,f){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},f),this}getClusterLeaves(s,f,v,S){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:f,offset:v},S),this}_updateWorkerData(s){const f=y.e({},this.workerOptions);s?f.dataDiff=s:"string"==typeof this._data?(f.request=this.map._requestManager.transformRequest(y.h.resolveURL(this._data),Mt.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new y.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,f,(v,S)=>{if(this._pendingLoads--,this._removed||S&&S.abandoned)return void this.fire(new y.k("dataabort",{dataType:"source"}));let D=null;if(S&&S.resourceTiming&&S.resourceTiming[this.id]&&(D=S.resourceTiming[this.id].slice(0)),v)return void this.fire(new y.j(v));const R={dataType:"source"};this._collectResourceTiming&&D&&D.length>0&&y.e(R,{resourceTiming:D}),this.fire(new y.k("data",Object.assign(Object.assign({},R),{sourceDataType:"metadata"}))),this.fire(new y.k("data",Object.assign(Object.assign({},R),{sourceDataType:"content"})))})}loaded(){return 0===this._pendingLoads}loadTile(s,f){const v=s.actor?"reloadTile":"loadTile";s.actor=this.actor;const S={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.request=this.actor.send(v,S,(D,R)=>(delete s.request,s.unloadVectorData(),s.aborted?f(null):D?f(D):(s.loadVectorData(R,this.map.painter,"reloadTile"===v),f(null))))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0}unloadTile(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var _r=y.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ii extends y.E{constructor(s,f,v,S){super(),this.load=(D,R)=>{this._loaded=!1,this.fire(new y.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=it.getImage(this.map._requestManager.transformRequest(this.url,Mt.Image),(N,H)=>{this._request=null,this._loaded=!0,N?this.fire(new y.j(N)):H&&(this.image=H,D&&(this.coordinates=D),R&&R(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||!this.image)return;const D=this.map.painter.context,R=D.gl;this.boundsBuffer||(this.boundsBuffer=D.createVertexBuffer(this._boundsArray,_r.members)),this.boundsSegments||(this.boundsSegments=y.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new hi(D,this.image,R.RGBA),this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE));let N=!1;for(const H in this.tiles){const W=this.tiles[H];"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture,N=!0)}N&&this.fire(new y.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=s,this.dispatcher=v,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=f}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=s.url,this.load(s.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new y.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(s){this.coordinates=s;const f=s.map(y.U.fromLngLat);this.tileID=function(S){let D=1/0,R=1/0,N=-1/0,H=-1/0;for(const ae of S)D=Math.min(D,ae.x),R=Math.min(R,ae.y),N=Math.max(N,ae.x),H=Math.max(H,ae.y);const W=Math.max(N-D,H-R),Q=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),X=Math.pow(2,Q);return new y.W(Q,Math.floor((D+N)/2*X),Math.floor((R+H)/2*X))}(f),this.minzoom=this.maxzoom=this.tileID.z;const v=f.map(S=>this.tileID.getTilePoint(S)._round());return this._boundsArray=new y.V,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,y.N,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,y.N),this._boundsArray.emplaceBack(v[2].x,v[2].y,y.N,y.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new y.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(s,f){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},f(null)):(s.state="errored",f(null))}hasTransition(){return!1}}class Yn extends ii{constructor(s,f,v,S){super(s,f,v,S),this.load=()=>{this._loaded=!1;const D=this.options;this.urls=[];for(const R of D.urls)this.urls.push(this.map._requestManager.transformRequest(R,Mt.Source).url);y.X(this.urls,(R,N)=>{this._loaded=!0,R?this.fire(new y.j(R)):N&&(this.video=N,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const D=this.map.painter.context,R=D.gl;this.boundsBuffer||(this.boundsBuffer=D.createVertexBuffer(this._boundsArray,_r.members)),this.boundsSegments||(this.boundsSegments=y.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE),R.texSubImage2D(R.TEXTURE_2D,0,0,0,R.RGBA,R.UNSIGNED_BYTE,this.video)):(this.texture=new hi(D,this.video,R.RGBA),this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE));let N=!1;for(const H in this.tiles){const W=this.tiles[H];"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture,N=!0)}N&&this.fire(new y.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=f}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const f=this.video.seekable;s<f.start(0)||s>f.end(0)?this.fire(new y.j(new y.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Zr extends ii{constructor(s,f,v,S){super(s,f,v,S),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new y.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let D=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,D=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,D=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const R=this.map.painter.context,N=R.gl;this.boundsBuffer||(this.boundsBuffer=R.createVertexBuffer(this._boundsArray,_r.members)),this.boundsSegments||(this.boundsSegments=y.S.simpleSegment(0,0,4,2)),this.texture?(D||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new hi(R,this.canvas,N.RGBA,{premultiply:!0});let H=!1;for(const W in this.tiles){const Q=this.tiles[W];"loaded"!==Q.state&&(Q.state="loaded",Q.texture=this.texture,H=!0)}H&&this.fire(new y.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),f.coordinates?Array.isArray(f.coordinates)&&4===f.coordinates.length&&!f.coordinates.some(D=>!Array.isArray(D)||2!==D.length||D.some(R=>"number"!=typeof R))||this.fire(new y.j(new y.Y(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new y.j(new y.Y(`sources.${s}`,null,'missing required property "coordinates"'))),f.animate&&"boolean"!=typeof f.animate&&this.fire(new y.j(new y.Y(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),f.canvas?"string"==typeof f.canvas||f.canvas instanceof HTMLCanvasElement||this.fire(new y.j(new y.Y(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new y.j(new y.Y(`sources.${s}`,null,'missing required property "canvas"'))),this.options=f,this.animate=void 0===f.animate||f.animate}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const Ho={},$o=E=>{switch(E){case"geojson":return Er;case"image":return ii;case"raster":return Ci;case"raster-dem":return Si;case"vector":return Ji;case"video":return Yn;case"canvas":return Zr}return Ho[E]};function Wi(E,s){const f=y.Z();return y.$(f,f,[1,1,0]),y.a0(f,f,[.5*E.width,.5*E.height,1]),y.a1(f,f,E.calculatePosMatrix(s.toUnwrapped()))}function Po(E,s,f,v,S,D){const R=function(X,ae,be){if(X)for(const ye of X){const Te=ae[ye];if(Te&&Te.source===be&&"fill-extrusion"===Te.type)return!0}else for(const ye in ae){const Te=ae[ye];if(Te.source===be&&"fill-extrusion"===Te.type)return!0}return!1}(S&&S.layers,s,E.id),N=D.maxPitchScaleFactor(),H=E.tilesIn(v,N,R);H.sort(Br);const W=[];for(const X of H)W.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(s,f,E._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,S,D,N,Wi(E.transform,X.tileID))});const Q=function(X){const ae={},be={};for(const ye of X){const Te=ye.queryResults,ge=ye.wrappedTileID,je=be[ge]=be[ge]||{};for(const nt in Te){const Se=Te[nt],Ze=je[nt]=je[nt]||{},st=ae[nt]=ae[nt]||[];for(const Je of Se)Ze[Je.featureIndex]||(Ze[Je.featureIndex]=!0,st.push(Je))}}return ae}(W);for(const X in Q)Q[X].forEach(ae=>{const be=ae.feature,ye=E.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=ye});return Q}function Br(E,s){const f=E.tileID,v=s.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}class Ke{constructor(s,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=y.a2(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const f=s+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,f,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(S,D){const R={};if(!D)return R;for(const N of S){const H=N.layerIds.map(W=>D.getLayer(W)).filter(Boolean);if(0!==H.length){N.layers=H,N.stateDependentLayerIds&&(N.stateDependentLayers=N.stateDependentLayerIds.map(W=>H.filter(Q=>Q.id===W)[0]));for(const W of H)R[W.id]=N}}return R}(s.buckets,f.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const D=this.buckets[S];if(D instanceof y.a4){if(this.hasSymbolBuckets=!0,!v)break;D.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const D=this.buckets[S];if(D instanceof y.a4&&D.hasRTLText){this.hasRTLText=!0,y.a5();break}}this.queryPadding=0;for(const S in this.buckets){const D=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(S).queryRadius(D))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new y.a3}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const v in this.buckets){const S=this.buckets[v];S.uploadPending()&&S.upload(s)}const f=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hi(s,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hi(s,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,f,v,S,D,R,N,H,W,Q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:D,scale:R,tileSize:this.tileSize,pixelPosMatrix:Q,transform:H,params:N,queryPadding:this.queryPadding*W},s,f,v):{}}querySourceFeatures(s,f){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const S=v.loadVTLayers(),D=f&&f.sourceLayer?f.sourceLayer:"",R=S._geojsonTileLayer||S[D];if(!R)return;const N=y.a6(f&&f.filter),{z:H,x:W,y:Q}=this.tileID.canonical,X={z:H,x:W,y:Q};for(let ae=0;ae<R.length;ae++){const be=R.feature(ae);if(N.needGeometry){const ge=y.a7(be,!0);if(!N.filter(new y.a8(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!N.filter(new y.a8(this.tileID.overscaledZ),be))continue;const ye=v.getId(be,D),Te=new y.a9(be,H,W,Q,ye);Te.tile=X,s.push(Te)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const f=this.expirationTime;if(s.cacheControl){const v=y.aa(s.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const v=Date.now();let S=!1;if(this.expirationTime>v)S=!1;else if(f)if(this.expirationTime<f)S=!0;else{const D=this.expirationTime-f;D?this.expirationTime=v+Math.max(D,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(s,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(s).length)return;const v=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!f.style.hasLayer(S))continue;const D=this.buckets[S],R=D.layers[0].sourceLayer||"_geojsonTileLayer",N=v[R],H=s[R];if(!N||!H||0===Object.keys(H).length)continue;D.update(H,N,this.imageAtlas&&this.imageAtlas.patternPositions||{});const W=f&&f.style&&f.style.getLayer(S);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(D)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<y.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=y.h.now()+s}setDependencies(s,f){const v={};for(const S of f)v[S]=!0;this.dependencies[s]=v}hasDependency(s,f){for(const v of s){const S=this.dependencies[v];if(S)for(const D of f)if(S[D])return!0}return!1}}class dt{constructor(s,f){this.max=s,this.onRemove=f,this.reset()}reset(){for(const s in this.data)for(const f of this.data[s])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(s,f,v){const S=s.wrapped().key;void 0===this.data[S]&&(this.data[S]=[]);const D={value:f,timeout:void 0};if(void 0!==v&&(D.timeout=setTimeout(()=>{this.remove(s,D)},v)),this.data[S].push(D),this.order.push(S),this.order.length>this.max){const R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const f=this.data[s].shift();return f.timeout&&clearTimeout(f.timeout),0===this.data[s].length&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),f.value}getByKey(s){const f=this.data[s];return f?f[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,f){if(!this.has(s))return this;const v=s.wrapped().key,S=void 0===f?0:this.data[v].indexOf(f),D=this.data[v][S];return this.data[v].splice(S,1),D.timeout&&clearTimeout(D.timeout),0===this.data[v].length&&delete this.data[v],this.onRemove(D.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(s){const f=[];for(const v in this.data)for(const S of this.data[v])s(S.value)||f.push(S);for(const v of f)this.remove(v.value.tileID,v)}}class ze{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,f,v){const S=String(f);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][S]=this.stateChanges[s][S]||{},y.e(this.stateChanges[s][S],v),null===this.deletedStates[s]){this.deletedStates[s]={};for(const D in this.state[s])D!==S&&(this.deletedStates[s][D]=null)}else if(this.deletedStates[s]&&null===this.deletedStates[s][S]){this.deletedStates[s][S]={};for(const D in this.state[s][S])v[D]||(this.deletedStates[s][S][D]=null)}else for(const D in v)this.deletedStates[s]&&this.deletedStates[s][S]&&null===this.deletedStates[s][S][D]&&delete this.deletedStates[s][S][D]}removeFeatureState(s,f,v){if(null===this.deletedStates[s])return;const S=String(f);if(this.deletedStates[s]=this.deletedStates[s]||{},v&&void 0!==f)null!==this.deletedStates[s][S]&&(this.deletedStates[s][S]=this.deletedStates[s][S]||{},this.deletedStates[s][S][v]=null);else if(void 0!==f)if(this.stateChanges[s]&&this.stateChanges[s][S])for(v in this.deletedStates[s][S]={},this.stateChanges[s][S])this.deletedStates[s][S][v]=null;else this.deletedStates[s][S]=null;else this.deletedStates[s]=null}getState(s,f){const v=String(f),S=y.e({},(this.state[s]||{})[v],(this.stateChanges[s]||{})[v]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){const D=this.deletedStates[s][f];if(null===D)return{};for(const R in D)delete S[R]}return S}initializeTileState(s,f){s.setFeatureState(this.state,f)}coalesceChanges(s,f){const v={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const D={};for(const R in this.stateChanges[S])this.state[S][R]||(this.state[S][R]={}),y.e(this.state[S][R],this.stateChanges[S][R]),D[R]=this.state[S][R];v[S]=D}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const D={};if(null===this.deletedStates[S])for(const R in this.state[S])D[R]={},this.state[S][R]={};else for(const R in this.deletedStates[S]){if(null===this.deletedStates[S][R])this.state[S][R]={};else for(const N of Object.keys(this.deletedStates[S][R]))delete this.state[S][R][N];D[R]=this.state[S][R]}v[S]=v[S]||{},y.e(v[S],D)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(v).length)for(const S in s)s[S].setFeatureState(v,f)}}class kt extends y.E{constructor(s,f,v){super(),this.id=s,this.dispatcher=v,this.on("data",S=>{"source"===S.dataType&&"metadata"===S.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===S.dataType&&"content"===S.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((S,D,R,N)=>{const H=new($o(D.type))(S,D,R,N);if(H.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${H.id}`);return H})(s,f,v,this),this._tiles={},this._cache=new dt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ze,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const f=this._tiles[s];if("loaded"!==f.state&&"errored"!==f.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,f){return this._source.loadTile(s,f)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){this._source.abortTile&&this._source.abortTile(s,()=>{}),this._source.fire(new y.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const v=this._tiles[f];v.upload(s),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(xi).map(s=>s.key)}getRenderableIds(s){const f=[];for(const v in this._tiles)this._isIdRenderable(v,s)&&f.push(this._tiles[v]);return s?f.sort((v,S)=>{const D=v.tileID,R=S.tileID,N=new y.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle),H=new y.P(R.canonical.x,R.canonical.y)._rotate(this.transform.angle);return D.overscaledZ-R.overscaledZ||H.y-N.y||H.x-N.x}).map(v=>v.tileID.key):f.map(v=>v.tileID).sort(xi).map(v=>v.key)}hasRenderableParent(s){const f=this.findLoadedParent(s,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(s,f){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(f||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(s,"reloading")}}_reloadTile(s,f){const v=this._tiles[s];v&&("loading"!==v.state&&(v.state=f),this._loadTile(v,this._tileLoaded.bind(this,v,s,f)))}_tileLoaded(s,f,v,S){if(S)return s.state="errored",void(404!==S.status?this._source.fire(new y.j(S,{tile:s})):this.update(this.transform,this.terrain));s.timeAdded=y.h.now(),"expired"===v&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(f,s),"raster-dem"===this.getSource().type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new y.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const f=this.getRenderableIds();for(let S=0;S<f.length;S++){const D=f[S];if(s.neighboringTiles&&s.neighboringTiles[D]){const R=this.getTileByID(D);v(s,R),v(R,s)}}function v(S,D){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let R=D.tileID.canonical.x-S.tileID.canonical.x;const N=D.tileID.canonical.y-S.tileID.canonical.y,H=Math.pow(2,S.tileID.canonical.z),W=D.tileID.key;0===R&&0===N||Math.abs(N)>1||(Math.abs(R)>1&&(1===Math.abs(R+H)?R+=H:1===Math.abs(R-H)&&(R-=H)),D.dem&&S.dem&&(S.dem.backfillBorder(D.dem,R,N),S.neighboringTiles&&S.neighboringTiles[W]&&(S.neighboringTiles[W].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,f,v,S){for(const D in this._tiles){let R=this._tiles[D];if(S[D]||!R.hasData()||R.tileID.overscaledZ<=f||R.tileID.overscaledZ>v)continue;let N=R.tileID;for(;R&&R.tileID.overscaledZ>f+1;){const W=R.tileID.scaledTo(R.tileID.overscaledZ-1);R=this._tiles[W.key],R&&R.hasData()&&(N=W)}let H=N;for(;H.overscaledZ>f;)if(H=H.scaledTo(H.overscaledZ-1),s[H.key]){S[N.key]=N;break}}}findLoadedParent(s,f){if(s.key in this._loadedParentTiles){const v=this._loadedParentTiles[s.key];return v&&v.tileID.overscaledZ>=f?v:null}for(let v=s.overscaledZ-1;v>=f;v--){const S=s.scaledTo(v),D=this._getLoadedTile(S);if(D)return D}}_getLoadedTile(s){const f=this._tiles[s.key];return f&&f.hasData()?f:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const f=Math.ceil(s.width/this._source.tileSize)+1,v=Math.ceil(s.height/this._source.tileSize)+1,S=Math.floor(f*v*(null===this._maxTileCacheZoomLevels?y.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),D="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(D)}handleWrapJump(s){const f=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,f){const v={};for(const S in this._tiles){const D=this._tiles[S];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+f),v[D.tileID.key]=D}this._tiles=v;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(S,this._tiles[S])}}update(s,f){if(this.transform=s,this.terrain=f,!this._sourceLoaded||this._paused)return;let v;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new y.O(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(v=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(v=v.filter(Q=>this._source.hasTile(Q)))):v=[];const S=s.coveringZoomLevel(this._source),D=Math.max(S-kt.maxOverzooming,this._source.minzoom),R=Math.max(S+kt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const X of v)if(X.canonical.z>this._source.minzoom){const ae=X.scaledTo(X.canonical.z-1);Q[ae.key]=ae;const be=X.scaledTo(Math.max(this._source.minzoom,Math.min(X.canonical.z,5)));Q[be.key]=be}v=v.concat(Object.values(Q))}const N=0===v.length&&!this._updated&&this._didEmitContent;this._updated=!0,N&&this.fire(new y.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const H=this._updateRetainedTiles(v,S);if(Dn(this._source.type)){const Q={},X={},ae=Object.keys(H),be=y.h.now();for(const ye of ae){const Te=H[ye],ge=this._tiles[ye];if(!ge||0!==ge.fadeEndTime&&ge.fadeEndTime<=be)continue;const je=this.findLoadedParent(Te,D);je&&(this._addTile(je.tileID),Q[je.tileID.key]=je.tileID),X[ye]=Te}this._retainLoadedChildren(X,S,R,H);for(const ye in Q)H[ye]||(this._coveredTiles[ye]=!0,H[ye]=Q[ye]);if(f){const ye={},Te={};for(const ge of v)this._tiles[ge.key].hasData()?ye[ge.key]=ge:Te[ge.key]=ge;for(const ge in Te){const je=Te[ge].children(this._source.maxzoom);this._tiles[je[0].key]&&this._tiles[je[1].key]&&this._tiles[je[2].key]&&this._tiles[je[3].key]&&(ye[je[0].key]=H[je[0].key]=je[0],ye[je[1].key]=H[je[1].key]=je[1],ye[je[2].key]=H[je[2].key]=je[2],ye[je[3].key]=H[je[3].key]=je[3],delete Te[ge])}for(const ge in Te){const je=this.findLoadedParent(Te[ge],this._source.minzoom);if(je){ye[je.tileID.key]=H[je.tileID.key]=je.tileID;for(const nt in ye)ye[nt].isChildOf(je.tileID)&&delete ye[nt]}}for(const ge in this._tiles)ye[ge]||(this._coveredTiles[ge]=!0)}}for(const Q in H)this._tiles[Q].clearFadeHold();const W=y.ab(this._tiles,H);for(const Q of W){const X=this._tiles[Q];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,f){const v={},S={},D=Math.max(f-kt.maxOverzooming,this._source.minzoom),R=Math.max(f+kt.maxUnderzooming,this._source.minzoom),N={};for(const H of s){const W=this._addTile(H);v[H.key]=H,W.hasData()||f<this._source.maxzoom&&(N[H.key]=H)}this._retainLoadedChildren(N,f,R,v);for(const H of s){let W=this._tiles[H.key];if(W.hasData())continue;if(f+1>this._source.maxzoom){const X=H.children(this._source.maxzoom)[0],ae=this.getTile(X);if(ae&&ae.hasData()){v[X.key]=X;continue}}else{const X=H.children(this._source.maxzoom);if(v[X[0].key]&&v[X[1].key]&&v[X[2].key]&&v[X[3].key])continue}let Q=W.wasRequested();for(let X=H.overscaledZ-1;X>=D;--X){const ae=H.scaledTo(X);if(S[ae.key])break;if(S[ae.key]=!0,W=this.getTile(ae),!W&&Q&&(W=this._addTile(ae)),W){const be=W.hasData();if((Q||be)&&(v[ae.key]=ae),Q=W.wasRequested(),be)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const f=[];let v,S=this._tiles[s].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){v=this._loadedParentTiles[S.key];break}f.push(S.key);const D=S.scaledTo(S.overscaledZ-1);if(v=this._getLoadedTile(D),v)break;S=D}for(const D of f)this._loadedParentTiles[D]=v}}_addTile(s){let f=this._tiles[s.key];if(f)return f;f=this._cache.getAndRemove(s),f&&(this._setTileReloadTimer(s.key,f),f.tileID=s,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,f)));const v=f;return f||(f=new Ke(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(f,this._tileLoaded.bind(this,f,s.key,f.state))),f.uses++,this._tiles[s.key]=f,v||this._source.fire(new y.k("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(s,f){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const v=f.getExpiryTimeout();v&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},v))}_removeTile(s){const f=this._tiles[s];f&&(f.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),f.uses>0||(f.hasData()&&"reloading"!==f.state?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,f,v){const S=[],D=this.transform;if(!D)return S;const R=v?D.getCameraQueryGeometry(s):s,N=s.map(ye=>D.pointCoordinate(ye,this.terrain)),H=R.map(ye=>D.pointCoordinate(ye,this.terrain)),W=this.getIds();let Q=1/0,X=1/0,ae=-1/0,be=-1/0;for(const ye of H)Q=Math.min(Q,ye.x),X=Math.min(X,ye.y),ae=Math.max(ae,ye.x),be=Math.max(be,ye.y);for(let ye=0;ye<W.length;ye++){const Te=this._tiles[W[ye]];if(Te.holdingForFade())continue;const ge=Te.tileID,je=Math.pow(2,D.zoom-Te.tileID.overscaledZ),nt=f*Te.queryPadding*y.N/Te.tileSize/je,Se=[ge.getTilePoint(new y.U(Q,X)),ge.getTilePoint(new y.U(ae,be))];if(Se[0].x-nt<y.N&&Se[0].y-nt<y.N&&Se[1].x+nt>=0&&Se[1].y+nt>=0){const Ze=N.map(Je=>ge.getTilePoint(Je)),st=H.map(Je=>ge.getTilePoint(Je));S.push({tile:Te,tileID:ge,queryGeometry:Ze,cameraQueryGeometry:st,scale:je})}}return S}getVisibleCoordinates(s){const f=this.getRenderableIds(s).map(v=>this._tiles[v].tileID);for(const v of f)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(Dn(this._source.type)){const s=y.h.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=s)return!0}return!1}setFeatureState(s,f,v){this._state.updateState(s=s||"_geojsonTileLayer",f,v)}removeFeatureState(s,f,v){this._state.removeFeatureState(s=s||"_geojsonTileLayer",f,v)}getFeatureState(s,f){return this._state.getState(s=s||"_geojsonTileLayer",f)}setDependencies(s,f,v){const S=this._tiles[s];S&&S.setDependencies(f,v)}reloadTilesForDependencies(s,f){for(const v in this._tiles)this._tiles[v].hasDependency(s,f)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(s,f))}}function xi(E,s){const f=Math.abs(2*E.wrap)-+(E.wrap<0),v=Math.abs(2*s.wrap)-+(s.wrap<0);return E.overscaledZ-s.overscaledZ||v-f||s.canonical.y-E.canonical.y||s.canonical.x-E.canonical.x}function Dn(E){return"raster"===E||"image"===E||"video"===E}kt.maxOverzooming=10,kt.maxUnderzooming=3;const an="mapboxgl_preloaded_worker_pool";class Gn{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Gn.workerCount;)this.workers.push(new Worker(y.c.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],0===this.numActive()&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[an]}numActive(){return Object.keys(this.active).length}}const kr=Math.floor(y.h.hardwareConcurrency/2);let Or;function Mn(){return Or||(Or=new Gn),Or}Gn.workerCount=y.ac(globalThis)?Math.max(Math.min(kr,3),1):1;class qi{constructor(s,f){this.reset(s,f)}reset(s,f){this.points=s||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(1===this.points.length)return this.points[0];s=y.ad(s,0,1);let f=1,v=this._distances[f];const S=s*this.paddedLength+this.padding;for(;v<S&&f<this._distances.length;)v=this._distances[++f];const D=f-1,R=this._distances[D],N=v-R,H=N>0?(S-R)/N:0;return this.points[D].mult(1-H).add(this.points[f].mult(H))}}function Cn(E,s){let f=!0;return"always"===E||"never"!==E&&"never"!==s||(f=!1),f}class yn{constructor(s,f,v){const S=this.boxCells=[],D=this.circleCells=[];this.xCellCount=Math.ceil(s/v),this.yCellCount=Math.ceil(f/v);for(let R=0;R<this.xCellCount*this.yCellCount;R++)S.push([]),D.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=f,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,f,v,S,D){this._forEachCell(f,v,S,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(S),this.bboxes.push(D)}insertCircle(s,f,v,S){this._forEachCell(f-S,v-S,f+S,v+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(f),this.circles.push(v),this.circles.push(S)}_insertBoxCell(s,f,v,S,D,R){this.boxCells[D].push(R)}_insertCircleCell(s,f,v,S,D,R){this.circleCells[D].push(R)}_query(s,f,v,S,D,R,N){if(v<0||s>this.width||S<0||f>this.height)return[];const H=[];if(s<=0&&f<=0&&this.width<=v&&this.height<=S){if(D)return[{key:null,x1:s,y1:f,x2:v,y2:S}];for(let W=0;W<this.boxKeys.length;W++)H.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const Q=this.circles[3*W],X=this.circles[3*W+1],ae=this.circles[3*W+2];H.push({key:this.circleKeys[W],x1:Q-ae,y1:X-ae,x2:Q+ae,y2:X+ae})}}else this._forEachCell(s,f,v,S,this._queryCell,H,{hitTest:D,overlapMode:R,seenUids:{box:{},circle:{}}},N);return H}query(s,f,v,S){return this._query(s,f,v,S,!1,null)}hitTest(s,f,v,S,D,R){return this._query(s,f,v,S,!0,D,R).length>0}hitTestCircle(s,f,v,S,D){const R=s-v,N=s+v,H=f-v,W=f+v;if(N<0||R>this.width||W<0||H>this.height)return!1;const Q=[];return this._forEachCell(R,H,N,W,this._queryCellCircle,Q,{hitTest:!0,overlapMode:S,circle:{x:s,y:f,radius:v},seenUids:{box:{},circle:{}}},D),Q.length>0}_queryCell(s,f,v,S,D,R,N,H){const{seenUids:W,hitTest:Q,overlapMode:X}=N,ae=this.boxCells[D];if(null!==ae){const ye=this.bboxes;for(const Te of ae)if(!W.box[Te]){W.box[Te]=!0;const ge=4*Te,je=this.boxKeys[Te];if(s<=ye[ge+2]&&f<=ye[ge+3]&&v>=ye[ge+0]&&S>=ye[ge+1]&&(!H||H(je))&&(!Q||!Cn(X,je.overlapMode))&&(R.push({key:je,x1:ye[ge],y1:ye[ge+1],x2:ye[ge+2],y2:ye[ge+3]}),Q))return!0}}const be=this.circleCells[D];if(null!==be){const ye=this.circles;for(const Te of be)if(!W.circle[Te]){W.circle[Te]=!0;const ge=3*Te,je=this.circleKeys[Te];if(this._circleAndRectCollide(ye[ge],ye[ge+1],ye[ge+2],s,f,v,S)&&(!H||H(je))&&(!Q||!Cn(X,je.overlapMode))){const nt=ye[ge],Se=ye[ge+1],Ze=ye[ge+2];if(R.push({key:je,x1:nt-Ze,y1:Se-Ze,x2:nt+Ze,y2:Se+Ze}),Q)return!0}}}return!1}_queryCellCircle(s,f,v,S,D,R,N,H){const{circle:W,seenUids:Q,overlapMode:X}=N,ae=this.boxCells[D];if(null!==ae){const ye=this.bboxes;for(const Te of ae)if(!Q.box[Te]){Q.box[Te]=!0;const ge=4*Te,je=this.boxKeys[Te];if(this._circleAndRectCollide(W.x,W.y,W.radius,ye[ge+0],ye[ge+1],ye[ge+2],ye[ge+3])&&(!H||H(je))&&!Cn(X,je.overlapMode))return R.push(!0),!0}}const be=this.circleCells[D];if(null!==be){const ye=this.circles;for(const Te of be)if(!Q.circle[Te]){Q.circle[Te]=!0;const ge=3*Te,je=this.circleKeys[Te];if(this._circlesCollide(ye[ge],ye[ge+1],ye[ge+2],W.x,W.y,W.radius)&&(!H||H(je))&&!Cn(X,je.overlapMode))return R.push(!0),!0}}}_forEachCell(s,f,v,S,D,R,N,H){const W=this._convertToXCellCoord(s),Q=this._convertToYCellCoord(f),X=this._convertToXCellCoord(v),ae=this._convertToYCellCoord(S);for(let be=W;be<=X;be++)for(let ye=Q;ye<=ae;ye++)if(D.call(this,s,f,v,S,this.xCellCount*ye+be,R,N,H))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,f,v,S,D,R){const N=S-s,H=D-f,W=v+R;return W*W>N*N+H*H}_circleAndRectCollide(s,f,v,S,D,R,N){const H=(R-S)/2,W=Math.abs(s-(S+H));if(W>H+v)return!1;const Q=(N-D)/2,X=Math.abs(f-(D+Q));if(X>Q+v)return!1;if(W<=H||X<=Q)return!0;const ae=W-H,be=X-Q;return ae*ae+be*be<=v*v}}function It(E,s,f,v,S){const D=y.Z();return s?(y.a0(D,D,[1/S,1/S,1]),f||y.ae(D,D,v.angle)):y.a1(D,v.labelPlaneMatrix,E),D}function Ko(E,s,f,v,S){if(s){const D=y.af(E);return y.a0(D,D,[S,S,1]),f||y.ae(D,D,-v.angle),D}return v.glCoordMatrix}function Vn(E,s,f){let v;f?(v=[E.x,E.y,f(E.x,E.y),1],y.ag(v,v,s)):(v=[E.x,E.y,0,1],ve(v,v,s));const S=v[3];return{point:new y.P(v[0]/S,v[1]/S),signedDistanceFromCamera:S}}function Qo(E,s){return.5+E/s*.5}function Rr(E,s){const f=E[0]/E[3],v=E[1]/E[3];return f>=-s[0]&&f<=s[0]&&v>=-s[1]&&v<=s[1]}function Lt(E,s,f,v,S,D,R,N,H,W){const Q=v?E.textSizeData:E.iconSizeData,X=y.ah(Q,f.transform.zoom),ae=[256/f.width*2+1,256/f.height*2+1],be=v?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;be.clear();const ye=E.lineVertexArray,Te=v?E.text.placedSymbolArray:E.icon.placedSymbolArray,ge=f.transform.width/f.transform.height;let je=!1;for(let nt=0;nt<Te.length;nt++){const Se=Te.get(nt);if(Se.hidden||Se.writingMode===y.ai.vertical&&!je){me(Se.numGlyphs,be);continue}let Ze;if(je=!1,W?(Ze=[Se.anchorX,Se.anchorY,W(Se.anchorX,Se.anchorY),1],y.ag(Ze,Ze,s)):(Ze=[Se.anchorX,Se.anchorY,0,1],ve(Ze,Ze,s)),!Rr(Ze,ae)){me(Se.numGlyphs,be);continue}const st=Qo(f.transform.cameraToCenterDistance,Ze[3]),Je=y.aj(Q,X,Se),pt=R?Je/st:Je*st,Ct=new y.P(Se.anchorX,Se.anchorY),vt=Vn(Ct,S,W).point,St={projections:{},offsets:{}},Jt=ei(Se,pt,!1,N,s,S,D,E.glyphOffsetArray,ye,be,vt,Ct,St,ge,H,W);je=Jt.useVertical,(Jt.notEnoughRoom||je||Jt.needsFlipping&&ei(Se,pt,!0,N,s,S,D,E.glyphOffsetArray,ye,be,vt,Ct,St,ge,H,W).notEnoughRoom)&&me(Se.numGlyphs,be)}v?E.text.dynamicLayoutVertexBuffer.updateData(be):E.icon.dynamicLayoutVertexBuffer.updateData(be)}function Yt(E,s,f,v,S,D,R,N,H,W,Q,X,ae){const be=N.glyphStartIndex+N.numGlyphs,ye=N.lineStartIndex,Te=N.lineStartIndex+N.lineLength,ge=s.getoffsetX(N.glyphStartIndex),je=s.getoffsetX(be-1),nt=ie(E*ge,f,v,S,D,R,N.segment,ye,Te,H,W,Q,X,ae);if(!nt)return null;const Se=ie(E*je,f,v,S,D,R,N.segment,ye,Te,H,W,Q,X,ae);return Se?{first:nt,last:Se}:null}function Ln(E,s,f,v){return E===y.ai.horizontal&&Math.abs(f.y-s.y)>Math.abs(f.x-s.x)*v?{useVertical:!0}:(E===y.ai.vertical?s.y<f.y:s.x>f.x)?{needsFlipping:!0}:null}function ei(E,s,f,v,S,D,R,N,H,W,Q,X,ae,be,ye,Te){const ge=s/24,je=E.lineOffsetX*ge,nt=E.lineOffsetY*ge;let Se;if(E.numGlyphs>1){const Ze=E.glyphStartIndex+E.numGlyphs,st=E.lineStartIndex,Je=E.lineStartIndex+E.lineLength,pt=Yt(ge,N,je,nt,f,Q,X,E,H,D,ae,ye,Te);if(!pt)return{notEnoughRoom:!0};const Ct=Vn(pt.first.point,R,Te).point,vt=Vn(pt.last.point,R,Te).point;if(v&&!f){const St=Ln(E.writingMode,Ct,vt,be);if(St)return St}Se=[pt.first];for(let St=E.glyphStartIndex+1;St<Ze-1;St++)Se.push(ie(ge*N.getoffsetX(St),je,nt,f,Q,X,E.segment,st,Je,H,D,ae,ye,Te));Se.push(pt.last)}else{if(v&&!f){const st=Vn(X,S,Te).point,Je=E.lineStartIndex+E.segment+1,pt=new y.P(H.getx(Je),H.gety(Je)),Ct=Vn(pt,S,Te),vt=Ct.signedDistanceFromCamera>0?Ct.point:bo(X,pt,st,1,S,Te),St=Ln(E.writingMode,st,vt,be);if(St)return St}const Ze=ie(ge*N.getoffsetX(E.glyphStartIndex),je,nt,f,Q,X,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,H,D,ae,ye,Te);if(!Ze)return{notEnoughRoom:!0};Se=[Ze]}for(const Ze of Se)y.ak(W,Ze.point,Ze.angle);return{}}function bo(E,s,f,v,S,D){const R=Vn(E.add(E.sub(s)._unit()),S,D).point,N=f.sub(R);return f.add(N._mult(v/N.mag()))}function Nn(E,s){const{projectionCache:f,lineVertexArray:v,labelPlaneMatrix:S,tileAnchorPoint:D,distanceFromAnchor:R,getElevation:N,previousVertex:H,direction:W,absOffsetX:Q}=s;if(f.projections[E])return f.projections[E];const X=new y.P(v.getx(E),v.gety(E)),ae=Vn(X,S,N);if(ae.signedDistanceFromCamera>0)return f.projections[E]=ae.point,ae.point;const be=E-W;return bo(0===R?D:new y.P(v.getx(be),v.gety(be)),X,H,Q-R+1,S,N)}function Fs(E,s,f){return E._unit()._perp()._mult(s*f)}function we(E,s,f,v,S,D,R,N){const{projectionCache:H,direction:W}=N;if(H.offsets[E])return H.offsets[E];const Q=f.add(s);if(E+W<v||E+W>=S)return H.offsets[E]=Q,Q;const X=Nn(E+W,N),ae=Fs(X.sub(f),R,W),be=f.add(ae),ye=X.add(ae);return H.offsets[E]=y.al(D,Q,be,ye)||Q,H.offsets[E]}function ie(E,s,f,v,S,D,R,N,H,W,Q,X,ae,be){const ye=v?E-s:E+s;let Te=ye>0?1:-1,ge=0;v&&(Te*=-1,ge=Math.PI),Te<0&&(ge+=Math.PI);let je,nt,Se=Te>0?N+R:N+R+1,Ze=S,st=S,Je=0,pt=0;const Ct=Math.abs(ye),vt=[];let St;for(;Je+pt<=Ct;){if(Se+=Te,Se<N||Se>=H)return null;Je+=pt,st=Ze,nt=je;const zt={projectionCache:X,lineVertexArray:W,labelPlaneMatrix:Q,tileAnchorPoint:D,distanceFromAnchor:Je,getElevation:be,previousVertex:st,direction:Te,absOffsetX:Ct};if(Ze=Nn(Se,zt),0===f)vt.push(st),St=Ze.sub(st);else{let mn;const cn=Ze.sub(st);mn=0===cn.mag()?Fs(Nn(Se+Te,zt).sub(Ze),f,Te):Fs(cn,f,Te),nt||(nt=st.add(mn)),je=we(Se,mn,Ze,N,H,nt,f,zt),vt.push(nt),St=je.sub(nt)}pt=St.mag()}const Jt=St._mult((Ct-Je)/pt)._add(nt||st),_i=ge+Math.atan2(Ze.y-st.y,Ze.x-st.x);return vt.push(Jt),{point:Jt,angle:ae?_i:0,path:vt}}const oe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function me(E,s){for(let f=0;f<E;f++){const v=s.length;s.resize(v+4),s.float32.set(oe,3*v)}}function ve(E,s,f){const v=s[0],S=s[1];return E[0]=f[0]*v+f[4]*S+f[12],E[1]=f[1]*v+f[5]*S+f[13],E[3]=f[3]*v+f[7]*S+f[15],E}const De=100;class Ge{constructor(s,f=new yn(s.width+200,s.height+200,25),v=new yn(s.width+200,s.height+200,25)){this.transform=s,this.grid=f,this.ignoredGrid=v,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+De,this.screenBottomBoundary=s.height+De,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,f,v,S,D,R){const N=this.projectAndGetPerspectiveRatio(S,s.anchorPointX,s.anchorPointY,R),H=v*N.perspectiveRatio,W=s.x1*H+N.point.x,Q=s.y1*H+N.point.y,X=s.x2*H+N.point.x,ae=s.y2*H+N.point.y;return!this.isInsideGrid(W,Q,X,ae)||"always"!==f&&this.grid.hitTest(W,Q,X,ae,f,D)||N.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[W,Q,X,ae],offscreen:this.isOffscreen(W,Q,X,ae)}}placeCollisionCircles(s,f,v,S,D,R,N,H,W,Q,X,ae,be,ye){const Te=[],ge=new y.P(f.anchorX,f.anchorY),je=Vn(ge,R,ye),nt=Qo(this.transform.cameraToCenterDistance,je.signedDistanceFromCamera),Se=(Q?D/nt:D*nt)/y.ap,Ze=Vn(ge,N,ye).point,st=Yt(Se,S,f.lineOffsetX*Se,f.lineOffsetY*Se,!1,Ze,ge,f,v,N,{projections:{},offsets:{}},!1,ye);let Je=!1,pt=!1,Ct=!0;if(st){const vt=.5*ae*nt+be,St=new y.P(-100,-100),Jt=new y.P(this.screenRightBoundary,this.screenBottomBoundary),_i=new qi,zt=st.first,mn=st.last;let cn=[];for(let ri=zt.path.length-1;ri>=1;ri--)cn.push(zt.path[ri]);for(let ri=1;ri<mn.path.length;ri++)cn.push(mn.path[ri]);const dr=2.5*vt;if(H){const ri=cn.map(An=>Vn(An,H,ye));cn=ri.some(An=>An.signedDistanceFromCamera<=0)?[]:ri.map(An=>An.point)}let A=[];if(cn.length>0){const ri=cn[0].clone(),An=cn[0].clone();for(let Fr=1;Fr<cn.length;Fr++)ri.x=Math.min(ri.x,cn[Fr].x),ri.y=Math.min(ri.y,cn[Fr].y),An.x=Math.max(An.x,cn[Fr].x),An.y=Math.max(An.y,cn[Fr].y);A=ri.x>=St.x&&An.x<=Jt.x&&ri.y>=St.y&&An.y<=Jt.y?[cn]:An.x<St.x||ri.x>Jt.x||An.y<St.y||ri.y>Jt.y?[]:y.am([cn],St.x,St.y,Jt.x,Jt.y)}for(const ri of A){_i.reset(ri,.25*vt);let An=0;An=_i.length<=.5*vt?1:Math.ceil(_i.paddedLength/dr)+1;for(let Fr=0;Fr<An;Fr++){const $i=Fr/Math.max(An-1,1),ns=_i.lerp($i),Qr=ns.x+De,Xr=ns.y+De;Te.push(Qr,Xr,vt,0);const Gs=Qr-vt,xr=Xr-vt,Pr=Qr+vt,Qa=Xr+vt;if(Ct=Ct&&this.isOffscreen(Gs,xr,Pr,Qa),pt=pt||this.isInsideGrid(Gs,xr,Pr,Qa),"always"!==s&&this.grid.hitTestCircle(Qr,Xr,vt,s,X)&&(Je=!0,!W))return{circles:[],offscreen:!1,collisionDetected:Je}}}}return{circles:!W&&Je||!pt||nt<this.perspectiveRatioCutoff?[]:Te,offscreen:Ct,collisionDetected:Je}}queryRenderedSymbols(s){if(0===s.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const f=[];let v=1/0,S=1/0,D=-1/0,R=-1/0;for(const Q of s){const X=new y.P(Q.x+De,Q.y+De);v=Math.min(v,X.x),S=Math.min(S,X.y),D=Math.max(D,X.x),R=Math.max(R,X.y),f.push(X)}const N=this.grid.query(v,S,D,R).concat(this.ignoredGrid.query(v,S,D,R)),H={},W={};for(const Q of N){const X=Q.key;if(void 0===H[X.bucketInstanceId]&&(H[X.bucketInstanceId]={}),H[X.bucketInstanceId][X.featureIndex])continue;const ae=[new y.P(Q.x1,Q.y1),new y.P(Q.x2,Q.y1),new y.P(Q.x2,Q.y2),new y.P(Q.x1,Q.y2)];y.an(f,ae)&&(H[X.bucketInstanceId][X.featureIndex]=!0,void 0===W[X.bucketInstanceId]&&(W[X.bucketInstanceId]=[]),W[X.bucketInstanceId].push(X.featureIndex))}return W}insertCollisionBox(s,f,v,S,D,R){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:D,collisionGroupID:R,overlapMode:f},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,f,v,S,D,R){const N=v?this.ignoredGrid:this.grid,H={bucketInstanceId:S,featureIndex:D,collisionGroupID:R,overlapMode:f};for(let W=0;W<s.length;W+=4)N.insertCircle(H,s[W],s[W+1],s[W+2])}projectAndGetPerspectiveRatio(s,f,v,S){let D;return S?(D=[f,v,S(f,v),1],y.ag(D,D,s)):(D=[f,v,0,1],ve(D,D,s)),{point:new y.P((D[0]/D[3]+1)/2*this.transform.width+De,(-D[1]/D[3]+1)/2*this.transform.height+De),perspectiveRatio:.5+this.transform.cameraToCenterDistance/D[3]*.5}}isOffscreen(s,f,v,S){return v<De||s>=this.screenRightBoundary||S<De||f>this.screenBottomBoundary}isInsideGrid(s,f,v,S){return v>=0&&s<this.gridRightBoundary&&S>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const s=y.ao([]);return y.$(s,s,[-100,-100,0]),s}}function Oe(E,s,f){return s*(y.N/(E.tileSize*Math.pow(2,f-E.tileID.overscaledZ)))}class Le{constructor(s,f,v,S){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?f:-f))):S&&v?1:0,this.placed=v}isHidden(){return 0===this.opacity&&!this.placed}}class Re{constructor(s,f,v,S,D){this.text=new Le(s?s.text:null,f,v,D),this.icon=new Le(s?s.icon:null,f,S,D)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ht{constructor(s,f,v){this.text=s,this.icon=f,this.skipFade=v}}class ut{constructor(){this.invProjMatrix=y.Z(),this.viewportMatrix=y.Z(),this.circles=[]}}class Xe{constructor(s,f,v,S,D){this.bucketInstanceId=s,this.featureIndex=f,this.sourceLayerIndex=v,this.bucketIndex=S,this.tileID=D}}class Kt{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const f=++this.maxGroupID;this.collisionGroups[s]={ID:f,predicate:v=>v.collisionGroupID===f}}return this.collisionGroups[s]}}function sn(E,s,f,v,S){const{horizontalAlign:D,verticalAlign:R}=y.au(E);return new y.P(-(D-.5)*s+v[0]*S,-(R-.5)*f+v[1]*S)}function Ht(E,s,f,v,S,D){const{x1:R,x2:N,y1:H,y2:W,anchorPointX:Q,anchorPointY:X}=E,ae=new y.P(s,f);return v&&ae._rotate(S?D:-D),{x1:R+ae.x,y1:H+ae.y,x2:N+ae.x,y2:W+ae.y,anchorPointX:Q,anchorPointY:X}}class Qt{constructor(s,f,v,S,D){this.transform=s.clone(),this.terrain=f,this.collisionIndex=new Ge(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Kt(S),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,f,v,S){const D=v.getBucket(f),R=v.latestFeatureIndex;if(!D||!R||f.id!==D.layerIds[0])return;const N=v.collisionBoxArray,H=D.layers[0].layout,W=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Q=v.tileSize/y.N,X=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),ae="map"===H.get("text-pitch-alignment"),be="map"===H.get("text-rotation-alignment"),ye=Oe(v,1,this.transform.zoom),Te=It(X,ae,be,this.transform,ye);let ge=null;if(ae){const nt=Ko(X,ae,be,this.transform,ye);ge=y.a1([],this.transform.labelPlaneMatrix,nt)}this.retainedQueryData[D.bucketInstanceId]=new Xe(D.bucketInstanceId,R,D.sourceLayerIndex,D.index,v.tileID);const je={bucket:D,layout:H,posMatrix:X,textLabelPlaneMatrix:Te,labelToScreenMatrix:ge,scale:W,textPixelRatio:Q,holdingForFade:v.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:y.ah(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(S)for(const nt of D.sortKeyRanges){const{sortKey:Se,symbolInstanceStart:Ze,symbolInstanceEnd:st}=nt;s.push({sortKey:Se,symbolInstanceStart:Ze,symbolInstanceEnd:st,parameters:je})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:je})}attemptAnchorPlacement(s,f,v,S,D,R,N,H,W,Q,X,ae,be,ye,Te,ge){const je=y.aq[s.textAnchor],nt=[s.textOffset0,s.textOffset1],Se=sn(je,v,S,nt,D),Ze=this.collisionIndex.placeCollisionBox(Ht(f,Se.x,Se.y,R,N,this.transform.angle),X,H,W,Q.predicate,ge);if((!Te||0!==this.collisionIndex.placeCollisionBox(Ht(Te,Se.x,Se.y,R,N,this.transform.angle),X,H,W,Q.predicate,ge).box.length)&&Ze.box.length>0){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ae.crossTileID]&&this.prevPlacement.placements[ae.crossTileID]&&this.prevPlacement.placements[ae.crossTileID].text&&(st=this.prevPlacement.variableOffsets[ae.crossTileID].anchor),0===ae.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ae.crossTileID]={textOffset:nt,width:v,height:S,anchor:je,textBoxScale:D,prevAnchor:st},this.markUsedJustification(be,je,ae,ye),be.allowVerticalPlacement&&(this.markUsedOrientation(be,ye,ae),this.placedOrientations[ae.crossTileID]=ye),{shift:Se,placedGlyphBoxes:Ze}}}placeLayerBucketPart(s,f,v){const{bucket:S,layout:D,posMatrix:R,textLabelPlaneMatrix:N,labelToScreenMatrix:H,textPixelRatio:W,holdingForFade:Q,collisionBoxArray:X,partiallyEvaluatedTextSize:ae,collisionGroup:be}=s.parameters,ye=D.get("text-optional"),Te=D.get("icon-optional"),ge=y.ar(D,"text-overlap","text-allow-overlap"),je="always"===ge,nt=y.ar(D,"icon-overlap","icon-allow-overlap"),Se="always"===nt,Ze="map"===D.get("text-rotation-alignment"),st="map"===D.get("text-pitch-alignment"),Je="none"!==D.get("icon-text-fit"),pt="viewport-y"===D.get("symbol-z-order"),Ct=je&&(Se||!S.hasIconData()||Te),vt=Se&&(je||!S.hasTextData()||ye);!S.collisionArrays&&X&&S.deserializeCollisionBoxes(X);const St=this.retainedQueryData[S.bucketInstanceId].tileID,Jt=this.terrain?(zt,mn)=>this.terrain.getElevation(St,zt,mn):null,_i=(zt,mn)=>{var cn,dr;if(f[zt.crossTileID])return;if(Q)return void(this.placements[zt.crossTileID]=new ht(!1,!1,!1));let A=!1,ri=!1,An=!0,Fr=null,$i={box:null,offscreen:null},ns={box:null,offscreen:null},Qr=null,Xr=null,Gs=null,xr=0,Pr=0,Qa=0;mn.textFeatureIndex?xr=mn.textFeatureIndex:zt.useRuntimeCollisionCircles&&(xr=zt.featureIndex),mn.verticalTextFeatureIndex&&(Pr=mn.verticalTextFeatureIndex);const Xa=mn.textBox;if(Xa){const wo=zr=>{let ao=y.ai.horizontal;if(S.allowVerticalPlacement&&!zr&&this.prevPlacement){const Oo=this.prevPlacement.placedOrientations[zt.crossTileID];Oo&&(this.placedOrientations[zt.crossTileID]=Oo,ao=Oo,this.markUsedOrientation(S,ao,zt))}return ao},Jr=(zr,ao)=>{if(S.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&mn.verticalTextBox){for(const Oo of S.writingModes)if(Oo===y.ai.vertical?($i=ao(),ns=$i):$i=zr(),$i&&$i.box&&$i.box.length)break}else $i=zr()},Co=zt.textAnchorOffsetStartIndex,_s=zt.textAnchorOffsetEndIndex;if(_s===Co){const zr=(ao,Oo)=>{const Ar=this.collisionIndex.placeCollisionBox(ao,ge,W,R,be.predicate,Jt);return Ar&&Ar.box&&Ar.box.length&&(this.markUsedOrientation(S,Oo,zt),this.placedOrientations[zt.crossTileID]=Oo),Ar};Jr(()=>zr(Xa,y.ai.horizontal),()=>{const ao=mn.verticalTextBox;return S.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&ao?zr(ao,y.ai.vertical):{box:null,offscreen:null}}),wo($i&&$i.box&&$i.box.length)}else{let zr=y.aq[null===(dr=null===(cn=this.prevPlacement)||void 0===cn?void 0:cn.variableOffsets[zt.crossTileID])||void 0===dr?void 0:dr.anchor];const ao=(Ar,Na,Bu)=>{const iu=Ar.x2-Ar.x1,xc=Ar.y2-Ar.y1,Vu=zt.textBoxScale,gh=Je&&"never"===nt?Na:null;let Ja={box:[],offscreen:!1},Jl="never"===ge?1:2,Zs="never";zr&&Jl++;for(let wn=0;wn<Jl;wn++){for(let en=Co;en<_s;en++){const fd=S.textAnchorOffsets.get(en);if(zr&&fd.textAnchor!==zr)continue;const el=this.attemptAnchorPlacement(fd,Ar,iu,xc,Vu,Ze,st,W,R,be,Zs,zt,S,Bu,gh,Jt);if(el&&(Ja=el.placedGlyphBoxes,Ja&&Ja.box&&Ja.box.length))return A=!0,Fr=el.shift,Ja}zr?zr=null:Zs=ge}return Ja};Jr(()=>ao(Xa,mn.iconBox,y.ai.horizontal),()=>{const Ar=mn.verticalTextBox;return S.allowVerticalPlacement&&!($i&&$i.box&&$i.box.length)&&zt.numVerticalGlyphVertices>0&&Ar?ao(Ar,mn.verticalIconBox,y.ai.vertical):{box:null,offscreen:null}}),$i&&(A=$i.box,An=$i.offscreen);const Oo=wo($i&&$i.box);if(!A&&this.prevPlacement){const Ar=this.prevPlacement.variableOffsets[zt.crossTileID];Ar&&(this.variableOffsets[zt.crossTileID]=Ar,this.markUsedJustification(S,Ar.anchor,zt,Oo))}}}if(Qr=$i,A=Qr&&Qr.box&&Qr.box.length>0,An=Qr&&Qr.offscreen,zt.useRuntimeCollisionCircles){const wo=S.text.placedSymbolArray.get(zt.centerJustifiedTextSymbolIndex),Jr=y.aj(S.textSizeData,ae,wo),Co=D.get("text-padding");Xr=this.collisionIndex.placeCollisionCircles(ge,wo,S.lineVertexArray,S.glyphOffsetArray,Jr,R,N,H,v,st,be.predicate,zt.collisionCircleDiameter,Co,Jt),Xr.circles.length&&Xr.collisionDetected&&!v&&y.w("Collisions detected, but collision boxes are not shown"),A=je||Xr.circles.length>0&&!Xr.collisionDetected,An=An&&Xr.offscreen}if(mn.iconFeatureIndex&&(Qa=mn.iconFeatureIndex),mn.iconBox){const wo=Jr=>{const Co=Je&&Fr?Ht(Jr,Fr.x,Fr.y,Ze,st,this.transform.angle):Jr;return this.collisionIndex.placeCollisionBox(Co,nt,W,R,be.predicate,Jt)};ns&&ns.box&&ns.box.length&&mn.verticalIconBox?(Gs=wo(mn.verticalIconBox),ri=Gs.box.length>0):(Gs=wo(mn.iconBox),ri=Gs.box.length>0),An=An&&Gs.offscreen}const Sl=ye||0===zt.numHorizontalGlyphVertices&&0===zt.numVerticalGlyphVertices,Vi=Te||0===zt.numIconVertices;if(Sl||Vi?Vi?Sl||(ri=ri&&A):A=ri&&A:ri=A=ri&&A,A&&Qr&&Qr.box&&this.collisionIndex.insertCollisionBox(Qr.box,ge,D.get("text-ignore-placement"),S.bucketInstanceId,ns&&ns.box&&Pr?Pr:xr,be.ID),ri&&Gs&&this.collisionIndex.insertCollisionBox(Gs.box,nt,D.get("icon-ignore-placement"),S.bucketInstanceId,Qa,be.ID),Xr&&(A&&this.collisionIndex.insertCollisionCircles(Xr.circles,ge,D.get("text-ignore-placement"),S.bucketInstanceId,xr,be.ID),v)){const wo=S.bucketInstanceId;let Jr=this.collisionCircleArrays[wo];void 0===Jr&&(Jr=this.collisionCircleArrays[wo]=new ut);for(let Co=0;Co<Xr.circles.length;Co+=4)Jr.circles.push(Xr.circles[Co+0]),Jr.circles.push(Xr.circles[Co+1]),Jr.circles.push(Xr.circles[Co+2]),Jr.circles.push(Xr.collisionDetected?1:0)}if(0===zt.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===S.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[zt.crossTileID]=new ht(A||Ct,ri||vt,An||S.justReloaded),f[zt.crossTileID]=!0};if(pt){if(0!==s.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const zt=S.getSortedSymbolIndexes(this.transform.angle);for(let mn=zt.length-1;mn>=0;--mn){const cn=zt[mn];_i(S.symbolInstances.get(cn),S.collisionArrays[cn])}}else for(let zt=s.symbolInstanceStart;zt<s.symbolInstanceEnd;zt++)_i(S.symbolInstances.get(zt),S.collisionArrays[zt]);if(v&&S.bucketInstanceId in this.collisionCircleArrays){const zt=this.collisionCircleArrays[S.bucketInstanceId];y.as(zt.invProjMatrix,R),zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(s,f,v,S){let D;D=S===y.ai.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[y.at(f)];const R=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const N of R)N>=0&&(s.text.placedSymbolArray.get(N).crossTileID=D>=0&&N!==D?0:v.crossTileID)}markUsedOrientation(s,f,v){const S=f===y.ai.horizontal||f===y.ai.horizontalOnly?f:0,D=f===y.ai.vertical?f:0,R=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const N of R)s.text.placedSymbolArray.get(N).placedOrientation=S;v.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=D)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let v=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const S=f?f.symbolFadeChange(s):1,D=f?f.opacities:{},R=f?f.variableOffsets:{},N=f?f.placedOrientations:{};for(const H in this.placements){const W=this.placements[H],Q=D[H];Q?(this.opacities[H]=new Re(Q,S,W.text,W.icon),v=v||W.text!==Q.text.placed||W.icon!==Q.icon.placed):(this.opacities[H]=new Re(null,S,W.text,W.icon,W.skipFade),v=v||W.text||W.icon)}for(const H in D){const W=D[H];if(!this.opacities[H]){const Q=new Re(W,S,!1,!1);Q.isHidden()||(this.opacities[H]=Q,v=v||W.text.placed||W.icon.placed)}}for(const H in R)this.variableOffsets[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.variableOffsets[H]=R[H]);for(const H in N)this.placedOrientations[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.placedOrientations[H]=N[H]);if(f&&void 0===f.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=s:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:s)}updateLayerOpacities(s,f){const v={};for(const S of f){const D=S.getBucket(s);D&&S.latestFeatureIndex&&s.id===D.layerIds[0]&&this.updateBucketOpacities(D,v,S.collisionBoxArray)}}updateBucketOpacities(s,f,v){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const S=s.layers[0],D=S.layout,R=new Re(null,0,!1,!1,!0),N=D.get("text-allow-overlap"),H=D.get("icon-allow-overlap"),W=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q="map"===D.get("text-rotation-alignment"),X="map"===D.get("text-pitch-alignment"),ae="none"!==D.get("icon-text-fit"),be=new Re(null,0,N&&(H||!s.hasIconData()||D.get("icon-optional")),H&&(N||!s.hasTextData()||D.get("text-optional")),!0);!s.collisionArrays&&v&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(v);const ye=(Te,ge,je)=>{for(let nt=0;nt<ge/4;nt++)Te.opacityVertexArray.emplaceBack(je);Te.hasVisibleVertices=Te.hasVisibleVertices||je!==Wr};for(let Te=0;Te<s.symbolInstances.length;Te++){const ge=s.symbolInstances.get(Te),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:nt,crossTileID:Se}=ge;let Ze=this.opacities[Se];f[Se]?Ze=R:Ze||(Ze=be,this.opacities[Se]=Ze),f[Se]=!0;const st=ge.numIconVertices>0,Je=this.placedOrientations[ge.crossTileID],pt=Je===y.ai.vertical,Ct=Je===y.ai.horizontal||Je===y.ai.horizontalOnly;if(je>0||nt>0){const vt=ur(Ze.text);ye(s.text,je,pt?Wr:vt),ye(s.text,nt,Ct?Wr:vt);const St=Ze.text.isHidden();[ge.rightJustifiedTextSymbolIndex,ge.centerJustifiedTextSymbolIndex,ge.leftJustifiedTextSymbolIndex].forEach(zt=>{zt>=0&&(s.text.placedSymbolArray.get(zt).hidden=St||pt?1:0)}),ge.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ge.verticalPlacedTextSymbolIndex).hidden=St||Ct?1:0);const Jt=this.variableOffsets[ge.crossTileID];Jt&&this.markUsedJustification(s,Jt.anchor,ge,Je);const _i=this.placedOrientations[ge.crossTileID];_i&&(this.markUsedJustification(s,"left",ge,_i),this.markUsedOrientation(s,_i,ge))}if(st){const vt=ur(Ze.icon),St=!(ae&&ge.verticalPlacedIconSymbolIndex&&pt);ge.placedIconSymbolIndex>=0&&(ye(s.icon,ge.numIconVertices,St?vt:Wr),s.icon.placedSymbolArray.get(ge.placedIconSymbolIndex).hidden=Ze.icon.isHidden()),ge.verticalPlacedIconSymbolIndex>=0&&(ye(s.icon,ge.numVerticalIconVertices,St?Wr:vt),s.icon.placedSymbolArray.get(ge.verticalPlacedIconSymbolIndex).hidden=Ze.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const vt=s.collisionArrays[Te];if(vt){let St=new y.P(0,0);if(vt.textBox||vt.verticalTextBox){let _i=!0;if(W){const zt=this.variableOffsets[Se];zt?(St=sn(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),Q&&St._rotate(X?this.transform.angle:-this.transform.angle)):_i=!1}vt.textBox&&Vt(s.textCollisionBox.collisionVertexArray,Ze.text.placed,!_i||pt,St.x,St.y),vt.verticalTextBox&&Vt(s.textCollisionBox.collisionVertexArray,Ze.text.placed,!_i||Ct,St.x,St.y)}const Jt=Boolean(!Ct&&vt.verticalIconBox);vt.iconBox&&Vt(s.iconCollisionBox.collisionVertexArray,Ze.icon.placed,Jt,ae?St.x:0,ae?St.y:0),vt.verticalIconBox&&Vt(s.iconCollisionBox.collisionVertexArray,Ze.icon.placed,!Jt,ae?St.x:0,ae?St.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const Te=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Te.invProjMatrix,s.placementViewportMatrix=Te.viewportMatrix,s.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return 0===this.fadeDuration?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,f){const v=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*v>s}setStale(){this.stale=!0}}function Vt(E,s,f,v,S){E.emplaceBack(s?1:0,f?1:0,v||0,S||0),E.emplaceBack(s?1:0,f?1:0,v||0,S||0),E.emplaceBack(s?1:0,f?1:0,v||0,S||0),E.emplaceBack(s?1:0,f?1:0,v||0,S||0)}const mi=Math.pow(2,25),di=Math.pow(2,24),li=Math.pow(2,17),ci=Math.pow(2,16),ir=Math.pow(2,9),Ni=Math.pow(2,8),yr=Math.pow(2,1);function ur(E){if(0===E.opacity&&!E.placed)return 0;if(1===E.opacity&&E.placed)return 4294967295;const s=E.placed?1:0,f=Math.floor(127*E.opacity);return f*mi+s*di+f*li+s*ci+f*ir+s*Ni+f*yr+s}const Wr=0;class Js{constructor(s){this._sortAcrossTiles="viewport-y"!==s.layout.get("symbol-z-order")&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,f,v,S,D){const R=this._bucketParts;for(;this._currentTileIndex<s.length;)if(f.getBucketParts(R,S,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort((N,H)=>N.sortKey-H.sortKey));this._currentPartIndex<R.length;)if(f.placeLayerBucketPart(R[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,D())return!0;return!1}}class Ca{constructor(s,f,v,S,D,R,N,H){this.placement=new Qt(s,f,R,N,H),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(s,f,v){const S=y.h.now(),D=()=>!this._forceFullPlacement&&y.h.now()-S>2;for(;this._currentPlacementIndex>=0;){const R=f[s[this._currentPlacementIndex]],N=this.placement.collisionIndex.transform.zoom;if("symbol"===R.type&&(!R.minzoom||R.minzoom<=N)&&(!R.maxzoom||R.maxzoom>N)){if(this._inProgressLayer||(this._inProgressLayer=new Js(R)),this._inProgressLayer.continuePlacement(v[R.source],this.placement,this._showCollisionBoxes,R,D))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const ea=512/y.N/2;class hc{constructor(s,f,v){this.tileID=s,this.bucketInstanceId=v,this._symbolsByKey={};const S=new Map;for(let D=0;D<f.length;D++){const R=f.get(D),N=R.key,H=S.get(N);H?H.push(R):S.set(N,[R])}for(const[D,R]of S){const N={positions:R.map(H=>({x:Math.floor(H.anchorX*ea),y:Math.floor(H.anchorY*ea)})),crossTileIDs:R.map(H=>H.crossTileID)};if(N.positions.length>128){const H=new y.av(N.positions.length,16,Uint16Array);for(const{x:W,y:Q}of N.positions)H.add(W,Q);H.finish(),delete N.positions,N.index=H}this._symbolsByKey[D]=N}}getScaledCoordinates(s,f){const{x:v,y:S,z:D}=this.tileID.canonical,{x:R,y:N,z:H}=f.canonical,W=ea/Math.pow(2,H-D),Q=(N*y.N+s.anchorY)*W,X=S*y.N*ea;return{x:Math.floor((R*y.N+s.anchorX)*W-v*y.N*ea),y:Math.floor(Q-X)}}findMatches(s,f,v){const S=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let D=0;D<s.length;D++){const R=s.get(D);if(R.crossTileID)continue;const N=this._symbolsByKey[R.key];if(!N)continue;const H=this.getScaledCoordinates(R,f);if(N.index){const W=N.index.range(H.x-S,H.y-S,H.x+S,H.y+S).sort();for(const Q of W){const X=N.crossTileIDs[Q];if(!v[X]){v[X]=!0,R.crossTileID=X;break}}}else if(N.positions)for(let W=0;W<N.positions.length;W++){const Q=N.positions[W],X=N.crossTileIDs[W];if(Math.abs(Q.x-H.x)<=S&&Math.abs(Q.y-H.y)<=S&&!v[X]){v[X]=!0,R.crossTileID=X;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Pi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class z{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const f=Math.round((s-this.lng)/360);if(0!==f)for(const v in this.indexes){const S=this.indexes[v],D={};for(const R in S){const N=S[R];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+f),D[N.tileID.key]=N}this.indexes[v]=D}this.lng=s}addBucket(s,f,v){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let D=0;D<f.symbolInstances.length;D++)f.symbolInstances.get(D).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const S=this.usedCrossTileIDs[s.overscaledZ];for(const D in this.indexes){const R=this.indexes[D];if(Number(D)>s.overscaledZ)for(const N in R){const H=R[N];H.tileID.isChildOf(s)&&H.findMatches(f.symbolInstances,s,S)}else{const N=R[s.scaledTo(Number(D)).key];N&&N.findMatches(f.symbolInstances,s,S)}}for(let D=0;D<f.symbolInstances.length;D++){const R=f.symbolInstances.get(D);R.crossTileID||(R.crossTileID=v.generate(),S[R.crossTileID]=!0)}return void 0===this.indexes[s.overscaledZ]&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new hc(s,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(s,f){for(const v of f.getCrossTileIDsLists())for(const S of v)delete this.usedCrossTileIDs[s][S]}removeStaleBuckets(s){let f=!1;for(const v in this.indexes){const S=this.indexes[v];for(const D in S)s[S[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,S[D]),delete S[D],f=!0)}return f}}class Z{constructor(){this.layerIndexes={},this.crossTileIDs=new Pi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,f,v){let S=this.layerIndexes[s.id];void 0===S&&(S=this.layerIndexes[s.id]=new z);let D=!1;const R={};S.handleWrapJump(v);for(const N of f){const H=N.getBucket(s);H&&s.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(N.tileID,H,this.crossTileIDs)&&(D=!0),R[H.bucketInstanceId]=!0)}return S.removeStaleBuckets(R)&&(D=!0),D}pruneUnusedLayers(s){const f={};s.forEach(v=>{f[v]=!0});for(const v in this.layerIndexes)f[v]||delete this.layerIndexes[v]}}const te=(E,s)=>y.x(E,s&&s.filter(f=>"source.canvas"!==f.identifier)),se=y.F(y.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),fe=y.F(y.ax,["setCenter","setZoom","setBearing","setPitch"]),Be=y.aw();class Ne extends y.E{constructor(s,f={}){super(),this.map=s,this.dispatcher=new xn(Mn(),this,s._getMapId()),this.imageManager=new bn,this.imageManager.setEventedParent(this),this.glyphManager=new Fn(s._requestManager,f.localIdeographFontFamily),this.lineAtlas=new wa(256,512),this.crossTileSymbolIndex=new Z,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new y.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",y.az());const v=this;this._rtlTextPluginCallback=Ne.registerForPluginStateChange(S=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},(D,R)=>{if(y.aA(D),R&&R.every(N=>N))for(const N in v.sourceCaches){const H=v.sourceCaches[N].getSource().type;"vector"!==H&&"geojson"!==H||v.sourceCaches[N].reload()}})}),this.on("data",S=>{if("source"!==S.dataType||"metadata"!==S.sourceDataType)return;const D=this.sourceCaches[S.sourceId];if(!D)return;const R=D.getSource();if(R&&R.vectorLayerIds)for(const N in this._layers){const H=this._layers[N];H.source===R.id&&this._validateLayer(H)}})}loadURL(s,f={},v){this.fire(new y.k("dataloading",{dataType:"style"})),f.validate="boolean"!=typeof f.validate||f.validate;const S=this.map._requestManager.transformRequest(s,Mt.Style);this._request=y.f(S,(D,R)=>{this._request=null,D?this.fire(new y.j(D)):R&&this._load(R,f,v)})}loadJSON(s,f={},v){this.fire(new y.k("dataloading",{dataType:"style"})),this._request=y.h.frame(()=>{this._request=null,f.validate=!1!==f.validate,this._load(s,f,v)})}loadEmpty(){this.fire(new y.k("dataloading",{dataType:"style"})),this._load(Be,{validate:!1})}_load(s,f,v){var S;const D=f.transformStyle?f.transformStyle(v,s):s;if(!f.validate||!te(this,y.y(D))){this._loaded=!0,this.stylesheet=D;for(const R in D.sources)this.addSource(R,D.sources[R],{validate:!1});D.sprite?this._loadSprite(D.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(D.glyphs),this._createLayers(),this.light=new Un(this.stylesheet.light),this.map.setTerrain(null!==(S=this.stylesheet.terrain)&&void 0!==S?S:null),this.fire(new y.k("data",{dataType:"style"})),this.fire(new y.k("style.load"))}}_createLayers(){const s=y.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",s),this._order=s.map(f=>f.id),this._layers={},this._serializedLayers=null;for(const f of s){const v=y.aC(f);v.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=v}}_loadSprite(s,f=!1,v){this.imageManager.setLoaded(!1),this._spriteRequest=function(S,D,R,N){const H=Ui(S),W=H.length,Q=R>1?"@2x":"",X={},ae={},be={};for(const{id:ye,url:Te}of H){const ge=D.transformRequest(D.normalizeSpriteURL(Te,Q,".json"),Mt.SpriteJSON),je=`${ye}_${ge.url}`;X[je]=y.f(ge,(Ze,st)=>{delete X[je],ae[ye]=st,fn(N,ae,be,Ze,W)});const nt=D.transformRequest(D.normalizeSpriteURL(Te,Q,".png"),Mt.SpriteImage),Se=`${ye}_${nt.url}`;X[Se]=it.getImage(nt,(Ze,st)=>{delete X[Se],be[ye]=st,fn(N,ae,be,Ze,W)})}return{cancel(){for(const ye of Object.values(X))ye.cancel()}}}(s,this.map._requestManager,this.map.getPixelRatio(),(S,D)=>{if(this._spriteRequest=null,S)this.fire(new y.j(S));else if(D)for(const R in D){this._spritesImagesIds[R]=[];const N=this._spritesImagesIds[R]?this._spritesImagesIds[R].filter(H=>!(H in D)):[];for(const H of N)this.imageManager.removeImage(H),this._changedImages[H]=!0;for(const H in D[R]){const W="default"===R?H:`${R}:${H}`;this._spritesImagesIds[R].push(W),W in this.imageManager.images?this.imageManager.updateImage(W,D[R][H],!1):this.imageManager.addImage(W,D[R][H]),f&&(this._changedImages[W]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new y.k("data",{dataType:"style"})),v&&v(S)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new y.k("data",{dataType:"style"}))}_validateLayer(s){const f=this.sourceCaches[s.source];if(!f)return;const v=s.sourceLayer;if(!v)return;const S=f.getSource();("geojson"===S.type||S.vectorLayerIds&&-1===S.vectorLayerIds.indexOf(v))&&this.fire(new y.j(new Error(`Source layer "${v}" does not exist on source "${S.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s){const f=this._serializedAllLayers();if(!s||0===s.length)return Object.values(f);const v=[];for(const S of s)f[S]&&v.push(f[S]);return v}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const f=Object.keys(this._layers);for(const v of f){const S=this._layers[v];"custom"!==S.type&&(s[v]=S.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const f=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),D=Object.keys(this._removedLayers);(S.length||D.length)&&this._updateWorkerLayers(S,D);for(const R in this._updatedSources){const N=this._updatedSources[R];if("reload"===N)this._reloadSource(R);else{if("clear"!==N)throw new Error(`Invalid action ${N}`);this._clearSource(R)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const R in this._updatedPaintProps)this._layers[R].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const v={};for(const S in this.sourceCaches){const D=this.sourceCaches[S];v[S]=D.used,D.used=!1}for(const S of this._order){const D=this._layers[S];D.recalculate(s,this._availableImages),!D.isHidden(s.zoom)&&D.source&&(this.sourceCaches[D.source].used=!0)}for(const S in v){const D=this.sourceCaches[S];v[S]!==D.used&&D.fire(new y.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(s),this.z=s.zoom,f&&this.fire(new y.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(s),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,f={}){this._checkLoaded();const v=this.serialize();if(s=f.transformStyle?f.transformStyle(v,s):s,te(this,y.y(s)))return!1;(s=y.aD(s)).layers=y.aB(s.layers);const S=y.aE(v,s).filter(R=>!(R.command in fe));if(0===S.length)return!1;const D=S.filter(R=>!(R.command in se));if(D.length>0)throw new Error(`Unimplemented: ${D.map(R=>R.command).join(", ")}.`);for(const R of S)"setTransition"!==R.command&&this[R.command].apply(this,R.args);return this.stylesheet=s,this._serializedLayers=null,!0}addImage(s,f){if(this.getImage(s))return this.fire(new y.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,f),this._afterImageUpdated(s)}updateImage(s,f){this.imageManager.updateImage(s,f)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new y.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new y.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,f,v={}){if(this._checkLoaded(),void 0!==this.sourceCaches[s])throw new Error(`Source "${s}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(y.y.source,`sources.${s}`,f,null,v))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const S=this.sourceCaches[s]=new kt(s,f,this.dispatcher);S.style=this,S.setEventedParent(this,()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:s})),S.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===s)return this.fire(new y.j(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));const f=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],f.fire(new y.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,f){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error(`There is no source with this ID=${s}`);const v=this.sourceCaches[s].getSource();if("geojson"!==v.type)throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(f),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,f,v={}){this._checkLoaded();const S=s.id;if(this.getLayer(S))return void this.fire(new y.j(new Error(`Layer "${S}" already exists on this map.`)));let D;if("custom"===s.type){if(te(this,y.aF(s)))return;D=y.aC(s)}else{if("source"in s&&"object"==typeof s.source&&(this.addSource(S,s.source),s=y.aD(s),s=y.e(s,{source:S})),this._validate(y.y.layer,`layers.${S}`,s,{arrayIndex:-1},v))return;D=y.aC(s),this._validateLayer(D),D.setEventedParent(this,{layer:{id:S}})}const R=f?this._order.indexOf(f):this._order.length;if(f&&-1===R)this.fire(new y.j(new Error(`Cannot add layer "${S}" before non-existing layer "${f}".`)));else{if(this._order.splice(R,0,S),this._layerOrderChanged=!0,this._layers[S]=D,this._removedLayers[S]&&D.source&&"custom"!==D.type){const N=this._removedLayers[S];delete this._removedLayers[S],N.type!==D.type?this._updatedSources[D.source]="clear":(this._updatedSources[D.source]="reload",this.sourceCaches[D.source].pause())}this._updateLayer(D),D.onAdd&&D.onAdd(this.map)}}moveLayer(s,f){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new y.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===f)return;const v=this._order.indexOf(s);this._order.splice(v,1);const S=f?this._order.indexOf(f):this._order.length;f&&-1===S?this.fire(new y.j(new Error(`Cannot move layer "${s}" before non-existing layer "${f}".`))):(this._order.splice(S,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const f=this._layers[s];if(!f)return void this.fire(new y.j(new Error(`Cannot remove non-existing layer "${s}".`)));f.setEventedParent(null);const v=this._order.indexOf(s);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=f,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],f.onRemove&&f.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,f,v){this._checkLoaded();const S=this.getLayer(s);S?S.minzoom===f&&S.maxzoom===v||(null!=f&&(S.minzoom=f),null!=v&&(S.maxzoom=v),this._updateLayer(S)):this.fire(new y.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,f,v={}){this._checkLoaded();const S=this.getLayer(s);if(S){if(!y.aG(S.filter,f))return null==f?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(y.y.filter,`layers.${S.id}.filter`,f,null,v)||(S.filter=y.aD(f),this._updateLayer(S)))}else this.fire(new y.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return y.aD(this.getLayer(s).filter)}setLayoutProperty(s,f,v,S={}){this._checkLoaded();const D=this.getLayer(s);D?y.aG(D.getLayoutProperty(f),v)||(D.setLayoutProperty(f,v,S),this._updateLayer(D)):this.fire(new y.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,f){const v=this.getLayer(s);if(v)return v.getLayoutProperty(f);this.fire(new y.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,f,v,S={}){this._checkLoaded();const D=this.getLayer(s);D?y.aG(D.getPaintProperty(f),v)||(D.setPaintProperty(f,v,S)&&this._updateLayer(D),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new y.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,f){return this.getLayer(s).getPaintProperty(f)}setFeatureState(s,f){this._checkLoaded();const v=s.source,S=s.sourceLayer,D=this.sourceCaches[v];if(void 0===D)return void this.fire(new y.j(new Error(`The source '${v}' does not exist in the map's style.`)));const R=D.getSource().type;"geojson"===R&&S?this.fire(new y.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==R||S?(void 0===s.id&&this.fire(new y.j(new Error("The feature id parameter must be provided."))),D.setFeatureState(S,s.id,f)):this.fire(new y.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,f){this._checkLoaded();const v=s.source,S=this.sourceCaches[v];if(void 0===S)return void this.fire(new y.j(new Error(`The source '${v}' does not exist in the map's style.`)));const D=S.getSource().type,R="vector"===D?s.sourceLayer:void 0;"vector"!==D||R?f&&"string"!=typeof s.id&&"number"!=typeof s.id?this.fire(new y.j(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(R,s.id,f):this.fire(new y.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const f=s.source,v=s.sourceLayer,S=this.sourceCaches[f];if(void 0!==S)return"vector"!==S.getSource().type||v?(void 0===s.id&&this.fire(new y.j(new Error("The feature id parameter must be provided."))),S.getFeatureState(v,s.id)):void this.fire(new y.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new y.j(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return y.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=y.aH(this.sourceCaches,D=>D.serialize()),f=this._serializeByIds(this._order),v=this.map.getTerrain()||void 0,S=this.stylesheet;return y.aI({version:S.version,name:S.name,metadata:S.metadata,light:S.light,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,sources:s,layers:f,terrain:v},D=>void 0!==D)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&"raster"!==this.sourceCaches[s.source].getSource().type&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const f=R=>"fill-extrusion"===this._layers[R].type,v={},S=[];for(let R=this._order.length-1;R>=0;R--){const N=this._order[R];if(f(N)){v[N]=R;for(const H of s){const W=H[N];if(W)for(const Q of W)S.push(Q)}}}S.sort((R,N)=>N.intersectionZ-R.intersectionZ);const D=[];for(let R=this._order.length-1;R>=0;R--){const N=this._order[R];if(f(N))for(let H=S.length-1;H>=0;H--){const W=S[H].feature;if(v[W.layer.id]<R)break;D.push(W),S.pop()}else for(const H of s){const W=H[N];if(W)for(const Q of W)D.push(Q.feature)}}return D}queryRenderedFeatures(s,f,v){f&&f.filter&&this._validate(y.y.filter,"queryRenderedFeatures.filter",f.filter,null,f);const S={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new y.j(new Error("parameters.layers must be an Array."))),[];for(const N of f.layers){const H=this._layers[N];if(!H)return this.fire(new y.j(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];S[H.source]=!0}}const D=[];f.availableImages=this._availableImages;const R=this._serializedAllLayers();for(const N in this.sourceCaches)f.layers&&!S[N]||D.push(Po(this.sourceCaches[N],this._layers,R,s,f,v));return this.placement&&D.push(function(N,H,W,Q,X,ae,be){const ye={},Te=ae.queryRenderedSymbols(Q),ge=[];for(const je of Object.keys(Te).map(Number))ge.push(be[je]);ge.sort(Br);for(const je of ge){const nt=je.featureIndex.lookupSymbolFeatures(Te[je.bucketInstanceId],H,je.bucketIndex,je.sourceLayerIndex,X.filter,X.layers,X.availableImages,N);for(const Se in nt){const Ze=ye[Se]=ye[Se]||[],st=nt[Se];st.sort((Je,pt)=>{const Ct=je.featureSortOrder;if(Ct){const vt=Ct.indexOf(Je.featureIndex);return Ct.indexOf(pt.featureIndex)-vt}return pt.featureIndex-Je.featureIndex});for(const Je of st)Ze.push(Je)}}for(const je in ye)ye[je].forEach(nt=>{const Se=nt.feature,Ze=W[N[je].source].getFeatureState(Se.layer["source-layer"],Se.id);Se.source=Se.layer.source,Se.layer["source-layer"]&&(Se.sourceLayer=Se.layer["source-layer"]),Se.state=Ze});return ye}(this._layers,R,this.sourceCaches,s,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(D)}querySourceFeatures(s,f){f&&f.filter&&this._validate(y.y.filter,"querySourceFeatures.filter",f.filter,null,f);const v=this.sourceCaches[s];return v?function(S,D){const R=S.getRenderableIds().map(W=>S.getTileByID(W)),N=[],H={};for(let W=0;W<R.length;W++){const Q=R[W],X=Q.tileID.canonical.key;H[X]||(H[X]=!0,Q.querySourceFeatures(N,D))}return N}(v,f):[]}addSourceType(s,f,v){return $o(s)?v(new Error(`A source type called "${s}" already exists.`)):(Ho[s]=f,f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:f.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(s,f={}){this._checkLoaded();const v=this.light.getLight();let S=!1;for(const R in s)if(!y.aG(s[R],v[R])){S=!0;break}if(!S)return;const D={now:y.h.now(),transition:y.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,f),this.light.updateTransitions(D)}_validate(s,f,v,S,D={}){return(!D||!1!==D.validate)&&te(this,s.call(y.y,y.e({key:f,style:this.serialize(),value:v,styleSpec:y.v},S)))}_remove(s=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),y.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const v=this.sourceCaches[f];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const f in this.sourceCaches)this.sourceCaches[f].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,f,v,S,D=!1){let R=!1,N=!1;const H={};for(const W of this._order){const Q=this._layers[W];if("symbol"!==Q.type)continue;if(!H[Q.source]){const ae=this.sourceCaches[Q.source];H[Q.source]=ae.getRenderableIds(!0).map(be=>ae.getTileByID(be)).sort((be,ye)=>ye.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(ye.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(Q,H[Q.source],s.center.lng);R=R||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((D=D||this._layerOrderChanged||0===v)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(y.h.now(),s.zoom))&&(this.pauseablePlacement=new Ca(s,this.map.terrain,this._order,D,f,v,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,H),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(y.h.now()),N=!0),R&&this.pauseablePlacement.placement.setStale()),N||R)for(const W of this._order){const Q=this._layers[W];"symbol"===Q.type&&this.placement.updateLayerOpacities(Q,H[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(y.h.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,f,v){this.imageManager.getImages(f.icons,v),this._updateTilesForChangedImages();const S=this.sourceCaches[f.source];S&&S.setDependencies(f.tileID.key,f.type,f.icons)}getGlyphs(s,f,v){this.glyphManager.getGlyphs(f.stacks,v);const S=this.sourceCaches[f.source];S&&S.setDependencies(f.tileID.key,f.type,[""])}getResource(s,f,v){return y.m(f,v)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,f={}){this._checkLoaded(),s&&this._validate(y.y.glyphs,"glyphs",s,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,f,v={},S){this._checkLoaded();const D=[{id:s,url:f}],R=[...Ui(this.stylesheet.sprite),...D];this._validate(y.y.sprite,"sprite",R,null,v)||(this.stylesheet.sprite=R,this._loadSprite(D,!0,S))}removeSprite(s){this._checkLoaded();const f=Ui(this.stylesheet.sprite);if(f.find(v=>v.id===s)){if(this._spritesImagesIds[s])for(const v of this._spritesImagesIds[s])this.imageManager.removeImage(v),this._changedImages[v]=!0;f.splice(f.findIndex(v=>v.id===s),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new y.k("data",{dataType:"style"}))}else this.fire(new y.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return Ui(this.stylesheet.sprite)}setSprite(s,f={},v){this._checkLoaded(),s&&this._validate(y.y.sprite,"sprite",s,null,f)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,v):(this._unloadSprite(),v&&v(null)))}}Ne.registerForPluginStateChange=y.aK;var Tt=y.Q([{name:"a_pos",type:"Int16",components:2}]),ln="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const vn={prelude:dn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:dn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:dn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:dn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:dn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:dn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:dn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:dn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:dn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:dn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:dn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:dn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:dn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:dn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:dn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:dn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:dn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:dn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:dn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:dn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:dn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:dn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:dn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:dn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:dn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ln),terrainDepth:dn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ln),terrainCoords:dn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ln)};function dn(E,s){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=s.match(/attribute ([\w]+) ([\w]+)/g),S=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=D?D.concat(S):S,N={};return{fragmentSource:E=E.replace(f,(H,W,Q,X,ae)=>(N[ae]=!0,"define"===W?`\n#ifndef HAS_UNIFORM_u_${ae}\nvarying ${Q} ${X} ${ae};\n#else\nuniform ${Q} ${X} u_${ae};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${ae}\n    ${Q} ${X} ${ae} = u_${ae};\n#endif\n`)),vertexSource:s=s.replace(f,(H,W,Q,X,ae)=>{const be="float"===X?"vec2":"vec4",ye=ae.match(/color/)?"color":be;return N[ae]?"define"===W?`\n#ifndef HAS_UNIFORM_u_${ae}\nuniform lowp float u_${ae}_t;\nattribute ${Q} ${be} a_${ae};\nvarying ${Q} ${X} ${ae};\n#else\nuniform ${Q} ${X} u_${ae};\n#endif\n`:"vec4"===ye?`\n#ifndef HAS_UNIFORM_u_${ae}\n    ${ae} = a_${ae};\n#else\n    ${Q} ${X} ${ae} = u_${ae};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ae}\n    ${ae} = unpack_mix_${ye}(a_${ae}, u_${ae}_t);\n#else\n    ${Q} ${X} ${ae} = u_${ae};\n#endif\n`:"define"===W?`\n#ifndef HAS_UNIFORM_u_${ae}\nuniform lowp float u_${ae}_t;\nattribute ${Q} ${be} a_${ae};\n#else\nuniform ${Q} ${X} u_${ae};\n#endif\n`:"vec4"===ye?`\n#ifndef HAS_UNIFORM_u_${ae}\n    ${Q} ${X} ${ae} = a_${ae};\n#else\n    ${Q} ${X} ${ae} = u_${ae};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ae}\n    ${Q} ${X} ${ae} = unpack_mix_${ye}(a_${ae}, u_${ae}_t);\n#else\n    ${Q} ${X} ${ae} = u_${ae};\n#endif\n`}),staticAttributes:v,staticUniforms:R}}class bt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,f,v,S,D,R,N,H,W){this.context=s;let Q=this.boundPaintVertexBuffers.length!==S.length;for(let X=0;!Q&&X<S.length;X++)this.boundPaintVertexBuffers[X]!==S[X]&&(Q=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==v||Q||this.boundIndexBuffer!==D||this.boundVertexOffset!==R||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==H||this.boundDynamicVertexBuffer3!==W?this.freshBind(f,v,S,D,R,N,H,W):(s.bindVertexArray.set(this.vao),N&&N.bind(),D&&D.dynamicDraw&&D.bind(),H&&H.bind(),W&&W.bind())}freshBind(s,f,v,S,D,R,N,H){const W=s.numAttributes,Q=this.context,X=Q.gl;this.vao&&this.destroy(),this.vao=Q.createVertexArray(),Q.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=S,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=N,this.boundDynamicVertexBuffer3=H,f.enableAttributes(X,s);for(const ae of v)ae.enableAttributes(X,s);R&&R.enableAttributes(X,s),N&&N.enableAttributes(X,s),H&&H.enableAttributes(X,s),f.bind(),f.setVertexAttribPointers(X,s,D);for(const ae of v)ae.bind(),ae.setVertexAttribPointers(X,s,D);R&&(R.bind(),R.setVertexAttribPointers(X,s,D)),S&&S.bind(),N&&(N.bind(),N.setVertexAttribPointers(X,s,D)),H&&(H.bind(),H.setVertexAttribPointers(X,s,D)),Q.currentNumAttributes=W}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ft(E){const s=[];for(let f=0;f<E.length;f++){if(null===E[f])continue;const v=E[f].split(" ");s.push(v.pop())}return s}class kn{constructor(s,f,v,S,D,R){const N=s.gl;this.program=N.createProgram();const H=ft(f.staticAttributes),W=v?v.getBinderAttributes():[],Q=H.concat(W),X=vn.prelude.staticUniforms?ft(vn.prelude.staticUniforms):[],ae=f.staticUniforms?ft(f.staticUniforms):[],be=v?v.getBinderUniforms():[],ye=X.concat(ae).concat(be),Te=[];for(const Je of ye)Te.indexOf(Je)<0&&Te.push(Je);const ge=v?v.defines():[];D&&ge.push("#define OVERDRAW_INSPECTOR;"),R&&ge.push("#define TERRAIN3D;");const je=ge.concat(vn.prelude.fragmentSource,f.fragmentSource).join("\n"),nt=ge.concat(vn.prelude.vertexSource,f.vertexSource).join("\n"),Se=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(Se,je),N.compileShader(Se),!N.getShaderParameter(Se,N.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${N.getShaderInfoLog(Se)}`);N.attachShader(this.program,Se);const Ze=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);if(N.shaderSource(Ze,nt),N.compileShader(Ze),!N.getShaderParameter(Ze,N.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${N.getShaderInfoLog(Ze)}`);N.attachShader(this.program,Ze),this.attributes={};const st={};this.numAttributes=Q.length;for(let Je=0;Je<this.numAttributes;Je++)Q[Je]&&(N.bindAttribLocation(this.program,Je,Q[Je]),this.attributes[Q[Je]]=Je);if(N.linkProgram(this.program),!N.getProgramParameter(this.program,N.LINK_STATUS))throw new Error(`Program failed to link: ${N.getProgramInfoLog(this.program)}`);N.deleteShader(Ze),N.deleteShader(Se);for(let Je=0;Je<Te.length;Je++){const pt=Te[Je];if(pt&&!st[pt]){const Ct=N.getUniformLocation(this.program,pt);Ct&&(st[pt]=Ct)}}var Je,pt;this.fixedUniforms=S(s,st),this.terrainUniforms={u_depth:new y.aL(Je=s,(pt=st).u_depth),u_terrain:new y.aL(Je,pt.u_terrain),u_terrain_dim:new y.aM(Je,pt.u_terrain_dim),u_terrain_matrix:new y.aN(Je,pt.u_terrain_matrix),u_terrain_unpack:new y.aO(Je,pt.u_terrain_unpack),u_terrain_exaggeration:new y.aM(Je,pt.u_terrain_exaggeration)},this.binderUniforms=v?v.getUniforms(s,st):[]}draw(s,f,v,S,D,R,N,H,W,Q,X,ae,be,ye,Te,ge,je,nt){const Se=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(v),s.setStencilMode(S),s.setColorMode(D),s.setCullFace(R),H){s.activeTexture.set(Se.TEXTURE2),Se.bindTexture(Se.TEXTURE_2D,H.depthTexture),s.activeTexture.set(Se.TEXTURE3),Se.bindTexture(Se.TEXTURE_2D,H.texture);for(const st in this.terrainUniforms)this.terrainUniforms[st].set(H[st])}for(const st in this.fixedUniforms)this.fixedUniforms[st].set(N[st]);Te&&Te.setUniforms(s,this.binderUniforms,be,{zoom:ye});let Ze=0;switch(f){case Se.LINES:Ze=2;break;case Se.TRIANGLES:Ze=3;break;case Se.LINE_STRIP:Ze=1}for(const st of ae.get()){const Je=st.vaos||(st.vaos={});(Je[W]||(Je[W]=new bt)).bind(s,this,Q,Te?Te.getPaintVertexBuffers():[],X,st.vertexOffset,ge,je,nt),Se.drawElements(f,st.primitiveLength*Ze,Se.UNSIGNED_SHORT,st.primitiveOffset*Ze*2)}}}function on(E,s,f){const v=1/Oe(f,1,s.transform.tileZoom),S=Math.pow(2,f.tileID.overscaledZ),D=f.tileSize*Math.pow(2,s.transform.tileZoom)/S,R=D*(f.tileID.canonical.x+f.tileID.wrap*S),N=D*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[v,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[R>>16,N>>16],u_pixel_coord_lower:[65535&R,65535&N]}}const Xo=(E,s,f,v)=>{const S=s.style.light,D=S.properties.get("position"),R=[D.x,D.y,D.z],N=(W=new y.A(9),y.A!=Float32Array&&(W[1]=0,W[2]=0,W[3]=0,W[5]=0,W[6]=0,W[7]=0),W[0]=1,W[4]=1,W[8]=1,W);var W;"viewport"===S.properties.get("anchor")&&function(W,Q){var X=Math.sin(Q),ae=Math.cos(Q);W[0]=ae,W[1]=X,W[2]=0,W[3]=-X,W[4]=ae,W[5]=0,W[6]=0,W[7]=0,W[8]=1}(N,-s.transform.angle),function(W,Q,X){var ae=Q[0],be=Q[1],ye=Q[2];W[0]=ae*X[0]+be*X[3]+ye*X[6],W[1]=ae*X[1]+be*X[4]+ye*X[7],W[2]=ae*X[2]+be*X[5]+ye*X[8]}(R,R,N);const H=S.properties.get("color");return{u_matrix:E,u_lightpos:R,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[H.r,H.g,H.b],u_vertical_gradient:+f,u_opacity:v}},Mi=(E,s,f,v,S,D,R)=>y.e(Xo(E,s,f,v),on(D,s,R),{u_height_factor:-Math.pow(2,S.overscaledZ)/R.tileSize/8}),Ns=E=>({u_matrix:E}),Yi=(E,s,f,v)=>y.e(Ns(E),on(f,s,v)),hs=(E,s)=>({u_matrix:E,u_world:s}),fr=(E,s,f,v,S)=>y.e(Yi(E,s,f,v),{u_world:S}),zn=(E,s,f,v)=>{const S=E.transform;let D,R;if("map"===v.paint.get("circle-pitch-alignment")){const N=Oe(f,1,S.zoom);D=!0,R=[N,N]}else D=!1,R=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+("map"===v.paint.get("circle-pitch-scale")),u_matrix:E.translatePosMatrix(s.posMatrix,f,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+D,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:R}},ta=(E,s,f)=>{const v=Oe(f,1,s.zoom),S=Math.pow(2,s.zoom-f.tileID.overscaledZ),D=f.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[s.pixelsToGLUnits[0]/(v*S),s.pixelsToGLUnits[1]/(v*S)],u_overscale_factor:D}},ds=(E,s,f=1)=>({u_matrix:E,u_color:s,u_overlay:0,u_overlay_scale:f}),hl=E=>({u_matrix:E}),Es=(E,s,f,v)=>({u_matrix:E,u_extrude_scale:Oe(s,1,f),u_intensity:v});function qr(E,s){const f=Math.pow(2,s.canonical.z),v=s.canonical.y;return[new y.U(0,v/f).toLngLat().lat,new y.U(0,(v+1)/f).toLngLat().lat]}const Yr=(E,s,f,v)=>{const S=E.transform;return{u_matrix:er(E,s,f,v),u_ratio:1/Oe(s,1,S.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},na=(E,s,f,v,S)=>y.e(Yr(E,s,f,S),{u_image:0,u_image_height:v}),Ts=(E,s,f,v,S)=>{const D=E.transform,R=Bl(s,D);return{u_matrix:er(E,s,f,S),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Oe(s,1,D.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[R,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Ha=(E,s,f,v,S,D)=>{const R=E.lineAtlas,N=Bl(s,E.transform),H="round"===f.layout.get("line-cap"),W=R.getDash(v.from,H),Q=R.getDash(v.to,H),X=W.width*S.fromScale,ae=Q.width*S.toScale;return y.e(Yr(E,s,f,D),{u_patternscale_a:[N/X,-W.height/2],u_patternscale_b:[N/ae,-Q.height/2],u_sdfgamma:R.width/(256*Math.min(X,ae)*E.pixelRatio)/2,u_image:0,u_tex_y_a:W.y,u_tex_y_b:Q.y,u_mix:S.t})};function Bl(E,s){return 1/Oe(E,1,s.tileZoom)}function er(E,s,f,v){return E.translatePosMatrix(v?v.posMatrix:s.tileID.posMatrix,s,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Au=(E,s,f,v,S)=>{return{u_matrix:E,u_tl_parent:s,u_scale_parent:f,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(R=S.paint.get("raster-saturation"),R>0?1-1/(1.001-R):-R),u_contrast_factor:(D=S.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:Uc(S.paint.get("raster-hue-rotate"))};var D,R};function Uc(E){E*=Math.PI/180;const s=Math.sin(E),f=Math.cos(E);return[(2*f+1)/3,(-Math.sqrt(3)*s-f+1)/3,(Math.sqrt(3)*s-f+1)/3]}const $n=(E,s,f,v,S,D,R,N,H,W)=>{const Q=S.transform;return{u_is_size_zoom_constant:+("constant"===E||"source"===E),u_is_size_feature_constant:+("constant"===E||"camera"===E),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:Q.width/Q.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:D,u_label_plane_matrix:R,u_coord_matrix:N,u_is_text:+H,u_pitch_with_map:+v,u_texsize:W,u_texture:0}},Go=(E,s,f,v,S,D,R,N,H,W,Q)=>{const X=S.transform;return y.e($n(E,s,f,v,S,D,R,N,H,W),{u_gamma_scale:v?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+Q})},Ai=(E,s,f,v,S,D,R,N,H,W)=>y.e(Go(E,s,f,v,S,D,R,N,!0,H,!0),{u_texsize_icon:W,u_texture_icon:1}),ia=(E,s,f)=>({u_matrix:E,u_opacity:s,u_color:f}),rr=(E,s,f,v,S,D)=>y.e(function(R,N,H,W){const Q=H.imageManager.getPattern(R.from.toString()),X=H.imageManager.getPattern(R.to.toString()),{width:ae,height:be}=H.imageManager.getPixelSize(),ye=Math.pow(2,W.tileID.overscaledZ),Te=W.tileSize*Math.pow(2,H.transform.tileZoom)/ye,ge=Te*(W.tileID.canonical.x+W.tileID.wrap*ye),je=Te*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[ae,be],u_mix:N.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/Oe(W,1,H.transform.tileZoom),u_pixel_coord_upper:[ge>>16,je>>16],u_pixel_coord_lower:[65535&ge,65535&je]}}(v,D,f,S),{u_matrix:E,u_opacity:s}),dl={fillExtrusion:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_lightpos:new y.aP(E,s.u_lightpos),u_lightintensity:new y.aM(E,s.u_lightintensity),u_lightcolor:new y.aP(E,s.u_lightcolor),u_vertical_gradient:new y.aM(E,s.u_vertical_gradient),u_opacity:new y.aM(E,s.u_opacity)}),fillExtrusionPattern:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_lightpos:new y.aP(E,s.u_lightpos),u_lightintensity:new y.aM(E,s.u_lightintensity),u_lightcolor:new y.aP(E,s.u_lightcolor),u_vertical_gradient:new y.aM(E,s.u_vertical_gradient),u_height_factor:new y.aM(E,s.u_height_factor),u_image:new y.aL(E,s.u_image),u_texsize:new y.aQ(E,s.u_texsize),u_pixel_coord_upper:new y.aQ(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new y.aQ(E,s.u_pixel_coord_lower),u_scale:new y.aP(E,s.u_scale),u_fade:new y.aM(E,s.u_fade),u_opacity:new y.aM(E,s.u_opacity)}),fill:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix)}),fillPattern:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_image:new y.aL(E,s.u_image),u_texsize:new y.aQ(E,s.u_texsize),u_pixel_coord_upper:new y.aQ(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new y.aQ(E,s.u_pixel_coord_lower),u_scale:new y.aP(E,s.u_scale),u_fade:new y.aM(E,s.u_fade)}),fillOutline:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_world:new y.aQ(E,s.u_world)}),fillOutlinePattern:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_world:new y.aQ(E,s.u_world),u_image:new y.aL(E,s.u_image),u_texsize:new y.aQ(E,s.u_texsize),u_pixel_coord_upper:new y.aQ(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new y.aQ(E,s.u_pixel_coord_lower),u_scale:new y.aP(E,s.u_scale),u_fade:new y.aM(E,s.u_fade)}),circle:(E,s)=>({u_camera_to_center_distance:new y.aM(E,s.u_camera_to_center_distance),u_scale_with_map:new y.aL(E,s.u_scale_with_map),u_pitch_with_map:new y.aL(E,s.u_pitch_with_map),u_extrude_scale:new y.aQ(E,s.u_extrude_scale),u_device_pixel_ratio:new y.aM(E,s.u_device_pixel_ratio),u_matrix:new y.aN(E,s.u_matrix)}),collisionBox:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_camera_to_center_distance:new y.aM(E,s.u_camera_to_center_distance),u_pixels_to_tile_units:new y.aM(E,s.u_pixels_to_tile_units),u_extrude_scale:new y.aQ(E,s.u_extrude_scale),u_overscale_factor:new y.aM(E,s.u_overscale_factor)}),collisionCircle:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_inv_matrix:new y.aN(E,s.u_inv_matrix),u_camera_to_center_distance:new y.aM(E,s.u_camera_to_center_distance),u_viewport_size:new y.aQ(E,s.u_viewport_size)}),debug:(E,s)=>({u_color:new y.aR(E,s.u_color),u_matrix:new y.aN(E,s.u_matrix),u_overlay:new y.aL(E,s.u_overlay),u_overlay_scale:new y.aM(E,s.u_overlay_scale)}),clippingMask:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix)}),heatmap:(E,s)=>({u_extrude_scale:new y.aM(E,s.u_extrude_scale),u_intensity:new y.aM(E,s.u_intensity),u_matrix:new y.aN(E,s.u_matrix)}),heatmapTexture:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_world:new y.aQ(E,s.u_world),u_image:new y.aL(E,s.u_image),u_color_ramp:new y.aL(E,s.u_color_ramp),u_opacity:new y.aM(E,s.u_opacity)}),hillshade:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_image:new y.aL(E,s.u_image),u_latrange:new y.aQ(E,s.u_latrange),u_light:new y.aQ(E,s.u_light),u_shadow:new y.aR(E,s.u_shadow),u_highlight:new y.aR(E,s.u_highlight),u_accent:new y.aR(E,s.u_accent)}),hillshadePrepare:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_image:new y.aL(E,s.u_image),u_dimension:new y.aQ(E,s.u_dimension),u_zoom:new y.aM(E,s.u_zoom),u_unpack:new y.aO(E,s.u_unpack)}),line:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_ratio:new y.aM(E,s.u_ratio),u_device_pixel_ratio:new y.aM(E,s.u_device_pixel_ratio),u_units_to_pixels:new y.aQ(E,s.u_units_to_pixels)}),lineGradient:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_ratio:new y.aM(E,s.u_ratio),u_device_pixel_ratio:new y.aM(E,s.u_device_pixel_ratio),u_units_to_pixels:new y.aQ(E,s.u_units_to_pixels),u_image:new y.aL(E,s.u_image),u_image_height:new y.aM(E,s.u_image_height)}),linePattern:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_texsize:new y.aQ(E,s.u_texsize),u_ratio:new y.aM(E,s.u_ratio),u_device_pixel_ratio:new y.aM(E,s.u_device_pixel_ratio),u_image:new y.aL(E,s.u_image),u_units_to_pixels:new y.aQ(E,s.u_units_to_pixels),u_scale:new y.aP(E,s.u_scale),u_fade:new y.aM(E,s.u_fade)}),lineSDF:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_ratio:new y.aM(E,s.u_ratio),u_device_pixel_ratio:new y.aM(E,s.u_device_pixel_ratio),u_units_to_pixels:new y.aQ(E,s.u_units_to_pixels),u_patternscale_a:new y.aQ(E,s.u_patternscale_a),u_patternscale_b:new y.aQ(E,s.u_patternscale_b),u_sdfgamma:new y.aM(E,s.u_sdfgamma),u_image:new y.aL(E,s.u_image),u_tex_y_a:new y.aM(E,s.u_tex_y_a),u_tex_y_b:new y.aM(E,s.u_tex_y_b),u_mix:new y.aM(E,s.u_mix)}),raster:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_tl_parent:new y.aQ(E,s.u_tl_parent),u_scale_parent:new y.aM(E,s.u_scale_parent),u_buffer_scale:new y.aM(E,s.u_buffer_scale),u_fade_t:new y.aM(E,s.u_fade_t),u_opacity:new y.aM(E,s.u_opacity),u_image0:new y.aL(E,s.u_image0),u_image1:new y.aL(E,s.u_image1),u_brightness_low:new y.aM(E,s.u_brightness_low),u_brightness_high:new y.aM(E,s.u_brightness_high),u_saturation_factor:new y.aM(E,s.u_saturation_factor),u_contrast_factor:new y.aM(E,s.u_contrast_factor),u_spin_weights:new y.aP(E,s.u_spin_weights)}),symbolIcon:(E,s)=>({u_is_size_zoom_constant:new y.aL(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new y.aL(E,s.u_is_size_feature_constant),u_size_t:new y.aM(E,s.u_size_t),u_size:new y.aM(E,s.u_size),u_camera_to_center_distance:new y.aM(E,s.u_camera_to_center_distance),u_pitch:new y.aM(E,s.u_pitch),u_rotate_symbol:new y.aL(E,s.u_rotate_symbol),u_aspect_ratio:new y.aM(E,s.u_aspect_ratio),u_fade_change:new y.aM(E,s.u_fade_change),u_matrix:new y.aN(E,s.u_matrix),u_label_plane_matrix:new y.aN(E,s.u_label_plane_matrix),u_coord_matrix:new y.aN(E,s.u_coord_matrix),u_is_text:new y.aL(E,s.u_is_text),u_pitch_with_map:new y.aL(E,s.u_pitch_with_map),u_texsize:new y.aQ(E,s.u_texsize),u_texture:new y.aL(E,s.u_texture)}),symbolSDF:(E,s)=>({u_is_size_zoom_constant:new y.aL(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new y.aL(E,s.u_is_size_feature_constant),u_size_t:new y.aM(E,s.u_size_t),u_size:new y.aM(E,s.u_size),u_camera_to_center_distance:new y.aM(E,s.u_camera_to_center_distance),u_pitch:new y.aM(E,s.u_pitch),u_rotate_symbol:new y.aL(E,s.u_rotate_symbol),u_aspect_ratio:new y.aM(E,s.u_aspect_ratio),u_fade_change:new y.aM(E,s.u_fade_change),u_matrix:new y.aN(E,s.u_matrix),u_label_plane_matrix:new y.aN(E,s.u_label_plane_matrix),u_coord_matrix:new y.aN(E,s.u_coord_matrix),u_is_text:new y.aL(E,s.u_is_text),u_pitch_with_map:new y.aL(E,s.u_pitch_with_map),u_texsize:new y.aQ(E,s.u_texsize),u_texture:new y.aL(E,s.u_texture),u_gamma_scale:new y.aM(E,s.u_gamma_scale),u_device_pixel_ratio:new y.aM(E,s.u_device_pixel_ratio),u_is_halo:new y.aL(E,s.u_is_halo)}),symbolTextAndIcon:(E,s)=>({u_is_size_zoom_constant:new y.aL(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new y.aL(E,s.u_is_size_feature_constant),u_size_t:new y.aM(E,s.u_size_t),u_size:new y.aM(E,s.u_size),u_camera_to_center_distance:new y.aM(E,s.u_camera_to_center_distance),u_pitch:new y.aM(E,s.u_pitch),u_rotate_symbol:new y.aL(E,s.u_rotate_symbol),u_aspect_ratio:new y.aM(E,s.u_aspect_ratio),u_fade_change:new y.aM(E,s.u_fade_change),u_matrix:new y.aN(E,s.u_matrix),u_label_plane_matrix:new y.aN(E,s.u_label_plane_matrix),u_coord_matrix:new y.aN(E,s.u_coord_matrix),u_is_text:new y.aL(E,s.u_is_text),u_pitch_with_map:new y.aL(E,s.u_pitch_with_map),u_texsize:new y.aQ(E,s.u_texsize),u_texsize_icon:new y.aQ(E,s.u_texsize_icon),u_texture:new y.aL(E,s.u_texture),u_texture_icon:new y.aL(E,s.u_texture_icon),u_gamma_scale:new y.aM(E,s.u_gamma_scale),u_device_pixel_ratio:new y.aM(E,s.u_device_pixel_ratio),u_is_halo:new y.aL(E,s.u_is_halo)}),background:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_opacity:new y.aM(E,s.u_opacity),u_color:new y.aR(E,s.u_color)}),backgroundPattern:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_opacity:new y.aM(E,s.u_opacity),u_image:new y.aL(E,s.u_image),u_pattern_tl_a:new y.aQ(E,s.u_pattern_tl_a),u_pattern_br_a:new y.aQ(E,s.u_pattern_br_a),u_pattern_tl_b:new y.aQ(E,s.u_pattern_tl_b),u_pattern_br_b:new y.aQ(E,s.u_pattern_br_b),u_texsize:new y.aQ(E,s.u_texsize),u_mix:new y.aM(E,s.u_mix),u_pattern_size_a:new y.aQ(E,s.u_pattern_size_a),u_pattern_size_b:new y.aQ(E,s.u_pattern_size_b),u_scale_a:new y.aM(E,s.u_scale_a),u_scale_b:new y.aM(E,s.u_scale_b),u_pixel_coord_upper:new y.aQ(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new y.aQ(E,s.u_pixel_coord_lower),u_tile_units_to_pixels:new y.aM(E,s.u_tile_units_to_pixels)}),terrain:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_texture:new y.aL(E,s.u_texture),u_ele_delta:new y.aM(E,s.u_ele_delta)}),terrainDepth:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_ele_delta:new y.aM(E,s.u_ele_delta)}),terrainCoords:(E,s)=>({u_matrix:new y.aN(E,s.u_matrix),u_texture:new y.aL(E,s.u_texture),u_terrain_coords_id:new y.aM(E,s.u_terrain_coords_id),u_ele_delta:new y.aM(E,s.u_ele_delta)})};class oo{constructor(s,f,v){this.context=s;const S=s.gl;this.buffer=S.createBuffer(),this.dynamicDraw=Boolean(v),this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $a{constructor(s,f,v,S){this.length=f.length,this.attributes=v,this.itemSize=f.bytesPerElement,this.dynamicDraw=S,this.context=s;const D=s.gl;this.buffer=D.createBuffer(),s.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,f){for(let v=0;v<this.attributes.length;v++){const S=f.attributes[this.attributes[v].name];void 0!==S&&s.enableVertexAttribArray(S)}}setVertexAttribPointers(s,f,v){for(let S=0;S<this.attributes.length;S++){const D=this.attributes[S],R=f.attributes[D.name];void 0!==R&&s.vertexAttribPointer(R,D.components,s[Nr[D.type]],!1,this.itemSize,D.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ao=new WeakMap;function hr(E){var s;if(Ao.has(E))return Ao.get(E);{const f=null===(s=E.getParameter(E.VERSION))||void 0===s?void 0:s.startsWith("WebGL 2.0");return Ao.set(E,f),f}}class On{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Vl extends On{getDefault(){return y.aT.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class ps extends On{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class fs extends On{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Hc extends On{getDefault(){return[!0,!0,!0,!0]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class pl extends On{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class dc extends On{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class pc extends On{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const f=this.current;(s.func!==f.func||s.ref!==f.ref||s.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Oi extends On{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class Ri extends On{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=s,this.dirty=!1}}class ms extends On{getDefault(){return[0,1]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class jl extends On{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=s,this.dirty=!1}}class $c extends On{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class ld extends On{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.BLEND):f.disable(f.BLEND),this.current=s,this.dirty=!1}}class Sa extends On{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Gc extends On{getDefault(){return y.aT.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class mp extends On{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class cd extends On{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=s,this.dirty=!1}}class ud extends On{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class fh extends On{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class gp extends On{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class ra extends On{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Ea extends On{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class fc extends On{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Ds extends On{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Zc extends On{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Ta extends On{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class hd extends On{getDefault(){return null}set(s){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Lu extends On{getDefault(){return null}set(s){var f;if(s===this.current&&!this.dirty)return;const v=this.gl;hr(v)?v.bindVertexArray(s):null===(f=v.getExtension("OES_vertex_array_object"))||void 0===f||f.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Ul extends On{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class fl extends On{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Ga extends On{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Da extends On{constructor(s,f){super(s),this.context=s,this.parent=f}getDefault(){return null}}class Dr extends Da{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Ma extends Da{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Wc extends Da{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Bn{constructor(s,f,v,S,D){this.context=s,this.width=f,this.height=v;const R=s.gl,N=this.framebuffer=R.createFramebuffer();if(this.colorAttachment=new Dr(s,N),S)this.depthAttachment=D?new Wc(s,N):new Ma(s,N);else if(D)throw new Error("Stencil cannot be setted without depth");if(R.checkFramebufferStatus(R.FRAMEBUFFER)!==R.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,f=this.colorAttachment.get();if(f&&s.deleteTexture(f),this.depthAttachment){const v=this.depthAttachment.get();v&&s.deleteRenderbuffer(v)}s.deleteFramebuffer(this.framebuffer)}}class Li{constructor(s,f,v){this.blendFunction=s,this.blendColor=f,this.mask=v}}Li.Replace=[1,0],Li.disabled=new Li(Li.Replace,y.aT.transparent,[!1,!1,!1,!1]),Li.unblended=new Li(Li.Replace,y.aT.transparent,[!0,!0,!0,!0]),Li.alphaBlended=new Li([1,771],y.aT.transparent,[!0,!0,!0,!0]);class mc{constructor(s){var f,v;if(this.gl=s,this.clearColor=new Vl(this),this.clearDepth=new ps(this),this.clearStencil=new fs(this),this.colorMask=new Hc(this),this.depthMask=new pl(this),this.stencilMask=new dc(this),this.stencilFunc=new pc(this),this.stencilOp=new Oi(this),this.stencilTest=new Ri(this),this.depthRange=new ms(this),this.depthTest=new jl(this),this.depthFunc=new $c(this),this.blend=new ld(this),this.blendFunc=new Sa(this),this.blendColor=new Gc(this),this.blendEquation=new mp(this),this.cullFace=new cd(this),this.cullFaceSide=new ud(this),this.frontFace=new fh(this),this.program=new gp(this),this.activeTexture=new ra(this),this.viewport=new Ea(this),this.bindFramebuffer=new fc(this),this.bindRenderbuffer=new Ds(this),this.bindTexture=new Zc(this),this.bindVertexBuffer=new Ta(this),this.bindElementBuffer=new hd(this),this.bindVertexArray=new Lu(this),this.pixelStoreUnpack=new Ul(this),this.pixelStoreUnpackPremultiplyAlpha=new fl(this),this.pixelStoreUnpackFlipY=new Ga(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),hr(s)){this.HALF_FLOAT=s.HALF_FLOAT;const S=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(f=s.RGBA16F)&&void 0!==f?f:S?.RGBA16F_EXT,this.RGB16F=null!==(v=s.RGB16F)&&void 0!==v?v:S?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const S=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=S?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,f){return new oo(this,s,f)}createVertexBuffer(s,f,v){return new $a(this,s,f,v)}createRenderbuffer(s,f,v){const S=this.gl,D=S.createRenderbuffer();return this.bindRenderbuffer.set(D),S.renderbufferStorage(S.RENDERBUFFER,s,f,v),this.bindRenderbuffer.set(null),D}createFramebuffer(s,f,v,S){return new Bn(this,s,f,v,S)}clear({color:s,depth:f,stencil:v}){const S=this.gl;let D=0;s&&(D|=S.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),void 0!==f&&(D|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),void 0!==v&&(D|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),S.clear(D)}setCullFace(s){!1===s.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){y.aG(s.blendFunction,Li.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return hr(this.gl)?this.gl.createVertexArray():null===(s=this.gl.getExtension("OES_vertex_array_object"))||void 0===s?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var f;return hr(this.gl)?this.gl.deleteVertexArray(s):null===(f=this.gl.getExtension("OES_vertex_array_object"))||void 0===f?void 0:f.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class jn{constructor(s,f,v){this.func=s,this.mask=f,this.range=v}}jn.ReadOnly=!1,jn.ReadWrite=!0,jn.disabled=new jn(519,jn.ReadOnly,[0,1]);class vr{constructor(s,f,v,S,D,R){this.test=s,this.ref=f,this.mask=v,this.fail=S,this.depthFail=D,this.pass=R}}vr.disabled=new vr({func:519,mask:0},0,0,7680,7680,7680);class Hi{constructor(s,f,v){this.enable=s,this.mode=f,this.frontFace=v}}let so;function qc(E,s,f,v,S,D,R){const N=E.context,H=N.gl,W=E.useProgram("collisionBox"),Q=[];let X=0,ae=0;for(let Se=0;Se<v.length;Se++){const Ze=v[Se],st=s.getTile(Ze),Je=st.getBucket(f);if(!Je)continue;let pt=Ze.posMatrix;0===S[0]&&0===S[1]||(pt=E.translatePosMatrix(Ze.posMatrix,st,S,D));const Ct=R?Je.textCollisionBox:Je.iconCollisionBox,vt=Je.collisionCircleArray;if(vt.length>0){const St=y.Z(),Jt=pt;y.aU(St,Je.placementInvProjMatrix,E.transform.glCoordMatrix),y.aU(St,St,Je.placementViewportMatrix),Q.push({circleArray:vt,circleOffset:ae,transform:Jt,invTransform:St,coord:Ze}),X+=vt.length/4,ae=X}Ct&&W.draw(N,H.LINES,jn.disabled,vr.disabled,E.colorModeForRenderPass(),Hi.disabled,ta(pt,E.transform,st),E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ze),f.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,null,E.transform.zoom,null,null,Ct.collisionVertexBuffer)}if(!R||!Q.length)return;const be=E.useProgram("collisionCircle"),ye=new y.aV;ye.resize(4*X),ye._trim();let Te=0;for(const Se of Q)for(let Ze=0;Ze<Se.circleArray.length/4;Ze++){const st=4*Ze,Je=Se.circleArray[st+0],pt=Se.circleArray[st+1],Ct=Se.circleArray[st+2],vt=Se.circleArray[st+3];ye.emplace(Te++,Je,pt,Ct,vt,0),ye.emplace(Te++,Je,pt,Ct,vt,1),ye.emplace(Te++,Je,pt,Ct,vt,2),ye.emplace(Te++,Je,pt,Ct,vt,3)}(!so||so.length<2*X)&&(so=function(Se){const Ze=2*Se,st=new y.aX;st.resize(Ze),st._trim();for(let Je=0;Je<Ze;Je++){const pt=6*Je;st.uint16[pt+0]=4*Je+0,st.uint16[pt+1]=4*Je+1,st.uint16[pt+2]=4*Je+2,st.uint16[pt+3]=4*Je+2,st.uint16[pt+4]=4*Je+3,st.uint16[pt+5]=4*Je+0}return st}(X));const ge=N.createIndexBuffer(so,!0),je=N.createVertexBuffer(ye,y.aW.members,!0);for(const Se of Q){const Ze={u_matrix:Se.transform,u_inv_matrix:Se.invTransform,u_camera_to_center_distance:(nt=E.transform).cameraToCenterDistance,u_viewport_size:[nt.width,nt.height]};be.draw(N,H.TRIANGLES,jn.disabled,vr.disabled,E.colorModeForRenderPass(),Hi.disabled,Ze,E.style.map.terrain&&E.style.map.terrain.getTerrainData(Se.coord),f.id,je,ge,y.S.simpleSegment(0,2*Se.circleOffset,Se.circleArray.length,Se.circleArray.length/2),null,E.transform.zoom,null,null,null)}var nt;je.destroy(),ge.destroy()}Hi.disabled=new Hi(!1,1029,2305),Hi.backCCW=new Hi(!0,1029,2305);const Za=y.ao(new Float32Array(16));function ku(E,s,f,v,S,D){const{horizontalAlign:R,verticalAlign:N}=y.au(E);return new y.P((-(R-.5)*s/S+v[0])*D,(-(N-.5)*f/S+v[1])*D)}function zs(E,s,f,v,S,D,R,N,H,W,Q){const X=E.text.placedSymbolArray,ae=E.text.dynamicLayoutVertexArray,be=E.icon.dynamicLayoutVertexArray,ye={};ae.clear();for(let Te=0;Te<X.length;Te++){const ge=X.get(Te),je=ge.hidden||!ge.crossTileID||E.allowVerticalPlacement&&!ge.placedOrientation?null:v[ge.crossTileID];if(je){const nt=new y.P(ge.anchorX,ge.anchorY),Se=Vn(nt,f?R:D,Q),Ze=Qo(S.cameraToCenterDistance,Se.signedDistanceFromCamera);let st=y.aj(E.textSizeData,H,ge)*Ze/y.ap;f&&(st*=E.tilePixelRatio/N);const{width:Je,height:pt,anchor:Ct,textOffset:vt,textBoxScale:St}=je,Jt=ku(Ct,Je,pt,vt,St,st),_i=f?Vn(nt.add(Jt),D,Q).point:Se.point.add(s?Jt.rotate(-S.angle):Jt),zt=E.allowVerticalPlacement&&ge.placedOrientation===y.ai.vertical?Math.PI/2:0;for(let mn=0;mn<ge.numGlyphs;mn++)y.ak(ae,_i,zt);W&&ge.associatedIconIndex>=0&&(ye[ge.associatedIconIndex]={shiftedAnchor:_i,angle:zt})}else me(ge.numGlyphs,ae)}if(W){be.clear();const Te=E.icon.placedSymbolArray;for(let ge=0;ge<Te.length;ge++){const je=Te.get(ge);if(je.hidden)me(je.numGlyphs,be);else{const nt=ye[ge];if(nt)for(let Se=0;Se<je.numGlyphs;Se++)y.ak(be,nt.shiftedAnchor,nt.angle);else me(je.numGlyphs,be)}}E.icon.dynamicLayoutVertexBuffer.updateData(be)}E.text.dynamicLayoutVertexBuffer.updateData(ae)}function gc(E,s,f){return f.iconsInText&&s?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Hl(E,s,f,v,S,D,R,N,H,W,Q,X){const ae=E.context,be=ae.gl,ye=E.transform,Te="map"===N,ge="map"===H,je="viewport"!==N&&"point"!==f.layout.get("symbol-placement"),nt=Te&&!ge&&!je,Se=!f.layout.get("symbol-sort-key").isConstant();let Ze=!1;const st=E.depthModeForSublayer(0,jn.ReadOnly),Je=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),pt=[];for(const Ct of v){const vt=s.getTile(Ct),St=vt.getBucket(f);if(!St)continue;const Jt=S?St.text:St.icon;if(!Jt||!Jt.segments.get().length||!Jt.hasVisibleVertices)continue;const _i=Jt.programConfigurations.get(f.id),zt=S||St.sdfIcons,mn=S?St.textSizeData:St.iconSizeData,cn=ge||0!==ye.pitch,dr=E.useProgram(gc(zt,S,St),_i),A=y.ah(mn,ye.zoom),ri=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ct);let An,Fr,$i,ns,Qr=[0,0],Xr=null;if(S)Fr=vt.glyphAtlasTexture,$i=be.LINEAR,An=vt.glyphAtlasTexture.size,St.iconsInText&&(Qr=vt.imageAtlasTexture.size,Xr=vt.imageAtlasTexture,ns=cn||E.options.rotating||E.options.zooming||"composite"===mn.kind||"camera"===mn.kind?be.LINEAR:be.NEAREST);else{const zr=1!==f.layout.get("icon-size").constantOr(0)||St.iconsNeedLinear;Fr=vt.imageAtlasTexture,$i=zt||E.options.rotating||E.options.zooming||zr||cn?be.LINEAR:be.NEAREST,An=vt.imageAtlasTexture.size}const Gs=Oe(vt,1,E.transform.zoom),xr=It(Ct.posMatrix,ge,Te,E.transform,Gs),Pr=Ko(Ct.posMatrix,ge,Te,E.transform,Gs),Qa=Je&&St.hasTextData(),Xa="none"!==f.layout.get("icon-text-fit")&&Qa&&St.hasIconData();if(je){const zr=E.style.map.terrain?(Oo,Ar)=>E.style.map.terrain.getElevation(Ct,Oo,Ar):null,ao="map"===f.layout.get("text-rotation-alignment");Lt(St,Ct.posMatrix,E,S,xr,Pr,ge,W,ao,zr)}const Sl=E.translatePosMatrix(Ct.posMatrix,vt,D,R),Vi=je||S&&Je||Xa?Za:xr,wo=E.translatePosMatrix(Pr,vt,D,R,!0),Jr=zt&&0!==f.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1);let Co;Co=zt?St.iconsInText?Ai(mn.kind,A,nt,ge,E,Sl,Vi,wo,An,Qr):Go(mn.kind,A,nt,ge,E,Sl,Vi,wo,S,An,!0):$n(mn.kind,A,nt,ge,E,Sl,Vi,wo,S,An);const _s={program:dr,buffers:Jt,uniformValues:Co,atlasTexture:Fr,atlasTextureIcon:Xr,atlasInterpolation:$i,atlasInterpolationIcon:ns,isSDF:zt,hasHalo:Jr};if(Se&&St.canOverlap){Ze=!0;const zr=Jt.segments.get();for(const ao of zr)pt.push({segments:new y.S([ao]),sortKey:ao.sortKey,state:_s,terrainData:ri})}else pt.push({segments:Jt.segments,sortKey:0,state:_s,terrainData:ri})}Ze&&pt.sort((Ct,vt)=>Ct.sortKey-vt.sortKey);for(const Ct of pt){const vt=Ct.state;if(ae.activeTexture.set(be.TEXTURE0),vt.atlasTexture.bind(vt.atlasInterpolation,be.CLAMP_TO_EDGE),vt.atlasTextureIcon&&(ae.activeTexture.set(be.TEXTURE1),vt.atlasTextureIcon&&vt.atlasTextureIcon.bind(vt.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),vt.isSDF){const St=vt.uniformValues;vt.hasHalo&&(St.u_is_halo=1,Pn(vt.buffers,Ct.segments,f,E,vt.program,st,Q,X,St,Ct.terrainData)),St.u_is_halo=0}Pn(vt.buffers,Ct.segments,f,E,vt.program,st,Q,X,vt.uniformValues,Ct.terrainData)}}function Pn(E,s,f,v,S,D,R,N,H,W){const Q=v.context;S.draw(Q,Q.gl.TRIANGLES,D,R,N,Hi.disabled,H,W,f.id,E.layoutVertexBuffer,E.indexBuffer,s,f.paint,v.transform.zoom,E.programConfigurations.get(f.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function oa(E,s,f,v,S){if(!f||!v||!v.imageAtlas)return;const D=v.imageAtlas.patternPositions;let R=D[f.to.toString()],N=D[f.from.toString()];if(!R&&N&&(R=N),!N&&R&&(N=R),!R||!N){const H=S.getPaintProperty(s);R=D[H],N=D[H]}R&&N&&E.setConstantPatternPositions(R,N)}function Yc(E,s,f,v,S,D,R){const N=E.context.gl,H="fill-pattern",W=f.paint.get(H),Q=W&&W.constantOr(1),X=f.getCrossfadeParameters();let ae,be,ye,Te,ge;R?(be=Q&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae=N.LINES):(be=Q?"fillPattern":"fill",ae=N.TRIANGLES);const je=W.constantOr(null);for(const nt of v){const Se=s.getTile(nt);if(Q&&!Se.patternsLoaded())continue;const Ze=Se.getBucket(f);if(!Ze)continue;const st=Ze.programConfigurations.get(f.id),Je=E.useProgram(be,st),pt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(nt);Q&&(E.context.activeTexture.set(N.TEXTURE0),Se.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),st.updatePaintBuffers(X)),oa(st,H,je,Se,f);const Ct=pt?nt:null,vt=E.translatePosMatrix(Ct?Ct.posMatrix:nt.posMatrix,Se,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(R){Te=Ze.indexBuffer2,ge=Ze.segments2;const St=[N.drawingBufferWidth,N.drawingBufferHeight];ye="fillOutlinePattern"===be&&Q?fr(vt,E,X,Se,St):hs(vt,St)}else Te=Ze.indexBuffer,ge=Ze.segments,ye=Q?Yi(vt,E,X,Se):Ns(vt);Je.draw(E.context,ae,S,E.stencilModeForClipping(nt),D,Hi.disabled,ye,pt,f.id,Ze.layoutVertexBuffer,Te,ge,f.paint,E.transform.zoom,st)}}function zi(E,s,f,v,S,D,R){const N=E.context,H=N.gl,W="fill-extrusion-pattern",Q=f.paint.get(W),X=Q.constantOr(1),ae=f.getCrossfadeParameters(),be=f.paint.get("fill-extrusion-opacity"),ye=Q.constantOr(null);for(const Te of v){const ge=s.getTile(Te),je=ge.getBucket(f);if(!je)continue;const nt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Te),Se=je.programConfigurations.get(f.id),Ze=E.useProgram(X?"fillExtrusionPattern":"fillExtrusion",Se);X&&(E.context.activeTexture.set(H.TEXTURE0),ge.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Se.updatePaintBuffers(ae)),oa(Se,W,ye,ge,f);const st=E.translatePosMatrix(Te.posMatrix,ge,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Je=f.paint.get("fill-extrusion-vertical-gradient"),pt=X?Mi(st,E,Je,be,Te,ae,ge):Xo(st,E,Je,be);Ze.draw(N,N.gl.TRIANGLES,S,D,R,Hi.backCCW,pt,nt,f.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,f.paint,E.transform.zoom,Se,E.style.map.terrain&&je.centroidVertexBuffer)}}function _p(E,s,f,v,S,D,R){const N=E.context,H=N.gl,W=f.fbo;if(!W)return;const Q=E.useProgram("hillshade"),X=E.style.map.terrain&&E.style.map.terrain.getTerrainData(s);N.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,W.colorAttachment.get()),Q.draw(N,H.TRIANGLES,S,D,R,Hi.disabled,((ae,be,ye,Te)=>{const ge=ye.paint.get("hillshade-shadow-color"),je=ye.paint.get("hillshade-highlight-color"),nt=ye.paint.get("hillshade-accent-color");let Se=ye.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ye.paint.get("hillshade-illumination-anchor")&&(Se-=ae.transform.angle);const Ze=!ae.options.moving;return{u_matrix:Te?Te.posMatrix:ae.transform.calculatePosMatrix(be.tileID.toUnwrapped(),Ze),u_image:0,u_latrange:qr(0,be.tileID),u_light:[ye.paint.get("hillshade-exaggeration"),Se],u_shadow:ge,u_highlight:je,u_accent:nt}})(E,f,v,X?s:null),X,v.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function gl(E,s,f,v,S,D){const R=E.context,N=R.gl,H=s.dem;if(H&&H.data){const W=H.dim,Q=H.stride,X=H.getPixels();if(R.activeTexture.set(N.TEXTURE1),R.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||E.getTileTexture(Q),s.demTexture){const be=s.demTexture;be.update(X,{premultiply:!1}),be.bind(N.NEAREST,N.CLAMP_TO_EDGE)}else s.demTexture=new hi(R,X,N.RGBA,{premultiply:!1}),s.demTexture.bind(N.NEAREST,N.CLAMP_TO_EDGE);R.activeTexture.set(N.TEXTURE0);let ae=s.fbo;if(!ae){const be=new hi(R,{width:W,height:W,data:null},N.RGBA);be.bind(N.LINEAR,N.CLAMP_TO_EDGE),ae=s.fbo=R.createFramebuffer(W,W,!0,!1),ae.colorAttachment.set(be.texture)}R.bindFramebuffer.set(ae.framebuffer),R.viewport.set([0,0,W,W]),E.useProgram("hillshadePrepare").draw(R,N.TRIANGLES,v,S,D,Hi.disabled,((be,ye)=>{const Te=ye.stride,ge=y.Z();return y.aS(ge,0,y.N,-y.N,0,0,1),y.$(ge,ge,[0,-y.N,0]),{u_matrix:ge,u_image:1,u_dimension:[Te,Te],u_zoom:be.overscaledZ,u_unpack:ye.getUnpackVector()}})(s.tileID,H),null,f.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function dd(E,s,f,v,S,D){const R=v.paint.get("raster-fade-duration");if(!D&&R>0){const N=y.h.now(),H=(N-E.timeAdded)/R,W=s?(N-s.timeAdded)/R:-1,Q=f.getSource(),X=S.coveringZoomLevel({tileSize:Q.tileSize,roundZoom:Q.roundZoom}),ae=!s||Math.abs(s.tileID.overscaledZ-X)>Math.abs(E.tileID.overscaledZ-X),be=ae&&E.refreshedUponExpiration?1:y.ad(ae?H:1-W,0,1);return E.refreshedUponExpiration&&H>=1&&(E.refreshedUponExpiration=!1),s?{opacity:1,mix:1-be}:{opacity:be,mix:0}}return{opacity:1,mix:0}}const $l=new y.aT(1,0,0,1),_c=new y.aT(0,1,0,1),xt=new y.aT(0,0,1,1),ki=new y.aT(1,0,1,1),Ia=new y.aT(0,1,1,1);function Wa(E,s,f,v){qa(E,0,s+f/2,E.transform.width,f,v)}function Kr(E,s,f,v){qa(E,s-f/2,0,f,E.transform.height,v)}function qa(E,s,f,v,S,D){const R=E.context,N=R.gl;N.enable(N.SCISSOR_TEST),N.scissor(s*E.pixelRatio,f*E.pixelRatio,v*E.pixelRatio,S*E.pixelRatio),R.clear({color:D}),N.disable(N.SCISSOR_TEST)}function Gl(E,s,f){const v=E.context,S=v.gl,D=f.posMatrix,R=E.useProgram("debug"),N=jn.disabled,H=vr.disabled,W=E.colorModeForRenderPass(),Q="$debug",X=E.style.map.terrain&&E.style.map.terrain.getTerrainData(f);v.activeTexture.set(S.TEXTURE0);const ae=s.getTileByID(f.key).latestRawTileData,be=Math.floor((ae&&ae.byteLength||0)/1024),ye=s.getTile(f).tileSize,Te=512/Math.min(ye,512)*(f.overscaledZ/E.transform.zoom)*.5;let ge=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ge+=` => ${f.overscaledZ}`),function(je,nt){je.initDebugOverlayCanvas();const Se=je.debugOverlayCanvas,Ze=je.context.gl,st=je.debugOverlayCanvas.getContext("2d");st.clearRect(0,0,Se.width,Se.height),st.shadowColor="white",st.shadowBlur=2,st.lineWidth=1.5,st.strokeStyle="white",st.textBaseline="top",st.font="bold 36px Open Sans, sans-serif",st.fillText(nt,5,5),st.strokeText(nt,5,5),je.debugOverlayTexture.update(Se),je.debugOverlayTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE)}(E,`${ge} ${be}kB`),R.draw(v,S.TRIANGLES,N,H,Li.alphaBlended,Hi.disabled,ds(D,y.aT.transparent,Te),null,Q,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),R.draw(v,S.LINE_STRIP,N,H,W,Hi.disabled,ds(D,y.aT.red),X,Q,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function gi(E,s,f){const v=E.context,S=v.gl,D=E.colorModeForRenderPass(),R=new jn(S.LEQUAL,jn.ReadWrite,E.depthRangeFor3D),N=E.useProgram("terrain"),H=s.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,E.width,E.height]);for(const W of f){const Q=E.renderToTexture.getTexture(W),X=s.getTerrainData(W.tileID);v.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,Q.texture);const ae={u_matrix:E.transform.calculatePosMatrix(W.tileID.toUnwrapped()),u_texture:0,u_ele_delta:s.getMeshFrameDelta(E.transform.zoom)};N.draw(v,S.TRIANGLES,R,vr.disabled,D,Hi.backCCW,ae,X,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}class Bs{constructor(s,f){this.context=new mc(s),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:y.Z(),renderTime:0},this.setup(),this.numSublayers=kt.maxUnderzooming+kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Z}resize(s,f,v){if(this.width=Math.floor(s*v),this.height=Math.floor(f*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const s=this.context,f=new y.a_;f.emplaceBack(0,0),f.emplaceBack(y.N,0),f.emplaceBack(0,y.N),f.emplaceBack(y.N,y.N),this.tileExtentBuffer=s.createVertexBuffer(f,Tt.members),this.tileExtentSegments=y.S.simpleSegment(0,0,4,2);const v=new y.a_;v.emplaceBack(0,0),v.emplaceBack(y.N,0),v.emplaceBack(0,y.N),v.emplaceBack(y.N,y.N),this.debugBuffer=s.createVertexBuffer(v,Tt.members),this.debugSegments=y.S.simpleSegment(0,0,4,5);const S=new y.V;S.emplaceBack(0,0,0,0),S.emplaceBack(y.N,0,y.N,0),S.emplaceBack(0,y.N,0,y.N),S.emplaceBack(y.N,y.N,y.N,y.N),this.rasterBoundsBuffer=s.createVertexBuffer(S,_r.members),this.rasterBoundsSegments=y.S.simpleSegment(0,0,4,2);const D=new y.a_;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(D,Tt.members),this.viewportSegments=y.S.simpleSegment(0,0,4,2);const R=new y.a$;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(R);const N=new y.b0;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(N);const H=this.context.gl;this.stencilClearMode=new vr({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO)}clearStencil(){const s=this.context,f=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=y.Z();y.aS(v,0,this.width,this.height,0,0,1),y.a0(v,v,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,f.TRIANGLES,jn.disabled,this.stencilClearMode,Li.disabled,Hi.disabled,hl(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,f){if(this.currentStencilSource===s.source||!s.isTileClipped()||!f||!f.length)return;this.currentStencilSource=s.source;const v=this.context,S=v.gl;this.nextStencilID+f.length>256&&this.clearStencil(),v.setColorMode(Li.disabled),v.setDepthMode(jn.disabled);const D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const R of f){const N=this._tileClippingMaskIDs[R.key]=this.nextStencilID++,H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R);D.draw(v,S.TRIANGLES,jn.disabled,new vr({func:S.ALWAYS,mask:0},N,255,S.KEEP,S.KEEP,S.REPLACE),Li.disabled,Hi.disabled,hl(R.posMatrix),H,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,f=this.context.gl;return new vr({func:f.NOTEQUAL,mask:255},s,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(s){const f=this.context.gl;return new vr({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(s){const f=this.context.gl,v=s.sort((R,N)=>N.overscaledZ-R.overscaledZ),S=v[v.length-1].overscaledZ,D=v[0].overscaledZ-S+1;if(D>1){this.currentStencilSource=void 0,this.nextStencilID+D>256&&this.clearStencil();const R={};for(let N=0;N<D;N++)R[N+S]=new vr({func:f.GEQUAL,mask:255},N+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=D,[R,v]}return[{[S]:vr.disabled},v]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Li([s.CONSTANT_COLOR,s.ONE],new y.aT(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Li.unblended:Li.alphaBlended}depthModeForSublayer(s,f,v){if(!this.opaquePassEnabledForLayer())return jn.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new jn(v||this.context.gl.LEQUAL,f,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,f){this.style=s,this.options=f,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(y.h.now()),this.imageManager.beginFrame();const v=this.style._order,S=this.style.sourceCaches,D={},R={},N={};for(const H in S){const W=S[H];W.used&&W.prepare(this.context),D[H]=W.getVisibleCoordinates(),R[H]=D[H].slice().reverse(),N[H]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<v.length;H++)if(this.style._layers[v[H]].is3D()){this.opaquePassCutoff=H;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const H=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!y.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||H.length)&&(y.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(W,Q){const X=W.context,ae=X.gl,be=Li.unblended,ye=new jn(ae.LEQUAL,jn.ReadWrite,[0,1]),Te=Q.getTerrainMesh(),ge=Q.sourceCache.getRenderableTiles(),je=W.useProgram("terrainDepth");X.bindFramebuffer.set(Q.getFramebuffer("depth").framebuffer),X.viewport.set([0,0,W.width/devicePixelRatio,W.height/devicePixelRatio]),X.clear({color:y.aT.transparent,depth:1});for(const nt of ge){const Se=Q.getTerrainData(nt.tileID),Ze={u_matrix:W.transform.calculatePosMatrix(nt.tileID.toUnwrapped()),u_ele_delta:Q.getMeshFrameDelta(W.transform.zoom)};je.draw(X,ae.TRIANGLES,ye,vr.disabled,be,Hi.backCCW,Ze,Se,"terrain",Te.vertexBuffer,Te.indexBuffer,Te.segments)}X.bindFramebuffer.set(null),X.viewport.set([0,0,W.width,W.height])}(this,this.style.map.terrain),function(W,Q){const X=W.context,ae=X.gl,be=Li.unblended,ye=new jn(ae.LEQUAL,jn.ReadWrite,[0,1]),Te=Q.getTerrainMesh(),ge=Q.getCoordsTexture(),je=Q.sourceCache.getRenderableTiles(),nt=W.useProgram("terrainCoords");X.bindFramebuffer.set(Q.getFramebuffer("coords").framebuffer),X.viewport.set([0,0,W.width/devicePixelRatio,W.height/devicePixelRatio]),X.clear({color:y.aT.transparent,depth:1}),Q.coordsIndex=[];for(const Se of je){const Ze=Q.getTerrainData(Se.tileID);X.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,ge.texture);const st={u_matrix:W.transform.calculatePosMatrix(Se.tileID.toUnwrapped()),u_terrain_coords_id:(255-Q.coordsIndex.length)/255,u_texture:0,u_ele_delta:Q.getMeshFrameDelta(W.transform.zoom)};nt.draw(X,ae.TRIANGLES,ye,vr.disabled,be,Hi.backCCW,st,Ze,"terrain",Te.vertexBuffer,Te.indexBuffer,Te.segments),Q.coordsIndex.push(Se.tileID.key)}X.bindFramebuffer.set(null),X.viewport.set([0,0,W.width,W.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const H of v){const W=this.style._layers[H];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const Q=R[W.source];("custom"===W.type||Q.length)&&this.renderLayer(this,S[W.source],W,Q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?y.aT.black:y.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[v[this.currentLayer]],W=S[H.source],Q=D[H.source];this._renderTileClippingMasks(H,Q),this.renderLayer(this,W,H,Q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const H=this.style._layers[v[this.currentLayer]],W=S[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H))continue;const Q=("symbol"===H.type?N:R)[H.source];this._renderTileClippingMasks(H,D[H.source]),this.renderLayer(this,W,H,Q)}if(this.options.showTileBoundaries){const H=function(W,Q){let X=null;const ae=Object.values(W._layers).flatMap(ge=>ge.source&&!ge.isHidden(Q)?[W.sourceCaches[ge.source]]:[]),be=ae.filter(ge=>"vector"===ge.getSource().type),ye=ae.filter(ge=>"vector"!==ge.getSource().type),Te=ge=>{(!X||X.getSource().maxzoom<ge.getSource().maxzoom)&&(X=ge)};return be.forEach(ge=>Te(ge)),X||ye.forEach(ge=>Te(ge)),X}(this.style,this.transform.zoom);H&&function(W,Q,X){for(let ae=0;ae<X.length;ae++)Gl(W,Q,X[ae])}(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){const W=H.transform.padding;Wa(H,H.transform.height-(W.top||0),3,$l),Wa(H,W.bottom||0,3,_c),Kr(H,W.left||0,3,xt),Kr(H,H.transform.width-(W.right||0),3,ki);const Q=H.transform.centerPoint;var X,ae,be,ye;qa(X=H,(ae=Q.x)-1,(be=H.transform.height-Q.y)-10,2,20,ye=Ia),qa(X,ae-10,be-1,20,2,ye)}(this),this.context.setDefault()}renderLayer(s,f,v,S){if(!v.isHidden(this.transform.zoom)&&("background"===v.type||"custom"===v.type||(S||[]).length))switch(this.id=v.id,v.type){case"symbol":!function(D,R,N,H,W){if("translucent"!==D.renderPass)return;const Q=vr.disabled,X=D.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ae,be,ye,Te,ge,je,nt){const Se=be.transform,Ze="map"===ge,st="map"===je;for(const Je of ae){const pt=Te.getTile(Je),Ct=pt.getBucket(ye);if(!Ct||!Ct.text||!Ct.text.segments.get().length)continue;const vt=y.ah(Ct.textSizeData,Se.zoom),St=Oe(pt,1,be.transform.zoom),Jt=It(Je.posMatrix,st,Ze,be.transform,St),_i="none"!==ye.layout.get("icon-text-fit")&&Ct.hasIconData();if(vt){const zt=Math.pow(2,Se.zoom-pt.tileID.overscaledZ);zs(Ct,Ze,st,nt,Se,Jt,Je.posMatrix,zt,vt,_i,be.style.map.terrain?(mn,cn)=>be.style.map.terrain.getElevation(Je,mn,cn):null)}}}(H,D,N,R,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),W),0!==N.paint.get("icon-opacity").constantOr(1)&&Hl(D,R,N,H,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),Q,X),0!==N.paint.get("text-opacity").constantOr(1)&&Hl(D,R,N,H,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),Q,X),R.map.showCollisionBoxes&&(qc(D,R,N,H,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),!0),qc(D,R,N,H,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),!1))}(s,f,v,S,this.style.placement.variableOffsets);break;case"circle":!function(D,R,N,H){if("translucent"!==D.renderPass)return;const W=N.paint.get("circle-opacity"),Q=N.paint.get("circle-stroke-width"),X=N.paint.get("circle-stroke-opacity"),ae=!N.layout.get("circle-sort-key").isConstant();if(0===W.constantOr(1)&&(0===Q.constantOr(1)||0===X.constantOr(1)))return;const be=D.context,ye=be.gl,Te=D.depthModeForSublayer(0,jn.ReadOnly),ge=vr.disabled,je=D.colorModeForRenderPass(),nt=[];for(let Se=0;Se<H.length;Se++){const Ze=H[Se],st=R.getTile(Ze),Je=st.getBucket(N);if(!Je)continue;const pt=Je.programConfigurations.get(N.id),Ct=D.useProgram("circle",pt),vt=Je.layoutVertexBuffer,St=Je.indexBuffer,Jt=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Ze),_i={programConfiguration:pt,program:Ct,layoutVertexBuffer:vt,indexBuffer:St,uniformValues:zn(D,Ze,st,N),terrainData:Jt};if(ae){const zt=Je.segments.get();for(const mn of zt)nt.push({segments:new y.S([mn]),sortKey:mn.sortKey,state:_i})}else nt.push({segments:Je.segments,sortKey:0,state:_i})}ae&&nt.sort((Se,Ze)=>Se.sortKey-Ze.sortKey);for(const Se of nt){const{programConfiguration:Ze,program:st,layoutVertexBuffer:Je,indexBuffer:pt,uniformValues:Ct,terrainData:vt}=Se.state;st.draw(be,ye.TRIANGLES,Te,ge,je,Hi.disabled,Ct,vt,N.id,Je,pt,Se.segments,N.paint,D.transform.zoom,Ze)}}(s,f,v,S);break;case"heatmap":!function(D,R,N,H){if(0!==N.paint.get("heatmap-opacity"))if("offscreen"===D.renderPass){const W=D.context,Q=W.gl,X=vr.disabled,ae=new Li([Q.ONE,Q.ONE],y.aT.transparent,[!0,!0,!0,!0]);(function(be,ye,Te){const ge=be.gl;be.activeTexture.set(ge.TEXTURE1),be.viewport.set([0,0,ye.width/4,ye.height/4]);let je=Te.heatmapFbo;if(je)ge.bindTexture(ge.TEXTURE_2D,je.colorAttachment.get()),be.bindFramebuffer.set(je.framebuffer);else{const nt=ge.createTexture();ge.bindTexture(ge.TEXTURE_2D,nt),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,ge.LINEAR),je=Te.heatmapFbo=be.createFramebuffer(ye.width/4,ye.height/4,!1,!1),function(Se,Ze,st,Je){var pt,Ct;const vt=Se.gl,St=null!==(pt=Se.HALF_FLOAT)&&void 0!==pt?pt:vt.UNSIGNED_BYTE,Jt=null!==(Ct=Se.RGBA16F)&&void 0!==Ct?Ct:vt.RGBA;vt.texImage2D(vt.TEXTURE_2D,0,Jt,Ze.width/4,Ze.height/4,0,vt.RGBA,St,null),Je.colorAttachment.set(st)}(be,ye,nt,je)}})(W,D,N),W.clear({color:y.aT.transparent});for(let be=0;be<H.length;be++){const ye=H[be];if(R.hasRenderableParent(ye))continue;const Te=R.getTile(ye),ge=Te.getBucket(N);if(!ge)continue;const je=ge.programConfigurations.get(N.id),nt=D.useProgram("heatmap",je),{zoom:Se}=D.transform;nt.draw(W,Q.TRIANGLES,jn.disabled,X,ae,Hi.disabled,Es(ye.posMatrix,Te,Se,N.paint.get("heatmap-intensity")),null,N.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,N.paint,D.transform.zoom,je)}W.viewport.set([0,0,D.width,D.height])}else"translucent"===D.renderPass&&(D.context.setColorMode(D.colorModeForRenderPass()),function(W,Q){const X=W.context,ae=X.gl,be=Q.heatmapFbo;if(!be)return;X.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,be.colorAttachment.get()),X.activeTexture.set(ae.TEXTURE1);let ye=Q.colorRampTexture;ye||(ye=Q.colorRampTexture=new hi(X,Q.colorRamp,ae.RGBA)),ye.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(X,ae.TRIANGLES,jn.disabled,vr.disabled,W.colorModeForRenderPass(),Hi.disabled,((Te,ge,je,nt)=>{const Se=y.Z();y.aS(Se,0,Te.width,Te.height,0,0,1);const Ze=Te.context.gl;return{u_matrix:Se,u_world:[Ze.drawingBufferWidth,Ze.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ge.paint.get("heatmap-opacity")}})(W,Q),null,Q.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,Q.paint,W.transform.zoom)}(D,N))}(s,f,v,S);break;case"line":!function(D,R,N,H){if("translucent"!==D.renderPass)return;const W=N.paint.get("line-opacity"),Q=N.paint.get("line-width");if(0===W.constantOr(1)||0===Q.constantOr(1))return;const X=D.depthModeForSublayer(0,jn.ReadOnly),ae=D.colorModeForRenderPass(),be=N.paint.get("line-dasharray"),ye=N.paint.get("line-pattern"),Te=ye.constantOr(1),ge=N.paint.get("line-gradient"),je=N.getCrossfadeParameters(),nt=Te?"linePattern":be?"lineSDF":ge?"lineGradient":"line",Se=D.context,Ze=Se.gl;let st=!0;for(const Je of H){const pt=R.getTile(Je);if(Te&&!pt.patternsLoaded())continue;const Ct=pt.getBucket(N);if(!Ct)continue;const vt=Ct.programConfigurations.get(N.id),St=D.context.program.get(),Jt=D.useProgram(nt,vt),_i=st||Jt.program!==St,zt=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Je),mn=ye.constantOr(null);if(mn&&pt.imageAtlas){const A=pt.imageAtlas,ri=A.patternPositions[mn.to.toString()],An=A.patternPositions[mn.from.toString()];ri&&An&&vt.setConstantPatternPositions(ri,An)}const cn=zt?Je:null,dr=Te?Ts(D,pt,N,je,cn):be?Ha(D,pt,N,be,je,cn):ge?na(D,pt,N,Ct.lineClipsArray.length,cn):Yr(D,pt,N,cn);if(Te)Se.activeTexture.set(Ze.TEXTURE0),pt.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),vt.updatePaintBuffers(je);else if(be&&(_i||D.lineAtlas.dirty))Se.activeTexture.set(Ze.TEXTURE0),D.lineAtlas.bind(Se);else if(ge){const A=Ct.gradients[N.id];let ri=A.texture;if(N.gradientVersion!==A.version){let An=256;if(N.stepInterpolant){const Fr=R.getSource().maxzoom,$i=Je.canonical.z===Fr?Math.ceil(1<<D.transform.maxZoom-Je.canonical.z):1;An=y.ad(y.aY(Ct.maxLineLength/y.N*1024*$i),256,Se.maxTextureSize)}A.gradient=y.aZ({expression:N.gradientExpression(),evaluationKey:"lineProgress",resolution:An,image:A.gradient||void 0,clips:Ct.lineClipsArray}),A.texture?A.texture.update(A.gradient):A.texture=new hi(Se,A.gradient,Ze.RGBA),A.version=N.gradientVersion,ri=A.texture}Se.activeTexture.set(Ze.TEXTURE0),ri.bind(N.stepInterpolant?Ze.NEAREST:Ze.LINEAR,Ze.CLAMP_TO_EDGE)}Jt.draw(Se,Ze.TRIANGLES,X,D.stencilModeForClipping(Je),ae,Hi.disabled,dr,zt,N.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,N.paint,D.transform.zoom,vt,Ct.layoutVertexBuffer2),st=!1}}(s,f,v,S);break;case"fill":!function(D,R,N,H){const W=N.paint.get("fill-color"),Q=N.paint.get("fill-opacity");if(0===Q.constantOr(1))return;const X=D.colorModeForRenderPass(),ae=N.paint.get("fill-pattern"),be=D.opaquePassEnabledForLayer()&&!ae.constantOr(1)&&1===W.constantOr(y.aT.transparent).a&&1===Q.constantOr(0)?"opaque":"translucent";if(D.renderPass===be){const ye=D.depthModeForSublayer(1,"opaque"===D.renderPass?jn.ReadWrite:jn.ReadOnly);Yc(D,R,N,H,ye,X,!1)}if("translucent"===D.renderPass&&N.paint.get("fill-antialias")){const ye=D.depthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,jn.ReadOnly);Yc(D,R,N,H,ye,X,!0)}}(s,f,v,S);break;case"fill-extrusion":!function(D,R,N,H){const W=N.paint.get("fill-extrusion-opacity");if(0!==W&&"translucent"===D.renderPass){const Q=new jn(D.context.gl.LEQUAL,jn.ReadWrite,D.depthRangeFor3D);if(1!==W||N.paint.get("fill-extrusion-pattern").constantOr(1))zi(D,R,N,H,Q,vr.disabled,Li.disabled),zi(D,R,N,H,Q,D.stencilModeFor3D(),D.colorModeForRenderPass());else{const X=D.colorModeForRenderPass();zi(D,R,N,H,Q,vr.disabled,X)}}}(s,f,v,S);break;case"hillshade":!function(D,R,N,H){if("offscreen"!==D.renderPass&&"translucent"!==D.renderPass)return;const W=D.context,Q=D.depthModeForSublayer(0,jn.ReadOnly),X=D.colorModeForRenderPass(),[ae,be]="translucent"===D.renderPass?D.stencilConfigForOverlap(H):[{},H];for(const ye of be){const Te=R.getTile(ye);void 0!==Te.needsHillshadePrepare&&Te.needsHillshadePrepare&&"offscreen"===D.renderPass?gl(D,Te,N,Q,vr.disabled,X):"translucent"===D.renderPass&&_p(D,ye,Te,N,Q,ae[ye.overscaledZ],X)}W.viewport.set([0,0,D.width,D.height])}(s,f,v,S);break;case"raster":!function(D,R,N,H){if("translucent"!==D.renderPass||0===N.paint.get("raster-opacity")||!H.length)return;const W=D.context,Q=W.gl,X=R.getSource(),ae=D.useProgram("raster"),be=D.colorModeForRenderPass(),[ye,Te]=X instanceof ii?[{},H]:D.stencilConfigForOverlap(H),ge=Te[Te.length-1].overscaledZ,je=!D.options.moving;for(const nt of Te){const Se=D.depthModeForSublayer(nt.overscaledZ-ge,1===N.paint.get("raster-opacity")?jn.ReadWrite:jn.ReadOnly,Q.LESS),Ze=R.getTile(nt);Ze.registerFadeDuration(N.paint.get("raster-fade-duration"));const st=R.findLoadedParent(nt,0),Je=dd(Ze,st,R,N,D.transform,D.style.map.terrain);let pt,Ct;const vt="nearest"===N.paint.get("raster-resampling")?Q.NEAREST:Q.LINEAR;W.activeTexture.set(Q.TEXTURE0),Ze.texture.bind(vt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(Q.TEXTURE1),st?(st.texture.bind(vt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),pt=Math.pow(2,st.tileID.overscaledZ-Ze.tileID.overscaledZ),Ct=[Ze.tileID.canonical.x*pt%1,Ze.tileID.canonical.y*pt%1]):Ze.texture.bind(vt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);const St=D.style.map.terrain&&D.style.map.terrain.getTerrainData(nt),Jt=St?nt:null,_i=Jt?Jt.posMatrix:D.transform.calculatePosMatrix(nt.toUnwrapped(),je),zt=Au(_i,Ct||[0,0],pt||1,Je,N);X instanceof ii?ae.draw(W,Q.TRIANGLES,Se,vr.disabled,be,Hi.disabled,zt,St,N.id,X.boundsBuffer,D.quadTriangleIndexBuffer,X.boundsSegments):ae.draw(W,Q.TRIANGLES,Se,ye[nt.overscaledZ],be,Hi.disabled,zt,St,N.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}}(s,f,v,S);break;case"background":!function(D,R,N,H){const W=N.paint.get("background-color"),Q=N.paint.get("background-opacity");if(0===Q)return;const X=D.context,ae=X.gl,be=D.transform,ye=be.tileSize,Te=N.paint.get("background-pattern");if(D.isPatternMissing(Te))return;const ge=!Te&&1===W.a&&1===Q&&D.opaquePassEnabledForLayer()?"opaque":"translucent";if(D.renderPass!==ge)return;const je=vr.disabled,nt=D.depthModeForSublayer(0,"opaque"===ge?jn.ReadWrite:jn.ReadOnly),Se=D.colorModeForRenderPass(),Ze=D.useProgram(Te?"backgroundPattern":"background"),st=H||be.coveringTiles({tileSize:ye,terrain:D.style.map.terrain});Te&&(X.activeTexture.set(ae.TEXTURE0),D.imageManager.bind(D.context));const Je=N.getCrossfadeParameters();for(const pt of st){const Ct=H?pt.posMatrix:D.transform.calculatePosMatrix(pt.toUnwrapped()),vt=Te?rr(Ct,Q,D,Te,{tileID:pt,tileSize:ye},Je):ia(Ct,Q,W),St=D.style.map.terrain&&D.style.map.terrain.getTerrainData(pt);Ze.draw(X,ae.TRIANGLES,nt,je,Se,Hi.disabled,vt,St,N.id,D.tileExtentBuffer,D.quadTriangleIndexBuffer,D.tileExtentSegments)}}(s,0,v,S);break;case"custom":!function(D,R,N){const H=D.context,W=N.implementation;if("offscreen"===D.renderPass){const Q=W.prerender;Q&&(D.setCustomLayerDefaults(),H.setColorMode(D.colorModeForRenderPass()),Q.call(W,H.gl,D.transform.customLayerMatrix()),H.setDirty(),D.setBaseState())}else if("translucent"===D.renderPass){D.setCustomLayerDefaults(),H.setColorMode(D.colorModeForRenderPass()),H.setStencilMode(vr.disabled);const Q="3d"===W.renderingMode?new jn(D.context.gl.LEQUAL,jn.ReadWrite,D.depthRangeFor3D):D.depthModeForSublayer(0,jn.ReadOnly);H.setDepthMode(Q),W.render(H.gl,D.transform.customLayerMatrix()),H.setDirty(),D.setBaseState(),H.bindFramebuffer.set(null)}}(s,0,v)}}translatePosMatrix(s,f,v,S,D){if(!v[0]&&!v[1])return s;const R=D?"map"===S?this.transform.angle:0:"viewport"===S?-this.transform.angle:0;if(R){const W=Math.sin(R),Q=Math.cos(R);v=[v[0]*Q-v[1]*W,v[0]*W+v[1]*Q]}const N=[D?v[0]:Oe(f,v[0],this.transform.zoom),D?v[1]:Oe(f,v[1],this.transform.zoom),0],H=new Float32Array(16);return y.$(H,s,N),H}saveTileTexture(s){const f=this._tileTextures[s.size[0]];f?f.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const f=this._tileTextures[s];return f&&f.length>0?f.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const f=this.imageManager.getPattern(s.from.toString()),v=this.imageManager.getPattern(s.to.toString());return!f||!v}useProgram(s,f){this.cache=this.cache||{};const v=s+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new kn(this.context,vn[s],f,dl[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new hi(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:f}=this.context.gl;return this.width!==s||this.height!==f}}class br{constructor(s,f){this.points=s,this.planes=f}static fromInvProjectionMatrix(s,f,v){const S=Math.pow(2,v),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(N=>{const H=1/(N=y.ag([],N,s))[3]/f*S;return y.b3(N,N,[H,H,1/N[3],H])}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(N=>{const H=function(ae,be){var ye=be[0],Te=be[1],ge=be[2],je=ye*ye+Te*Te+ge*ge;return je>0&&(je=1/Math.sqrt(je)),ae[0]=be[0]*je,ae[1]=be[1]*je,ae[2]=be[2]*je,ae}([],(ae=[],be=ni([],D[N[0]],D[N[1]]),ye=ni([],D[N[2]],D[N[1]]),Te=be[0],nt=ye[0],ae[0]=(ge=be[1])*(Ze=ye[2])-(je=be[2])*(Se=ye[1]),ae[1]=je*nt-Te*Ze,ae[2]=Te*Se-ge*nt,ae)),W=-((Q=H)[0]*(X=D[N[1]])[0]+Q[1]*X[1]+Q[2]*X[2]);var ae,be,ye,Te,ge,je,nt,Se,Ze,Q,X;return H.concat(W)});return new br(D,R)}}class yc{constructor(s,f){var v,S,D;this.min=s,this.max=f,this.center=function(v,S,D){return v[0]=.5*S[0],v[1]=.5*S[1],v[2]=.5*S[2],v}([],((v=[])[0]=(S=this.min)[0]+(D=this.max)[0],v[1]=S[1]+D[1],v[2]=S[2]+D[2],v))}quadrant(s){const f=[s%2==0,s<2],v=gt(this.min),S=gt(this.max);for(let D=0;D<f.length;D++)v[D]=f[D]?this.min[D]:this.center[D],S[D]=f[D]?this.center[D]:this.max[D];return S[2]=this.max[2],new yc(v,S)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let S=0;S<s.planes.length;S++){const D=s.planes[S];let R=0;for(let N=0;N<f.length;N++)y.b4(D,f[N])>=0&&R++;if(0===R)return 0;R!==f.length&&(v=!1)}if(v)return 2;for(let S=0;S<3;S++){let D=Number.MAX_VALUE,R=-Number.MAX_VALUE;for(let N=0;N<s.points.length;N++){const H=s.points[N][S]-this.min[S];D=Math.min(D,H),R=Math.max(R,H)}if(R<0||D>this.max[S]-this.min[S])return 0}return 1}}class Vs{constructor(s=0,f=0,v=0,S=0){if(isNaN(s)||s<0||isNaN(f)||f<0||isNaN(v)||v<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=f,this.left=v,this.right=S}interpolate(s,f,v){return null!=f.top&&null!=s.top&&(this.top=y.B.number(s.top,f.top,v)),null!=f.bottom&&null!=s.bottom&&(this.bottom=y.B.number(s.bottom,f.bottom,v)),null!=f.left&&null!=s.left&&(this.left=y.B.number(s.left,f.left,v)),null!=f.right&&null!=s.right&&(this.right=y.B.number(s.right,f.right,v)),this}getCenter(s,f){const v=y.ad((this.left+s-this.right)/2,0,s),S=y.ad((this.top+f-this.bottom)/2,0,f);return new y.P(v,S)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Vs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Pa{constructor(s,f,v,S,D){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===D||!!D,this._minZoom=s||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=S??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new y.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Vs,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const s=new Pa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this._minEleveationForCurrentTile=s._minEleveationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){void 0===s?s=!0:null===s&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new y.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const f=-y.b5(s,-180,180)*Math.PI/180;var v;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(v=new y.A(4),y.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v),function(v,S,D){var R=S[0],N=S[1],H=S[2],W=S[3],Q=Math.sin(D),X=Math.cos(D);v[0]=R*X+H*Q,v[1]=N*X+W*Q,v[2]=R*-Q+H*X,v[3]=N*-Q+W*X}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const f=y.ad(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const f=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.tileZoom=Math.max(0,Math.floor(f)),this.scale=this.zoomScale(f),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,f,v){this._unmodified=!1,this._edgeInsets.interpolate(s,f,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const f=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(s){const f=[new y.b6(0,s)];if(this._renderWorldCopies){const v=this.pointCoordinate(new y.P(0,0)),S=this.pointCoordinate(new y.P(this.width,0)),D=this.pointCoordinate(new y.P(this.width,this.height)),R=this.pointCoordinate(new y.P(0,this.height)),N=Math.floor(Math.min(v.x,S.x,D.x,R.x)),H=Math.floor(Math.max(v.x,S.x,D.x,R.x)),W=1;for(let Q=N-W;Q<=H+W;Q++)0!==Q&&f.push(new y.b6(Q,s))}return f}coveringTiles(s){var f,v;let S=this.coveringZoomLevel(s);const D=S;if(void 0!==s.minzoom&&S<s.minzoom)return[];void 0!==s.maxzoom&&S>s.maxzoom&&(S=s.maxzoom);const R=this.pointCoordinate(this.getCameraPoint()),N=y.U.fromLngLat(this.center),H=Math.pow(2,S),W=[H*R.x,H*R.y,0],Q=[H*N.x,H*N.y,0],X=br.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S);let ae=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ae=S);const be=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,ye=Se=>({aabb:new yc([Se*H,0,0],[(Se+1)*H,H,0]),zoom:0,x:0,y:0,wrap:Se,fullyVisible:!1}),Te=[],ge=[],je=S,nt=s.reparseOverscaled?D:S;if(this._renderWorldCopies)for(let Se=1;Se<=3;Se++)Te.push(ye(-Se)),Te.push(ye(Se));for(Te.push(ye(0));Te.length>0;){const Se=Te.pop(),Ze=Se.x,st=Se.y;let Je=Se.fullyVisible;if(!Je){const Jt=Se.aabb.intersects(X);if(0===Jt)continue;Je=2===Jt}const pt=s.terrain?W:Q,Ct=Se.aabb.distanceX(pt),vt=Se.aabb.distanceY(pt),St=Math.max(Math.abs(Ct),Math.abs(vt));if(Se.zoom===je||St>be+(1<<je-Se.zoom)-2&&Se.zoom>=ae){const Jt=je-Se.zoom,_i=W[0]-.5-(Ze<<Jt),zt=W[1]-.5-(st<<Jt);ge.push({tileID:new y.O(Se.zoom===je?nt:Se.zoom,Se.wrap,Se.zoom,Ze,st),distanceSq:Sr([Q[0]-.5-Ze,Q[1]-.5-st]),tileDistanceToCamera:Math.sqrt(_i*_i+zt*zt)})}else for(let Jt=0;Jt<4;Jt++){const _i=(Ze<<1)+Jt%2,zt=(st<<1)+(Jt>>1),mn=Se.zoom+1;let cn=Se.aabb.quadrant(Jt);if(s.terrain){const dr=new y.O(mn,Se.wrap,mn,_i,zt),A=s.terrain.getMinMaxElevation(dr),ri=null!==(f=A.minElevation)&&void 0!==f?f:this.elevation,An=null!==(v=A.maxElevation)&&void 0!==v?v:this.elevation;cn=new yc([cn.min[0],cn.min[1],ri],[cn.max[0],cn.max[1],An])}Te.push({aabb:cn,zoom:mn,x:_i,y:zt,wrap:Se.wrap,fullyVisible:Je})}}return ge.sort((Se,Ze)=>Se.distanceSq-Ze.distanceSq).map(Se=>Se.tileID)}resize(s,f){this.width=s,this.height=f,this.pixelsToGLUnits=[2/s,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const f=y.ad(s.lat,-this.maxValidLatitude,this.maxValidLatitude);return new y.P(y.G(s.lng)*this.worldSize,y.H(f)*this.worldSize)}unproject(s){return new y.U(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const f=this.pointLocation(this.centerPoint,s),v=s.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-v))return;const S=this.getCameraPosition(),D=y.U.fromLngLat(S.lngLat,S.altitude),R=y.U.fromLngLat(f,v),N=D.x-R.x,H=D.y-R.y,W=D.z-R.z,Q=Math.sqrt(N*N+H*H+W*W),X=this.scaleZoom(this.cameraToCenterDistance/Q/this.tileSize);this._elevation=v,this._center=f,this.zoom=X}setLocationAtPoint(s,f){const v=this.pointCoordinate(f),S=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(s),R=new y.U(D.x-(v.x-S.x),D.y-(v.y-S.y));this.center=this.coordinateLocation(R),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,f){return f?this.coordinatePoint(this.locationCoordinate(s),f.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,f){return this.coordinateLocation(this.pointCoordinate(s,f))}locationCoordinate(s){return y.U.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,f){if(f){const ae=f.pointCoordinate(s);if(null!=ae)return ae}const v=[s.x,s.y,0,1],S=[s.x,s.y,1,1];y.ag(v,v,this.pixelMatrixInverse),y.ag(S,S,this.pixelMatrixInverse);const D=v[3],R=S[3],N=v[1]/D,H=S[1]/R,W=v[2]/D,Q=S[2]/R,X=W===Q?0:(0-W)/(Q-W);return new y.U(y.B.number(v[0]/D,S[0]/R,X)/this.worldSize,y.B.number(N,H,X)/this.worldSize)}coordinatePoint(s,f=0,v=this.pixelMatrix){const S=[s.x*this.worldSize,s.y*this.worldSize,f,1];return y.ag(S,S,v),new y.P(S[0]/S[3],S[1]/S[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return(new qn).extend(this.pointLocation(new y.P(0,s))).extend(this.pointLocation(new y.P(this.width,s))).extend(this.pointLocation(new y.P(this.width,this.height))).extend(this.pointLocation(new y.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new qn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(s,f=!1){const v=s.key,S=f?this._alignedPosMatrixCache:this._posMatrixCache;if(S[v])return S[v];const D=s.canonical,R=this.worldSize/this.zoomScale(D.z),N=D.x+Math.pow(2,D.z)*s.wrap,H=y.ao(new Float64Array(16));return y.$(H,H,[N*R,D.y*R,0]),y.a0(H,H,[R/y.N,R/y.N,1]),y.a1(H,f?this.alignedProjMatrix:this.projMatrix,H),S[v]=new Float32Array(H),S[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s,f,v,S,D=-90,R=90,N=-180,H=180;const W=this.size,Q=this._unmodified;if(this.latRange){const be=this.latRange;D=y.H(be[1])*this.worldSize,R=y.H(be[0])*this.worldSize,s=R-D<W.y?W.y/(R-D):0}if(this.lngRange){const be=this.lngRange;N=y.b5(y.G(be[0])*this.worldSize,0,this.worldSize),H=y.b5(y.G(be[1])*this.worldSize,0,this.worldSize),H<N&&(H+=this.worldSize),f=H-N<W.x?W.x/(H-N):0}const X=this.point,ae=Math.max(f||0,s||0);if(ae)return this.center=this.unproject(new y.P(f?(H+N)/2:X.x,s?(R+D)/2:X.y)),this.zoom+=this.scaleZoom(ae),this._unmodified=Q,void(this._constraining=!1);if(this.latRange){const be=X.y,ye=W.y/2;be-ye<D&&(S=D+ye),be+ye>R&&(S=R-ye)}if(this.lngRange){const be=(N+H)/2,ye=y.b5(X.x,be-this.worldSize/2,be+this.worldSize/2),Te=W.x/2;ye-Te<N&&(v=N+Te),ye+Te>H&&(v=H-Te)}void 0===v&&void 0===S||(this.center=this.unproject(new y.P(void 0!==v?v:X.x,void 0!==S?S:X.y)).wrap()),this._unmodified=Q,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,f=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=y.b7(1,this.center.lat)*this.worldSize;let S=y.ao(new Float64Array(16));y.a0(S,S,[this.width/2,-this.height/2,1]),y.$(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=y.ao(new Float64Array(16)),y.a0(S,S,[1,-1,1]),y.$(S,S,[-1,-1,0]),y.a0(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S;const D=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),R=Math.min(this.elevation,this._minEleveationForCurrentTile),N=D-R*this._pixelPerMeter/Math.cos(this._pitch),H=R<0?N:D,W=Math.PI/2+this._pitch,Q=this._fov*(.5+s.y/this.height),X=Math.sin(Q)*H/Math.sin(y.ad(Math.PI-W-Q,.01,Math.PI-.01)),ae=this.getHorizon(),be=2*Math.atan(ae/this.cameraToCenterDistance)*(.5+s.y/(2*ae)),ye=Math.sin(be)*H/Math.sin(y.ad(Math.PI-W-be,.01,Math.PI-.01)),Te=Math.min(X,ye),ge=1.01*(Math.cos(Math.PI/2-this._pitch)*Te+H),je=this.height/50;S=new Float64Array(16),y.b8(S,this._fov,this.width/this.height,je,ge),S[8]=2*-s.x/this.width,S[9]=2*s.y/this.height,y.a0(S,S,[1,-1,1]),y.$(S,S,[0,0,-this.cameraToCenterDistance]),y.b9(S,S,this._pitch),y.ae(S,S,this.angle),y.$(S,S,[-f,-v,0]),this.mercatorMatrix=y.a0([],S,[this.worldSize,this.worldSize,this.worldSize]),y.a0(S,S,[1,1,this._pixelPerMeter]),this.pixelMatrix=y.a1(new Float64Array(16),this.labelPlaneMatrix,S),y.$(S,S,[0,0,-this.elevation]),this.projMatrix=S,this.invProjMatrix=y.as([],S),this.pixelMatrix3D=y.a1(new Float64Array(16),this.labelPlaneMatrix,S);const nt=this.width%2/2,Se=this.height%2/2,Ze=Math.cos(this.angle),st=Math.sin(this.angle),Je=f-Math.round(f)+Ze*nt+st*Se,pt=v-Math.round(v)+Ze*Se+st*nt,Ct=new Float64Array(S);if(y.$(Ct,Ct,[Je>.5?Je-1:Je,pt>.5?pt-1:pt,0]),this.alignedProjMatrix=Ct,S=y.as(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new y.P(0,0)),f=[s.x*this.worldSize,s.y*this.worldSize,0,1];return y.ag(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new y.P(0,s))}getCameraQueryGeometry(s){const f=this.getCameraPoint();if(1===s.length)return[s[0],f];{let v=f.x,S=f.y,D=f.x,R=f.y;for(const N of s)v=Math.min(v,N.x),S=Math.min(S,N.y),D=Math.max(D,N.x),R=Math.max(R,N.y);return[new y.P(v,S),new y.P(D,S),new y.P(D,R),new y.P(v,R),new y.P(v,S)]}}}function Mr(E,s){let f,v=!1,S=null,D=null;const R=()=>{S=null,v&&(E.apply(D,f),S=setTimeout(R,s),v=!1)};return(...N)=>(v=!0,D=this,f=N,S||R(),S)}class Jo{constructor(s){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let v;return f.split("&").map(S=>S.split("=")).forEach(S=>{S[0]===this._hashName&&(v=S)}),(v&&v[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(f.length>=3&&!f.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:v,pitch:+(f[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,f)}catch{}},this._updateHash=Mr(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const f=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,S=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,S),R=Math.round(f.lng*D)/D,N=Math.round(f.lat*D)/D,H=this._map.getBearing(),W=this._map.getPitch();let Q="";if(Q+=s?`/${R}/${N}/${v}`:`${v}/${N}/${R}`,(H||W)&&(Q+="/"+Math.round(10*H)/10),W&&(Q+=`/${Math.round(W)}`),this._hashName){const X=this._hashName;let ae=!1;const be=window.location.hash.slice(1).split("&").map(ye=>{const Te=ye.split("=")[0];return Te===X?(ae=!0,`${Te}=${Q}`):ye}).filter(ye=>ye);return ae||be.push(`${X}=${Q}`),`#${be.join("&")}`}return`#${Q}`}}const Aa={linearity:.3,easing:y.ba(0,0,.3,1)},La=y.e({deceleration:2500,maxSpeed:1400},Aa),es=y.e({deceleration:20,maxSpeed:1400},Aa),Zl=y.e({deceleration:1e3,maxSpeed:360},Aa),vc=y.e({deceleration:1e3,maxSpeed:90},Aa);class Ou{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:y.h.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,f=y.h.now();for(;s.length>0&&f-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new y.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:D}of this._inertiaBuffer)f.zoom+=D.zoomDelta||0,f.bearing+=D.bearingDelta||0,f.pitch+=D.pitchDelta||0,D.panDelta&&f.pan._add(D.panDelta),D.around&&(f.around=D.around),D.pinchAround&&(f.pinchAround=D.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(f.pan.mag()){const D=Wl(f.pan.mag(),v,y.e({},La,s||{}));S.offset=f.pan.mult(D.amount/f.pan.mag()),S.center=this._map.transform.center,sa(S,D)}if(f.zoom){const D=Wl(f.zoom,v,es);S.zoom=this._map.transform.zoom+D.amount,sa(S,D)}if(f.bearing){const D=Wl(f.bearing,v,Zl);S.bearing=this._map.transform.bearing+y.ad(D.amount,-179,179),sa(S,D)}if(f.pitch){const D=Wl(f.pitch,v,vc);S.pitch=this._map.transform.pitch+D.amount,sa(S,D)}if(S.zoom||S.bearing){const D=void 0===f.pinchAround?f.around:f.pinchAround;S.around=D?this._map.unproject(D):this._map.getCenter()}return this.clear(),y.e(S,{noMoveStart:!0})}}function sa(E,s){(!E.duration||E.duration<s.duration)&&(E.duration=s.duration,E.easing=s.easing)}function Wl(E,s,f){const{maxSpeed:v,linearity:S,deceleration:D}=f,R=y.ad(E*S/(s/1e3),-v,v),N=Math.abs(R)/(D*S);return{easing:f.easing,duration:1e3*N,amount:R*(N/2)}}class xo extends y.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,v,S={}){const D=pe.mousePos(f.getCanvasContainer(),v),R=f.unproject(D);super(s,y.e({point:D,lngLat:R,originalEvent:v},S)),this._defaultPrevented=!1,this.target=f}}class bc extends y.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,v){const S="touchend"===s?v.changedTouches:v.touches,D=pe.touchPos(f.getCanvasContainer(),S),R=D.map(H=>f.unproject(H)),N=D.reduce((H,W,Q,X)=>H.add(W.div(X.length)),new y.P(0,0));super(s,{points:D,point:N,lngLats:R,lngLat:f.unproject(N),originalEvent:v}),this._defaultPrevented=!1}}class Kc extends y.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,v){super(s,{originalEvent:v}),this._defaultPrevented=!1}}class pd{constructor(s,f){this._map=s,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Kc(s.type,this._map,s))}mousedown(s,f){return this._mousedownPos=f,this._firePreventable(new xo(s.type,this._map,s))}mouseup(s){this._map.fire(new xo(s.type,this._map,s))}click(s,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new xo(s.type,this._map,s))}dblclick(s){return this._firePreventable(new xo(s.type,this._map,s))}mouseover(s){this._map.fire(new xo(s.type,this._map,s))}mouseout(s){this._map.fire(new xo(s.type,this._map,s))}touchstart(s){return this._firePreventable(new bc(s.type,this._map,s))}touchmove(s){this._map.fire(new bc(s.type,this._map,s))}touchend(s){this._map.fire(new bc(s.type,this._map,s))}touchcancel(s){this._map.fire(new bc(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ru{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new xo(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new xo(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class js{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(y.P.convert(s),this._map.terrain)}}class Us{constructor(s,f){this._map=s,this._tr=new js(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,f){this.isEnabled()&&s.shiftKey&&0===s.button&&(pe.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(s,f){if(!this._active)return;const v=f;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=v,this._box||(this._box=pe.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const D=Math.min(S.x,v.x),R=Math.max(S.x,v.x),N=Math.min(S.y,v.y),H=Math.max(S.y,v.y);pe.setTransform(this._box,`translate(${D}px,${N}px)`),this._box.style.width=R-D+"px",this._box.style.height=H-N+"px"}mouseupWindow(s,f){if(!this._active||0!==s.button)return;const v=this._startPos,S=f;if(this.reset(),pe.suppressClick(),v.x!==S.x||v.y!==S.y)return this._map.fire(new y.k("boxzoomend",{originalEvent:s})),{cameraAnimation:D=>D.fitScreenCoordinates(v,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&27===s.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(pe.remove(this._box),this._box=null),pe.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,f){return this._map.fire(new y.k(s,{originalEvent:f}))}}function Lo(E,s){if(E.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${s.length}`);const f={};for(let v=0;v<E.length;v++)f[E[v].identifier]=s[v];return f}class aa{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,f,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=s.timeStamp),v.length===this.numTouches&&(this.centroid=function(S){const D=new y.P(0,0);for(const R of S)D._add(R);return D.div(S.length)}(f),this.touches=Lo(v,f)))}touchmove(s,f,v){if(this.aborted||!this.centroid)return;const S=Lo(v,f);for(const D in this.touches){const R=S[D];(!R||R.dist(this.touches[D])>30)&&(this.aborted=!0)}}touchend(s,f,v){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),0===v.length){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class _l{constructor(s){this.singleTap=new aa(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,f,v){this.singleTap.touchstart(s,f,v)}touchmove(s,f,v){this.singleTap.touchmove(s,f,v)}touchend(s,f,v){const S=this.singleTap.touchend(s,f,v);if(S){const D=s.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(S)<30;if(D&&R||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class la{constructor(s){this._tr=new js(s),this._zoomIn=new _l({numTouches:1,numTaps:2}),this._zoomOut=new _l({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,f,v){this._zoomIn.touchstart(s,f,v),this._zoomOut.touchstart(s,f,v)}touchmove(s,f,v){this._zoomIn.touchmove(s,f,v),this._zoomOut.touchmove(s,f,v)}touchend(s,f,v){const S=this._zoomIn.touchend(s,f,v),D=this._zoomOut.touchend(s,f,v),R=this._tr;return S?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:R.zoom+1,around:R.unproject(S)},{originalEvent:s})}):D?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:R.zoom-1,around:R.unproject(D)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ka{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const f=this._moveFunction(...s);if(f.bearingDelta||f.pitchDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(s,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=f.length?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,f){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const S=f.length?f[0]:f;return!this._moved&&S.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(v,S))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&pe.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const yp={0:1,2:2};class Vr{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const f=pe.mouseButton(s);this._eventButton=f}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(f,v){const S=yp[v];return void 0===f.buttons||(f.buttons&S)!==S}(s,this._eventButton)}isValidEndEvent(s){return pe.mouseButton(s)===this._eventButton}}class yl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return 1===s.targetTouches.length}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}const Ki=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=function(s){s.preventDefault()}},vl=({enable:E,clickTolerance:s,bearingDegreesPerPixelMoved:f=.8})=>{const v=new Vr({checkCorrectEvent:S=>0===pe.mouseButton(S)&&S.ctrlKey||2===pe.mouseButton(S)});return new ka({clickTolerance:s,move:(S,D)=>({bearingDelta:(D.x-S.x)*f}),moveStateManager:v,enable:E,assignEvents:Ki})},ca=({enable:E,clickTolerance:s,pitchDegreesPerPixelMoved:f=-.5})=>{const v=new Vr({checkCorrectEvent:S=>0===pe.mouseButton(S)&&S.ctrlKey||2===pe.mouseButton(S)});return new ka({clickTolerance:s,move:(S,D)=>({pitchDelta:(D.y-S.y)*f}),moveStateManager:v,enable:E,assignEvents:Ki})};class Xt{constructor(s,f){this._minTouches=s.cooperativeGestures?2:1,this._clickTolerance=s.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new y.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(s,f,v){return this._calculateTransform(s,f,v)}touchmove(s,f,v){if(this._map._cooperativeGestures&&(2===this._minTouches&&v.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(s,!1,v.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(v.length<this._minTouches))return s.preventDefault(),this._calculateTransform(s,f,v)}touchend(s,f,v){this._calculateTransform(s,f,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,f,v){v.length>0&&(this._active=!0);const S=Lo(v,f),D=new y.P(0,0),R=new y.P(0,0);let N=0;for(const W in S){const Q=S[W],X=this._touches[W];X&&(D._add(Q),R._add(Q.sub(X)),N++,S[W]=Q)}if(this._touches=S,N<this._minTouches||!R.mag())return;const H=R.div(N);return this._sum._add(H),this._sum.mag()<this._clickTolerance?void 0:{around:D.div(N),panDelta:H}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ms{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,f,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([f[0],f[1]]))}touchmove(s,f,v){if(!this._firstTwoTouches)return;s.preventDefault();const[S,D]=this._firstTwoTouches,R=Hs(v,f,S),N=Hs(v,f,D);if(!R||!N)return;const H=this._aroundCenter?null:R.add(N).div(2);return this._move([R,N],H,s)}touchend(s,f,v){if(!this._firstTwoTouches)return;const[S,D]=this._firstTwoTouches,R=Hs(v,f,S),N=Hs(v,f,D);R&&N||(this._active&&pe.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Hs(E,s,f){for(let v=0;v<E.length;v++)if(E[v].identifier===f)return s[v]}function $s(E,s){return Math.log(E/s)/Math.LN2}class Oa extends Ms{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,f){const v=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs($s(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$s(this._distance,v),pinchAround:f}}}function Rt(E,s){return 180*E.angleWith(s)/Math.PI}class Ra extends Ms{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,f){const v=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Rt(this._vector,v),pinchAround:f}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const f=25/(Math.PI*this._minDiameter)*360,v=Rt(s,this._startVector);return Math.abs(v)<f}}function ua(E){return Math.abs(E.y)>Math.abs(E.x)}class Fu extends Ms{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,f,v){super.touchstart(s,f,v),this._currentTouchCount=v.length}_start(s){this._lastPoints=s,ua(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,f,v){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const S=s[0].sub(this._lastPoints[0]),D=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,D,v.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(S.y+D.y)/2*-.5}):void 0}gestureBeginsVertically(s,f,v){if(void 0!==this._valid)return this._valid;const S=s.mag()>=2,D=f.mag()>=2;if(!S&&!D)return;if(!S||!D)return void 0===this._firstMove&&(this._firstMove=v),v-this._firstMove<100&&void 0;const R=s.y>0==f.y>0;return ua(s)&&ua(f)&&R}}const Qc={panStep:100,bearingStep:15,pitchStep:10};class bl{constructor(s){this._tr=new js(s);const f=Qc;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let f=0,v=0,S=0,D=0,R=0;switch(s.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:s.shiftKey?v=-1:(s.preventDefault(),D=-1);break;case 39:s.shiftKey?v=1:(s.preventDefault(),D=1);break;case 38:s.shiftKey?S=1:(s.preventDefault(),R=-1);break;case 40:s.shiftKey?S=-1:(s.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(v=0,S=0),{cameraAnimation:N=>{const H=this._tr;N.easeTo({duration:300,easeId:"keyboardHandler",easing:xl,zoom:f?Math.round(H.zoom)+f*(s.shiftKey?2:1):H.zoom,bearing:H.bearing+v*this._bearingStep,pitch:H.pitch+S*this._pitchStep,offset:[-D*this._panStep,-R*this._panStep],center:H.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function xl(E){return E*(2-E)}const ql=4.000244140625;class Xc{constructor(s,f){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=s,this._tr=new js(s),this._el=s.getCanvasContainer(),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!s[this._map._metaKey])return;s.preventDefault()}let f=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const v=y.h.now(),S=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,0!==f&&f%ql==0?this._type="wheel":0!==f&&Math.abs(f)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(S*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),s.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=s,this._delta-=f,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=pe.mousePos(this._el,s),v=this._tr;this._around=y.L.convert(this._aroundCenter?v.center:v.unproject(f)),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(0!==this._delta){const N="wheel"===this._type&&Math.abs(this._delta)>ql?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&0!==H&&(H=1/H);const W="number"==typeof this._targetZoom?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(W*H))),"wheel"===this._type&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f="number"==typeof this._targetZoom?this._targetZoom:s.zoom,v=this._startZoom,S=this._easing;let D,R=!1;if("wheel"===this._type&&v&&S){const N=Math.min((y.h.now()-this._lastWheelEventTime)/200,1),H=S(N);D=y.B.number(v,f,H),N<1?this._frameId||(this._frameId=!0):R=!0}else D=f,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!R,zoomDelta:D-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let f=y.bb;if(this._prevEase){const v=this._prevEase,S=(y.h.now()-v.start)/v.duration,D=v.easing(S+.01)-v.easing(S),R=.27/Math.sqrt(D*D+1e-4)*.01,N=Math.sqrt(.0729-R*R);f=y.ba(R,N,.25,1)}return this._prevEase={start:y.h.now(),duration:s,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class wl{constructor(s,f){this._clickZoom=s,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jc{constructor(s){this._tr=new js(s),this.reset()}reset(){this._active=!1}dblclick(s,f){return s.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cl{constructor(){this._tap=new _l({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,f,v){if(!this._swipePoint)if(this._tapTime){const S=f[0],D=s.timeStamp-this._tapTime<500,R=this._tapPoint.dist(S)<30;D&&R?v.length>0&&(this._swipePoint=S,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(s,f,v)}touchmove(s,f,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const S=f[0],D=S.y-this._swipePoint.y;return this._swipePoint=S,s.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(s,f,v)}touchend(s,f,v){if(this._tapTime)this._swipePoint&&0===v.length&&this.reset();else{const S=this._tap.touchend(s,f,v);S&&(this._tapTime=s.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yl{constructor(s,f,v){this._el=s,this._mousePan=f,this._touchPan=v}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ko{constructor(s,f,v){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=f,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ya{constructor(s,f,v,S){this._el=s,this._touchZoom=f,this._touchRotate=v,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const p=E=>E.zoom||E.drag||E.pitch||E.rotate;class x extends y.k{}function P(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class U{constructor(s,f){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,D)=>{if("blur"===S.type)return void this.stop(!0);this._updatingCamera=!0;const R="renderFrame"===S.type?void 0:S,N={needsRenderFrame:!1},H={},W={},Q=S.touches,X=Q?this._getMapTouches(Q):void 0,ae=X?pe.touchPos(this._el,X):pe.mousePos(this._el,S);for(const{handlerName:Te,handler:ge,allowed:je}of this._handlers){if(!ge.isEnabled())continue;let nt;this._blockedByActive(W,je,Te)?ge.reset():ge[D||S.type]&&(nt=ge[D||S.type](S,ae,X),this.mergeHandlerResult(N,H,nt,Te,R),nt&&nt.needsRenderFrame&&this._triggerRenderFrame()),(nt||ge.isActive())&&(W[Te]=ge)}const be={};for(const Te in this._previousActiveHandlers)W[Te]||(be[Te]=R);this._previousActiveHandlers=W,(Object.keys(be).length||P(N))&&(this._changes.push([N,H,be]),this._triggerRenderFrame()),(Object.keys(W).length||P(N))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=N;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ou(s),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,D,R]of this._listeners)pe.addEventListener(S,D,S===document?this.handleWindowEvent:this.handleEvent,R)}destroy(){for(const[s,f,v]of this._listeners)pe.removeEventListener(s,f,s===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(s){const f=this._map,v=f.getCanvasContainer();this._add("mapEvent",new pd(f,s));const S=f.boxZoom=new Us(f,s);this._add("boxZoom",S),s.interactive&&s.boxZoom&&S.enable();const D=new la(f),R=new Jc(f);f.doubleClickZoom=new wl(R,D),this._add("tapZoom",D),this._add("clickZoom",R),s.interactive&&s.doubleClickZoom&&f.doubleClickZoom.enable();const N=new Cl;this._add("tapDragZoom",N);const H=f.touchPitch=new Fu(f);this._add("touchPitch",H),s.interactive&&s.touchPitch&&f.touchPitch.enable(s.touchPitch);const W=vl(s),Q=ca(s);f.dragRotate=new ko(s,W,Q),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]),s.interactive&&s.dragRotate&&f.dragRotate.enable();const X=(({enable:je,clickTolerance:nt})=>{const Se=new Vr({checkCorrectEvent:Ze=>0===pe.mouseButton(Ze)&&!Ze.ctrlKey});return new ka({clickTolerance:nt,move:(Ze,st)=>({around:st,panDelta:st.sub(Ze)}),activateOnStart:!0,moveStateManager:Se,enable:je,assignEvents:Ki})})(s),ae=new Xt(s,f);f.dragPan=new Yl(v,X,ae),this._add("mousePan",X),this._add("touchPan",ae,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&f.dragPan.enable(s.dragPan);const be=new Ra,ye=new Oa;f.touchZoomRotate=new Ya(v,ye,be,N),this._add("touchRotate",be,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&f.touchZoomRotate.enable(s.touchZoomRotate);const Te=f.scrollZoom=new Xc(f,()=>this._triggerRenderFrame());this._add("scrollZoom",Te,["mousePan"]),s.interactive&&s.scrollZoom&&f.scrollZoom.enable(s.scrollZoom);const ge=f.keyboard=new bl(f);this._add("keyboard",ge),s.interactive&&s.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new Ru(f))}_add(s,f,v){this._handlers.push({handlerName:s,handler:f,allowed:v}),this._handlersById[s]=f}stop(s){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(p(this._eventsInProgress))||this.isZooming()}_blockedByActive(s,f,v){for(const S in s)if(S!==v&&(!f||f.indexOf(S)<0))return!0;return!1}_getMapTouches(s){const f=[];for(const v of s)this._el.contains(v.target)&&f.push(v);return f}mergeHandlerResult(s,f,v,S,D){if(!v)return;y.e(s,v);const R={handlerName:S,originalEvent:v.originalEvent||D};void 0!==v.zoomDelta&&(f.zoom=R),void 0!==v.panDelta&&(f.drag=R),void 0!==v.pitchDelta&&(f.pitch=R),void 0!==v.bearingDelta&&(f.rotate=R)}_applyChanges(){const s={},f={},v={};for(const[S,D,R]of this._changes)S.panDelta&&(s.panDelta=(s.panDelta||new y.P(0,0))._add(S.panDelta)),S.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+S.pitchDelta),void 0!==S.around&&(s.around=S.around),void 0!==S.pinchAround&&(s.pinchAround=S.pinchAround),S.noInertia&&(s.noInertia=S.noInertia),y.e(f,D),y.e(v,R);this._updateMapTransform(s,f,v),this._changes=[]}_updateMapTransform(s,f,v){const S=this._map,D=S._getTransformForUpdate(),R=S.terrain;if(!(P(s)||R&&this._terrainMovement))return this._fireEvents(f,v,!0);let{panDelta:N,zoomDelta:H,bearingDelta:W,pitchDelta:Q,around:X,pinchAround:ae}=s;void 0!==ae&&(X=ae),S._stop(!0),X=X||S.transform.centerPoint;const be=D.pointLocation(N?X.sub(N):X);W&&(D.bearing+=W),Q&&(D.pitch+=Q),H&&(D.zoom+=H),R?this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?D.center=D.pointLocation(D.centerPoint.sub(N)):D.setLocationAtPoint(be,X):(this._terrainMovement=!0,this._map._elevationFreeze=!0,D.setLocationAtPoint(be,X),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,D.recalculateZoom(S.terrain)})):D.setLocationAtPoint(be,X),S._applyUpdatedTransform(D),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(f,v,!0)}_fireEvents(s,f,v){const S=p(this._eventsInProgress),D=p(s),R={};for(const Q in s){const{originalEvent:X}=s[Q];this._eventsInProgress[Q]||(R[`${Q}start`]=X),this._eventsInProgress[Q]=s[Q]}!S&&D&&this._fireEvent("movestart",D.originalEvent);for(const Q in R)this._fireEvent(Q,R[Q]);D&&this._fireEvent("move",D.originalEvent);for(const Q in s){const{originalEvent:X}=s[Q];this._fireEvent(Q,X)}const N={};let H;for(const Q in this._eventsInProgress){const{handlerName:X,originalEvent:ae}=this._eventsInProgress[Q];this._handlersById[X].isActive()||(delete this._eventsInProgress[Q],H=f[X]||ae,N[`${Q}end`]=H)}for(const Q in N)this._fireEvent(Q,N[Q]);const W=p(this._eventsInProgress);if(v&&(S||D)&&!W){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=ae=>0!==ae&&-this._bearingSnap<ae&&ae<this._bearingSnap;!Q||!Q.essential&&y.h.prefersReducedMotion?(this._map.fire(new y.k("moveend",{originalEvent:H})),X(this._map.getBearing())&&this._map.resetNorth()):(X(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:H})),this._updatingCamera=!1}}_fireEvent(s,f){this._map.fire(new y.k(s,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new x("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class J extends y.E{constructor(s,f){super(),this._renderFrameCallback=()=>{const v=Math.min((y.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=f.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new y.L(this.transform.center.lng,this.transform.center.lat)}setCenter(s,f){return this.jumpTo({center:s},f)}panBy(s,f,v){return s=y.P.convert(s).mult(-1),this.panTo(this.transform.center,y.e({offset:s},f),v)}panTo(s,f,v){return this.easeTo(y.e({center:s},f),v)}getZoom(){return this.transform.zoom}setZoom(s,f){return this.jumpTo({zoom:s},f),this}zoomTo(s,f,v){return this.easeTo(y.e({zoom:s},f),v)}zoomIn(s,f){return this.zoomTo(this.getZoom()+1,s,f),this}zoomOut(s,f){return this.zoomTo(this.getZoom()-1,s,f),this}getBearing(){return this.transform.bearing}setBearing(s,f){return this.jumpTo({bearing:s},f),this}getPadding(){return this.transform.padding}setPadding(s,f){return this.jumpTo({padding:s},f),this}rotateTo(s,f,v){return this.easeTo(y.e({bearing:s},f),v)}resetNorth(s,f){return this.rotateTo(0,y.e({duration:1e3},s),f),this}resetNorthPitch(s,f){return this.easeTo(y.e({bearing:0,pitch:0,duration:1e3},s),f),this}snapToNorth(s,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,f):this}getPitch(){return this.transform.pitch}setPitch(s,f){return this.jumpTo({pitch:s},f),this}cameraForBounds(s,f){s=qn.convert(s);const v=f&&f.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),v,f)}_cameraForBoxAndBearing(s,f,v,S){const D={top:0,bottom:0,right:0,left:0};if("number"==typeof(S=y.e({padding:D,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding){const st=S.padding;S.padding={top:st,bottom:st,right:st,left:st}}S.padding=y.e(D,S.padding);const R=this.transform,N=R.padding,H=R.project(y.L.convert(s)),W=R.project(y.L.convert(f)),Q=H.rotate(-v*Math.PI/180),X=W.rotate(-v*Math.PI/180),ae=new y.P(Math.max(Q.x,X.x),Math.max(Q.y,X.y)),be=new y.P(Math.min(Q.x,X.x),Math.min(Q.y,X.y)),ye=ae.sub(be),Te=(R.width-(N.left+N.right+S.padding.left+S.padding.right))/ye.x,ge=(R.height-(N.top+N.bottom+S.padding.top+S.padding.bottom))/ye.y;if(ge<0||Te<0)return void y.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const je=Math.min(R.scaleZoom(R.scale*Math.min(Te,ge)),S.maxZoom),nt=y.P.convert(S.offset),Se=new y.P((S.padding.left-S.padding.right)/2,(S.padding.top-S.padding.bottom)/2).rotate(v*Math.PI/180),Ze=nt.add(Se).mult(R.scale/R.zoomScale(je));return{center:R.unproject(H.add(W).div(2).sub(Ze)),zoom:je,bearing:v}}fitBounds(s,f,v){return this._fitInternal(this.cameraForBounds(s,f),f,v)}fitScreenCoordinates(s,f,v,S,D){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(y.P.convert(s)),this.transform.pointLocation(y.P.convert(f)),v,S),S,D)}_fitInternal(s,f,v){return s?(delete(f=y.e(s,f)).padding,f.linear?this.easeTo(f,v):this.flyTo(f,v)):this}jumpTo(s,f){this.stop();const v=this._getTransformForUpdate();let S=!1,D=!1,R=!1;return"zoom"in s&&v.zoom!==+s.zoom&&(S=!0,v.zoom=+s.zoom),void 0!==s.center&&(v.center=y.L.convert(s.center)),"bearing"in s&&v.bearing!==+s.bearing&&(D=!0,v.bearing=+s.bearing),"pitch"in s&&v.pitch!==+s.pitch&&(R=!0,v.pitch=+s.pitch),null==s.padding||v.isPaddingEqual(s.padding)||(v.padding=s.padding),this._applyUpdatedTransform(v),this.fire(new y.k("movestart",f)).fire(new y.k("move",f)),S&&this.fire(new y.k("zoomstart",f)).fire(new y.k("zoom",f)).fire(new y.k("zoomend",f)),D&&this.fire(new y.k("rotatestart",f)).fire(new y.k("rotate",f)).fire(new y.k("rotateend",f)),R&&this.fire(new y.k("pitchstart",f)).fire(new y.k("pitch",f)).fire(new y.k("pitchend",f)),this.fire(new y.k("moveend",f))}calculateCameraOptionsFromTo(s,f,v,S=0){const D=y.U.fromLngLat(s,f),R=y.U.fromLngLat(v,S),N=R.x-D.x,H=R.y-D.y,W=R.z-D.z,Q=Math.hypot(N,H,W);if(0===Q)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(N,H),ae=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Q/this.transform.tileSize),be=180*Math.atan2(N,-H)/Math.PI;let ye=180*Math.acos(X/Q)/Math.PI;return ye=W<0?90-ye:90+ye,{center:R.toLngLat(),zoom:ae,pitch:ye,bearing:be}}easeTo(s,f){this._stop(!1,s.easeId),(!1===(s=y.e({offset:[0,0],duration:500,easing:y.bb},s)).animate||!s.essential&&y.h.prefersReducedMotion)&&(s.duration=0);const v=this._getTransformForUpdate(),S=this.getZoom(),D=this.getBearing(),R=this.getPitch(),N=this.getPadding(),H="zoom"in s?+s.zoom:S,W="bearing"in s?this._normalizeBearing(s.bearing,D):D,Q="pitch"in s?+s.pitch:R,X="padding"in s?s.padding:v.padding,ae=y.P.convert(s.offset);let be=v.centerPoint.add(ae);const ye=v.pointLocation(be),Te=y.L.convert(s.center||ye);this._normalizeCenter(Te);const ge=v.project(ye),je=v.project(Te).sub(ge),nt=v.zoomScale(H-S);let Se,Ze;s.around&&(Se=y.L.convert(s.around),Ze=v.locationPoint(Se));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||H!==S,this._rotating=this._rotating||D!==W,this._pitching=this._pitching||Q!==R,this._padding=!v.isPaddingEqual(X),this._easeId=s.easeId,this._prepareEase(f,s.noMoveStart,st),this.terrain&&this._prepareElevation(Te),this._ease(Je=>{if(this._zooming&&(v.zoom=y.B.number(S,H,Je)),this._rotating&&(v.bearing=y.B.number(D,W,Je)),this._pitching&&(v.pitch=y.B.number(R,Q,Je)),this._padding&&(v.interpolatePadding(N,X,Je),be=v.centerPoint.add(ae)),this.terrain&&!s.freezeElevation&&this._updateElevation(Je),Se)v.setLocationAtPoint(Se,Ze);else{const pt=v.zoomScale(v.zoom-S),Ct=H>S?Math.min(2,nt):Math.max(.5,nt),vt=Math.pow(Ct,1-Je),St=v.unproject(ge.add(je.mult(Je*vt)).mult(pt));v.setLocationAtPoint(v.renderWorldCopies?St.wrap():St,be)}this._applyUpdatedTransform(v),this._fireMoveEvents(f)},Je=>{this.terrain&&this._finalizeElevation(),this._afterEase(f,Je)},s),this}_prepareEase(s,f,v={}){this._moving=!0,f||v.moving||this.fire(new y.k("movestart",s)),this._zooming&&!v.zooming&&this.fire(new y.k("zoomstart",s)),this._rotating&&!v.rotating&&this.fire(new y.k("rotatestart",s)),this._pitching&&!v.pitching&&this.fire(new y.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&f!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(v-(f-(v*s+this._elevationStart))/(1-s)),this._elevationTarget=f}this.transform.elevation=y.B.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(s){if(!this.transformCameraUpdate)return;const f=s.clone(),{center:v,zoom:S,pitch:D,bearing:R,elevation:N}=this.transformCameraUpdate(f);v&&(f.center=v),void 0!==S&&(f.zoom=S),void 0!==D&&(f.pitch=D),void 0!==R&&(f.bearing=R),void 0!==N&&(f.elevation=N),this.transform.apply(f)}_fireMoveEvents(s){this.fire(new y.k("move",s)),this._zooming&&this.fire(new y.k("zoom",s)),this._rotating&&this.fire(new y.k("rotate",s)),this._pitching&&this.fire(new y.k("pitch",s))}_afterEase(s,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const v=this._zooming,S=this._rotating,D=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new y.k("zoomend",s)),S&&this.fire(new y.k("rotateend",s)),D&&this.fire(new y.k("pitchend",s)),this.fire(new y.k("moveend",s))}flyTo(s,f){if(!s.essential&&y.h.prefersReducedMotion){const cn=y.F(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(cn,f)}this.stop(),s=y.e({offset:[0,0],speed:1.2,curve:1.42,easing:y.bb},s);const v=this._getTransformForUpdate(),S=this.getZoom(),D=this.getBearing(),R=this.getPitch(),N=this.getPadding(),H="zoom"in s?y.ad(+s.zoom,v.minZoom,v.maxZoom):S,W="bearing"in s?this._normalizeBearing(s.bearing,D):D,Q="pitch"in s?+s.pitch:R,X="padding"in s?s.padding:v.padding,ae=v.zoomScale(H-S),be=y.P.convert(s.offset);let ye=v.centerPoint.add(be);const Te=v.pointLocation(ye),ge=y.L.convert(s.center||Te);this._normalizeCenter(ge);const je=v.project(Te),nt=v.project(ge).sub(je);let Se=s.curve;const Ze=Math.max(v.width,v.height),st=Ze/ae,Je=nt.mag();if("minZoom"in s){const cn=y.ad(Math.min(s.minZoom,S,H),v.minZoom,v.maxZoom),dr=Ze/v.zoomScale(cn-S);Se=Math.sqrt(dr/Je*2)}const pt=Se*Se;function Ct(cn){const dr=(st*st-Ze*Ze+(cn?-1:1)*pt*pt*Je*Je)/(2*(cn?st:Ze)*pt*Je);return Math.log(Math.sqrt(dr*dr+1)-dr)}function vt(cn){return(Math.exp(cn)-Math.exp(-cn))/2}function St(cn){return(Math.exp(cn)+Math.exp(-cn))/2}const Jt=Ct(!1);let _i=function(cn){return St(Jt)/St(Jt+Se*cn)},zt=function(cn){return Ze*((St(Jt)*(vt(dr=Jt+Se*cn)/St(dr))-vt(Jt))/pt)/Je;var dr},mn=(Ct(!0)-Jt)/Se;if(Math.abs(Je)<1e-6||!isFinite(mn)){if(Math.abs(Ze-st)<1e-6)return this.easeTo(s,f);const cn=st<Ze?-1:1;mn=Math.abs(Math.log(st/Ze))/Se,zt=function(){return 0},_i=function(dr){return Math.exp(cn*Se*dr)}}return s.duration="duration"in s?+s.duration:1e3*mn/("screenSpeed"in s?+s.screenSpeed/Se:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=D!==W,this._pitching=Q!==R,this._padding=!v.isPaddingEqual(X),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(ge),this._ease(cn=>{const dr=cn*mn,A=1/_i(dr);v.zoom=1===cn?H:S+v.scaleZoom(A),this._rotating&&(v.bearing=y.B.number(D,W,cn)),this._pitching&&(v.pitch=y.B.number(R,Q,cn)),this._padding&&(v.interpolatePadding(N,X,cn),ye=v.centerPoint.add(be)),this.terrain&&!s.freezeElevation&&this._updateElevation(cn);const ri=1===cn?ge:v.unproject(je.add(nt.mult(zt(dr))).mult(A));v.setLocationAtPoint(v.renderWorldCopies?ri.wrap():ri,ye),this._applyUpdatedTransform(v),this._fireMoveEvents(f)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(f)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,f)}if(!s){const v=this.handlers;v&&v.stop(!1)}return this}_ease(s,f,v){!1===v.animate||0===v.duration?(s(1),f()):(this._easeStart=y.h.now(),this._easeOptions=v,this._onEaseFrame=s,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,f){s=y.b5(s,-180,180);const v=Math.abs(s-f);return Math.abs(s-360-f)<v&&(s-=360),Math.abs(s+360-f)<v&&(s+=360),s}_normalizeCenter(s){const f=this.transform;if(!f.renderWorldCopies||f.lngRange)return;const v=s.lng-f.center.lng;s.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(y.L.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}class ue{constructor(s={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||"metadata"!==f.sourceDataType&&"visibility"!==f.sourceDataType&&"style"!==f.dataType&&"terrain"!==f.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options&&this.options.compact,this._container=pe.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=pe.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=pe.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){pe.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,f){const v=this._map._getUIString(`AttributionControl.${f}`);s.title=v,s.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(S=>"string"!=typeof S?"":S)):"string"==typeof this.options.customAttribution&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const f=this._map.style.sourceCaches;for(const S in f){const D=f[S];if(D.used||D.usedForTerrain){const R=D.getSource();R.attribution&&s.indexOf(R.attribution)<0&&s.push(R.attribution)}}s=s.filter(S=>String(S).trim()),s.sort((S,D)=>S.length-D.length),s=s.filter((S,D)=>{for(let R=D+1;R<s.length;R++)if(s[R].indexOf(S)>=0)return!1;return!0});const v=s.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,s.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pe{constructor(s={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const v=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=pe.create("div","maplibregl-ctrl");const f=pe.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){pe.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class tt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const f=++this._id;return this._queue.push({callback:s,id:f,cancelled:!1}),f}remove(s){const f=this._currentlyRunning,v=f?this._queue.concat(f):this._queue;for(const S of v)if(S.id===s)return void(S.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const v of f)if(!v.cancelled&&(v.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const at={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var wt=y.Q([{name:"a_pos3d",type:"Int16",components:3}]);class qt extends y.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,f){this.sourceCache.update(s,f),this._renderableTilesKeys=[];const v={};for(const S of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))v[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.posMatrix=new Float64Array(16),y.aS(S.posMatrix,0,y.N,0,y.N,0,1),this._tiles[S.key]=new Ke(S,this.tileSize));for(const S in this._tiles)v[S]||delete this._tiles[S]}freeRtt(s){for(const f in this._tiles){const v=this._tiles[f];(!s||v.tileID.equals(s)||v.tileID.isChildOf(s)||s.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const f={};for(const v of this._renderableTilesKeys){const S=this._tiles[v].tileID;if(S.canonical.equals(s.canonical)){const D=s.clone();D.posMatrix=new Float64Array(16),y.aS(D.posMatrix,0,y.N,0,y.N,0,1),f[v]=D}else if(S.canonical.isChildOf(s.canonical)){const D=s.clone();D.posMatrix=new Float64Array(16);const R=S.canonical.z-s.canonical.z,N=S.canonical.x-(S.canonical.x>>R<<R),H=S.canonical.y-(S.canonical.y>>R<<R),W=y.N>>R;y.aS(D.posMatrix,0,W,0,W,0,1),y.$(D.posMatrix,D.posMatrix,[-N*W,-H*W,0]),f[v]=D}else if(s.canonical.isChildOf(S.canonical)){const D=s.clone();D.posMatrix=new Float64Array(16);const R=s.canonical.z-S.canonical.z,N=s.canonical.x-(s.canonical.x>>R<<R),H=s.canonical.y-(s.canonical.y>>R<<R),W=y.N>>R;y.aS(D.posMatrix,0,y.N,0,y.N,0,1),y.$(D.posMatrix,D.posMatrix,[N*W,H*W,0]),y.a0(D.posMatrix,D.posMatrix,[1/2**R,1/2**R,0]),f[v]=D}}return f}getSourceTile(s,f){const v=this.sourceCache._source;let S=s.overscaledZ-this.deltaZoom;if(S>v.maxzoom&&(S=v.maxzoom),S<v.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(S).key);let D=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!D||!D.dem)&&f)for(;S>=v.minzoom&&(!D||!D.dem);)D=this.sourceCache.getTileByID(s.scaledTo(S--).key);return D}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(f=>f.timeAdded>=s)}}class Kn{constructor(s,f,v){this.painter=s,this.sourceCache=new qt(f),this.options=v,this.exaggeration="number"==typeof v.exaggeration?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,f,v,S=y.N){var D;if(!(f>=0&&f<S&&v>=0&&v<S))return 0;const R=this.getTerrainData(s),N=null===(D=R.tile)||void 0===D?void 0:D.dem;if(!N)return 0;const H=((ye=[])[0]=(ge=R.u_terrain_matrix)[0]*(je=(Te=[f/S*y.N,v/S*y.N])[0])+ge[4]*(nt=Te[1])+ge[12],ye[1]=ge[1]*je+ge[5]*nt+ge[13],ye),W=[H[0]*N.dim,H[1]*N.dim],Q=Math.floor(W[0]),X=Math.floor(W[1]),ae=W[0]-Q,be=W[1]-X;var ye,Te,ge,je,nt;return N.get(Q,X)*(1-ae)*(1-be)+N.get(Q+1,X)*ae*(1-be)+N.get(Q,X+1)*(1-ae)*be+N.get(Q+1,X+1)*ae*be}getElevationForLngLatZoom(s,f){const{tileID:v,mercatorX:S,mercatorY:D}=this._getOverscaledTileIDFromLngLatZoom(s,f);return this.getElevation(v,S%y.N,D%y.N,y.N)}getElevation(s,f,v,S=y.N){return this.getDEMElevation(s,f,v,S)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const S=this.painter.context,D=new y.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new hi(S,D,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new hi(S,new y.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=y.ao([])}const f=this.sourceCache.getSourceTile(s,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const S=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new hi(S,f.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),f.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const v=f&&f+f.tileID.key+s.key;if(v&&!this._demMatrixCache[v]){const S=this.sourceCache.sourceCache._source.maxzoom;let D=s.canonical.z-f.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=S?D=s.canonical.z-S:y.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const R=s.canonical.x-(s.canonical.x>>D<<D),N=s.canonical.y-(s.canonical.y>>D<<D),H=y.bc(new Float64Array(16),[1/(y.N<<D),1/(y.N<<D),0]);y.$(H,H,[R*y.N,N*y.N,0]),this._demMatrixCache[s.key]={matrix:H,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(s){const f=this.painter,v=f.width/devicePixelRatio,S=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new hi(f.context,{width:v,height:S,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new hi(f.context,{width:v,height:S,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(v,S,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,v,S))),this._fbo.colorAttachment.set("coords"===s?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let D=0,R=0;D<this._coordsTextureSize;D++)for(let N=0;N<this._coordsTextureSize;N++,R+=4)f[R+0]=255&N,f[R+1]=255&D,f[R+2]=N>>8<<4|D>>8,f[R+3]=0;const v=new y.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),S=new hi(s,v,s.gl.RGBA,{premultiply:!1});return S.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(s){const f=new Uint8Array(4),v=this.painter.context,S=v.gl;v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,f),v.bindFramebuffer.set(null);const D=f[0]+(f[2]>>4<<8),R=f[1]+((15&f[2])<<8),N=this.coordsIndex[255-f[3]],H=N&&this.sourceCache.getTileByID(N);if(!H)return null;const W=this._coordsTextureSize,Q=(1<<H.tileID.canonical.z)*W;return new y.U(this._allowMercatorOverflow(s,(H.tileID.canonical.x*W+D)/Q),(H.tileID.canonical.y*W+R)/Q,this.getElevation(H.tileID,D,R,W))}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.painter.context,f=new y.bd,v=new y.b0,S=this.meshSize,D=y.N/S,R=S*S;for(let X=0;X<=S;X++)for(let ae=0;ae<=S;ae++)f.emplaceBack(ae*D,X*D,0);for(let X=0;X<R;X+=S+1)for(let ae=0;ae<S;ae++)v.emplaceBack(ae+X,S+ae+X+1,S+ae+X+2),v.emplaceBack(ae+X,S+ae+X+2,ae+X+1);const N=f.length,H=N+2*(S+1);for(const X of[0,1])for(let ae=0;ae<=S;ae++)for(const be of[0,1])f.emplaceBack(ae*D,X*y.N,be);for(let X=0;X<2*S;X+=2)v.emplaceBack(H+X,H+X+1,H+X+3),v.emplaceBack(H+X,H+X+3,H+X+2),v.emplaceBack(N+X,N+X+3,N+X+1),v.emplaceBack(N+X,N+X+2,N+X+3);const W=f.length,Q=W+2*(S+1);for(const X of[0,1])for(let ae=0;ae<=S;ae++)for(const be of[0,1])f.emplaceBack(X*y.N,ae*D,be);for(let X=0;X<2*S;X+=2)v.emplaceBack(W+X,W+X+1,W+X+3),v.emplaceBack(W+X,W+X+3,W+X+2),v.emplaceBack(Q+X,Q+X+3,Q+X+1),v.emplaceBack(Q+X,Q+X+2,Q+X+3);return this._mesh={indexBuffer:s.createIndexBuffer(v),vertexBuffer:s.createVertexBuffer(f,wt.members),segments:y.S.simpleSegment(0,0,f.length,v.length)},this._mesh}getMeshFrameDelta(s){return 2*Math.PI*y.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,f){var v;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(s,f);return null!==(v=this.getMinMaxElevation(S).minElevation)&&void 0!==v?v:0}getMinMaxElevation(s){const f=this.getTerrainData(s).tile,v={minElevation:null,maxElevation:null};return f&&f.dem&&(v.minElevation=f.dem.min*this.exaggeration,v.maxElevation=f.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(s,f){const v=y.U.fromLngLat(s.wrap()),S=(1<<f)*y.N,D=v.x*S,R=v.y*S,N=Math.floor(D/y.N),H=Math.floor(R/y.N);return{tileID:new y.O(f,0,f,N,H),mercatorX:D,mercatorY:R}}_allowMercatorOverflow(s,f){const v=s.x<this.painter.width/2;let S=y.bf(f);const D=this.painter.transform.center.lng;return v&&Math.sign(S)>0&&Math.sign(D)<0||!v&&Math.sign(S)<0&&Math.sign(D)>0?(S=360*Math.sign(D)+S,y.G(S)):f}}class Ei{constructor(s,f,v){this._context=s,this._size=f,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new hi(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(v.texture),{id:s,fbo:f,texture:v,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>s.id!==f),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(s=>!s.inUse)}}const or={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ha{constructor(s,f){this.painter=s,this.terrain=f,this.pool=new Ei(s.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(v=>!s._layers[v].isHidden(f)),this._coordsDescendingInv={};for(const v in s.sourceCaches){this._coordsDescendingInv[v]={};const S=s.sourceCaches[v].getVisibleCoordinates();for(const D of S){const R=this.terrain.sourceCache.getTerrainCoords(D);for(const N in R)this._coordsDescendingInv[v][N]||(this._coordsDescendingInv[v][N]=[]),this._coordsDescendingInv[v][N].push(R[N])}}this._coordsDescendingInvStr={};for(const v of s._order){const S=s._layers[v],D=S.source;if(or[S.type]&&!this._coordsDescendingInvStr[D]){this._coordsDescendingInvStr[D]={};for(const R in this._coordsDescendingInv[D])this._coordsDescendingInvStr[D][R]=this._coordsDescendingInv[D][R].map(N=>N.key).sort().join()}}for(const v of this._renderableTiles)for(const S in this._coordsDescendingInvStr){const D=this._coordsDescendingInvStr[S][v.tileID.key];D&&D!==v.rttCoords[S]&&(v.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;const f=s.type,v=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(or[f]&&(this._prevType&&or[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(s.id),!S))return!0;if(or[this._prevType]||or[f]&&S){this._prevType=f;const D=this._stacks.length-1,R=this._stacks[D]||[];for(const N of this._renderableTiles){if(this.pool.isFull()&&(gi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(N),N.rtt[D]){const W=this.pool.getObjectForId(N.rtt[D].id);if(W.stamp===N.rtt[D].stamp){this.pool.useObject(W);continue}}const H=this.pool.getOrCreateFreeObject();this.pool.useObject(H),this.pool.stampObject(H),N.rtt[D]={id:H.id,stamp:H.stamp},v.context.bindFramebuffer.set(H.fbo.framebuffer),v.context.clear({color:y.aT.transparent,stencil:0}),v.currentStencilSource=void 0;for(let W=0;W<R.length;W++){const Q=v.style._layers[R[W]],X=Q.source?this._coordsDescendingInv[Q.source][N.tileID.key]:[N.tileID];v.context.viewport.set([0,0,H.fbo.width,H.fbo.height]),v._renderTileClippingMasks(Q,X),v.renderLayer(v,v.style.sourceCaches[Q.source],Q,X),Q.source&&(N.rttCoords[Q.source]=this._coordsDescendingInvStr[Q.source][N.tileID.key])}}return gi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),or[f]}return!1}}const pn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:y.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},da=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},Kl={showCompass:!0,showZoom:!0,visualizePitch:!1};class eu{constructor(s,f,v=!1){this.mousedown=R=>{this.startMouse(y.e({},R,{ctrlKey:!0,preventDefault:()=>R.preventDefault()}),pe.mousePos(this.element,R)),pe.addEventListener(window,"mousemove",this.mousemove),pe.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=R=>{this.moveMouse(R,pe.mousePos(this.element,R))},this.mouseup=R=>{this.mouseRotate.dragEnd(R),this.mousePitch&&this.mousePitch.dragEnd(R),this.offTemp()},this.touchstart=R=>{1!==R.targetTouches.length?this.reset():(this._startPos=this._lastPos=pe.touchPos(this.element,R.targetTouches)[0],this.startTouch(R,this._startPos),pe.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),pe.addEventListener(window,"touchend",this.touchend))},this.touchmove=R=>{1!==R.targetTouches.length?this.reset():(this._lastPos=pe.touchPos(this.element,R.targetTouches)[0],this.moveTouch(R,this._lastPos))},this.touchend=R=>{0===R.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const S=s.dragRotate._mouseRotate.getClickTolerance(),D=s.dragRotate._mousePitch.getClickTolerance();this.element=f,this.mouseRotate=vl({clickTolerance:S,enable:!0}),this.touchRotate=(({enable:R,clickTolerance:N,bearingDegreesPerPixelMoved:H=.8})=>{const W=new yl;return new ka({clickTolerance:N,move:(Q,X)=>({bearingDelta:(X.x-Q.x)*H}),moveStateManager:W,enable:R,assignEvents:da})})({clickTolerance:S,enable:!0}),this.map=s,v&&(this.mousePitch=ca({clickTolerance:D,enable:!0}),this.touchPitch=(({enable:R,clickTolerance:N,pitchDegreesPerPixelMoved:H=-.5})=>{const W=new yl;return new ka({clickTolerance:N,move:(Q,X)=>({pitchDelta:(X.y-Q.y)*H}),moveStateManager:W,enable:R,assignEvents:da})})({clickTolerance:D,enable:!0})),pe.addEventListener(f,"mousedown",this.mousedown),pe.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),pe.addEventListener(f,"touchcancel",this.reset)}startMouse(s,f){this.mouseRotate.dragStart(s,f),this.mousePitch&&this.mousePitch.dragStart(s,f),pe.disableDrag()}startTouch(s,f){this.touchRotate.dragStart(s,f),this.touchPitch&&this.touchPitch.dragStart(s,f),pe.disableDrag()}moveMouse(s,f){const v=this.map,{bearingDelta:S}=this.mouseRotate.dragMove(s,f)||{};if(S&&v.setBearing(v.getBearing()+S),this.mousePitch){const{pitchDelta:D}=this.mousePitch.dragMove(s,f)||{};D&&v.setPitch(v.getPitch()+D)}}moveTouch(s,f){const v=this.map,{bearingDelta:S}=this.touchRotate.dragMove(s,f)||{};if(S&&v.setBearing(v.getBearing()+S),this.touchPitch){const{pitchDelta:D}=this.touchPitch.dragMove(s,f)||{};D&&v.setPitch(v.getPitch()+D)}}off(){const s=this.element;pe.removeEventListener(s,"mousedown",this.mousedown),pe.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),pe.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),pe.removeEventListener(window,"touchend",this.touchend),pe.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){pe.enableDrag(),pe.removeEventListener(window,"mousemove",this.mousemove),pe.removeEventListener(window,"mouseup",this.mouseup),pe.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),pe.removeEventListener(window,"touchend",this.touchend)}}let Ir;function Ql(E,s,f){if(E=new y.L(E.lng,E.lat),s){const v=new y.L(E.lng-360,E.lat),S=new y.L(E.lng+360,E.lat),D=f.locationPoint(E).distSqr(s);f.locationPoint(v).distSqr(s)<D?E=v:f.locationPoint(S).distSqr(s)<D&&(E=S)}for(;Math.abs(E.lng-f.center.lng)>180;){const v=f.locationPoint(E);if(v.x>=0&&v.y>=0&&v.x<=f.width&&v.y<=f.height)break;E.lng>f.center.lng?E.lng-=360:E.lng+=360}return E}const ts={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Nu(E,s,f){const v=E.classList;for(const S in ts)v.remove(`maplibregl-${f}-anchor-${S}`);v.add(`maplibregl-${f}-anchor-${s}`)}class mr extends y.E{constructor(s){if(super(),this._onKeyPress=f=>{const v=f.code,S=f.charCode||f.keyCode;"Space"!==v&&"Enter"!==v&&32!==S&&13!==S||this.togglePopup()},this._onMapClick=f=>{const v=f.originalEvent.target,S=this._element;this._popup&&(v===S||S.contains(v))&&this.togglePopup()},this._update=f=>{if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();("terrain"===f?.type||"render"===f?.type&&!v)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Ql(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let S="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?S=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?D="rotateX(0deg)":"map"===this._pitchAlignment&&(D=`rotateX(${this._map.getPitch()}deg)`),f&&"moveend"!==f.type||(this._pos=this._pos.round()),pe.setTransform(this._element,`${ts[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${S}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const R=this._map.unproject(this._pos),N=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=R.distanceTo(this._lngLat)>20*N?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=f=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new y.k("dragstart"))),this.fire(new y.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new y.k("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=y.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=pe.create("div"),this._element.setAttribute("aria-label","Map marker");const f=pe.createNS("http://www.w3.org/2000/svg","svg"),v=41,S=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${v}px`),f.setAttributeNS(null,"width",`${S}px`),f.setAttributeNS(null,"viewBox",`0 0 ${S} ${v}`);const D=pe.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"stroke","none"),D.setAttributeNS(null,"stroke-width","1"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"fill-rule","evenodd");const R=pe.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const N=pe.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(3.0, 29.0)"),N.setAttributeNS(null,"fill","#000000");const H=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const je of H){const nt=pe.createNS("http://www.w3.org/2000/svg","ellipse");nt.setAttributeNS(null,"opacity","0.04"),nt.setAttributeNS(null,"cx","10.5"),nt.setAttributeNS(null,"cy","5.80029008"),nt.setAttributeNS(null,"rx",je.rx),nt.setAttributeNS(null,"ry",je.ry),N.appendChild(nt)}const W=pe.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);const Q=pe.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(Q);const X=pe.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const ae=pe.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(ae);const be=pe.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(6.0, 7.0)"),be.setAttributeNS(null,"fill","#FFFFFF");const ye=pe.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Te=pe.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#000000"),Te.setAttributeNS(null,"opacity","0.25"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962");const ge=pe.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ye.appendChild(Te),ye.appendChild(ge),R.appendChild(N),R.appendChild(W),R.appendChild(X),R.appendChild(be),R.appendChild(ye),f.appendChild(R),f.setAttributeNS(null,"height",v*this._scale+"px"),f.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(f),this._offset=y.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Nu(this._element,this._anchor,"marker"),s&&s.className)for(const f of s.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),pe.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=y.L.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const S=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(24.6+S)],"bottom-right":[-S,-1*(24.6+S)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(s){return this._offset=y.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&"auto"!==s?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const sr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Tr=0,Xl=!1;const Ka={maxWidth:100,unit:"metric"};function gs(E,s,f){const v=f&&f.maxWidth||100,S=E._container.clientHeight/2,D=E.unproject([0,S]),R=E.unproject([v,S]),N=D.distanceTo(R);if(f&&"imperial"===f.unit){const H=3.2808*N;H>5280?Fa(s,v,H/5280,E._getUIString("ScaleControl.Miles")):Fa(s,v,H,E._getUIString("ScaleControl.Feet"))}else f&&"nautical"===f.unit?Fa(s,v,N/1852,E._getUIString("ScaleControl.NauticalMiles")):N>=1e3?Fa(s,v,N/1e3,E._getUIString("ScaleControl.Kilometers")):Fa(s,v,N,E._getUIString("ScaleControl.Meters"))}function Fa(E,s,f,v){const S=function(D){const R=Math.pow(10,`${Math.floor(D)}`.length-1);let N=D/R;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:function(H){const W=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*W)/W}(N),R*N}(f);E.style.width=s*(S/f)+"px",E.innerHTML=`${S}&nbsp;${v}`}const tu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pa(E){if(E){if("number"==typeof E){const s=Math.round(Math.abs(E)/Math.SQRT2);return{center:new y.P(0,0),top:new y.P(0,E),"top-left":new y.P(s,s),"top-right":new y.P(-s,s),bottom:new y.P(0,-E),"bottom-left":new y.P(s,-s),"bottom-right":new y.P(-s,-s),left:new y.P(E,0),right:new y.P(-E,0)}}if(E instanceof y.P||Array.isArray(E)){const s=y.P.convert(E);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:y.P.convert(E.center||[0,0]),top:y.P.convert(E.top||[0,0]),"top-left":y.P.convert(E["top-left"]||[0,0]),"top-right":y.P.convert(E["top-right"]||[0,0]),bottom:y.P.convert(E.bottom||[0,0]),"bottom-left":y.P.convert(E["bottom-left"]||[0,0]),"bottom-right":y.P.convert(E["bottom-right"]||[0,0]),left:y.P.convert(E.left||[0,0]),right:y.P.convert(E.right||[0,0])}}return pa(new y.P(0,0))}const mh={extend:(E,...s)=>y.e(E,...s),run(E){E()},logToElement(E,s=!1,f="log"){const v=window.document.getElementById(f);v&&(s&&(v.innerHTML=""),v.innerHTML+=`<br>${E}`)}};class Bi{static get version(){return"3.6.2"}static get workerCount(){return Gn.workerCount}static set workerCount(s){Gn.workerCount=s}static get maxParallelImageRequests(){return y.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(s){y.c.MAX_PARALLEL_IMAGE_REQUESTS=s}static get workerUrl(){return y.c.WORKER_URL}static set workerUrl(s){y.c.WORKER_URL=s}static addProtocol(s,f){y.c.REGISTERED_PROTOCOLS[s]=f}static removeProtocol(s){delete y.c.REGISTERED_PROTOCOLS[s]}}return Bi.Map=class extends J{constructor(E){if(y.bg.mark(y.bh.create),null!=(E=y.e({},pn,E)).minZoom&&null!=E.maxZoom&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=E.minPitch&&null!=E.maxPitch&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=E.minPitch&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=E.maxPitch&&E.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Pa(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._cooperativeGesturesOnWheel=s=>{this._onCooperativeGesture(s,s[this._metaKey],1)},this._contextLost=s=>{s.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new y.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new y.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=E.interactive,this._cooperativeGestures=E.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=E.maxTileCacheSize,this._maxTileCacheZoomLevels=E.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new tt,this._controls=[],this._mapId=y.a2(),this._locale=y.e({},at,E.locale),this._clickTolerance=E.clickTolerance,this._overridePixelRatio=E.pixelRatio,this._maxCanvasSize=E.maxCanvasSize,this.transformCameraUpdate=E.transformCameraUpdate,this._imageQueueHandle=it.addThrottleControl(()=>this.isMoving()),this._requestManager=new Rn(E.transformRequest),"string"==typeof E.container){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const f=Mr(v=>{this._trackResize&&!this._removed&&this.resize(v)._update()},50);this._resizeObserver=new ResizeObserver(v=>{s?f(v):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new U(this,E),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=E.hash&&new Jo("string"==typeof E.hash&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,y.e({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,this._validateStyle=E.validateStyle,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new ue({customAttribution:E.customAttribution})),E.maplibreLogo&&this.addControl(new Pe,E.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update("style"===s.dataType),this.fire(new y.k(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new y.k(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new y.k("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(E,s){if(void 0===s&&(s=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new y.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=E.onAdd(this);this._controls.push(E);const v=this._controlPositions[s];return-1!==s.indexOf("bottom")?v.insertBefore(f,v.firstChild):v.appendChild(f),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new y.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(E);return s>-1&&this._controls.splice(s,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,s,f,v){return null==v&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,s,f,v)}resize(E){var s;const f=this._containerDimensions(),v=f[0],S=f[1],D=this._getClampedPixelRatio(v,S);if(this._resizeCanvas(v,S,D),this.painter.resize(v,S,D),this.painter.overLimit()){const N=this.painter.context.gl;this._maxCanvasSize=[N.drawingBufferWidth,N.drawingBufferHeight];const H=this._getClampedPixelRatio(v,S);this._resizeCanvas(v,S,H),this.painter.resize(v,S,H)}this.transform.resize(v,S),null===(s=this._requestedCameraState)||void 0===s||s.resize(v,S);const R=!this._moving;return R&&(this.stop(),this.fire(new y.k("movestart",E)).fire(new y.k("move",E))),this.fire(new y.k("resize",E)),R&&this.fire(new y.k("moveend",E)),this}_getClampedPixelRatio(E,s){const{0:f,1:v}=this._maxCanvasSize,S=this.getPixelRatio(),D=E*S,R=s*S;return Math.min(D>f?f/D:1,R>v?v/R:1)*S}getPixelRatio(){var E;return null!==(E=this._overridePixelRatio)&&void 0!==E?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(qn.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(E){return this._cooperativeGestures=E,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(E){return this.transform.locationPoint(y.L.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(y.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||(null===(E=this.handlers)||void 0===E?void 0:E.isMoving())}isZooming(){var E;return this._zooming||(null===(E=this.handlers)||void 0===E?void 0:E.isZooming())}isRotating(){var E;return this._rotating||(null===(E=this.handlers)||void 0===E?void 0:E.isRotating())}_createDelegatedListener(E,s,f){if("mouseenter"===E||"mouseover"===E){let v=!1;return{layer:s,listener:f,delegates:{mousemove:D=>{const R=this.getLayer(s)?this.queryRenderedFeatures(D.point,{layers:[s]}):[];R.length?v||(v=!0,f.call(this,new xo(E,this,D.originalEvent,{features:R}))):v=!1},mouseout:()=>{v=!1}}}}if("mouseleave"===E||"mouseout"===E){let v=!1;return{layer:s,listener:f,delegates:{mousemove:R=>{(this.getLayer(s)?this.queryRenderedFeatures(R.point,{layers:[s]}):[]).length?v=!0:v&&(v=!1,f.call(this,new xo(E,this,R.originalEvent)))},mouseout:R=>{v&&(v=!1,f.call(this,new xo(E,this,R.originalEvent)))}}}}{const v=S=>{const D=this.getLayer(s)?this.queryRenderedFeatures(S.point,{layers:[s]}):[];D.length&&(S.features=D,f.call(this,S),delete S.features)};return{layer:s,listener:f,delegates:{[E]:v}}}}on(E,s,f){if(void 0===f)return super.on(E,s);const v=this._createDelegatedListener(E,s,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(v);for(const S in v.delegates)this.on(S,v.delegates[S]);return this}once(E,s,f){if(void 0===f)return super.once(E,s);const v=this._createDelegatedListener(E,s,f);for(const S in v.delegates)this.once(S,v.delegates[S]);return this}off(E,s,f){return void 0===f?super.off(E,s):(this._delegatedListeners&&this._delegatedListeners[E]&&(v=>{const S=this._delegatedListeners[E];for(let D=0;D<S.length;D++){const R=S[D];if(R.layer===s&&R.listener===f){for(const N in R.delegates)this.off(N,R.delegates[N]);return S.splice(D,1),this}}})(),this)}queryRenderedFeatures(E,s){if(!this.style)return[];let f;const v=E instanceof y.P||Array.isArray(E),S=v?E:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(v?{}:E)||{},S instanceof y.P||"number"==typeof S[0])f=[y.P.convert(S)];else{const D=y.P.convert(S[0]),R=y.P.convert(S[1]);f=[D,new y.P(R.x,D.y),R,new y.P(D.x,R.y),D]}return this.style.queryRenderedFeatures(f,s,this.transform)}querySourceFeatures(E,s){return this.style.querySourceFeatures(E,s)}setStyle(E,s){return!1!==(s=y.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(E,s))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const s=this._locale[E];if(null==s)throw new Error(`Missing UI string '${E}'`);return s}_updateStyle(E,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(E,s));const f=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new Ne(this,s||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof E?this.style.loadURL(E,s,f):this.style.loadJSON(E,s,f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ne(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,s){if("string"==typeof E){const f=this._requestManager.transformRequest(E,Mt.Style);y.f(f,(v,S)=>{v?this.fire(new y.j(v)):S&&this._updateDiff(S,s)})}else"object"==typeof E&&this._updateDiff(E,s)}_updateDiff(E,s){try{this.style.setState(E,s)&&this._update(!0)}catch(f){y.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(E,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():y.w("There is no style added to the map.")}addSource(E,s){return this._lazyInitEmptyStyle(),this.style.addSource(E,s),this._update(!0)}isSourceLoaded(E){const s=this.style&&this.style.sourceCaches[E];if(void 0!==s)return s.loaded();this.fire(new y.j(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){const s=this.style.sourceCaches[E.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);for(const f in this.style._layers){const v=this.style._layers[f];"hillshade"===v.type&&v.source===E.source&&y.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Kn(this.painter,s,E),this.painter.renderToTexture=new ha(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=f=>{"style"===f.dataType?this.terrain.sourceCache.freeRtt():"source"===f.dataType&&f.tile&&(f.sourceId!==E.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new y.k("terrain",{terrain:E})),this}getTerrain(){var E,s;return null!==(s=null===(E=this.terrain)||void 0===E?void 0:E.options)&&void 0!==s?s:null}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const s in E){const f=E[s]._tiles;for(const v in f){const S=f[v];if("loaded"!==S.state&&"errored"!==S.state)return!1}}return!0}addSourceType(E,s,f){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,s,f)}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,s,f={}){const{pixelRatio:v=1,sdf:S=!1,stretchX:D,stretchY:R,content:N}=f;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||y.a(s))){if(void 0===s.width||void 0===s.height)return this.fire(new y.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:H,height:W,data:Q}=s,X=s;return this.style.addImage(E,{data:new y.R({width:H,height:W},new Uint8Array(Q)),pixelRatio:v,stretchX:D,stretchY:R,content:N,sdf:S,version:0,userImage:X}),X.onAdd&&X.onAdd(this,E),this}}{const{width:H,height:W,data:Q}=y.h.getImageData(s);this.style.addImage(E,{data:new y.R({width:H,height:W},Q),pixelRatio:v,stretchX:D,stretchY:R,content:N,sdf:S,version:0})}}updateImage(E,s){const f=this.style.getImage(E);if(!f)return this.fire(new y.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=s instanceof HTMLImageElement||y.a(s)?y.h.getImageData(s):s,{width:S,height:D,data:R}=v;if(void 0===S||void 0===D)return this.fire(new y.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==f.data.width||D!==f.data.height)return this.fire(new y.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const N=!(s instanceof HTMLImageElement||y.a(s));return f.data.replace(R,N),this.style.updateImage(E,f),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new y.j(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E,s){it.getImage(this._requestManager.transformRequest(E,Mt.Image),s)}listImages(){return this.style.listImages()}addLayer(E,s){return this._lazyInitEmptyStyle(),this.style.addLayer(E,s),this._update(!0)}moveLayer(E,s){return this.style.moveLayer(E,s),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,s,f){return this.style.setLayerZoomRange(E,s,f),this._update(!0)}setFilter(E,s,f={}){return this.style.setFilter(E,s,f),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,s,f,v={}){return this.style.setPaintProperty(E,s,f,v),this._update(!0)}getPaintProperty(E,s){return this.style.getPaintProperty(E,s)}setLayoutProperty(E,s,f,v={}){return this.style.setLayoutProperty(E,s,f,v),this._update(!0)}getLayoutProperty(E,s){return this.style.getLayoutProperty(E,s)}setGlyphs(E,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,s,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,s,f,v=>{v||this._update(!0)}),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,s,f=>{f||this._update(!0)}),this}setLight(E,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,s){return this.style.setFeatureState(E,s),this._update()}removeFeatureState(E,s){return this.style.removeFeatureState(E,s),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,s=0;return this._container&&(E=this._container.clientWidth||400,s=this._container.clientHeight||300),[E,s]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map");const s=this._canvasContainer=pe.create("div","maplibregl-canvas-container",E);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=pe.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),v=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],v);const S=this._controlContainer=pe.create("div","maplibregl-control-container",E),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(R=>{D[R]=pe.create("div",`maplibregl-ctrl-${R} `,S)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=pe.create("div","maplibregl-cooperative-gesture-screen",this._container);let E="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(E="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${E}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){pe.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(E,s,f){this._canvas.width=Math.floor(f*E),this._canvas.height=Math.floor(f*s),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let s=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{s={requestedAttributes:E},v&&(s.statusMessage=v.statusMessage,s.type=v.type)},{once:!0});const f=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!f){const v="Failed to initialize WebGL";throw s?(s.message=v,new Error(JSON.stringify(s))):new Error(v)}this.painter=new Bs(f,this.transform),lt.testSupport(f)}_onCooperativeGesture(E,s,f){return!s&&f<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){const s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const S=this.transform.zoom,D=y.h.now();this.style.zoomHistory.update(S,D);const R=new y.a8(S,{now:D,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=R.crossFadingFactor();1===N&&N===this._crossFadingFactor||(f=!0,this._crossFadingFactor=N),this.style.update(R)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new y.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,y.bg.mark(y.bh.load),this.fire(new y.k("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new y.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,y.bg.mark(y.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),it.removeThrottleControl(this._imageQueueHandle),null===(E=this._resizeObserver)||void 0===E||E.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),pe.remove(this._canvasContainer),pe.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),y.bg.clearMetrics(),this._removed=!0,this.fire(new y.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=y.h.frame(E=>{y.bg.frame(E),this._frame=null,this._render(E)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return"3.6.2"}getCameraTargetElevation(){return this.transform.elevation}},Bi.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{const s=this._map.getZoom(),f=s===this._map.getMaxZoom(),v=s===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,f)=>{const v=this._map._getUIString(`NavigationControl.${f}`);s.title=v,s.setAttribute("aria-label",v)},this.options=y.e({},Kl,E),this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),pe.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),pe.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=pe.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new eu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){pe.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,s){const f=pe.create("button",E,this._container);return f.type="button",f.addEventListener("click",s),f}},Bi.GeolocateControl=class extends y.E{constructor(E){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new y.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(s),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new y.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{const f=new y.L(s.coords.longitude,s.coords.latitude),v=s.coords.accuracy,S=this._map.getBearing(),D=y.e({bearing:S},this.options.fitBoundsOptions),R=qn.fromLngLat(f,v);this._map.fitBounds(R,D,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const f=new y.L(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(1===s.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===s.code&&Xl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new y.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=s=>{if(this._map){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=pe.create("button","maplibregl-ctrl-geolocate",this._container),pe.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===s){y.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=pe.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new mr({element:this._dotElement}),this._circleElement=pe.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new mr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||"ACTIVE_LOCK"!==this._watchState||f.originalEvent&&"resize"===f.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new y.k("trackuserlocationend")))})}},this.options=y.e({},sr,E)}onAdd(E){return this._map=E,this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(s,f=!1){void 0===Ir||f?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(v=>{Ir="denied"!==v.state,s(Ir)}).catch(()=>{Ir=!!window.navigator.geolocation,s(Ir)}):(Ir=!!window.navigator.geolocation,s(Ir)):s(Ir)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),pe.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Tr=0,Xl=!1}_isOutOfMapMaxBounds(E){const s=this._map.getMaxBounds(),f=E.coords;return s&&(f.longitude<s.getWest()||f.longitude>s.getEast()||f.latitude<s.getSouth()||f.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const E=this._map.getBounds(),s=E.getSouthEast(),f=E.getNorthEast(),v=s.distanceTo(f),S=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${S}px`,this._circleElement.style.height=`${S}px`}trigger(){if(!this._setup)return y.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new y.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Tr--,Xl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new y.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new y.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Tr++,Tr>1?(E={maximumAge:6e5,timeout:0},Xl=!0):(E=this.options.positionOptions,Xl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Bi.AttributionControl=ue,Bi.LogoControl=Pe,Bi.ScaleControl=class{constructor(E){this._onMove=()=>{gs(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,gs(this._map,this._container,this.options)},this.options=y.e({},Ka,E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){pe.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Bi.FullscreenControl=class extends y.E{constructor(E={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:y.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){pe.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const E=this._fullscreenButton=pe.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);pe.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new y.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new y.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Bi.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=E}onAdd(E){return this._map=E,this._container=pe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=pe.create("button","maplibregl-ctrl-terrain",this._container),pe.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){pe.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Bi.Popup=class extends y.E{constructor(E){super(),this.remove=()=>(this._content&&pe.remove(this._content),this._container&&(pe.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new y.k("close")),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=pe.create("div","maplibregl-popup",this._map.getContainer()),this._tip=pe.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const R of this.options.className.split(" "))this._container.classList.add(R);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ql(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!s)return;const f=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);let v=this.options.anchor;const S=pa(this.options.offset);if(!v){const R=this._container.offsetWidth,N=this._container.offsetHeight;let H;H=f.y+S.bottom.y<N?["top"]:f.y>this._map.transform.height-N?["bottom"]:[],f.x<R/2?H.push("left"):f.x>this._map.transform.width-R/2&&H.push("right"),v=0===H.length?"bottom":H.join("-")}const D=f.add(S[v]).round();pe.setTransform(this._container,`${ts[v]} translate(${D.x}px,${D.y}px)`),Nu(this._container,v,"popup")},this._onClose=()=>{this.remove()},this.options=y.e(Object.create(tu),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new y.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=y.L.convert(E),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const s=document.createDocumentFragment(),f=document.createElement("body");let v;for(f.innerHTML=E;v=f.firstChild,v;)s.appendChild(v);return this.setDOMContent(s)}getMaxWidth(){var E;return null===(E=this._container)||void 0===E?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=pe.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){this._container&&this._container.classList.add(E)}removeClassName(E){this._container&&this._container.classList.remove(E)}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}_createCloseButton(){this.options.closeButton&&(this._closeButton=pe.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(zu);E&&E.focus()}},Bi.Marker=mr,Bi.Style=Ne,Bi.LngLat=y.L,Bi.LngLatBounds=qn,Bi.Point=y.P,Bi.MercatorCoordinate=y.U,Bi.Evented=y.E,Bi.AJAXError=y.bi,Bi.config=y.c,Bi.CanvasSource=Zr,Bi.GeoJSONSource=Er,Bi.ImageSource=ii,Bi.RasterDEMTileSource=Si,Bi.RasterTileSource=Ci,Bi.VectorTileSource=Ji,Bi.VideoSource=Yn,Bi.setRTLTextPlugin=y.bj,Bi.getRTLTextPluginStatus=y.bk,Bi.prewarm=function(){Mn().acquire(an)},Bi.clearPrewarmedResources=function(){const E=Or;E&&(E.isPreloaded()&&1===E.numActive()?(E.release(an),Or=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},mh.extend(Bi,{isSafari:y.ac,getPerformanceMetrics:y.bg.getPerformanceMetrics}),Bi}),r}()},62:(fi,Ot,Me)=>{"use strict";Me.r(Ot),Me.d(Ot,{ANALYZE_FOR_ENTRY_COMPONENTS:()=>ae,ANIMATION_MODULE_TYPE:()=>mE,APP_BOOTSTRAP_LISTENER:()=>vy,APP_ID:()=>fw,APP_INITIALIZER:()=>pw,ApplicationInitStatus:()=>vf,ApplicationModule:()=>zE,ApplicationRef:()=>wy,Attribute:()=>Q,COMPILER_OPTIONS:()=>vw,CUSTOM_ELEMENTS_SCHEMA:()=>yh,ChangeDetectionStrategy:()=>sn,ChangeDetectorRef:()=>Fw,Compiler:()=>Mb,CompilerFactory:()=>vE,Component:()=>Eb,ComponentFactory:()=>Vh,ComponentFactoryResolver:()=>Qu,ComponentRef:()=>Ku,ContentChild:()=>ge,ContentChildren:()=>Te,DEFAULT_CURRENCY_CODE:()=>fy,DebugElement:()=>nd,DebugEventListener:()=>Ty,DebugNode:()=>Vb,DefaultIterableDiffer:()=>My,Directive:()=>hw,ENVIRONMENT_INITIALIZER:()=>Lh,ElementRef:()=>mu,EmbeddedViewRef:()=>Bb,EnvironmentInjector:()=>Yu,ErrorHandler:()=>Xu,EventEmitter:()=>Tu,Host:()=>zr,HostBinding:()=>dE,HostListener:()=>dy,INJECTOR:()=>du,Inject:()=>wo,InjectFlags:()=>Mn,Injectable:()=>c_,InjectionToken:()=>X,Injector:()=>ol,Input:()=>hy,IterableDiffers:()=>wf,KeyValueDiffers:()=>Wb,LOCALE_ID:()=>py,MissingTranslationStrategy:()=>Du,ModuleWithComponentFactories:()=>yw,NO_ERRORS_SCHEMA:()=>Hn,NgModule:()=>pE,NgModuleFactory:()=>Rx,NgModuleRef:()=>Jh,NgProbeToken:()=>CE,NgZone:()=>lc,Optional:()=>Jr,Output:()=>dw,PACKAGE_ROOT_URL:()=>fE,PLATFORM_ID:()=>gw,PLATFORM_INITIALIZER:()=>hg,Pipe:()=>hE,PlatformRef:()=>Nb,Query:()=>ye,QueryList:()=>pf,ReflectiveInjector:()=>tn,ReflectiveKey:()=>O,Renderer2:()=>Wp,RendererFactory2:()=>Rd,RendererStyleFlags2:()=>Dl,ResolvedReflectiveFactory:()=>ce,Sanitizer:()=>gu,SecurityContext:()=>Lr,Self:()=>Co,SimpleChange:()=>fc,SkipSelf:()=>_s,TRANSLATIONS:()=>yE,TRANSLATIONS_FORMAT:()=>_w,TemplateRef:()=>ng,Testability:()=>yy,TestabilityRegistry:()=>kb,Type:()=>pt,VERSION:()=>lm,Version:()=>Fd,ViewChild:()=>nt,ViewChildren:()=>je,ViewContainerRef:()=>ig,ViewEncapsulation:()=>Ht,ViewRef:()=>Nw,asNativeElements:()=>zw,assertPlatform:()=>mg,createComponent:()=>$E,createEnvironmentInjector:()=>eb,createNgModule:()=>Xv,createNgModuleRef:()=>AS,createPlatform:()=>fg,createPlatformFactory:()=>Iw,defineInjectable:()=>Po,destroyPlatform:()=>Aw,enableProdMode:()=>Sy,forwardRef:()=>Zt,getDebugNode:()=>lp,getModuleFactory:()=>TE,getNgModuleById:()=>Ow,getPlatform:()=>by,importProvidersFrom:()=>kh,inject:()=>Ge,isDevMode:()=>zb,isStandalone:()=>Be,makeEnvironmentProviders:()=>im,platformCore:()=>Yb,reflectComponentType:()=>Qb,resolveForwardRef:()=>gt,setTestabilityGetter:()=>Tw,\u0275ALLOW_MULTIPLE_PLATFORMS:()=>Ob,\u0275APP_ID_RANDOM_PROVIDER:()=>Tb,\u0275ComponentFactory:()=>Vh,\u0275Console:()=>gE,\u0275DEFAULT_LOCALE_ID:()=>sh,\u0275INJECTOR_SCOPE:()=>Ld,\u0275LContext:()=>Rf,\u0275LifecycleHooksFeature:()=>w0,\u0275LocaleDataIndex:()=>Xn,\u0275NG_COMP_DEF:()=>mi,\u0275NG_DIR_DEF:()=>di,\u0275NG_ELEMENT_ID:()=>Ni,\u0275NG_INJ_DEF:()=>Gn,\u0275NG_MOD_DEF:()=>ci,\u0275NG_PIPE_DEF:()=>li,\u0275NG_PROV_DEF:()=>an,\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR:()=>_u,\u0275NO_CHANGE:()=>oi,\u0275NgModuleFactory:()=>J_,\u0275NoopNgZone:()=>Sw,\u0275ReflectionCapabilities:()=>Xa,\u0275Render3ComponentFactory:()=>wm,\u0275Render3ComponentRef:()=>_v,\u0275Render3NgModuleRef:()=>Jv,\u0275RuntimeError:()=>fn,\u0275TESTABILITY:()=>_y,\u0275TESTABILITY_GETTER:()=>Ew,\u0275ViewRef:()=>qd,\u0275XSS_SECURITY_URL:()=>Ui,\u0275_sanitizeHtml:()=>hu,\u0275_sanitizeUrl:()=>Td,\u0275allowSanitizationBypassAndThrow:()=>vi,\u0275bypassSanitizationTrustHtml:()=>tv,\u0275bypassSanitizationTrustResourceUrl:()=>Qf,\u0275bypassSanitizationTrustScript:()=>nv,\u0275bypassSanitizationTrustStyle:()=>lu,\u0275bypassSanitizationTrustUrl:()=>Sd,\u0275clearResolutionOfComponentResourcesQueue:()=>Zs,\u0275coerceToBoolean:()=>Py,\u0275compileComponent:()=>ag,\u0275compileDirective:()=>cy,\u0275compileNgModule:()=>Xx,\u0275compileNgModuleDefs:()=>sy,\u0275compileNgModuleFactory:()=>Dw,\u0275compilePipe:()=>uy,\u0275convertToBitFlags:()=>Oe,\u0275createInjector:()=>Hd,\u0275defaultIterableDiffers:()=>FE,\u0275defaultKeyValueDiffers:()=>NE,\u0275detectChanges:()=>Cm,\u0275devModeEqual:()=>M0,\u0275findLocaleData:()=>U_,\u0275flushModuleScopingQueueAsMuchAsPossible:()=>oy,\u0275formatRuntimeError:()=>hi,\u0275getDebugNode:()=>lp,\u0275getDebugNodeR2:()=>IE,\u0275getDirectives:()=>Bx,\u0275getHostElement:()=>df,\u0275getInjectableDef:()=>Ke,\u0275getLContext:()=>jr,\u0275getLocaleCurrencyCode:()=>lx,\u0275getLocalePluralCase:()=>Qh,\u0275getSanitizationBypassType:()=>Tc,\u0275getUnknownElementStrictMode:()=>Ky,\u0275getUnknownPropertyStrictMode:()=>m0,\u0275global:()=>Vn,\u0275injectChangeDetectorRef:()=>Ey,\u0275internalCreateApplication:()=>SE,\u0275isBoundToModule:()=>pg,\u0275isEnvironmentProviders:()=>ni,\u0275isInjectable:()=>dt,\u0275isNgModule:()=>_b,\u0275isObservable:()=>Dv,\u0275isPromise:()=>D_,\u0275isSubscribable:()=>Tv,\u0275makeDecorator:()=>R,\u0275noSideEffects:()=>Kt,\u0275patchComponentDefWithScope:()=>sg,\u0275publishDefaultGlobalUtils:()=>xw,\u0275publishGlobalUtil:()=>ac,\u0275registerLocaleData:()=>Um,\u0275resetCompiledComponents:()=>ew,\u0275resetJitOptions:()=>Kx,\u0275resolveComponentResources:()=>iu,\u0275setAllowDuplicateNgModuleIdsForTest:()=>ju,\u0275setClassMetadata:()=>jx,\u0275setCurrentInjector:()=>oe,\u0275setDocument:()=>_0,\u0275setLocaleId:()=>$_,\u0275setUnknownElementStrictMode:()=>f0,\u0275setUnknownPropertyStrictMode:()=>Mg,\u0275store:()=>Cv,\u0275stringify:()=>it,\u0275transitiveScopesFor:()=>op,\u0275unregisterLocaleData:()=>ux,\u0275unwrapSafeValue:()=>bs,\u0275\u0275CopyDefinitionFeature:()=>E0,\u0275\u0275FactoryTarget:()=>Se,\u0275\u0275HostDirectivesFeature:()=>To,\u0275\u0275InheritDefinitionFeature:()=>vv,\u0275\u0275NgOnChangesFeature:()=>Ds,\u0275\u0275ProvidersFeature:()=>X_,\u0275\u0275StandaloneFeature:()=>Jm,\u0275\u0275advance:()=>a_,\u0275\u0275attribute:()=>xv,\u0275\u0275attributeInterpolate1:()=>I0,\u0275\u0275attributeInterpolate2:()=>y_,\u0275\u0275attributeInterpolate3:()=>v_,\u0275\u0275attributeInterpolate4:()=>b_,\u0275\u0275attributeInterpolate5:()=>x_,\u0275\u0275attributeInterpolate6:()=>w_,\u0275\u0275attributeInterpolate7:()=>C_,\u0275\u0275attributeInterpolate8:()=>S_,\u0275\u0275attributeInterpolateV:()=>E_,\u0275\u0275classMap:()=>q0,\u0275\u0275classMapInterpolate1:()=>oc,\u0275\u0275classMapInterpolate2:()=>N_,\u0275\u0275classMapInterpolate3:()=>tx,\u0275\u0275classMapInterpolate4:()=>Fv,\u0275\u0275classMapInterpolate5:()=>nx,\u0275\u0275classMapInterpolate6:()=>WC,\u0275\u0275classMapInterpolate7:()=>Nv,\u0275\u0275classMapInterpolate8:()=>ix,\u0275\u0275classMapInterpolateV:()=>zv,\u0275\u0275classProp:()=>Av,\u0275\u0275contentQuery:()=>ip,\u0275\u0275defineComponent:()=>ur,\u0275\u0275defineDirective:()=>z,\u0275\u0275defineInjectable:()=>Wi,\u0275\u0275defineInjector:()=>Br,\u0275\u0275defineNgModule:()=>ea,\u0275\u0275definePipe:()=>Z,\u0275\u0275directiveInject:()=>Pt,\u0275\u0275disableBindings:()=>_c,\u0275\u0275element:()=>Em,\u0275\u0275elementContainer:()=>Mm,\u0275\u0275elementContainerEnd:()=>Dm,\u0275\u0275elementContainerStart:()=>Tm,\u0275\u0275elementEnd:()=>Sm,\u0275\u0275elementStart:()=>rf,\u0275\u0275enableBindings:()=>$l,\u0275\u0275getCurrentView:()=>Im,\u0275\u0275getInheritedFactory:()=>nu,\u0275\u0275hostProperty:()=>ep,\u0275\u0275i18n:()=>Px,\u0275\u0275i18nApply:()=>Qv,\u0275\u0275i18nAttributes:()=>Ax,\u0275\u0275i18nEnd:()=>Yv,\u0275\u0275i18nExp:()=>Kv,\u0275\u0275i18nPostprocess:()=>Ym,\u0275\u0275i18nStart:()=>qv,\u0275\u0275inject:()=>ve,\u0275\u0275injectAttribute:()=>f,\u0275\u0275invalidFactory:()=>nn,\u0275\u0275invalidFactoryDep:()=>De,\u0275\u0275listener:()=>Qs,\u0275\u0275loadQuery:()=>rg,\u0275\u0275namespaceHTML:()=>Xt,\u0275\u0275namespaceMathML:()=>ca,\u0275\u0275namespaceSVG:()=>vl,\u0275\u0275nextContext:()=>sf,\u0275\u0275ngDeclareClassMetadata:()=>BE,\u0275\u0275ngDeclareComponent:()=>Ay,\u0275\u0275ngDeclareDirective:()=>Gw,\u0275\u0275ngDeclareFactory:()=>VE,\u0275\u0275ngDeclareInjectable:()=>jE,\u0275\u0275ngDeclareInjector:()=>UE,\u0275\u0275ngDeclareNgModule:()=>Kb,\u0275\u0275ngDeclarePipe:()=>HE,\u0275\u0275pipe:()=>go,\u0275\u0275pipeBind1:()=>Do,\u0275\u0275pipeBind2:()=>tg,\u0275\u0275pipeBind3:()=>ty,\u0275\u0275pipeBind4:()=>ob,\u0275\u0275pipeBindV:()=>sb,\u0275\u0275projection:()=>O0,\u0275\u0275projectionDef:()=>Pm,\u0275\u0275property:()=>Ev,\u0275\u0275propertyInterpolate:()=>Am,\u0275\u0275propertyInterpolate1:()=>M_,\u0275\u0275propertyInterpolate2:()=>R0,\u0275\u0275propertyInterpolate3:()=>F0,\u0275\u0275propertyInterpolate4:()=>N0,\u0275\u0275propertyInterpolate5:()=>z0,\u0275\u0275propertyInterpolate6:()=>B0,\u0275\u0275propertyInterpolate7:()=>V0,\u0275\u0275propertyInterpolate8:()=>j0,\u0275\u0275propertyInterpolateV:()=>Iv,\u0275\u0275pureFunction0:()=>Ux,\u0275\u0275pureFunction1:()=>NS,\u0275\u0275pureFunction2:()=>zS,\u0275\u0275pureFunction3:()=>BS,\u0275\u0275pureFunction4:()=>VS,\u0275\u0275pureFunction5:()=>jS,\u0275\u0275pureFunction6:()=>Hx,\u0275\u0275pureFunction7:()=>US,\u0275\u0275pureFunction8:()=>rb,\u0275\u0275pureFunctionV:()=>HS,\u0275\u0275queryRefresh:()=>mb,\u0275\u0275reference:()=>Sv,\u0275\u0275registerNgModuleType:()=>_h,\u0275\u0275resetView:()=>Wa,\u0275\u0275resolveBody:()=>Bd,\u0275\u0275resolveDocument:()=>i_,\u0275\u0275resolveWindow:()=>cm,\u0275\u0275restoreView:()=>Ia,\u0275\u0275sanitizeHtml:()=>Ph,\u0275\u0275sanitizeResourceUrl:()=>Id,\u0275\u0275sanitizeScript:()=>Vp,\u0275\u0275sanitizeStyle:()=>qu,\u0275\u0275sanitizeUrl:()=>Bp,\u0275\u0275sanitizeUrlOrResourceUrl:()=>rc,\u0275\u0275setComponentScope:()=>Wr,\u0275\u0275setNgModuleScope:()=>hc,\u0275\u0275styleMap:()=>Rc,\u0275\u0275styleMapInterpolate1:()=>rx,\u0275\u0275styleMapInterpolate2:()=>Bv,\u0275\u0275styleMapInterpolate3:()=>z_,\u0275\u0275styleMapInterpolate4:()=>ox,\u0275\u0275styleMapInterpolate5:()=>rh,\u0275\u0275styleMapInterpolate6:()=>sx,\u0275\u0275styleMapInterpolate7:()=>qh,\u0275\u0275styleMapInterpolate8:()=>ax,\u0275\u0275styleMapInterpolateV:()=>B_,\u0275\u0275styleProp:()=>cf,\u0275\u0275stylePropInterpolate1:()=>Vv,\u0275\u0275stylePropInterpolate2:()=>jm,\u0275\u0275stylePropInterpolate3:()=>V_,\u0275\u0275stylePropInterpolate4:()=>jv,\u0275\u0275stylePropInterpolate5:()=>hf,\u0275\u0275stylePropInterpolate6:()=>Uv,\u0275\u0275stylePropInterpolate7:()=>j_,\u0275\u0275stylePropInterpolate8:()=>Hv,\u0275\u0275stylePropInterpolateV:()=>oh,\u0275\u0275syntheticHostListener:()=>wu,\u0275\u0275syntheticHostProperty:()=>$v,\u0275\u0275template:()=>wv,\u0275\u0275templateRefExtractor:()=>Yx,\u0275\u0275text:()=>O_,\u0275\u0275textInterpolate:()=>kv,\u0275\u0275textInterpolate1:()=>Vm,\u0275\u0275textInterpolate2:()=>Q0,\u0275\u0275textInterpolate3:()=>X0,\u0275\u0275textInterpolate4:()=>J0,\u0275\u0275textInterpolate5:()=>ex,\u0275\u0275textInterpolate6:()=>Ov,\u0275\u0275textInterpolate7:()=>R_,\u0275\u0275textInterpolate8:()=>Rv,\u0275\u0275textInterpolateV:()=>F_,\u0275\u0275trustConstantHtml:()=>So,\u0275\u0275trustConstantResourceUrl:()=>jp,\u0275\u0275validateIframeAttribute:()=>Lp,\u0275\u0275viewQuery:()=>Wx});var r=Me(529),V=Me(654),q=Me(498),y=Me(787),Ve=Me(762);class lt{constructor(c,d){this.subjectFactory=c,this.selector=d}call(c,d){const{selector:_}=this,b=this.subjectFactory(),T=_(b).subscribe(c);return T.add(d.subscribe(b)),T}}var Ce=Me(327);function Ue(){return new r.xQ}function Ye(a){for(let c in a)if(a[c]===Ye)return c;throw Error("Could not find renamed property on target object.")}function ct(a,c){for(const d in c)c.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&(a[d]=c[d])}function it(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(it).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const c=a.toString();if(null==c)return""+c;const d=c.indexOf("\n");return-1===d?c:c.substring(0,d)}function Mt(a,c){return null==a||""===a?null===c?"":c:null==c||""===c?a:a+" "+c}const Rn=Ye({__forward_ref__:Ye});function Zt(a){return a.__forward_ref__=Zt,a.toString=function(){return it(this())},a}function gt(a){return Zi(a)?a():a}function Zi(a){return"function"==typeof a&&a.hasOwnProperty(Rn)&&a.__forward_ref__===Zt}function ni(a){return a&&!!a.\u0275providers}const Ui="https://g.co/ng/security#xss";class fn extends Error{constructor(c,d){super(hi(c,d)),this.code=c}}function hi(a,c){return`NG0${Math.abs(a)}${c?": "+c.trim():""}`}function In(a){return"string"==typeof a?a:null==a?"":String(a)}function bn(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():In(a)}function Fn(a,c){throw new fn(-201,!1)}function Yn(a,c,d,_){throw new Error(`ASSERTION ERROR: ${a}`+(null==_?"":` [Expected=> ${d} ${_} ${c} <=Actual]`))}function Wi(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}const Po=Wi;function Br(a){return{providers:a.providers||[],imports:a.imports||[]}}function Ke(a){return ze(a,an)||ze(a,kr)}function dt(a){return null!==Ke(a)}function ze(a,c){return a.hasOwnProperty(c)?a[c]:null}function Dn(a){return a&&(a.hasOwnProperty(Gn)||a.hasOwnProperty(Or))?a[Gn]:null}const an=Ye({\u0275prov:Ye}),Gn=Ye({\u0275inj:Ye}),kr=Ye({ngInjectableDef:Ye}),Or=Ye({ngInjectorDef:Ye});var Mn=(()=>((Mn=Mn||{})[Mn.Default=0]="Default",Mn[Mn.Host=1]="Host",Mn[Mn.Self=2]="Self",Mn[Mn.SkipSelf=4]="SkipSelf",Mn[Mn.Optional=8]="Optional",Mn))();let qi;function yn(a){const c=qi;return qi=a,c}function It(a,c,d){const _=Ke(a);return _&&"root"==_.providedIn?void 0===_.value?_.value=_.factory():_.value:d&Mn.Optional?null:void 0!==c?c:void Fn(it(a))}const Vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yt={},Ln="__NG_DI_FLAG__",ei="ngTempTokenPath",bo="ngTokenPath",Nn=/\n/gm,Fs="\u0275",we="__source";let ie;function oe(a){const c=ie;return ie=a,c}function me(a,c=Mn.Default){if(void 0===ie)throw new fn(-203,!1);return null===ie?It(a,void 0,c):ie.get(a,c&Mn.Optional?null:void 0,c)}function ve(a,c=Mn.Default){return(function Cn(){return qi}()||me)(gt(a),c)}function De(a){throw new fn(202,!1)}function Ge(a,c=Mn.Default){return ve(a,Oe(c))}function Oe(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Le(a){const c=[];for(let d=0;d<a.length;d++){const _=gt(a[d]);if(Array.isArray(_)){if(0===_.length)throw new fn(900,!1);let b,T=Mn.Default;for(let k=0;k<_.length;k++){const j=_[k],G=ht(j);"number"==typeof G?-1===G?b=j.token:T|=G:b=j}c.push(ve(b,T))}else c.push(ve(_))}return c}function Re(a,c){return a[Ln]=c,a.prototype[Ln]=c,a}function ht(a){return a[Ln]}function Kt(a){return{toString:a}.toString()}var sn=(()=>((sn=sn||{})[sn.OnPush=0]="OnPush",sn[sn.Default=1]="Default",sn))(),Ht=(()=>{return(a=Ht||(Ht={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Ht;var a})();const Qt={},Vt=[],mi=Ye({\u0275cmp:Ye}),di=Ye({\u0275dir:Ye}),li=Ye({\u0275pipe:Ye}),ci=Ye({\u0275mod:Ye}),ir=Ye({\u0275fac:Ye}),Ni=Ye({__NG_ELEMENT_ID__:Ye});let yr=0;function ur(a){return Kt(()=>{const c=Tt(a),d={...c,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===sn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:c.standalone&&a.dependencies||null,getStandaloneInjector:null,data:a.data||{},encapsulation:a.encapsulation||Ht.Emulated,id:"c"+yr++,styles:a.styles||Vt,_:null,schemas:a.schemas||null,tView:null};ln(d);const _=a.dependencies;return d.directiveDefs=vn(_,!1),d.pipeDefs=vn(_,!0),d})}function Wr(a,c,d){const _=a.\u0275cmp;_.directiveDefs=vn(c,!1),_.pipeDefs=vn(d,!0)}function Js(a){return te(a)||se(a)}function Ca(a){return null!==a}function ea(a){return Kt(()=>({type:a.type,bootstrap:a.bootstrap||Vt,declarations:a.declarations||Vt,imports:a.imports||Vt,exports:a.exports||Vt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function hc(a,c){return Kt(()=>{const d=Ne(a,!0);d.declarations=c.declarations||Vt,d.imports=c.imports||Vt,d.exports=c.exports||Vt})}function Pi(a,c){if(null==a)return Qt;const d={};for(const _ in a)if(a.hasOwnProperty(_)){let b=a[_],T=b;Array.isArray(b)&&(T=b[1],b=b[0]),d[b]=_,c&&(c[b]=T)}return d}function z(a){return Kt(()=>{const c=Tt(a);return ln(c),c})}function Z(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function te(a){return a[mi]||null}function se(a){return a[di]||null}function fe(a){return a[li]||null}function Be(a){const c=te(a)||se(a)||fe(a);return null!==c&&c.standalone}function Ne(a,c){const d=a[ci]||null;if(!d&&!0===c)throw new Error(`Type ${it(a)} does not have '\u0275mod' property.`);return d}function Tt(a){const c={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:c,exportAs:a.exportAs||null,standalone:!0===a.standalone,selectors:a.selectors||Vt,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Pi(a.inputs,c),outputs:Pi(a.outputs)}}function ln(a){a.features?.forEach(c=>c(a))}function vn(a,c){if(!a)return null;const d=c?fe:Js;return()=>("function"==typeof a?a():a).map(_=>d(_)).filter(Ca)}const dn=0,bt=1,ft=2,kn=3,on=4,Xo=5,Mi=6,Ns=7,Yi=8,hs=9,fr=10,zn=11,ta=12,ds=13,hl=14,Es=15,qr=16,Yr=17,na=18,Ts=19,Ha=20,Bl=21,er=22,Uc=1,$n=2,Go=7,Ai=8,ia=9,rr=10;function oo(a){return Array.isArray(a)&&"object"==typeof a[Uc]}function Nr(a){return Array.isArray(a)&&!0===a[Uc]}function $a(a){return 0!=(4&a.flags)}function Ao(a){return a.componentOffset>-1}function hr(a){return 1==(1&a.flags)}function On(a){return!!a.template}function Vl(a){return 0!=(256&a[ft])}function Ea(a,c){return a.hasOwnProperty(ir)?a[ir]:null}class fc{constructor(c,d,_){this.previousValue=c,this.currentValue=d,this.firstChange=_}isFirstChange(){return this.firstChange}}function Ds(){return Zc}function Zc(a){return a.type.prototype.ngOnChanges&&(a.setInput=hd),Ta}function Ta(){const a=Ul(this),c=a?.current;if(c){const d=a.previous;if(d===Qt)a.previous=c;else for(let _ in c)d[_]=c[_];a.current=null,this.ngOnChanges(c)}}function hd(a,c,d,_){const b=this.declaredInputs[d],T=Ul(a)||function fl(a,c){return a[Lu]=c}(a,{previous:Qt,current:null}),k=T.current||(T.current={}),j=T.previous,G=j[b];k[b]=new fc(G&&G.currentValue,c,j===Qt),a[_]=c}Ds.ngInherit=!0;const Lu="__ngSimpleChanges__";function Ul(a){return a[Lu]||null}let Ga=null;const Da=a=>{Ga=a},Dr=function(a,c,d){Ga?.(a,c,d)},Ma="svg",Wc="math";function Bn(a){for(;Array.isArray(a);)a=a[dn];return a}function mc(a,c){return Bn(c[a])}function jn(a,c){return Bn(c[a.index])}function vr(a,c){return a.data[c]}function Hi(a,c){return a[c]}function so(a,c){const d=c[a];return oo(d)?d:d[dn]}function Za(a){return 64==(64&a[ft])}function zs(a,c){return null==c?null:a[c]}function gc(a){a[na]=0}function Hl(a,c){a[Xo]+=c;let d=a,_=a[kn];for(;null!==_&&(1===c&&1===d[Xo]||-1===c&&0===d[Xo]);)_[Xo]+=c,d=_,_=_[kn]}const Pn={lFrame:Lo(null),bindingsEnabled:!0};function dd(){return Pn.bindingsEnabled}function $l(){Pn.bindingsEnabled=!0}function _c(){Pn.bindingsEnabled=!1}function xt(){return Pn.lFrame.lView}function ki(){return Pn.lFrame.tView}function Ia(a){return Pn.lFrame.contextLView=a,a[Yi]}function Wa(a){return Pn.lFrame.contextLView=null,a}function Kr(){let a=qa();for(;null!==a&&64===a.type;)a=a.parent;return a}function qa(){return Pn.lFrame.currentTNode}function Gl(){const a=Pn.lFrame,c=a.currentTNode;return a.isParent?c:c.parent}function gi(a,c){const d=Pn.lFrame;d.currentTNode=a,d.isParent=c}function Bs(){return Pn.lFrame.isParent}function br(){Pn.lFrame.isParent=!1}function Mr(){const a=Pn.lFrame;let c=a.bindingRootIndex;return-1===c&&(c=a.bindingRootIndex=a.tView.bindingStartIndex),c}function Jo(){return Pn.lFrame.bindingIndex}function Aa(a){return Pn.lFrame.bindingIndex=a}function La(){return Pn.lFrame.bindingIndex++}function es(a){const c=Pn.lFrame,d=c.bindingIndex;return c.bindingIndex=c.bindingIndex+a,d}function vc(a){Pn.lFrame.inI18n=a}function Ou(a,c){const d=Pn.lFrame;d.bindingIndex=d.bindingRootIndex=a,Wl(c)}function Wl(a){Pn.lFrame.currentDirectiveIndex=a}function xo(a){const c=Pn.lFrame.currentDirectiveIndex;return-1===c?null:a[c]}function bc(){return Pn.lFrame.currentQueryIndex}function Kc(a){Pn.lFrame.currentQueryIndex=a}function pd(a){const c=a[bt];return 2===c.type?c.declTNode:1===c.type?a[Mi]:null}function Ru(a,c,d){if(d&Mn.SkipSelf){let b=c,T=a;for(;!(b=b.parent,null!==b||d&Mn.Host||(b=pd(T),null===b||(T=T[Es],10&b.type))););if(null===b)return!1;c=b,a=T}const _=Pn.lFrame=Us();return _.currentTNode=c,_.lView=a,!0}function js(a){const c=Us(),d=a[bt];Pn.lFrame=c,c.currentTNode=d.firstChild,c.lView=a,c.tView=d,c.contextLView=a,c.bindingIndex=d.bindingStartIndex,c.inI18n=!1}function Us(){const a=Pn.lFrame,c=null===a?null:a.child;return null===c?Lo(a):c}function Lo(a){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=c),c}function aa(){const a=Pn.lFrame;return Pn.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const _l=aa;function la(){const a=aa();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Vr(){return Pn.lFrame.selectedIndex}function yl(a){Pn.lFrame.selectedIndex=a}function Ki(){const a=Pn.lFrame;return vr(a.tView,a.selectedIndex)}function vl(){Pn.lFrame.currentNamespace=Ma}function ca(){Pn.lFrame.currentNamespace=Wc}function Xt(){!function Ms(){Pn.lFrame.currentNamespace=null}()}function Oa(a,c){for(let d=c.directiveStart,_=c.directiveEnd;d<_;d++){const T=a.data[d].type.prototype,{ngAfterContentInit:k,ngAfterContentChecked:j,ngAfterViewInit:G,ngAfterViewChecked:ne,ngOnDestroy:he}=T;k&&(a.contentHooks??(a.contentHooks=[])).push(-d,k),j&&((a.contentHooks??(a.contentHooks=[])).push(d,j),(a.contentCheckHooks??(a.contentCheckHooks=[])).push(d,j)),G&&(a.viewHooks??(a.viewHooks=[])).push(-d,G),ne&&((a.viewHooks??(a.viewHooks=[])).push(d,ne),(a.viewCheckHooks??(a.viewCheckHooks=[])).push(d,ne)),null!=he&&(a.destroyHooks??(a.destroyHooks=[])).push(d,he)}}function Rt(a,c,d){Fu(a,c,3,d)}function Ra(a,c,d,_){(3&a[ft])===d&&Fu(a,c,d,_)}function ua(a,c){let d=a[ft];(3&d)===c&&(d&=2047,d+=1,a[ft]=d)}function Fu(a,c,d,_){const T=_??-1,k=c.length-1;let j=0;for(let G=void 0!==_?65535&a[na]:0;G<k;G++)if("number"==typeof c[G+1]){if(j=c[G],null!=_&&j>=_)break}else c[G]<0&&(a[na]+=65536),(j<T||-1==T)&&(Qc(a,d,c,G),a[na]=(4294901760&a[na])+G+2),G++}function Qc(a,c,d,_){const b=d[_]<0,T=d[_+1],j=a[b?-d[_]:d[_]];if(b){if(a[ft]>>11<a[na]>>16&&(3&a[ft])===c){a[ft]+=2048,Dr(4,j,T);try{T.call(j)}finally{Dr(5,j,T)}}}else{Dr(4,j,T);try{T.call(j)}finally{Dr(5,j,T)}}}const bl=-1;class xl{constructor(c,d,_){this.factory=c,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=_}}function p(a,c,d){let _=0;for(;_<d.length;){const b=d[_];if("number"==typeof b){if(0!==b)break;_++;const T=d[_++],k=d[_++],j=d[_++];a.setAttribute(c,k,j,T)}else{const T=b,k=d[++_];P(T)?a.setProperty(c,T,k):a.setAttribute(c,T,k),_++}}return _}function x(a){return 3===a||4===a||6===a}function P(a){return 64===a.charCodeAt(0)}function U(a,c){if(null!==c&&0!==c.length)if(null===a||0===a.length)a=c.slice();else{let d=-1;for(let _=0;_<c.length;_++){const b=c[_];"number"==typeof b?d=b:0===d||J(a,d,b,null,-1===d||2===d?c[++_]:null)}}return a}function J(a,c,d,_,b){let T=0,k=a.length;if(-1===c)k=-1;else for(;T<a.length;){const j=a[T++];if("number"==typeof j){if(j===c){k=-1;break}if(j>c){k=T-1;break}}}for(;T<a.length;){const j=a[T];if("number"==typeof j)break;if(j===d){if(null===_)return void(null!==b&&(a[T+1]=b));if(_===a[T+1])return void(a[T+2]=b)}T++,null!==_&&T++,null!==b&&T++}-1!==k&&(a.splice(k,0,c),T=k+1),a.splice(T++,0,d),null!==_&&a.splice(T++,0,_),null!==b&&a.splice(T++,0,b)}function ue(a){return a!==bl}function Pe(a){return 32767&a}function at(a,c){let d=function tt(a){return a>>16}(a),_=c;for(;d>0;)_=_[Es],d--;return _}let wt=!0;function qt(a){const c=wt;return wt=a,c}const Ei=255,or=5;let ha=0;const Wt={};function da(a,c){const d=eu(a,c);if(-1!==d)return d;const _=c[bt];_.firstCreatePass&&(a.injectorIndex=c.length,Kl(_.data,a),Kl(c,null),Kl(_.blueprint,null));const b=Ir(a,c),T=a.injectorIndex;if(ue(b)){const k=Pe(b),j=at(b,c),G=j[bt].data;for(let ne=0;ne<8;ne++)c[T+ne]=j[k+ne]|G[k+ne]}return c[T+8]=b,T}function Kl(a,c){a.push(0,0,0,0,0,0,0,0,c)}function eu(a,c){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===c[a.injectorIndex+8]?-1:a.injectorIndex}function Ir(a,c){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let d=0,_=null,b=c;for(;null!==b;){if(_=s(b),null===_)return bl;if(d++,b=b[Es],-1!==_.injectorIndex)return _.injectorIndex|d<<16}return bl}function Ql(a,c,d){!function pn(a,c,d){let _;"string"==typeof d?_=d.charCodeAt(0)||0:d.hasOwnProperty(Ni)&&(_=d[Ni]),null==_&&(_=d[Ni]=ha++);const b=_&Ei;c.data[a+(b>>or)]|=1<<b}(a,c,d)}function Nu(a,c,d){if(d&Mn.Optional||void 0!==a)return a;Fn()}function mr(a,c,d,_){if(d&Mn.Optional&&void 0===_&&(_=null),!(d&(Mn.Self|Mn.Host))){const b=a[hs],T=yn(void 0);try{return b?b.get(c,_,d&Mn.Optional):It(c,_,d&Mn.Optional)}finally{yn(T)}}return Nu(_,0,d)}function sr(a,c,d,_=Mn.Default,b){if(null!==a){if(1024&c[ft]){const k=function E(a,c,d,_,b){let T=a,k=c;for(;null!==T&&null!==k&&1024&k[ft]&&!(256&k[ft]);){const j=Tr(T,k,d,_|Mn.Self,Wt);if(j!==Wt)return j;let G=T.parent;if(!G){const ne=k[Bl];if(ne){const he=ne.get(d,Wt,_);if(he!==Wt)return he}G=s(k),k=k[Es]}T=G}return b}(a,c,d,_,Wt);if(k!==Wt)return k}const T=Tr(a,c,d,_,Wt);if(T!==Wt)return T}return mr(c,d,_,b)}function Tr(a,c,d,_,b){const T=function Fa(a){if("string"==typeof a)return a.charCodeAt(0)||0;const c=a.hasOwnProperty(Ni)?a[Ni]:void 0;return"number"==typeof c?c>=0?c&Ei:mh:c}(d);if("function"==typeof T){if(!Ru(c,a,_))return _&Mn.Host?Nu(b,0,_):mr(c,d,_,b);try{const k=T(_);if(null!=k||_&Mn.Optional)return k;Fn()}finally{_l()}}else if("number"==typeof T){let k=null,j=eu(a,c),G=bl,ne=_&Mn.Host?c[qr][Mi]:null;for((-1===j||_&Mn.SkipSelf)&&(G=-1===j?Ir(a,c):c[j+8],G!==bl&&zu(_,!1)?(k=c[bt],j=Pe(G),c=at(G,c)):j=-1);-1!==j;){const he=c[bt];if(tu(T,j,he.data)){const Ee=Xl(j,c,d,k,_,ne);if(Ee!==Wt)return Ee}G=c[j+8],G!==bl&&zu(_,c[bt].data[j+8]===ne)&&tu(T,j,c)?(k=he,j=Pe(G),c=at(G,c)):j=-1}}return b}function Xl(a,c,d,_,b,T){const k=c[bt],j=k.data[a+8],he=Ka(j,k,d,null==_?Ao(j)&&wt:_!=k&&0!=(3&j.type),b&Mn.Host&&T===j);return null!==he?gs(c,k,he,j):Wt}function Ka(a,c,d,_,b){const T=a.providerIndexes,k=c.data,j=1048575&T,G=a.directiveStart,he=T>>20,He=b?j+he:a.directiveEnd;for(let ot=_?j:j+he;ot<He;ot++){const _t=k[ot];if(ot<G&&d===_t||ot>=G&&_t.type===d)return ot}if(b){const ot=k[G];if(ot&&On(ot)&&ot.type===d)return G}return null}function gs(a,c,d,_){let b=a[d];const T=c.data;if(function ql(a){return a instanceof xl}(b)){const k=b;k.resolving&&function Ti(a,c){const d=c?`. Dependency path: ${c.join(" > ")} > ${a}`:"";throw new fn(-200,`Circular dependency in DI detected for ${a}${d}`)}(bn(T[d]));const j=qt(k.canSeeViewProviders);k.resolving=!0;const G=k.injectImpl?yn(k.injectImpl):null;Ru(a,_,Mn.Default);try{b=a[d]=k.factory(void 0,T,a,_),c.firstCreatePass&&d>=_.directiveStart&&function $s(a,c,d){const{ngOnChanges:_,ngOnInit:b,ngDoCheck:T}=c.type.prototype;if(_){const k=Zc(c);(d.preOrderHooks??(d.preOrderHooks=[])).push(a,k),(d.preOrderCheckHooks??(d.preOrderCheckHooks=[])).push(a,k)}b&&(d.preOrderHooks??(d.preOrderHooks=[])).push(0-a,b),T&&((d.preOrderHooks??(d.preOrderHooks=[])).push(a,T),(d.preOrderCheckHooks??(d.preOrderCheckHooks=[])).push(a,T))}(d,T[d],c)}finally{null!==G&&yn(G),qt(j),k.resolving=!1,_l()}}return b}function tu(a,c,d){return!!(d[c+(a>>or)]&1<<a)}function zu(a,c){return!(a&Mn.Self||a&Mn.Host&&c)}class pa{constructor(c,d){this._tNode=c,this._lView=d}get(c,d,_){return sr(this._tNode,this._lView,c,Oe(_),d)}}function mh(){return new pa(Kr(),xt())}function nu(a){return Kt(()=>{const c=a.prototype.constructor,d=c[ir]||Bi(c),_=Object.prototype;let b=Object.getPrototypeOf(a.prototype).constructor;for(;b&&b!==_;){const T=b[ir]||Bi(b);if(T&&T!==d)return T;b=Object.getPrototypeOf(b)}return T=>new T})}function Bi(a){return Zi(a)?()=>{const c=Bi(gt(a));return c&&c()}:Ea(a)}function s(a){const c=a[bt],d=c.type;return 2===d?c.declTNode:1===d?a[Mi]:null}function f(a){return function ts(a,c){if("class"===c)return a.classes;if("style"===c)return a.styles;const d=a.attrs;if(d){const _=d.length;let b=0;for(;b<_;){const T=d[b];if(x(T))break;if(0===T)b+=2;else if("number"==typeof T)for(b++;b<_&&"string"==typeof d[b];)b++;else{if(T===c)return d[b+1];b+=2}}}return null}(Kr(),a)}const v="__annotations__",S="__parameters__",D="__prop__metadata__";function R(a,c,d,_,b){return Kt(()=>{const T=N(c);function k(...j){if(this instanceof k)return T.call(this,...j),this;const G=new k(...j);return function(he){return b&&b(he,...j),(he.hasOwnProperty(v)?he[v]:Object.defineProperty(he,v,{value:[]})[v]).push(G),_&&_(he),he}}return d&&(k.prototype=Object.create(d.prototype)),k.prototype.ngMetadataName=a,k.annotationCls=k,k})}function N(a){return function(...d){if(a){const _=a(...d);for(const b in _)this[b]=_[b]}}}function H(a,c,d){return Kt(()=>{const _=N(c);function b(...T){if(this instanceof b)return _.apply(this,T),this;const k=new b(...T);return j.annotation=k,j;function j(G,ne,he){const Ee=G.hasOwnProperty(S)?G[S]:Object.defineProperty(G,S,{value:[]})[S];for(;Ee.length<=he;)Ee.push(null);return(Ee[he]=Ee[he]||[]).push(k),G}}return d&&(b.prototype=Object.create(d.prototype)),b.prototype.ngMetadataName=a,b.annotationCls=b,b})}function W(a,c,d,_){return Kt(()=>{const b=N(c);function T(...k){if(this instanceof T)return b.apply(this,k),this;const j=new T(...k);return function G(ne,he){const Ee=ne.constructor,He=Ee.hasOwnProperty(D)?Ee[D]:Object.defineProperty(Ee,D,{value:{}})[D];He[he]=He.hasOwnProperty(he)&&He[he]||[],He[he].unshift(j),_&&_(ne,he,...k)}}return d&&(T.prototype=Object.create(d.prototype)),T.prototype.ngMetadataName=a,T.annotationCls=T,T})}const Q=H("Attribute",a=>({attributeName:a,__NG_ELEMENT_ID__:()=>f(a)}));class X{constructor(c,d){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=Wi({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ae=new X("AnalyzeForEntryComponents");class ye{}const Te=W("ContentChildren",(a,c={})=>({selector:a,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...c}),ye),ge=W("ContentChild",(a,c={})=>({selector:a,first:!0,isViewQuery:!1,descendants:!0,...c}),ye),je=W("ViewChildren",(a,c={})=>({selector:a,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:!0,...c}),ye),nt=W("ViewChild",(a,c)=>({selector:a,first:!0,isViewQuery:!0,descendants:!0,...c}),ye);var Se=(()=>((Se=Se||{})[Se.Directive=0]="Directive",Se[Se.Component=1]="Component",Se[Se.Injectable=2]="Injectable",Se[Se.Pipe=3]="Pipe",Se[Se.NgModule=4]="NgModule",Se))();function Je(a){const c=Vn.ng;if(c&&c.\u0275compilerFacade)return c.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const pt=Function;function Ct(a){return"function"==typeof a}function St(a){return a.flat(Number.POSITIVE_INFINITY)}function Jt(a,c){a.forEach(d=>Array.isArray(d)?Jt(d,c):c(d))}function _i(a,c,d){c>=a.length?a.push(d):a.splice(c,0,d)}function zt(a,c){return c>=a.length-1?a.pop():a.splice(c,1)[0]}function mn(a,c){const d=[];for(let _=0;_<a;_++)d.push(c);return d}function An(a,c,d){let _=$i(a,c);return _>=0?a[1|_]=d:(_=~_,function A(a,c,d,_){let b=a.length;if(b==c)a.push(d,_);else if(1===b)a.push(_,a[0]),a[0]=d;else{for(b--,a.push(a[b-1],a[b]);b>c;)a[b]=a[b-2],b--;a[c]=d,a[c+1]=_}}(a,_,c,d)),_}function Fr(a,c){const d=$i(a,c);if(d>=0)return a[1|d]}function $i(a,c){return function Qr(a,c,d){let _=0,b=a.length>>d;for(;b!==_;){const T=_+(b-_>>1),k=a[T<<d];if(c===k)return T<<d;k>c?b=T:_=T+1}return~(b<<d)}(a,c,1)}const Xr=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Gs=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,xr=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Pr=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class Xa{constructor(c){this._reflect=c||Vn.Reflect}factory(c){return(...d)=>new c(...d)}_zipTypesAndAnnotations(c,d){let _;_=mn(typeof c>"u"?d.length:c.length);for(let b=0;b<_.length;b++)_[b]=typeof c>"u"?[]:c[b]&&c[b]!=Object?[c[b]]:[],d&&null!=d[b]&&(_[b]=_[b].concat(d[b]));return _}_ownParameters(c,d){if(function Qa(a){return Xr.test(a)||Pr.test(a)||Gs.test(a)&&!xr.test(a)}(c.toString()))return null;if(c.parameters&&c.parameters!==d.parameters)return c.parameters;const b=c.ctorParameters;if(b&&b!==d.ctorParameters){const j="function"==typeof b?b():b,G=j.map(he=>he&&he.type),ne=j.map(he=>he&&Sl(he.decorators));return this._zipTypesAndAnnotations(G,ne)}const T=c.hasOwnProperty(S)&&c[S],k=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",c);return k||T?this._zipTypesAndAnnotations(k,T):mn(c.length)}parameters(c){if(!Ct(c))return[];const d=Vi(c);let _=this._ownParameters(c,d);return!_&&d!==Object&&(_=this.parameters(d)),_||[]}_ownAnnotations(c,d){if(c.annotations&&c.annotations!==d.annotations){let _=c.annotations;return"function"==typeof _&&_.annotations&&(_=_.annotations),_}return c.decorators&&c.decorators!==d.decorators?Sl(c.decorators):c.hasOwnProperty(v)?c[v]:null}annotations(c){if(!Ct(c))return[];const d=Vi(c),_=this._ownAnnotations(c,d)||[];return(d!==Object?this.annotations(d):[]).concat(_)}_ownPropMetadata(c,d){if(c.propMetadata&&c.propMetadata!==d.propMetadata){let _=c.propMetadata;return"function"==typeof _&&_.propMetadata&&(_=_.propMetadata),_}if(c.propDecorators&&c.propDecorators!==d.propDecorators){const _=c.propDecorators,b={};return Object.keys(_).forEach(T=>{b[T]=Sl(_[T])}),b}return c.hasOwnProperty(D)?c[D]:null}propMetadata(c){if(!Ct(c))return{};const d=Vi(c),_={};if(d!==Object){const T=this.propMetadata(d);Object.keys(T).forEach(k=>{_[k]=T[k]})}const b=this._ownPropMetadata(c,d);return b&&Object.keys(b).forEach(T=>{const k=[];_.hasOwnProperty(T)&&k.push(..._[T]),k.push(...b[T]),_[T]=k}),_}ownPropMetadata(c){return Ct(c)&&this._ownPropMetadata(c,Vi(c))||{}}hasLifecycleHook(c,d){return c instanceof pt&&d in c.prototype}}function Sl(a){return a?a.map(c=>new(0,c.type.annotationCls)(...c.args?c.args:[])):[]}function Vi(a){const c=a.prototype?Object.getPrototypeOf(a.prototype):null;return(c?c.constructor:null)||Object}const wo=Re(H("Inject",a=>({token:a})),-1),Jr=Re(H("Optional"),8),Co=Re(H("Self"),2),_s=Re(H("SkipSelf"),4),zr=Re(H("Host"),1);let ao=null;function Oo(){return ao=ao||new Xa}function Ar(a){return Na(Oo().parameters(a))}function Na(a){return a.map(c=>function Bu(a){const c={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(a)&&a.length>0)for(let d=0;d<a.length;d++){const _=a[d];if(void 0===_)continue;const b=Object.getPrototypeOf(_);if(_ instanceof Jr||"Optional"===b.ngMetadataName)c.optional=!0;else if(_ instanceof _s||"SkipSelf"===b.ngMetadataName)c.skipSelf=!0;else if(_ instanceof Co||"Self"===b.ngMetadataName)c.self=!0;else if(_ instanceof zr||"Host"===b.ngMetadataName)c.host=!0;else if(_ instanceof wo)c.token=_.token;else if(_ instanceof Q){if(void 0===_.attributeName)throw new fn(204,!1);c.attribute=_.attributeName}else c.token=_}else c.token=void 0===a||Array.isArray(a)&&0===a.length?null:a;return c}(c))}function iu(a){const c=[],d=new Map;function _(b){let T=d.get(b);if(!T){const k=a(b);d.set(b,T=k.then(fd))}return T}return xc.forEach((b,T)=>{const k=[];b.templateUrl&&k.push(_(b.templateUrl).then(Ee=>{b.template=Ee}));const j=b.styleUrls,G=b.styles||(b.styles=[]),ne=b.styles.length;j&&j.forEach((Ee,He)=>{G.push(""),k.push(_(Ee).then(ot=>{G[ne+He]=ot,j.splice(j.indexOf(Ee),1),0==j.length&&(b.styleUrls=void 0)}))});const he=Promise.all(k).then(()=>function el(a){Vu.delete(a)}(T));c.push(he)}),Zs(),Promise.all(c).then(()=>{})}let xc=new Map;const Vu=new Set;function Jl(a){return!!(a.templateUrl&&!a.hasOwnProperty("template")||a.styleUrls&&a.styleUrls.length)}function Zs(){const a=xc;return xc=new Map,a}function fd(a){return"string"==typeof a?a:a.text()}const El=new Map;let md=!0;function _h(a,c){(function eo(a,c,d){if(c&&c!==d&&md)throw new Error(`Duplicate module registered for ${a} - ${it(c)} vs ${it(c.name)}`)})(c,El.get(c)||null,a),El.set(c,a)}function Tl(a){return El.get(a)}function ju(a){md=!a}const yh={name:"custom-elements"},Hn={name:"no-errors-schema"};let Af=!1;function f0(a){Af=a}function Ky(){return Af}let Dg=!1;function Mg(a){Dg=a}function m0(){return Dg}var Dl=(()=>((Dl=Dl||{})[Dl.Important=1]="Important",Dl[Dl.DashCase=2]="DashCase",Dl))();const Zn=/^>|^->|<!--|-->|--!>|<!-$/g,pi=/(<|>)/,bh="\u200b$1\u200b";const kf=new Map;let ou=0;function Pg(a){return kf.get(a)||null}class Rf{get lView(){return Pg(this.lViewId)}constructor(c,d,_){this.lViewId=c,this.nodeIndex=d,this.native=_}}function jr(a){let c=wc(a);if(c){if(oo(c)){const d=c;let _,b,T;if(Nf(a)){if(_=Lg(d,a),-1==_)throw new Error("The provided component was not found in the application");b=a}else if(function zf(a){return a&&a.constructor&&a.constructor.\u0275dir}(a)){if(_=function kg(a,c){let d=a[bt].firstChild;for(;d;){const b=d.directiveEnd;for(let T=d.directiveStart;T<b;T++)if(a[T]===c)return d.index;d=Bf(d)}return-1}(d,a),-1==_)throw new Error("The provided directive was not found in the application");T=Og(_,d)}else if(_=Cc(d,a),-1==_)return null;const k=Bn(d[_]),j=wc(k),G=j&&!Array.isArray(j)?j:Ff(d,_,k);if(b&&void 0===G.component&&(G.component=b,is(G.component,G)),T&&void 0===G.directives){G.directives=T;for(let ne=0;ne<T.length;ne++)is(T[ne],G)}is(G.native,G),c=G}}else{const d=a;let _=d;for(;_=_.parentNode;){const b=wc(_);if(b){const T=Array.isArray(b)?b:b.lView;if(!T)return null;const k=Cc(T,d);if(k>=0){const j=Bn(T[k]),G=Ff(T,k,j);is(j,G),c=G;break}}}}return c||null}function Ff(a,c,d){return new Rf(a[Ha],c,d)}function gd(a){let d,c=wc(a);if(oo(c)){const _=c,b=Lg(_,a);d=so(b,_);const T=Ff(_,b,d[dn]);T.component=a,is(a,T),is(T.native,T)}else d=so(c.nodeIndex,c.lView);return d}const _d="__ngContext__";function is(a,c){oo(c)?(a[_d]=c[Ha],function ys(a){kf.set(a[Ha],a)}(c)):a[_d]=c}function wc(a){const c=a[_d];return"number"==typeof c?Pg(c):c||null}function rs(a){const c=wc(a);return c?oo(c)?c:c.lView:null}function Nf(a){return a&&a.constructor&&a.constructor.\u0275cmp}function Cc(a,c){const d=a[bt];for(let _=er;_<d.bindingStartIndex;_++)if(Bn(a[_])===c)return _;return-1}function Bf(a){if(a.child)return a.child;if(a.next)return a.next;for(;a.parent&&!a.parent.next;)a=a.parent;return a.parent&&a.parent.next}function Lg(a,c){const d=a[bt].components;if(d)for(let _=0;_<d.length;_++){const b=d[_];if(so(b,a)[Yi]===c)return b}else if(so(er,a)[Yi]===c)return er;return-1}function Og(a,c){const d=c[bt].data[a];if(0===d.directiveStart)return Vt;const _=[];for(let b=d.directiveStart;b<d.directiveEnd;b++){const T=c[b];Nf(T)||_.push(T)}return _}let yd;function Qn(a,c){return yd(a,c)}function qs(a){const c=a[kn];return Nr(c)?c[kn]:c}function Jy(a){return function Xy(a){let c=oo(a)?a:rs(a);for(;c&&!(256&c[ft]);)c=qs(c);return c}(a)[Yi]}function Rg(a){return $u(a[ds])}function xp(a){return $u(a[on])}function $u(a){for(;null!==a&&!Nr(a);)a=a[on];return a}function xh(a,c,d,_,b){if(null!=_){let T,k=!1;Nr(_)?T=_:oo(_)&&(k=!0,_=_[dn]);const j=Bn(_);0===a&&null!==d?null==b?Ng(c,d,j):ar(c,d,j,b||null,!0):1===a&&null!==d?ar(c,d,j,b||null,!0):2===a?Ip(c,j,k):3===a&&c.destroyNode(j),null!=T&&function jg(a,c,d,_,b){const T=d[Go];T!==Bn(d)&&xh(c,a,_,T,b);for(let j=rr;j<d.length;j++){const G=d[j];wd(G[bt],G,a,c,_,T)}}(c,a,T,d,b)}}function vd(a,c){return a.createText(c)}function Fg(a,c,d){a.setValue(c,d)}function fa(a,c){return a.createComment(function Ws(a){return a.replace(Zn,c=>c.replace(pi,bh))}(c))}function Vf(a,c,d){return a.createElement(c,d)}function jf(a,c){const d=a[ia],_=d.indexOf(c),b=c[kn];512&c[ft]&&(c[ft]&=-513,Hl(b,-1)),d.splice(_,1)}function Sp(a,c){if(a.length<=rr)return;const d=rr+c,_=a[d];if(_){const b=_[Yr];null!==b&&b!==a&&jf(b,_),c>0&&(a[d-1][on]=_[on]);const T=zt(a,rr+c);!function to(a,c){wd(a,c,c[zn],2,null,null),c[dn]=null,c[Mi]=null}(_[bt],_);const k=T[Ts];null!==k&&k.detachView(T[bt]),_[kn]=null,_[on]=null,_[ft]&=-65}return _}function Ch(a,c){if(!(128&c[ft])){const d=c[zn];d.destroyNode&&wd(a,c,d,3,null,null),function wp(a){let c=a[ds];if(!c)return Sh(a[bt],a);for(;c;){let d=null;if(oo(c))d=c[ds];else{const _=c[rr];_&&(d=_)}if(!d){for(;c&&!c[on]&&c!==a;)oo(c)&&Sh(c[bt],c),c=c[kn];null===c&&(c=a),oo(c)&&Sh(c[bt],c),d=c&&c[on]}c=d}}(c)}}function Sh(a,c){if(!(128&c[ft])){c[ft]&=-65,c[ft]|=128,function su(a,c){let d;if(null!=a&&null!=(d=a.destroyHooks))for(let _=0;_<d.length;_+=2){const b=c[d[_]];if(!(b instanceof xl)){const T=d[_+1];if(Array.isArray(T))for(let k=0;k<T.length;k+=2){const j=b[T[k]],G=T[k+1];Dr(4,j,G);try{G.call(j)}finally{Dr(5,j,G)}}else{Dr(4,b,T);try{T.call(b)}finally{Dr(5,b,T)}}}}}(a,c),function ec(a,c){const d=a.cleanup,_=c[Ns];let b=-1;if(null!==d)for(let T=0;T<d.length-1;T+=2)if("string"==typeof d[T]){const k=d[T+3];k>=0?_[b=k]():_[b=-k].unsubscribe(),T+=2}else{const k=_[b=d[T+1]];d[T].call(k)}if(null!==_){for(let T=b+1;T<_.length;T++)(0,_[T])();c[Ns]=null}}(a,c),1===c[bt].type&&c[zn].destroy();const d=c[Yr];if(null!==d&&Nr(c[kn])){d!==c[kn]&&jf(d,c);const _=c[Ts];null!==_&&_.detachView(a)}!function Ag(a){kf.delete(a[Ha])}(c)}}function Sc(a,c,d){return Uf(a,c.parent,d)}function Uf(a,c,d){let _=c;for(;null!==_&&40&_.type;)_=(c=_).parent;if(null===_)return d[dn];{const{componentOffset:b}=_;if(b>-1){const{encapsulation:T}=a.data[_.directiveStart+b];if(T===Ht.None||T===Ht.Emulated)return null}return jn(_,d)}}function ar(a,c,d,_,b){a.insertBefore(c,d,_,b)}function Ng(a,c,d){a.appendChild(c,d)}function Ep(a,c,d,_,b){null!==_?ar(a,c,d,_,b):Ng(a,c,d)}function Eh(a,c){return a.parentNode(c)}function Hf(a,c,d){return Dp(a,c,d)}function $f(a,c,d){return 40&a.type?jn(a,d):null}let Gf,Ap,kp,tl,Dp=$f;function Bg(a,c){Dp=a,Gf=c}function xd(a,c,d,_){const b=Sc(a,_,c),T=c[zn],j=Hf(_.parent||c[Mi],_,c);if(null!=b)if(Array.isArray(d))for(let G=0;G<d.length;G++)Ep(T,b,d[G],j,!1);else Ep(T,b,d,j,!1);void 0!==Gf&&Gf(T,_,c,d,b)}function Mp(a,c){if(null!==c){const d=c.type;if(3&d)return jn(c,a);if(4&d)return Zf(-1,a[c.index]);if(8&d){const _=c.child;if(null!==_)return Mp(a,_);{const b=a[c.index];return Nr(b)?Zf(-1,b):Bn(b)}}if(32&d)return Qn(c,a)()||Bn(a[c.index]);{const _=Ec(a,c);return null!==_?Array.isArray(_)?_[0]:Mp(qs(a[qr]),_):Mp(a,c.next)}}return null}function Ec(a,c){return null!==c?a[qr][Mi].projection[c.projection]:null}function Zf(a,c){const d=rr+a+1;if(d<c.length){const _=c[d],b=_[bt].firstChild;if(null!==b)return Mp(_,b)}return c[Go]}function Ip(a,c,d){const _=Eh(a,c);_&&function Gu(a,c,d,_){a.removeChild(c,d,_)}(a,_,c,d)}function au(a,c,d,_,b,T,k){for(;null!=d;){const j=_[d.index],G=d.type;if(k&&0===c&&(j&&is(Bn(j),_),d.flags|=2),32!=(32&d.flags))if(8&G)au(a,c,d.child,_,b,T,!1),xh(c,a,b,j,T);else if(32&G){const ne=Qn(d,_);let he;for(;he=ne();)xh(c,a,b,he,T);xh(c,a,b,j,T)}else 16&G?Pp(a,c,_,d,b,T):xh(c,a,b,j,T);d=k?d.projectionNext:d.next}}function wd(a,c,d,_,b,T){au(d,_,a.firstChild,c,b,T,!1)}function Pp(a,c,d,_,b,T){const k=d[qr],G=k[Mi].projection[_.projection];if(Array.isArray(G))for(let ne=0;ne<G.length;ne++)xh(c,a,b,G[ne],T);else au(a,c,G,k[kn],b,T,!0)}function yi(a,c,d){""===d?a.removeAttribute(c,"class"):a.setAttribute(c,"class",d)}function Th(a,c,d){const{mergedAttrs:_,classes:b,styles:T}=d;null!==_&&p(a,c,_),null!==b&&yi(a,c,b),null!==T&&function Hg(a,c,d){a.setAttribute(c,"style",d)}(a,c,T)}function tc(){if(void 0===Ap&&(Ap=null,Vn.trustedTypes))try{Ap=Vn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Ap}function nc(a){return tc()?.createHTML(a)||a}function Lp(a,c,d){const _=xt(),b=Ki(),T=jn(b,_);if(2===b.type&&"iframe"===c.toLowerCase()){const k=T;throw k.src="",k.srcdoc=nc(""),Ip(_[zn],k),new fn(-910,!1)}return a}function _0(a){kp=a}function co(){return void 0!==kp?kp:typeof document<"u"?document:void 0}function Dh(){if(void 0===tl&&(tl=null,Vn.trustedTypes))try{tl=Vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return tl}function $g(a){return Dh()?.createHTML(a)||a}function qf(a){return Dh()?.createScript(a)||a}function Yf(a){return Dh()?.createScriptURL(a)||a}class Zu{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ui})`}}class Gg extends Zu{getTypeName(){return"HTML"}}class Zg extends Zu{getTypeName(){return"Style"}}class Op extends Zu{getTypeName(){return"Script"}}class Kf extends Zu{getTypeName(){return"URL"}}class Cd extends Zu{getTypeName(){return"ResourceURL"}}function bs(a){return a instanceof Zu?a.changingThisBreaksApplicationSecurity:a}function vi(a,c){const d=Tc(a);if(null!=d&&d!==c){if("ResourceURL"===d&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${d} (see ${Ui})`)}return d===c}function Tc(a){return a instanceof Zu&&a.getTypeName()||null}function tv(a){return new Gg(a)}function lu(a){return new Zg(a)}function nv(a){return new Op(a)}function Sd(a){return new Kf(a)}function Qf(a){return new Cd(a)}function Xf(a){const c=new Ed(a);return function Mh(){try{return!!(new window.DOMParser).parseFromString(nc(""),"text/html")}catch{return!1}}()?new Rp(c):c}class Rp{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const d=(new window.DOMParser).parseFromString(nc(c),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(c):(d.removeChild(d.firstChild),d)}catch{return null}}}class Ed{constructor(c){this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(c){const d=this.inertDocument.createElement("template");return d.innerHTML=nc(c),d}}const Ur=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Td(a){return(a=String(a)).match(Ur)?a:"unsafe:"+a}function nl(a){const c={};for(const d of a.split(","))c[d]=!0;return c}function Dc(...a){const c={};for(const d of a)for(const _ in d)d.hasOwnProperty(_)&&(c[_]=!0);return c}const nr=nl("area,br,col,hr,img,wbr"),Dd=nl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Jf=nl("rp,rt"),Fp=Dc(nr,Dc(Dd,nl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dc(Jf,nl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dc(Jf,Dd)),em=nl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wg=Dc(em,nl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tm=nl("script,style,template");class Np{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let d=c.firstChild,_=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?_=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,_&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let b=this.checkClobberedElement(d,d.nextSibling);if(b){d=b;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(c){const d=c.nodeName.toLowerCase();if(!Fp.hasOwnProperty(d))return this.sanitizedSomething=!0,!tm.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const _=c.attributes;for(let b=0;b<_.length;b++){const T=_.item(b),k=T.name,j=k.toLowerCase();if(!Wg.hasOwnProperty(j)){this.sanitizedSomething=!0;continue}let G=T.value;em[j]&&(G=Td(G)),this.buf.push(" ",k,'="',zp(G),'"')}return this.buf.push(">"),!0}endElement(c){const d=c.nodeName.toLowerCase();Fp.hasOwnProperty(d)&&!nr.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(c){this.buf.push(zp(c))}checkClobberedElement(c,d){if(d&&(c.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return d}}const rv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wu=/([^\#-~ |!])/g;function zp(a){return a.replace(/&/g,"&amp;").replace(rv,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(Wu,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ih;function hu(a,c){let d=null;try{Ih=Ih||Xf(a);let _=c?String(c):"";d=Ih.getInertBodyElement(_);let b=5,T=_;do{if(0===b)throw new Error("Failed to sanitize html because the input is unstable");b--,_=T,T=d.innerHTML,d=Ih.getInertBodyElement(_)}while(_!==T);return nc((new Np).sanitizeChildren(Md(d)||d))}finally{if(d){const _=Md(d)||d;for(;_.firstChild;)_.removeChild(_.firstChild)}}}function Md(a){return"content"in a&&function nm(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Lr=(()=>((Lr=Lr||{})[Lr.NONE=0]="NONE",Lr[Lr.HTML=1]="HTML",Lr[Lr.STYLE=2]="STYLE",Lr[Lr.SCRIPT=3]="SCRIPT",Lr[Lr.URL=4]="URL",Lr[Lr.RESOURCE_URL=5]="RESOURCE_URL",Lr))();function Ph(a){const c=Ys();return c?$g(c.sanitize(Lr.HTML,a)||""):vi(a,"HTML")?$g(bs(a)):hu(co(),In(a))}function qu(a){const c=Ys();return c?c.sanitize(Lr.STYLE,a)||"":vi(a,"Style")?bs(a):In(a)}function Bp(a){const c=Ys();return c?c.sanitize(Lr.URL,a)||"":vi(a,"URL")?bs(a):Td(In(a))}function Id(a){const c=Ys();if(c)return Yf(c.sanitize(Lr.RESOURCE_URL,a)||"");if(vi(a,"ResourceURL"))return Yf(bs(a));throw new fn(904,!1)}function Vp(a){const c=Ys();if(c)return qf(c.sanitize(Lr.SCRIPT,a)||"");if(vi(a,"Script"))return qf(bs(a));throw new fn(905,!1)}function So(a){return nc(a[0])}function jp(a){return function ic(a){return tc()?.createScriptURL(a)||a}(a[0])}function rc(a,c,d){return function qg(a,c){return"src"===c&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===c&&("base"===a||"link"===a)?Id:Bp}(c,d)(a)}function Ys(){const a=xt();return a&&a[ta]}const Lh=new X("ENVIRONMENT_INITIALIZER"),du=new X("INJECTOR",-1),Yg=new X("INJECTOR_DEF_TYPES");class Hp{get(c,d=Yt){if(d===Yt){const _=new Error(`NullInjectorError: No provider for ${it(c)}!`);throw _.name="NullInjectorError",_}return d}}function im(a){return{\u0275providers:a}}function kh(...a){return{\u0275providers:il(0,a),\u0275fromNgModule:!0}}function il(a,...c){const d=[],_=new Set;let b;return Jt(c,T=>{const k=T;rl(k,d,[],_)&&(b||(b=[]),b.push(k))}),void 0!==b&&Pd(b,d),d}function Pd(a,c){for(let d=0;d<a.length;d++){const{providers:b}=a[d];Oh(b,T=>{c.push(T)})}}function rl(a,c,d,_){if(!(a=gt(a)))return!1;let b=null,T=Dn(a);const k=!T&&te(a);if(T||k){if(k&&!k.standalone)return!1;b=a}else{const G=a.ngModule;if(T=Dn(G),!T)return!1;b=G}const j=_.has(b);if(k){if(j)return!1;if(_.add(b),k.dependencies){const G="function"==typeof k.dependencies?k.dependencies():k.dependencies;for(const ne of G)rl(ne,c,d,_)}}else{if(!T)return!1;{if(null!=T.imports&&!j){let ne;_.add(b);try{Jt(T.imports,he=>{rl(he,c,d,_)&&(ne||(ne=[]),ne.push(he))})}finally{}void 0!==ne&&Pd(ne,c)}if(!j){const ne=Ea(b)||(()=>new b);c.push({provide:b,useFactory:ne,deps:Vt},{provide:Yg,useValue:b,multi:!0},{provide:Lh,useValue:()=>ve(b),multi:!0})}const G=T.providers;null==G||j||Oh(G,he=>{c.push(he)})}}return b!==a&&void 0!==a.providers}function Oh(a,c){for(let d of a)ni(d)&&(d=d.\u0275providers),Array.isArray(d)?Oh(d,c):c(d)}const rm=Ye({provide:String,useValue:Ye});function $p(a){return null!==a&&"object"==typeof a&&rm in a}function ma(a){return"function"==typeof a}const Ld=new X("Set Injector scope."),Gp={},ov={};let Fh;function Nh(){return void 0===Fh&&(Fh=new Hp),Fh}class Yu{}class kd extends Yu{get destroyed(){return this._destroyed}constructor(c,d,_,b){super(),this.parent=d,this.source=_,this.scopes=b,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Il(c,k=>this.processProvider(k)),this.records.set(du,pu(void 0,this)),b.has("environment")&&this.records.set(Yu,pu(void 0,this));const T=this.records.get(Ld);null!=T&&"string"==typeof T.value&&this.scopes.add(T.value),this.injectorDefTypes=new Set(this.get(Yg.multi,Vt,Mn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();for(const c of this._onDestroyHooks)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(c){this._onDestroyHooks.push(c)}runInContext(c){this.assertNotDestroyed();const d=oe(this),_=yn(void 0);try{return c()}finally{oe(d),yn(_)}}get(c,d=Yt,_=Mn.Default){this.assertNotDestroyed(),_=Oe(_);const b=oe(this),T=yn(void 0);try{if(!(_&Mn.SkipSelf)){let j=this.records.get(c);if(void 0===j){const G=function Zp(a){return"function"==typeof a||"object"==typeof a&&a instanceof X}(c)&&Ke(c);j=G&&this.injectableDefInScope(G)?pu(Od(c),Gp):null,this.records.set(c,j)}if(null!=j)return this.hydrate(c,j)}return(_&Mn.Self?Nh():this.parent).get(c,d=_&Mn.Optional&&d===Yt?null:d)}catch(k){if("NullInjectorError"===k.name){if((k[ei]=k[ei]||[]).unshift(it(c)),b)throw k;return function ut(a,c,d,_){const b=a[ei];throw c[we]&&b.unshift(c[we]),a.message=function Xe(a,c,d,_=null){a=a&&"\n"===a.charAt(0)&&a.charAt(1)==Fs?a.slice(2):a;let b=it(c);if(Array.isArray(c))b=c.map(it).join(" -> ");else if("object"==typeof c){let T=[];for(let k in c)if(c.hasOwnProperty(k)){let j=c[k];T.push(k+":"+("string"==typeof j?JSON.stringify(j):it(j)))}b=`{${T.join(", ")}}`}return`${d}${_?"("+_+")":""}[${b}]: ${a.replace(Nn,"\n  ")}`}("\n"+a.message,b,d,_),a[bo]=b,a[ei]=null,a}(k,c,"R3InjectorError",this.source)}throw k}finally{yn(T),oe(b)}}resolveInjectorInitializers(){const c=oe(this),d=yn(void 0);try{const _=this.get(Lh.multi,Vt,Mn.Self);for(const b of _)b()}finally{oe(c),yn(d)}}toString(){const c=[],d=this.records;for(const _ of d.keys())c.push(it(_));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fn(205,!1)}processProvider(c){let d=ma(c=gt(c))?c:gt(c&&c.provide);const _=function Qg(a){return $p(a)?pu(void 0,a.useValue):pu(om(a),Gp)}(c);if(ma(c)||!0!==c.multi)this.records.get(d);else{let b=this.records.get(d);b||(b=pu(void 0,Gp,!0),b.factory=()=>Le(b.multi),this.records.set(d,b)),d=c,b.multi.push(c)}this.records.set(d,_)}hydrate(c,d){return d.value===Gp&&(d.value=ov,d.value=d.factory()),"object"==typeof d.value&&d.value&&function Bh(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(c){if(!c.providedIn)return!1;const d=gt(c.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}}function Od(a){const c=Ke(a),d=null!==c?c.factory:Ea(a);if(null!==d)return d;if(a instanceof X)throw new fn(204,!1);if(a instanceof Function)return function zh(a){const c=a.length;if(c>0)throw mn(c,"?"),new fn(204,!1);const d=function kt(a){const c=a&&(a[an]||a[kr]);return c?(function xi(a){if(a.hasOwnProperty("name"))return a.name;(""+a).match(/^function\s*([^\s(]+)/)}(a),c):null}(a);return null!==d?()=>d.factory(a):()=>new a}(a);throw new fn(204,!1)}function om(a,c,d){let _;if(ma(a)){const b=gt(a);return Ea(b)||Od(b)}if($p(a))_=()=>gt(a.useValue);else if(function Ml(a){return!(!a||!a.useFactory)}(a))_=()=>a.useFactory(...Le(a.deps||[]));else if(function Rh(a){return!(!a||!a.useExisting)}(a))_=()=>ve(gt(a.useExisting));else{const b=gt(a&&(a.useClass||a.provide));if(!function sm(a){return!!a.deps}(a))return Ea(b)||Od(b);_=()=>new b(...Le(a.deps))}return _}function pu(a,c,d=!1){return{factory:a,value:c,multi:d?[]:void 0}}function Il(a,c){for(const d of a)Array.isArray(d)?Il(d,c):d&&ni(d)?Il(d.\u0275providers,c):c(d)}class Ku{}class Vh{}class e_{resolveComponentFactory(c){throw function Xg(a){const c=Error(`No component factory found for ${it(a)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=a,c}(c)}}let Qu=(()=>{class a{}return a.NULL=new e_,a})();function Pl(){return fu(Kr(),xt())}function fu(a,c){return new mu(jn(a,c))}let mu=(()=>{class a{constructor(d){this.nativeElement=d}}return a.__NG_ELEMENT_ID__=Pl,a})();function am(a){return a instanceof mu?a.nativeElement:a}class Rd{}let Wp=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function t_(){const a=xt(),d=so(Kr().index,a);return(oo(d)?d:a)[zn]}(),a})(),gu=(()=>{class a{}return a.\u0275prov=Wi({token:a,providedIn:"root",factory:()=>null}),a})();class Fd{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const lm=new Fd("15.2.7"),_u={},Nd="ngOriginalError";function yu(a){return a[Nd]}class Xu{constructor(){this._console=console}handleError(c){const d=this._findOriginalError(c);this._console.error("ERROR",c),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(c){let d=c&&yu(c);for(;d&&yu(d);)d=yu(d);return d||null}}function cm(a){return a.ownerDocument.defaultView}function i_(a){return a.ownerDocument}function Bd(a){return a.ownerDocument.body}function Mc(a){return a instanceof Function?a():a}function eh(a,c,d){let _=a.length;for(;;){const b=a.indexOf(c,d);if(-1===b)return b;if(0===b||a.charCodeAt(b-1)<=32){const T=c.length;if(b+T===_||a.charCodeAt(b+T)<=32)return b}d=b+1}}const Vd="ng-template";function Ks(a,c,d){let _=0,b=!0;for(;_<a.length;){let T=a[_++];if("string"==typeof T&&b){const k=a[_++];if(d&&"class"===T&&-1!==eh(k.toLowerCase(),c,0))return!0}else{if(1===T){for(;_<a.length&&"string"==typeof(T=a[_++]);)if(T.toLowerCase()===c)return!0;return!1}"number"==typeof T&&(b=!1)}}return!1}function qp(a){return 4===a.type&&a.value!==Vd}function vu(a,c,d){return c===(4!==a.type||d?a.value:Vd)}function Yp(a,c,d){let _=4;const b=a.attrs||[],T=function uv(a){for(let c=0;c<a.length;c++)if(x(a[c]))return c;return a.length}(b);let k=!1;for(let j=0;j<c.length;j++){const G=c[j];if("number"!=typeof G){if(!k)if(4&_){if(_=2|1&_,""!==G&&!vu(a,G,d)||""===G&&1===c.length){if(ya(_))return!1;k=!0}}else{const ne=8&_?G:c[++j];if(8&_&&null!==a.attrs){if(!Ks(a.attrs,ne,d)){if(ya(_))return!1;k=!0}continue}const Ee=s_(8&_?"class":G,b,qp(a),d);if(-1===Ee){if(ya(_))return!1;k=!0;continue}if(""!==ne){let He;He=Ee>T?"":b[Ee+1].toLowerCase();const ot=8&_?He:null;if(ot&&-1!==eh(ot,ne,0)||2&_&&ne!==He){if(ya(_))return!1;k=!0}}}}else{if(!k&&!ya(_)&&!ya(G))return!1;if(k&&ya(G))continue;k=!1,_=G|1&_}}return ya(_)||k}function ya(a){return 0==(1&a)}function s_(a,c,d,_){if(null===c)return-1;let b=0;if(_||!d){let T=!1;for(;b<c.length;){const k=c[b];if(k===a)return b;if(3===k||6===k)T=!0;else{if(1===k||2===k){let j=c[++b];for(;"string"==typeof j;)j=c[++b];continue}if(4===k)break;if(0===k){b+=4;continue}}b+=T?1:2}return-1}return function Al(a,c){let d=a.indexOf(4);if(d>-1)for(d++;d<a.length;){const _=a[d];if("number"==typeof _)return-1;if(_===c)return d;d++}return-1}(c,a)}function jd(a,c,d=!1){for(let _=0;_<c.length;_++)if(Yp(a,c[_],d))return!0;return!1}function uo(a,c){e:for(let d=0;d<c.length;d++){const _=c[d];if(a.length===_.length){for(let b=0;b<a.length;b++)if(a[b]!==_[b])continue e;return!0}}return!1}function Ic(a,c){return a?":not("+c.trim()+")":c}function um(a){let c=a[0],d=1,_=2,b="",T=!1;for(;d<a.length;){let k=a[d];if("string"==typeof k)if(2&_){const j=a[++d];b+="["+k+(j.length>0?'="'+j+'"':"")+"]"}else 8&_?b+="."+k:4&_&&(b+=" "+k);else""!==b&&!ya(k)&&(c+=Ic(T,b),b=""),_=k,T=T||!ya(_);d++}return""!==b&&(c+=Ic(T,b)),c}const oi={};function a_(a){hm(ki(),xt(),Vr()+a,!1)}function hm(a,c,d,_){if(!_)if(3==(3&c[ft])){const T=a.preOrderCheckHooks;null!==T&&Rt(c,T,d)}else{const T=a.preOrderHooks;null!==T&&Ra(c,T,0,d)}yl(d)}const dm={\u0275\u0275defineInjectable:Wi,\u0275\u0275defineInjector:Br,\u0275\u0275inject:ve,\u0275\u0275invalidFactoryDep:De,resolveForwardRef:gt};const l_=Ye({provide:String,useValue:Ye});function pm(a){return void 0!==a.useClass}function Ud(a){return void 0!==a.useFactory}const c_=R("Injectable",void 0,void 0,void 0,(a,c)=>function hv(a,c){let d=null,_=null;a.hasOwnProperty(an)||Object.defineProperty(a,an,{get:()=>(null===d&&(d=Je().compileInjectable(dm,`ng:///${a.name}/\u0275prov.js`,function xu(a,c){const d=c||{providedIn:null},_={name:a.name,type:a,typeArgumentCount:0,providedIn:d.providedIn};return(pm(d)||Ud(d))&&void 0!==d.deps&&(_.deps=Na(d.deps)),pm(d)?_.useClass=d.useClass:function fm(a){return l_ in a}(d)?_.useValue=d.useValue:Ud(d)?_.useFactory=d.useFactory:function bu(a){return void 0!==a.useExisting}(d)&&(_.useExisting=d.useExisting),_}(a,c))),d)}),a.hasOwnProperty(ir)||Object.defineProperty(a,ir,{get:()=>{if(null===_){const b=Je();_=b.compileFactory(dm,`ng:///${a.name}/\u0275fac.js`,{name:a.name,type:a,typeArgumentCount:0,deps:Ar(a),target:b.FactoryTarget.Injectable})}return _},configurable:!0})}(a,c));function Hd(a,c=null,d=null,_){const b=$d(a,c,d,_);return b.resolveInjectorInitializers(),b}function $d(a,c=null,d=null,_,b=new Set){const T=[d||Vt,kh(a)];return _=_||("object"==typeof a?void 0:it(a)),new kd(T,c||Nh(),_||null,b)}let ol=(()=>{class a{static create(d,_){if(Array.isArray(d))return Hd({name:""},_,d,"");{const b=d.name??"";return Hd({name:b},d.parent,d.providers,b)}}}return a.THROW_IF_NOT_FOUND=Yt,a.NULL=new Hp,a.\u0275prov=Wi({token:a,providedIn:"any",factory:()=>ve(du)}),a.__NG_ELEMENT_ID__=-1,a})();function Gd(a){return a.length>1?" ("+function mm(a){const c=[];for(let d=0;d<a.length;++d){if(c.indexOf(a[d])>-1)return c.push(a[d]),c;c.push(a[d])}return c}(a.slice().reverse()).map(_=>it(_.token)).join(" -> ")+")":""}function Zd(a,c,d,_){const b=[c],T=d(b),k=_?function ga(a,c){const d=`${a} caused by: ${c instanceof Error?c.message:c}`,_=Error(d);return _[Nd]=c,_}(T,_):Error(T);return k.addKey=dv,k.keys=b,k.injectors=[a],k.constructResolvingMessage=d,k[Nd]=_,k}function dv(a,c){this.injectors.push(a),this.keys.push(c),this.message=this.constructResolvingMessage(this.keys)}function w(a,c){const d=[];for(let _=0,b=c.length;_<b;_++){const T=c[_];d.push(T&&0!=T.length?T.map(it).join(" "):"?")}return Error("Cannot resolve all parameters for '"+it(a)+"'("+d.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+it(a)+"' is decorated with Injectable.")}function I(a,c){return Error(`Cannot mix multi providers and regular providers, got: ${a} ${c}`)}class O{constructor(c,d){if(this.token=c,this.id=d,!c)throw new fn(208,!1);this.displayName=it(this.token)}static get(c){return $.get(gt(c))}static get numberOfKeys(){return $.numberOfKeys}}class B{constructor(){this._allKeys=new Map}get(c){if(c instanceof O)return c;if(this._allKeys.has(c))return this._allKeys.get(c);const d=new O(c,O.numberOfKeys);return this._allKeys.set(c,d),d}get numberOfKeys(){return this._allKeys.size}}const $=new B;class Y{constructor(c,d,_){this.key=c,this.optional=d,this.visibility=_}static fromKey(c){return new Y(c,!1,null)}}const ee=[];class re{constructor(c,d,_){this.key=c,this.resolvedFactories=d,this.multiProvider=_,this.resolvedFactory=this.resolvedFactories[0]}}class ce{constructor(c,d){this.factory=c,this.dependencies=d}}function de(a){let c,d;if(a.useClass){const _=gt(a.useClass);c=Oo().factory(_),d=qe(_)}else a.useExisting?(c=_=>_,d=[Y.fromKey(O.get(a.useExisting))]):a.useFactory?(c=a.useFactory,d=function Fe(a,c){if(c){const d=c.map(_=>[_]);return c.map(_=>rt(a,_,d))}return qe(a)}(a.useFactory,a.deps)):(c=()=>a.useValue,d=ee);return new ce(c,d)}function _e(a){return new re(O.get(a.provide),[de(a)],a.multi||!1)}function Ie(a){const _=function ke(a,c){for(let d=0;d<a.length;d++){const _=a[d],b=c.get(_.key.id);if(b){if(_.multiProvider!==b.multiProvider)throw I(b,_);if(_.multiProvider)for(let T=0;T<_.resolvedFactories.length;T++)b.resolvedFactories.push(_.resolvedFactories[T]);else c.set(_.key.id,_)}else{let T;T=_.multiProvider?new re(_.key,_.resolvedFactories.slice(),_.multiProvider):_,c.set(_.key.id,T)}}return c}($e(a,[]).map(_e),new Map);return Array.from(_.values())}function $e(a,c){return a.forEach(d=>{if(d instanceof pt)c.push({provide:d,useClass:d});else if(d&&"object"==typeof d&&void 0!==d.provide)c.push(d);else{if(!Array.isArray(d))throw function g(a){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${a}`)}(d);$e(d,c)}}),c}function qe(a){const c=Oo().parameters(a);if(!c)return[];if(c.some(d=>null==d))throw w(a,c);return c.map(d=>rt(a,d,c))}function rt(a,c,d){let _=null,b=!1;if(!Array.isArray(c))return mt(c instanceof wo?c.token:c,b,null);let T=null;for(let k=0;k<c.length;++k){const j=c[k];j instanceof pt?_=j:j instanceof wo?_=j.token:j instanceof Jr?b=!0:j instanceof Co||j instanceof _s?T=j:j instanceof X&&(_=j)}if(_=gt(_),null!=_)return mt(_,b,T);throw w(a,d)}function mt(a,c,d){return new Y(O.get(a),c,d)}const Ut={};class tn{static resolve(c){return Ie(c)}static resolveAndCreate(c,d){const _=tn.resolve(c);return tn.fromResolvedProviders(_,d)}static fromResolvedProviders(c,d){return new $t(c,d)}}let $t=(()=>{class a{constructor(d,_){this._constructionCounter=0,this._providers=d,this.parent=_||null;const b=d.length;this.keyIds=[],this.objs=[];for(let T=0;T<b;T++)this.keyIds[T]=d[T].key.id,this.objs[T]=Ut}get(d,_=Yt){return this._getByKey(O.get(d),null,_)}resolveAndCreateChild(d){const _=tn.resolve(d);return this.createChildFromResolved(_)}createChildFromResolved(d){const _=new a(d);return _.parent=this,_}resolveAndInstantiate(d){return this.instantiateResolved(tn.resolve([d])[0])}instantiateResolved(d){return this._instantiateProvider(d)}getProviderAtIndex(d){if(d<0||d>=this._providers.length)throw function M(a){return Error(`Index ${a} is out-of-bounds.`)}(d);return this._providers[d]}_new(d){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw function o(a,c){return Zd(a,c,function(d){return`Cannot instantiate cyclic dependency!${Gd(d)}`})}(this,d.key);return this._instantiateProvider(d)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(d){if(d.multiProvider){const _=[];for(let b=0;b<d.resolvedFactories.length;++b)_[b]=this._instantiate(d,d.resolvedFactories[b]);return _}return this._instantiate(d,d.resolvedFactories[0])}_instantiate(d,_){const b=_.factory;let T,k;try{T=_.dependencies.map(j=>this._getByReflectiveDependency(j))}catch(j){throw j.addKey&&j.addKey(this,d.key),j}try{k=b(...T)}catch(j){throw function h(a,c,d,_){return Zd(a,_,function(b){const T=it(b[0].token);return`${c.message}: Error during instantiation of ${T}!${Gd(b)}.`},c)}(this,j,0,d.key)}return k}_getByReflectiveDependency(d){return this._getByKey(d.key,d.visibility,d.optional?null:Yt)}_getByKey(d,_,b){return d===a.INJECTOR_KEY?this:_ instanceof Co?this._getByKeySelf(d,b):this._getByKeyDefault(d,b,_)}_getObjByKeyId(d){for(let _=0;_<this.keyIds.length;_++)if(this.keyIds[_]===d)return this.objs[_]===Ut&&(this.objs[_]=this._new(this._providers[_])),this.objs[_];return Ut}_throwOrNull(d,_){if(_!==Yt)return _;throw function u(a,c){return Zd(a,c,function(d){return`No provider for ${it(d[0].token)}!${Gd(d)}`})}(this,d)}_getByKeySelf(d,_){const b=this._getObjByKeyId(d.id);return b!==Ut?b:this._throwOrNull(d,_)}_getByKeyDefault(d,_,b){let T;for(T=b instanceof _s?this.parent:this;T instanceof a;){const k=T,j=k._getObjByKeyId(d.id);if(j!==Ut)return j;T=k.parent}return null!==T?T.get(d.token,_):this._throwOrNull(d,_)}get displayName(){return`ReflectiveInjector(providers: [${function jt(a,c){const d=[];for(let _=0;_<a._providers.length;++_)d[_]=c(a.getProviderAtIndex(_));return d}(this,_=>' "'+_.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}return a.INJECTOR_KEY=O.get(ol),a})();function Pt(a,c=Mn.Default){const d=xt();return null===d?ve(a,c):sr(Kr(),d,gt(a),c)}function nn(){throw new Error("invalid")}function Et(a,c){const d=a.contentQueries;if(null!==d)for(let _=0;_<d.length;_+=2){const T=d[_+1];if(-1!==T){const k=a.data[T];Kc(d[_]),k.contentQueries(2,c[T],T)}}}function si(a,c,d,_,b,T,k,j,G,ne,he){const Ee=c.blueprint.slice();return Ee[dn]=b,Ee[ft]=76|_,(null!==he||a&&1024&a[ft])&&(Ee[ft]|=1024),gc(Ee),Ee[kn]=Ee[Es]=a,Ee[Yi]=d,Ee[fr]=k||a&&a[fr],Ee[zn]=j||a&&a[zn],Ee[ta]=G||a&&a[ta]||null,Ee[hs]=ne||a&&a[hs]||null,Ee[Mi]=T,Ee[Ha]=function Of(){return ou++}(),Ee[Bl]=he,Ee[qr]=2==c.type?a[qr]:Ee,Ee}function Qi(a,c,d,_,b){let T=a.data[c];if(null===T)T=gr(a,c,d,_,b),function Zl(){return Pn.lFrame.inI18n}()&&(T.flags|=32);else if(64&T.type){T.type=d,T.value=_,T.attrs=b;const k=Gl();T.injectorIndex=null===k?-1:k.injectorIndex}return gi(T,!0),T}function gr(a,c,d,_,b){const T=qa(),k=Bs(),G=a.data[c]=function po(a,c,d,_,b,T){return{type:d,index:_,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:b,attrs:T,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,k?T:T&&T.parent,d,c,_,b);return null===a.firstChild&&(a.firstChild=G),null!==T&&(k?null==T.child&&null!==G.parent&&(T.child=G):null===T.next&&(T.next=G,G.prev=T)),G}function Hr(a,c,d,_){if(0===d)return-1;const b=c.length;for(let T=0;T<d;T++)c.push(_),a.blueprint.push(_),a.data.push(null);return b}function xs(a,c,d){js(c);try{const _=a.viewQuery;null!==_&&Cs(1,_,d);const b=a.template;null!==b&&no(a,c,b,1,d),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Et(a,c),a.staticViewQueries&&Cs(2,a.viewQuery,d);const T=a.components;null!==T&&function un(a,c){for(let d=0;d<c.length;d++)ks(a,c[d])}(c,T)}catch(_){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),_}finally{c[ft]&=-5,la()}}function Ro(a,c,d,_){const b=c[ft];if(128!=(128&b)){js(c);try{gc(c),Aa(a.bindingStartIndex),null!==d&&no(a,c,d,2,_);const k=3==(3&b);if(k){const ne=a.preOrderCheckHooks;null!==ne&&Rt(c,ne,null)}else{const ne=a.preOrderHooks;null!==ne&&Ra(c,ne,0,null),ua(c,0)}if(function mv(a){for(let c=Rg(a);null!==c;c=xp(c)){if(!c[$n])continue;const d=c[ia];for(let _=0;_<d.length;_++){const b=d[_];512&b[ft]||Hl(b[kn],1),b[ft]|=512}}}(c),function x0(a){for(let c=Rg(a);null!==c;c=xp(c))for(let d=rr;d<c.length;d++){const _=c[d],b=_[bt];Za(_)&&Ro(b,_,b.template,_[Yi])}}(c),null!==a.contentQueries&&Et(a,c),k){const ne=a.contentCheckHooks;null!==ne&&Rt(c,ne)}else{const ne=a.contentHooks;null!==ne&&Ra(c,ne,1),ua(c,1)}!function Ft(a,c){const d=a.hostBindingOpCodes;if(null!==d)try{for(let _=0;_<d.length;_++){const b=d[_];if(b<0)yl(~b);else{const T=b,k=d[++_],j=d[++_];Ou(k,T),j(2,c[T])}}}finally{yl(-1)}}(a,c);const j=a.components;null!==j&&function Sn(a,c){for(let d=0;d<c.length;d++)ym(a,c[d])}(c,j);const G=a.viewQuery;if(null!==G&&Cs(2,G,_),k){const ne=a.viewCheckHooks;null!==ne&&Rt(c,ne)}else{const ne=a.viewHooks;null!==ne&&Ra(c,ne,2),ua(c,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),c[ft]&=-41,512&c[ft]&&(c[ft]&=-513,Hl(c[kn],-1))}finally{la()}}}function no(a,c,d,_,b){const T=Vr(),k=2&_;try{yl(-1),k&&c.length>er&&hm(a,c,er,!1),Dr(k?2:0,b),d(_,b)}finally{yl(T),Dr(k?3:1,b)}}function Eo(a,c,d){if($a(c)){const b=c.directiveEnd;for(let T=c.directiveStart;T<b;T++){const k=a.data[T];k.contentQueries&&k.contentQueries(1,d[T],T)}}}function Fo(a,c,d){dd()&&(function Ps(a,c,d,_){const b=d.directiveStart,T=d.directiveEnd;Ao(d)&&function u_(a,c,d){const _=jn(c,a),b=ws(d),T=a[fr],k=kc(a,si(a,b,null,d.onPush?32:16,_,c,T,T.createRenderer(_,d),null,null,null));a[c.index]=k}(c,d,a.data[b+d.componentOffset]),a.firstCreatePass||da(d,c),is(_,c);const k=d.initialInputs;for(let j=b;j<T;j++){const G=a.data[j],ne=gs(c,a,j,d);is(ne,c),null!==k&&pv(0,j-b,ne,G,0,k),On(G)&&(so(d.index,c)[Yi]=gs(c,a,j,d))}}(a,c,d,jn(d,c)),64==(64&d.flags)&&As(a,c,d))}function os(a,c,d=jn){const _=c.localNames;if(null!==_){let b=c.index+1;for(let T=0;T<_.length;T+=2){const k=_[T+1],j=-1===k?d(c,a):a[k];a[b++]=j}}}function ws(a){const c=a.tView;return null===c||c.incompleteFirstPass?a.tView=io(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):c}function io(a,c,d,_,b,T,k,j,G,ne){const he=er+_,Ee=he+b,He=function ho(a,c){const d=[];for(let _=0;_<c;_++)d.push(_<a?null:oi);return d}(he,Ee),ot="function"==typeof ne?ne():ne;return He[bt]={type:a,blueprint:He,template:d,queries:null,viewQuery:j,declTNode:c,data:He.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:Ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof T?T():T,pipeRegistry:"function"==typeof k?k():k,firstChild:null,schemas:G,consts:ot,incompleteFirstPass:!1}}function ss(a,c,d,_){const b=kl(c);null===d?b.push(_):(b.push(d),a.firstCreatePass&&nh(a).push(_,b.length-1))}function as(a,c,d,_){for(let b in a)if(a.hasOwnProperty(b)){d=null===d?{}:d;const T=a[b];null===_?Is(d,c,b,T):_.hasOwnProperty(b)&&Is(d,c,_[b],T)}return d}function Is(a,c,d,_){a.hasOwnProperty(d)?a[d].push(c,_):a[d]=[c,_]}function lr(a,c,d,_,b,T,k,j){const G=jn(c,d);let he,ne=c.inputs;!j&&null!=ne&&(he=ne[_])?(bm(a,d,he,_,b),Ao(c)&&function Wo(a,c){const d=so(c,a);16&d[ft]||(d[ft]|=32)}(d,c.index)):3&c.type&&(_=function bi(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(_),b=null!=k?k(b,c.value||"",_):b,T.setProperty(G,_,b))}function Ba(a,c,d,_){if(dd()){const b=null===_?null:{"":-1},T=function th(a,c){const d=a.directiveRegistry;let _=null,b=null;if(d)for(let T=0;T<d.length;T++){const k=d[T];if(jd(c,k.selectors,!1))if(_||(_=[]),On(k))if(null!==k.findHostDirectiveDefs){const j=[];b=b||new Map,k.findHostDirectiveDefs(k,j,b),_.unshift(...j,k),Kp(a,c,j.length)}else _.unshift(k),Kp(a,c,0);else b=b||new Map,k.findHostDirectiveDefs?.(k,_,b),_.push(k)}return null===_?null:[_,b]}(a,d);let k,j;null===T?k=j=null:[k,j]=T,null!==k&&sl(a,c,d,k,b,j),b&&function gm(a,c,d){if(c){const _=a.localNames=[];for(let b=0;b<c.length;b+=2){const T=d[c[b+1]];if(null==T)throw new fn(-301,!1);_.push(c[b],T)}}}(d,_,b)}d.mergedAttrs=U(d.mergedAttrs,d.attrs)}function sl(a,c,d,_,b,T){for(let ne=0;ne<_.length;ne++)Ql(da(d,c),a,_[ne].type);!function Lc(a,c,d){a.flags|=1,a.directiveStart=c,a.directiveEnd=c+d,a.providerIndexes=c}(d,a.data.length,_.length);for(let ne=0;ne<_.length;ne++){const he=_[ne];he.providersResolver&&he.providersResolver(he)}let k=!1,j=!1,G=Hr(a,c,_.length,null);for(let ne=0;ne<_.length;ne++){const he=_[ne];d.mergedAttrs=U(d.mergedAttrs,he.hostAttrs),Ls(a,d,c,G,he),_m(G,he,b),null!==he.contentQueries&&(d.flags|=4),(null!==he.hostBindings||null!==he.hostAttrs||0!==he.hostVars)&&(d.flags|=64);const Ee=he.type.prototype;!k&&(Ee.ngOnChanges||Ee.ngOnInit||Ee.ngDoCheck)&&((a.preOrderHooks??(a.preOrderHooks=[])).push(d.index),k=!0),!j&&(Ee.ngOnChanges||Ee.ngDoCheck)&&((a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(d.index),j=!0),G++}!function fo(a,c,d){const b=c.directiveEnd,T=a.data,k=c.attrs,j=[];let G=null,ne=null;for(let he=c.directiveStart;he<b;he++){const Ee=T[he],He=d?d.get(Ee):null,_t=He?He.outputs:null;G=as(Ee.inputs,he,G,He?He.inputs:null),ne=as(Ee.outputs,he,ne,_t);const Bt=null===G||null===k||qp(c)?null:h_(G,he,k);j.push(Bt)}null!==G&&(G.hasOwnProperty("class")&&(c.flags|=8),G.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=j,c.inputs=G,c.outputs=ne}(a,d,T)}function As(a,c,d){const _=d.directiveStart,b=d.directiveEnd,T=d.index,k=function sa(){return Pn.lFrame.currentDirectiveIndex}();try{yl(T);for(let j=_;j<b;j++){const G=a.data[j],ne=c[j];Wl(j),(null!==G.hostBindings||0!==G.hostVars||null!==G.hostAttrs)&&Ac(G,ne)}}finally{yl(-1),Wl(k)}}function Ac(a,c){null!==a.hostBindings&&a.hostBindings(1,c)}function Kp(a,c,d){c.componentOffset=d,(a.components??(a.components=[])).push(c.index)}function _m(a,c,d){if(d){if(c.exportAs)for(let _=0;_<c.exportAs.length;_++)d[c.exportAs[_]]=a;On(c)&&(d[""]=a)}}function Ls(a,c,d,_,b){a.data[_]=b;const T=b.factory||(b.factory=Ea(b.type)),k=new xl(T,On(b),Pt);a.blueprint[_]=k,d[_]=k,function Pc(a,c,d,_,b){const T=b.hostBindings;if(T){let k=a.hostBindingOpCodes;null===k&&(k=a.hostBindingOpCodes=[]);const j=~c.index;(function al(a){let c=a.length;for(;c>0;){const d=a[--c];if("number"==typeof d&&d<0)return d}return 0})(k)!=j&&k.push(j),k.push(d,_,T)}}(a,c,_,Hr(a,d,b.hostVars,oi),b)}function va(a,c,d,_,b,T){const k=jn(a,c);Qp(c[zn],k,T,a.value,d,_,b)}function Qp(a,c,d,_,b,T,k){if(null==T)a.removeAttribute(c,b,d);else{const j=null==k?In(T):k(T,_||"",b);a.setAttribute(c,b,j,d)}}function pv(a,c,d,_,b,T){const k=T[c];if(null!==k){const j=_.setInput;for(let G=0;G<k.length;){const ne=k[G++],he=k[G++],Ee=k[G++];null!==j?_.setInput(d,Ee,ne,he):d[he]=Ee}}}function h_(a,c,d){let _=null,b=0;for(;b<d.length;){const T=d[b];if(0!==T)if(5!==T){if("number"==typeof T)break;if(a.hasOwnProperty(T)){null===_&&(_=[]);const k=a[T];for(let j=0;j<k.length;j+=2)if(k[j]===c){_.push(T,k[j+1],d[b+1]);break}}b+=2}else b+=2;else b+=4}return _}function fv(a,c,d,_){return[a,!0,!1,c,null,0,_,d,null,null]}function ym(a,c){const d=so(c,a);if(Za(d)){const _=d[bt];48&d[ft]?Ro(_,d,_.template,d[Yi]):d[Xo]>0&&ba(d)}}function ba(a){for(let _=Rg(a);null!==_;_=xp(_))for(let b=rr;b<_.length;b++){const T=_[b];if(Za(T))if(512&T[ft]){const k=T[bt];Ro(k,T,k.template,T[Yi])}else T[Xo]>0&&ba(T)}const d=a[bt].components;if(null!==d)for(let _=0;_<d.length;_++){const b=so(d[_],a);Za(b)&&b[Xo]>0&&ba(b)}}function ks(a,c){const d=so(c,a),_=d[bt];(function d_(a,c){for(let d=c.length;d<a.blueprint.length;d++)c.push(a.blueprint[d])})(_,d),xs(_,d,d[Yi])}function kc(a,c){return a[ds]?a[hl][on]=c:a[ds]=c,a[hl]=c,c}function vm(a){for(;a;){a[ft]|=32;const c=qs(a);if(Vl(a)&&!c)return a;a=c}return null}function Wd(a,c,d,_=!0){const b=c[fr];b.begin&&b.begin();try{Ro(a,c,a.template,d)}catch(k){throw _&&gv(c,k),k}finally{b.end&&b.end()}}function Cs(a,c,d){Kc(0),c(a,d)}function kl(a){return a[Ns]||(a[Ns]=[])}function nh(a){return a.cleanup||(a.cleanup=[])}function ll(a,c,d){return(null===a||On(a))&&(d=function Li(a){for(;Array.isArray(a);){if("object"==typeof a[Uc])return a;a=a[dn]}return null}(d[c.index])),d[zn]}function gv(a,c){const d=a[hs],_=d?d.get(Xu,null):null;_&&_.handleError(c)}function bm(a,c,d,_,b){for(let T=0;T<d.length;){const k=d[T++],j=d[T++],G=c[k],ne=a.data[k];null!==ne.setInput?ne.setInput(G,b,_,j):G[j]=b}}function ih(a,c,d){const _=mc(c,a);Fg(a[zn],_,d)}function p_(a,c,d){let _=d?a.styles:null,b=d?a.classes:null,T=0;if(null!==c)for(let k=0;k<c.length;k++){const j=c[k];"number"==typeof j?T=j:1==T?b=Mt(b,j):2==T&&(_=Mt(_,j+": "+c[++k]+";"))}d?a.styles=_:a.stylesWithoutHost=_,d?a.classes=b:a.classesWithoutHost=b}function f_(a,c,d,_,b=!1){for(;null!==d;){const T=c[d.index];if(null!==T&&_.push(Bn(T)),Nr(T))for(let j=rr;j<T.length;j++){const G=T[j],ne=G[bt].firstChild;null!==ne&&f_(G[bt],G,ne,_)}const k=d.type;if(8&k)f_(a,c,d.child,_);else if(32&k){const j=Qn(d,c);let G;for(;G=j();)_.push(G)}else if(16&k){const j=Ec(c,d);if(Array.isArray(j))_.push(...j);else{const G=qs(c[qr]);f_(G[bt],G,j,_,!0)}}d=b?d.projectionNext:d.next}return _}class qd{get rootNodes(){const c=this._lView,d=c[bt];return f_(d,c,d.firstChild,[])}constructor(c,d){this._lView=c,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yi]}set context(c){this._lView[Yi]=c}get destroyed(){return 128==(128&this._lView[ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[kn];if(Nr(c)){const d=c[Ai],_=d?d.indexOf(this):-1;_>-1&&(Sp(c,_),zt(d,_))}this._attachedToViewContainer=!1}Ch(this._lView[bt],this._lView)}onDestroy(c){ss(this._lView[bt],this._lView,null,c)}markForCheck(){vm(this._cdRefInjectingView||this._lView)}detach(){this._lView[ft]&=-65}reattach(){this._lView[ft]|=64}detectChanges(){Wd(this._lView[bt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bd(a,c){wd(a,c,c[zn],2,null,null)}(this._lView[bt],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new fn(902,!1);this._appRef=c}}class CC extends qd{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;Wd(c[bt],c,c[Yi],!1)}checkNoChanges(){}get context(){return null}}class SC extends Qu{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const d=te(c);return new wm(d,this.ngModule)}}function EC(a){const c=[];for(let d in a)a.hasOwnProperty(d)&&c.push({propName:a[d],templateName:d});return c}class xm{constructor(c,d){this.injector=c,this.parentInjector=d}get(c,d,_){_=Oe(_);const b=this.injector.get(c,_u,_);return b!==_u||d===_u?b:this.parentInjector.get(c,d,_)}}class wm extends Vh{get inputs(){return EC(this.componentDef.inputs)}get outputs(){return EC(this.componentDef.outputs)}constructor(c,d){super(),this.componentDef=c,this.ngModule=d,this.componentType=c.type,this.selector=function Hh(a){return a.map(um).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!d}create(c,d,_,b){let T=(b=b||this.ngModule)instanceof Yu?b:b?.injector;T&&null!==this.componentDef.getStandaloneInjector&&(T=this.componentDef.getStandaloneInjector(T)||T);const k=T?new xm(c,T):c,j=k.get(Rd,null);if(null===j)throw new fn(407,!1);const G=k.get(gu,null),ne=j.createRenderer(null,this.componentDef),he=this.componentDef.selectors[0][0]||"div",Ee=_?function Zo(a,c,d){return a.selectRootElement(c,d===Ht.ShadowDom)}(ne,_,this.componentDef.encapsulation):Vf(ne,he,function SD(a){const c=a.toLowerCase();return"svg"===c?Ma:"math"===c?Wc:null}(he)),He=this.componentDef.onPush?288:272,ot=io(0,null,null,1,0,null,null,null,null,null),_t=si(null,ot,null,He,null,null,j,ne,G,k,null);let Bt,rn;js(_t);try{const _n=this.componentDef;let ti,Dt=null;_n.findHostDirectiveDefs?(ti=[],Dt=new Map,_n.findHostDirectiveDefs(_n,ti,Dt),ti.push(_n)):ti=[_n];const wi=function TC(a,c){const d=a[bt],_=er;return a[_]=c,Qi(d,_,2,"#host",null)}(_t,Ee),_o=function m_(a,c,d,_,b,T,k,j){const G=b[bt];!function DC(a,c,d,_){for(const b of a)c.mergedAttrs=U(c.mergedAttrs,b.hostAttrs);null!==c.mergedAttrs&&(p_(c,c.mergedAttrs,!0),null!==d&&Th(_,d,c))}(_,a,c,k);const ne=T.createRenderer(c,d),he=si(b,ws(d),null,d.onPush?32:16,b[a.index],a,T,ne,j||null,null,null);return G.firstCreatePass&&Kp(G,a,_.length-1),kc(b,he),b[a.index]=he}(wi,Ee,_n,ti,_t,j,ne);rn=vr(ot,er),Ee&&function IC(a,c,d,_){if(_)p(a,d,["ng-version",lm.full]);else{const{attrs:b,classes:T}=function $h(a){const c=[],d=[];let _=1,b=2;for(;_<a.length;){let T=a[_];if("string"==typeof T)2===b?""!==T&&c.push(T,a[++_]):8===b&&d.push(T);else{if(!ya(b))break;b=T}_++}return{attrs:c,classes:d}}(c.selectors[0]);b&&p(a,d,b),T&&T.length>0&&yi(a,d,T.join(" "))}}(ne,_n,Ee,_),void 0!==d&&function PC(a,c,d){const _=a.projection=[];for(let b=0;b<c.length;b++){const T=d[b];_.push(null!=T?Array.from(T):null)}}(rn,this.ngContentSelectors,d),Bt=function MC(a,c,d,_,b,T){const k=Kr(),j=b[bt],G=jn(k,b);sl(j,b,k,d,null,_);for(let he=0;he<d.length;he++)is(gs(b,j,k.directiveStart+he,k),b);As(j,b,k),G&&is(G,b);const ne=gs(b,j,k.directiveStart+k.componentOffset,k);if(a[Yi]=b[Yi]=ne,null!==T)for(const he of T)he(ne,c);return Eo(j,k,a),ne}(_o,_n,ti,Dt,_t,[w0]),xs(ot,_t,null)}finally{la()}return new _v(this.componentType,Bt,fu(rn,_t),_t,rn)}}class _v extends Ku{constructor(c,d,_,b,T){super(),this.location=_,this._rootLView=b,this._tNode=T,this.instance=d,this.hostView=this.changeDetectorRef=new CC(b),this.componentType=c}setInput(c,d){const _=this._tNode.inputs;let b;if(null!==_&&(b=_[c])){const T=this._rootLView;bm(T[bt],T,b,c,d),vm(so(this._tNode.index,T))}}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function w0(){const a=Kr();Oa(xt()[bt],a)}function yv(a){return Object.getPrototypeOf(a.prototype).constructor}function vv(a){let c=yv(a.type),d=!0;const _=[a];for(;c;){let b;if(On(a))b=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new fn(903,!1);b=c.\u0275dir}if(b){if(d){_.push(b);const k=a;k.inputs=g_(a.inputs),k.declaredInputs=g_(a.declaredInputs),k.outputs=g_(a.outputs);const j=b.hostBindings;j&&C0(a,j);const G=b.viewQuery,ne=b.contentQueries;if(G&&AC(a,G),ne&&LC(a,ne),ct(a.inputs,b.inputs),ct(a.declaredInputs,b.declaredInputs),ct(a.outputs,b.outputs),On(b)&&b.data.animation){const he=a.data;he.animation=(he.animation||[]).concat(b.data.animation)}}const T=b.features;if(T)for(let k=0;k<T.length;k++){const j=T[k];j&&j.ngInherit&&j(a),j===vv&&(d=!1)}}c=Object.getPrototypeOf(c)}!function TD(a){let c=0,d=null;for(let _=a.length-1;_>=0;_--){const b=a[_];b.hostVars=c+=b.hostVars,b.hostAttrs=U(b.hostAttrs,d=U(d,b.hostAttrs))}}(_)}function g_(a){return a===Qt?{}:a===Vt?[]:a}function AC(a,c){const d=a.viewQuery;a.viewQuery=d?(_,b)=>{c(_,b),d(_,b)}:c}function LC(a,c){const d=a.contentQueries;a.contentQueries=d?(_,b,T)=>{c(_,b,T),d(_,b,T)}:c}function C0(a,c){const d=a.hostBindings;a.hostBindings=d?(_,b)=>{c(_,b),d(_,b)}:c}const S0=["providersResolver"],DD=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function E0(a){let d,c=yv(a.type);d=On(a)?c.\u0275cmp:c.\u0275dir;const _=a;for(const b of S0)_[b]=d[b];if(On(d))for(const b of DD)_[b]=d[b]}function To(a){return c=>{c.findHostDirectiveDefs=ls,c.hostDirectives=(Array.isArray(a)?a:a()).map(d=>"function"==typeof d?{directive:gt(d),inputs:Qt,outputs:Qt}:{directive:gt(d.directive),inputs:T0(d.inputs),outputs:T0(d.outputs)})}}function ls(a,c,d){if(null!==a.hostDirectives)for(const _ of a.hostDirectives){const b=se(_.directive);kC(b.declaredInputs,_.inputs),ls(b,c,d),d.set(b,_),c.push(b)}}function T0(a){if(void 0===a||0===a.length)return Qt;const c={};for(let d=0;d<a.length;d+=2)c[a[d]]=a[d+1];return c}function kC(a,c){for(const d in c)c.hasOwnProperty(d)&&(a[c[d]]=a[d])}function Yd(a){return!!bv(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function bv(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function M0(a,c){const d=Yd(a),_=Yd(c);return d&&_?function OC(a,c,d){const _=a[Symbol.iterator](),b=c[Symbol.iterator]();for(;;){const T=_.next(),k=b.next();if(T.done&&k.done)return!0;if(T.done||k.done||!d(T.value,k.value))return!1}}(a,c,M0):!(d||!a||"object"!=typeof a&&"function"!=typeof a||_||!c||"object"!=typeof c&&"function"!=typeof c)||Object.is(a,c)}function Ol(a,c,d){return a[c]=d}function Xp(a,c){return a[c]}function No(a,c,d){return!Object.is(a[c],d)&&(a[c]=d,!0)}function qo(a,c,d,_){const b=No(a,c,d);return No(a,c+1,_)||b}function __(a,c,d,_,b){const T=qo(a,c,d,_);return No(a,c+2,b)||T}function cs(a,c,d,_,b,T){const k=qo(a,c,d,_);return qo(a,c+2,b,T)||k}function xv(a,c,d,_){const b=xt();return No(b,La(),c)&&(ki(),va(Ki(),b,a,c,d,_)),xv}function Jp(a,c){let d=!1,_=Jo();for(let T=1;T<c.length;T+=2)d=No(a,_++,c[T])||d;if(Aa(_),!d)return oi;let b=c[0];for(let T=1;T<c.length;T+=2)b+=In(c[T])+c[T+1];return b}function ef(a,c,d,_){return No(a,La(),d)?c+In(d)+_:oi}function cl(a,c,d,_,b,T){const j=qo(a,Jo(),d,b);return es(2),j?c+In(d)+_+In(b)+T:oi}function tf(a,c,d,_,b,T,k,j){const ne=__(a,Jo(),d,b,k);return es(3),ne?c+In(d)+_+In(b)+T+In(k)+j:oi}function Rl(a,c,d,_,b,T,k,j,G,ne){const Ee=cs(a,Jo(),d,b,k,G);return es(4),Ee?c+In(d)+_+In(b)+T+In(k)+j+In(G)+ne:oi}function Kd(a,c,d,_,b,T,k,j,G,ne,he,Ee){const He=Jo();let ot=cs(a,He,d,b,k,G);return ot=No(a,He+4,he)||ot,es(5),ot?c+In(d)+_+In(b)+T+In(k)+j+In(G)+ne+In(he)+Ee:oi}function zo(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot){const _t=Jo();let Bt=cs(a,_t,d,b,k,G);return Bt=qo(a,_t+4,he,He)||Bt,es(6),Bt?c+In(d)+_+In(b)+T+In(k)+j+In(G)+ne+In(he)+Ee+In(He)+ot:oi}function Fl(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt){const rn=Jo();let _n=cs(a,rn,d,b,k,G);return _n=__(a,rn+4,he,He,_t)||_n,es(7),_n?c+In(d)+_+In(b)+T+In(k)+j+In(G)+ne+In(he)+Ee+In(He)+ot+In(_t)+Bt:oi}function nf(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n){const ti=Jo();let Dt=cs(a,ti,d,b,k,G);return Dt=cs(a,ti+4,he,He,_t,rn)||Dt,es(8),Dt?c+In(d)+_+In(b)+T+In(k)+j+In(G)+ne+In(he)+Ee+In(He)+ot+In(_t)+Bt+In(rn)+_n:oi}function I0(a,c,d,_,b,T){const k=xt(),j=ef(k,c,d,_);return j!==oi&&va(Ki(),k,a,j,b,T),I0}function y_(a,c,d,_,b,T,k,j){const G=xt(),ne=cl(G,c,d,_,b,T);return ne!==oi&&va(Ki(),G,a,ne,k,j),y_}function v_(a,c,d,_,b,T,k,j,G,ne){const he=xt(),Ee=tf(he,c,d,_,b,T,k,j);return Ee!==oi&&va(Ki(),he,a,Ee,G,ne),v_}function b_(a,c,d,_,b,T,k,j,G,ne,he,Ee){const He=xt(),ot=Rl(He,c,d,_,b,T,k,j,G,ne);return ot!==oi&&va(Ki(),He,a,ot,he,Ee),b_}function x_(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot){const _t=xt(),Bt=Kd(_t,c,d,_,b,T,k,j,G,ne,he,Ee);return Bt!==oi&&va(Ki(),_t,a,Bt,He,ot),x_}function w_(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt){const rn=xt(),_n=zo(rn,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot);return _n!==oi&&va(Ki(),rn,a,_n,_t,Bt),w_}function C_(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n){const ti=xt(),Dt=Fl(ti,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt);return Dt!==oi&&va(Ki(),ti,a,Dt,rn,_n),C_}function S_(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n,ti,Dt){const wi=xt(),_o=nf(wi,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n);return _o!==oi&&va(Ki(),wi,a,_o,ti,Dt),S_}function E_(a,c,d,_){const b=xt(),T=Jp(b,c);return T!==oi&&va(Ki(),b,a,T,d,_),E_}function Cm(a){const c=gd(a);Wd(c[bt],c,a)}function wv(a,c,d,_,b,T,k,j){const G=xt(),ne=ki(),he=a+er,Ee=ne.firstCreatePass?function P0(a,c,d,_,b,T,k,j,G){const ne=c.consts,he=Qi(c,a,4,k||null,zs(ne,j));Ba(c,d,he,zs(ne,G)),Oa(c,he);const Ee=he.tView=io(2,he,_,b,T,c.directiveRegistry,c.pipeRegistry,null,c.schemas,ne);return null!==c.queries&&(c.queries.template(c,he),Ee.queries=c.queries.embeddedTView(he)),he}(he,ne,G,c,d,_,b,T,k):ne.data[he];gi(Ee,!1);const He=G[zn].createComment("");xd(ne,G,He,Ee),is(He,G),kc(G,G[he]=fv(He,G,He,Ee)),hr(Ee)&&Fo(ne,G,Ee),null!=k&&os(G,Ee,j)}function Cv(a,c,d,_){d>=a.data.length&&(a.data[d]=null,a.blueprint[d]=null),c[d]=_}function Sv(a){return Hi(function yc(){return Pn.lFrame.contextLView}(),er+a)}function Ev(a,c,d){const _=xt();return No(_,La(),c)&&lr(ki(),Ki(),_,a,c,_[zn],d,!1),Ev}function T_(a,c,d,_,b){const k=b?"class":"style";bm(a,d,c.inputs[k],k,_)}function rf(a,c,d,_){const b=xt(),T=ki(),k=er+a,j=b[zn],G=T.firstCreatePass?function A0(a,c,d,_,b,T){const k=c.consts,G=Qi(c,a,2,_,zs(k,b));return Ba(c,d,G,zs(k,T)),null!==G.attrs&&p_(G,G.attrs,!1),null!==G.mergedAttrs&&p_(G,G.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,G),G}(k,T,b,c,d,_):T.data[k],ne=b[k]=Vf(j,c,function Hs(){return Pn.lFrame.currentNamespace}()),he=hr(G);return gi(G,!0),Th(j,ne,G),32!=(32&G.flags)&&xd(T,b,ne,G),0===function zi(){return Pn.lFrame.elementDepthCount}()&&is(ne,b),function _p(){Pn.lFrame.elementDepthCount++}(),he&&(Fo(T,b,G),Eo(T,G,b)),null!==_&&os(b,G),rf}function Sm(){let a=Kr();Bs()?br():(a=a.parent,gi(a,!1));const c=a;!function gl(){Pn.lFrame.elementDepthCount--}();const d=ki();return d.firstCreatePass&&(Oa(d,a),$a(a)&&d.queries.elementEnd(a)),null!=c.classesWithoutHost&&function Cl(a){return 0!=(8&a.flags)}(c)&&T_(d,c,xt(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function Yl(a){return 0!=(16&a.flags)}(c)&&T_(d,c,xt(),c.stylesWithoutHost,!1),Sm}function Em(a,c,d,_){return rf(a,c,d,_),Sm(),Em}function Tm(a,c,d){const _=xt(),b=ki(),T=a+er,k=b.firstCreatePass?function L0(a,c,d,_,b){const T=c.consts,k=zs(T,_),j=Qi(c,a,8,"ng-container",k);return null!==k&&p_(j,k,!0),Ba(c,d,j,zs(T,b)),null!==c.queries&&c.queries.elementStart(c,j),j}(T,b,_,c,d):b.data[T];gi(k,!0);const j=_[T]=_[zn].createComment("");return xd(b,_,j,k),is(j,_),hr(k)&&(Fo(b,_,k),Eo(b,k,_)),null!=d&&os(_,k),Tm}function Dm(){let a=Kr();const c=ki();return Bs()?br():(a=a.parent,gi(a,!1)),c.firstCreatePass&&(Oa(c,a),$a(a)&&c.queries.elementEnd(a)),Dm}function Mm(a,c,d){return Tm(a,c,d),Dm(),Mm}function Im(){return xt()}function D_(a){return!!a&&"function"==typeof a.then}function Tv(a){return!!a&&"function"==typeof a.subscribe}const Dv=Tv;function Qs(a,c,d,_){const b=xt(),T=ki(),k=Kr();return FC(T,b,b[zn],k,a,c,_),Qs}function wu(a,c){const d=Kr(),_=xt(),b=ki();return FC(b,_,ll(xo(b.data),d,_),d,a,c),wu}function FC(a,c,d,_,b,T,k){const j=hr(_),ne=a.firstCreatePass&&nh(a),he=c[Yi],Ee=kl(c);let He=!0;if(3&_.type||k){const Bt=jn(_,c),rn=k?k(Bt):Bt,_n=Ee.length,ti=k?wi=>k(Bn(wi[_.index])):_.index;let Dt=null;if(!k&&j&&(Dt=function k0(a,c,d,_){const b=a.cleanup;if(null!=b)for(let T=0;T<b.length-1;T+=2){const k=b[T];if(k===d&&b[T+1]===_){const j=c[Ns],G=b[T+2];return j.length>G?j[G]:null}"string"==typeof k&&(T+=2)}return null}(a,c,b,_.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=T,Dt.__ngLastListenerFn__=T,He=!1;else{T=Os(_,c,he,T,!1);const wi=d.listen(rn,b,T);Ee.push(T,wi),ne&&ne.push(b,ti,_n,_n+1)}}else T=Os(_,c,he,T,!1);const ot=_.outputs;let _t;if(He&&null!==ot&&(_t=ot[b])){const Bt=_t.length;if(Bt)for(let rn=0;rn<Bt;rn+=2){const _o=c[_t[rn]][_t[rn+1]].subscribe(T),Mo=Ee.length;Ee.push(T,_o),ne&&ne.push(b,_.index,Mo,-(Mo+1))}}}function NC(a,c,d,_){try{return Dr(6,c,d),!1!==d(_)}catch(b){return gv(a,b),!1}finally{Dr(7,c,d)}}function Os(a,c,d,_,b){return function T(k){if(k===Function)return _;vm(a.componentOffset>-1?so(a.index,c):c);let G=NC(c,d,_,k),ne=T.__ngNextListenerFn__;for(;ne;)G=NC(c,d,ne,k)&&G,ne=ne.__ngNextListenerFn__;return b&&!1===G&&(k.preventDefault(),k.returnValue=!1),G}}function sf(a=1){return function ka(a){return(Pn.lFrame.contextLView=function yp(a,c){for(;a>0;)c=c[Es],a--;return c}(a,Pn.lFrame.contextLView))[Yi]}(a)}function Mv(a,c){let d=null;const _=function cv(a){const c=a.attrs;if(null!=c){const d=c.indexOf(5);if(!(1&d))return c[d+1]}return null}(a);for(let b=0;b<c.length;b++){const T=c[b];if("*"!==T){if(null===_?jd(a,T,!0):uo(_,T))return b}else d=b}return d}function Pm(a){const c=xt()[qr][Mi];if(!c.projection){const _=c.projection=mn(a?a.length:1,null),b=_.slice();let T=c.child;for(;null!==T;){const k=a?Mv(T,a):0;null!==k&&(b[k]?b[k].projectionNext=T:_[k]=T,b[k]=T),T=T.next}}}function O0(a,c=0,d){const _=xt(),b=ki(),T=Qi(b,er+a,16,null,d||null);null===T.projection&&(T.projection=c),br(),32!=(32&T.flags)&&function Vg(a,c,d){Pp(c[zn],0,c,d,Sc(a,d,c),Hf(d.parent||c[Mi],d,c))}(b,_,T)}function Am(a,c,d){return M_(a,"",c,"",d),Am}function M_(a,c,d,_,b){const T=xt(),k=ef(T,c,d,_);return k!==oi&&lr(ki(),Ki(),T,a,k,T[zn],b,!1),M_}function R0(a,c,d,_,b,T,k){const j=xt(),G=cl(j,c,d,_,b,T);return G!==oi&&lr(ki(),Ki(),j,a,G,j[zn],k,!1),R0}function F0(a,c,d,_,b,T,k,j,G){const ne=xt(),he=tf(ne,c,d,_,b,T,k,j);return he!==oi&&lr(ki(),Ki(),ne,a,he,ne[zn],G,!1),F0}function N0(a,c,d,_,b,T,k,j,G,ne,he){const Ee=xt(),He=Rl(Ee,c,d,_,b,T,k,j,G,ne);return He!==oi&&lr(ki(),Ki(),Ee,a,He,Ee[zn],he,!1),N0}function z0(a,c,d,_,b,T,k,j,G,ne,he,Ee,He){const ot=xt(),_t=Kd(ot,c,d,_,b,T,k,j,G,ne,he,Ee);return _t!==oi&&lr(ki(),Ki(),ot,a,_t,ot[zn],He,!1),z0}function B0(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t){const Bt=xt(),rn=zo(Bt,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot);return rn!==oi&&lr(ki(),Ki(),Bt,a,rn,Bt[zn],_t,!1),B0}function V0(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn){const _n=xt(),ti=Fl(_n,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt);return ti!==oi&&lr(ki(),Ki(),_n,a,ti,_n[zn],rn,!1),V0}function j0(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n,ti){const Dt=xt(),wi=nf(Dt,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n);return wi!==oi&&lr(ki(),Ki(),Dt,a,wi,Dt[zn],ti,!1),j0}function Iv(a,c,d){const _=xt(),b=Jp(_,c);return b!==oi&&lr(ki(),Ki(),_,a,b,_[zn],d,!1),Iv}function Lm(a,c){return a<<17|c<<2}function Zh(a){return a>>17&32767}function km(a){return 2|a}function Oc(a){return(131068&a)>>2}function af(a,c){return-131069&a|c<<2}function Qd(a){return 1|a}function Om(a,c,d,_,b){const T=a[d+1],k=null===c;let j=_?Zh(T):Oc(T),G=!1;for(;0!==j&&(!1===G||k);){const he=a[j+1];H0(a[j],c)&&(G=!0,a[j+1]=_?Qd(he):km(he)),j=_?Zh(he):Oc(he)}G&&(a[d+1]=_?km(T):Qd(T))}function H0(a,c){return null===a||null==c||(Array.isArray(a)?a[1]:a)===c||!(!Array.isArray(a)||"string"!=typeof c)&&$i(a,c)>=0}const us={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rm(a){return a.substring(us.key,us.keyEnd)}function Fm(a){return a.substring(us.value,us.valueEnd)}function jC(a,c){const d=us.textEnd;return d===c?-1:(c=us.keyEnd=function I_(a,c,d){for(;c<d&&a.charCodeAt(c)>32;)c++;return c}(a,us.key=c,d),Cu(a,c,d))}function UC(a,c){const d=us.textEnd;let _=us.key=Cu(a,c,d);return d===_?-1:(_=us.keyEnd=function Nm(a,c,d){let _;for(;c<d&&(45===(_=a.charCodeAt(c))||95===_||(-33&_)>=65&&(-33&_)<=90||_>=48&&_<=57);)c++;return c}(a,_,d),_=zm(a,_,d),_=us.value=Cu(a,_,d),_=us.valueEnd=function P_(a,c,d){let _=-1,b=-1,T=-1,k=c,j=k;for(;k<d;){const G=a.charCodeAt(k++);if(59===G)return j;34===G||39===G?j=k=G0(a,G,k,d):c===k-4&&85===T&&82===b&&76===_&&40===G?j=k=G0(a,41,k,d):G>32&&(j=k),T=b,b=_,_=-33&G}return j}(a,_,d),zm(a,_,d))}function Wh(a){us.key=0,us.keyEnd=0,us.value=0,us.valueEnd=0,us.textEnd=a.length}function Cu(a,c,d){for(;c<d&&a.charCodeAt(c)<=32;)c++;return c}function zm(a,c,d,_){return(c=Cu(a,c,d))<d&&c++,c}function G0(a,c,d,_){let b=-1,T=d;for(;T<_;){const k=a.charCodeAt(T++);if(k==c&&92!==b)return T;b=92==k&&92===b?0:k}throw new Error}function cf(a,c,d){return Nc(a,c,d,!1),cf}function Av(a,c){return Nc(a,c,null,!0),Av}function Rc(a){Su(GC,W0,a,!1)}function W0(a,c){for(let d=function $0(a){return Wh(a),UC(a,Cu(a,0,us.textEnd))}(c);d>=0;d=UC(c,d))GC(a,Rm(c),Fm(c))}function q0(a){Su(An,Fc,a,!0)}function Fc(a,c){for(let d=function AD(a){return Wh(a),jC(a,Cu(a,0,us.textEnd))}(c);d>=0;d=jC(c,d))An(a,Rm(c),!0)}function Nc(a,c,d,_){const b=xt(),T=ki(),k=es(2);T.firstUpdatePass&&A_(T,a,k,_),c!==oi&&No(b,k,c)&&uf(T,T.data[Vr()],b,b[zn],a,b[k+1]=function K0(a,c){return null==a||""===a||("string"==typeof c?a+=c:"object"==typeof a&&(a=it(bs(a)))),a}(c,d),_,k)}function Su(a,c,d,_){const b=ki(),T=es(2);b.firstUpdatePass&&A_(b,null,T,_);const k=xt();if(d!==oi&&No(k,T,d)){const j=b.data[Vr()];if(Jd(j,_)&&!Y0(b,T)){let G=_?j.classesWithoutHost:j.stylesWithoutHost;null!==G&&(d=Mt(G,d||"")),T_(b,j,k,d,_)}else!function ZC(a,c,d,_,b,T,k,j){b===oi&&(b=Vt);let G=0,ne=0,he=0<b.length?b[0]:null,Ee=0<T.length?T[0]:null;for(;null!==he||null!==Ee;){const He=G<b.length?b[G+1]:void 0,ot=ne<T.length?T[ne+1]:void 0;let Bt,_t=null;he===Ee?(G+=2,ne+=2,He!==ot&&(_t=Ee,Bt=ot)):null===Ee||null!==he&&he<Ee?(G+=2,_t=he):(ne+=2,_t=Ee,Bt=ot),null!==_t&&uf(a,c,d,_,_t,Bt,k,j),he=G<b.length?b[G]:null,Ee=ne<T.length?T[ne]:null}}(b,j,k,k[zn],k[T+1],k[T+1]=function $C(a,c,d){if(null==d||""===d)return Vt;const _=[],b=bs(d);if(Array.isArray(b))for(let T=0;T<b.length;T++)a(_,b[T],!0);else if("object"==typeof b)for(const T in b)b.hasOwnProperty(T)&&a(_,T,b[T]);else"string"==typeof b&&c(_,b);return _}(a,c,d),_,T)}}function Y0(a,c){return c>=a.expandoStartIndex}function A_(a,c,d,_){const b=a.data;if(null===b[d+1]){const T=b[Vr()],k=Y0(a,d);Jd(T,_)&&null===c&&!k&&(c=!1),c=function LD(a,c,d,_){const b=xo(a);let T=_?c.residualClasses:c.residualStyles;if(null===b)0===(_?c.classBindings:c.styleBindings)&&(d=Xd(d=L_(null,a,c,d,_),c.attrs,_),T=null);else{const k=c.directiveStylingLast;if(-1===k||a[k]!==b)if(d=L_(b,a,c,d,_),null===T){let G=function kD(a,c,d){const _=d?c.classBindings:c.styleBindings;if(0!==Oc(_))return a[Zh(_)]}(a,c,_);void 0!==G&&Array.isArray(G)&&(G=L_(null,a,c,G[1],_),G=Xd(G,c.attrs,_),function Lv(a,c,d,_){a[Zh(d?c.classBindings:c.styleBindings)]=_}(a,c,_,G))}else T=function HC(a,c,d){let _;const b=c.directiveEnd;for(let T=1+c.directiveStylingLast;T<b;T++)_=Xd(_,a[T].hostAttrs,d);return Xd(_,c.attrs,d)}(a,c,_)}return void 0!==T&&(_?c.residualClasses=T:c.residualStyles=T),d}(b,T,c,_),function Pv(a,c,d,_,b,T){let k=T?c.classBindings:c.styleBindings,j=Zh(k),G=Oc(k);a[_]=d;let he,ne=!1;if(Array.isArray(d)?(he=d[1],(null===he||$i(d,he)>0)&&(ne=!0)):he=d,b)if(0!==G){const He=Zh(a[j+1]);a[_+1]=Lm(He,j),0!==He&&(a[He+1]=af(a[He+1],_)),a[j+1]=function BC(a,c){return 131071&a|c<<17}(a[j+1],_)}else a[_+1]=Lm(j,0),0!==j&&(a[j+1]=af(a[j+1],_)),j=_;else a[_+1]=Lm(G,0),0===j?j=_:a[G+1]=af(a[G+1],_),G=_;ne&&(a[_+1]=km(a[_+1])),Om(a,he,_,!0),Om(a,he,_,!1),function VC(a,c,d,_,b){const T=b?a.residualClasses:a.residualStyles;null!=T&&"string"==typeof c&&$i(T,c)>=0&&(d[_+1]=Qd(d[_+1]))}(c,he,a,_,T),k=Lm(j,G),T?c.classBindings=k:c.styleBindings=k}(b,T,c,d,k,_)}}function L_(a,c,d,_,b){let T=null;const k=d.directiveEnd;let j=d.directiveStylingLast;for(-1===j?j=d.directiveStart:j++;j<k&&(T=c[j],_=Xd(_,T.hostAttrs,b),T!==a);)j++;return null!==a&&(d.directiveStylingLast=j),_}function Xd(a,c,d){const _=d?1:2;let b=-1;if(null!==c)for(let T=0;T<c.length;T++){const k=c[T];"number"==typeof k?b=k:b===_&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),An(a,k,!!d||c[++T]))}return void 0===a?null:a}function GC(a,c,d){An(a,c,bs(d))}function uf(a,c,d,_,b,T,k,j){if(!(3&c.type))return;const G=a.data,ne=G[j+1],he=function lf(a){return 1==(1&a)}(ne)?k_(G,c,d,b,Oc(ne),k):void 0;Bm(he)||(Bm(T)||function zC(a){return 2==(2&a)}(ne)&&(T=k_(G,null,d,b,j,k)),function Ug(a,c,d,_,b){if(c)b?a.addClass(d,_):a.removeClass(d,_);else{let T=-1===_.indexOf("-")?void 0:Dl.DashCase;null==b?a.removeStyle(d,_,T):("string"==typeof b&&b.endsWith("!important")&&(b=b.slice(0,-10),T|=Dl.Important),a.setStyle(d,_,b,T))}}(_,k,mc(Vr(),d),b,T))}function k_(a,c,d,_,b,T){const k=null===c;let j;for(;b>0;){const G=a[b],ne=Array.isArray(G),he=ne?G[1]:G,Ee=null===he;let He=d[b+1];He===oi&&(He=Ee?Vt:void 0);let ot=Ee?Fr(He,_):he===_?He:void 0;if(ne&&!Bm(ot)&&(ot=Fr(G,_)),Bm(ot)&&(j=ot,k))return j;const _t=a[b+1];b=k?Zh(_t):Oc(_t)}if(null!==c){let G=T?c.residualClasses:c.residualStyles;null!=G&&(j=Fr(G,_))}return j}function Bm(a){return void 0!==a}function Jd(a,c){return 0!=(a.flags&(c?8:16))}function O_(a,c=""){const d=xt(),_=ki(),b=a+er,T=_.firstCreatePass?Qi(_,b,1,c,null):_.data[b],k=d[b]=vd(d[zn],c);xd(_,d,k,T),gi(T,!1)}function kv(a){return Vm("",a,""),kv}function Vm(a,c,d){const _=xt(),b=ef(_,a,c,d);return b!==oi&&ih(_,Vr(),b),Vm}function Q0(a,c,d,_,b){const T=xt(),k=cl(T,a,c,d,_,b);return k!==oi&&ih(T,Vr(),k),Q0}function X0(a,c,d,_,b,T,k){const j=xt(),G=tf(j,a,c,d,_,b,T,k);return G!==oi&&ih(j,Vr(),G),X0}function J0(a,c,d,_,b,T,k,j,G){const ne=xt(),he=Rl(ne,a,c,d,_,b,T,k,j,G);return he!==oi&&ih(ne,Vr(),he),J0}function ex(a,c,d,_,b,T,k,j,G,ne,he){const Ee=xt(),He=Kd(Ee,a,c,d,_,b,T,k,j,G,ne,he);return He!==oi&&ih(Ee,Vr(),He),ex}function Ov(a,c,d,_,b,T,k,j,G,ne,he,Ee,He){const ot=xt(),_t=zo(ot,a,c,d,_,b,T,k,j,G,ne,he,Ee,He);return _t!==oi&&ih(ot,Vr(),_t),Ov}function R_(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t){const Bt=xt(),rn=Fl(Bt,a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t);return rn!==oi&&ih(Bt,Vr(),rn),R_}function Rv(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn){const _n=xt(),ti=nf(_n,a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn);return ti!==oi&&ih(_n,Vr(),ti),Rv}function F_(a){const c=xt(),d=Jp(c,a);return d!==oi&&ih(c,Vr(),d),F_}function oc(a,c,d){Su(An,Fc,ef(xt(),a,c,d),!0)}function N_(a,c,d,_,b){Su(An,Fc,cl(xt(),a,c,d,_,b),!0)}function tx(a,c,d,_,b,T,k){Su(An,Fc,tf(xt(),a,c,d,_,b,T,k),!0)}function Fv(a,c,d,_,b,T,k,j,G){Su(An,Fc,Rl(xt(),a,c,d,_,b,T,k,j,G),!0)}function nx(a,c,d,_,b,T,k,j,G,ne,he){Su(An,Fc,Kd(xt(),a,c,d,_,b,T,k,j,G,ne,he),!0)}function WC(a,c,d,_,b,T,k,j,G,ne,he,Ee,He){Su(An,Fc,zo(xt(),a,c,d,_,b,T,k,j,G,ne,he,Ee,He),!0)}function Nv(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t){Su(An,Fc,Fl(xt(),a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t),!0)}function ix(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn){Su(An,Fc,nf(xt(),a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn),!0)}function zv(a){Su(An,Fc,Jp(xt(),a),!0)}function rx(a,c,d){Rc(ef(xt(),a,c,d))}function Bv(a,c,d,_,b){Rc(cl(xt(),a,c,d,_,b))}function z_(a,c,d,_,b,T,k){Rc(tf(xt(),a,c,d,_,b,T,k))}function ox(a,c,d,_,b,T,k,j,G){Rc(Rl(xt(),a,c,d,_,b,T,k,j,G))}function rh(a,c,d,_,b,T,k,j,G,ne,he){Rc(Kd(xt(),a,c,d,_,b,T,k,j,G,ne,he))}function sx(a,c,d,_,b,T,k,j,G,ne,he,Ee,He){Rc(zo(xt(),a,c,d,_,b,T,k,j,G,ne,he,Ee,He))}function qh(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t){Rc(Fl(xt(),a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t))}function ax(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn){Rc(nf(xt(),a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn))}function B_(a){Rc(Jp(xt(),a))}function Vv(a,c,d,_,b){return Nc(a,ef(xt(),c,d,_),b,!1),Vv}function jm(a,c,d,_,b,T,k){return Nc(a,cl(xt(),c,d,_,b,T),k,!1),jm}function V_(a,c,d,_,b,T,k,j,G){return Nc(a,tf(xt(),c,d,_,b,T,k,j),G,!1),V_}function jv(a,c,d,_,b,T,k,j,G,ne,he){return Nc(a,Rl(xt(),c,d,_,b,T,k,j,G,ne),he,!1),jv}function hf(a,c,d,_,b,T,k,j,G,ne,he,Ee,He){return Nc(a,Kd(xt(),c,d,_,b,T,k,j,G,ne,he,Ee),He,!1),hf}function Uv(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t){return Nc(a,zo(xt(),c,d,_,b,T,k,j,G,ne,he,Ee,He,ot),_t,!1),Uv}function j_(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn){return Nc(a,Fl(xt(),c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt),rn,!1),j_}function Hv(a,c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n,ti){return Nc(a,nf(xt(),c,d,_,b,T,k,j,G,ne,he,Ee,He,ot,_t,Bt,rn,_n),ti,!1),Hv}function oh(a,c,d){return Nc(a,Jp(xt(),c),d,!1),oh}function ep(a,c,d){const _=xt();return No(_,La(),c)&&lr(ki(),Ki(),_,a,c,_[zn],d,!0),ep}function $v(a,c,d){const _=xt();if(No(_,La(),c)){const T=ki(),k=Ki();lr(T,k,_,a,c,ll(xo(T.data),k,_),d,!0)}return $v}const Yh=void 0;var OD=["en",[["a","p"],["AM","PM"],Yh],[["AM","PM"],Yh,Yh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yh,"{1} 'at' {0}",Yh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qC(a){const d=Math.floor(Math.abs(a)),_=a.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===_?1:5}];let Kh={};function Um(a,c,d){"string"!=typeof c&&(d=c,c=a[Xn.LocaleId]),c=c.toLowerCase().replace(/_/g,"-"),Kh[c]=a,d&&(Kh[c][Xn.ExtraData]=d)}function U_(a){const c=function hx(a){return a.toLowerCase().replace(/_/g,"-")}(a);let d=cx(c);if(d)return d;const _=c.split("-")[0];if(d=cx(_),d)return d;if("en"===_)return OD;throw new fn(701,!1)}function lx(a){return U_(a)[Xn.CurrencyCode]||null}function Qh(a){return U_(a)[Xn.PluralCase]}function cx(a){return a in Kh||(Kh[a]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[a]),Kh[a]}function ux(){Kh={}}var Xn=(()=>((Xn=Xn||{})[Xn.LocaleId=0]="LocaleId",Xn[Xn.DayPeriodsFormat=1]="DayPeriodsFormat",Xn[Xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xn[Xn.DaysFormat=3]="DaysFormat",Xn[Xn.DaysStandalone=4]="DaysStandalone",Xn[Xn.MonthsFormat=5]="MonthsFormat",Xn[Xn.MonthsStandalone=6]="MonthsStandalone",Xn[Xn.Eras=7]="Eras",Xn[Xn.FirstDayOfWeek=8]="FirstDayOfWeek",Xn[Xn.WeekendRange=9]="WeekendRange",Xn[Xn.DateFormat=10]="DateFormat",Xn[Xn.TimeFormat=11]="TimeFormat",Xn[Xn.DateTimeFormat=12]="DateTimeFormat",Xn[Xn.NumberSymbols=13]="NumberSymbols",Xn[Xn.NumberFormats=14]="NumberFormats",Xn[Xn.CurrencyCode=15]="CurrencyCode",Xn[Xn.CurrencySymbol=16]="CurrencySymbol",Xn[Xn.CurrencyName=17]="CurrencyName",Xn[Xn.Currencies=18]="Currencies",Xn[Xn.Directionality=19]="Directionality",Xn[Xn.PluralCase=20]="PluralCase",Xn[Xn.ExtraData=21]="ExtraData",Xn))();const YC=["zero","one","two","few","many"],sh="en-US",H_={marker:"element"},Hm={marker:"ICU"};var Bo=(()=>((Bo=Bo||{})[Bo.SHIFT=2]="SHIFT",Bo[Bo.APPEND_EAGERLY=1]="APPEND_EAGERLY",Bo[Bo.COMMENT=2]="COMMENT",Bo))();let px=sh;function $_(a){(function ii(a,c){null==a&&Yn(c,a,null,"!=")})(a,"Expected localeId to be defined"),"string"==typeof a&&(px=a.toLowerCase().replace(/_/g,"-"))}function Gv(a,c,d){const _=c.insertBeforeIndex,b=Array.isArray(_)?_[0]:_;return null===b?$f(a,0,d):Bn(d[b])}function JC(a,c,d,_,b){const T=c.insertBeforeIndex;if(Array.isArray(T)){let k=_,j=null;if(3&c.type||(j=k,k=b),null!==k&&-1===c.componentOffset)for(let G=1;G<T.length;G++)ar(a,k,d[T[G]],j,!1)}}function eS(a,c){if(a.push(c),a.length>1)for(let d=a.length-2;d>=0;d--){const _=a[d];tS(_)||fx(_,c)&&null===Zv(_)&&mx(_,c.index)}}function tS(a){return!(64&a.type)}function fx(a,c){return tS(c)||a.index>c.index}function Zv(a){const c=a.insertBeforeIndex;return Array.isArray(c)?c[0]:c}function mx(a,c){const d=a.insertBeforeIndex;Array.isArray(d)?d[0]=c:(Bg(Gv,JC),a.insertBeforeIndex=c)}function G_(a,c){const d=a.data[c];return null===d||"string"==typeof d?null:d.hasOwnProperty("currentCaseLViewIndex")?d:d.value}function RD(a,c,d){const _=gr(a,d,64,null,null);return eS(c,_),_}function Xh(a,c){const d=c[a.currentCaseLViewIndex];return null===d?d:d<0?~d:d}function iS(a){return a>>>17}function sc(a){return(131070&a)>>>1}let $m=0,Gm=0;function Z_(a,c,d,_){const b=d[zn];let k,T=null;for(let j=0;j<c.length;j++){const G=c[j];if("string"==typeof G){const ne=c[++j];null===d[ne]&&(d[ne]=vd(b,G))}else if("number"==typeof G)switch(1&G){case 0:const ne=iS(G);let he,Ee;if(null===T&&(T=ne,k=Eh(b,_)),ne===T?(he=_,Ee=k):(he=null,Ee=Bn(d[ne])),null!==Ee){const Bt=sc(G);ar(b,Ee,d[Bt],he,!1);const _n=G_(a,Bt);if(null!==_n&&"object"==typeof _n){const ti=Xh(_n,d);null!==ti&&Z_(a,_n.create[ti],d,d[_n.anchorIdx])}}break;case 1:const ot=c[++j],_t=c[++j];Qp(b,mc(G>>>1,d),null,null,ot,_t,null)}else switch(G){case Hm:const ne=c[++j],he=c[++j];null===d[he]&&is(d[he]=fa(b,ne),d);break;case H_:const Ee=c[++j],He=c[++j];null===d[He]&&is(d[He]=Vf(b,Ee,null),d)}}}function _x(a,c,d,_,b){for(let T=0;T<d.length;T++){const k=d[T],j=d[++T];if(k&b){let G="";for(let ne=T+1;ne<=T+j;ne++){const he=d[ne];if("string"==typeof he)G+=he;else if("number"==typeof he)if(he<0)G+=In(c[_-he]);else{const Ee=he>>>2;switch(3&he){case 1:const He=d[++ne],ot=d[++ne],_t=a.data[Ee];"string"==typeof _t?Qp(c[zn],c[Ee],null,_t,He,G,ot):lr(a,_t,c,He,G,c[zn],ot,!1);break;case 0:const Bt=c[Ee];null!==Bt&&Fg(c[zn],Bt,G);break;case 2:aS(a,G_(a,Ee),c,G);break;case 3:yx(a,G_(a,Ee),_,c)}}}}else{const G=d[T+1];if(G>0&&3==(3&G)){const he=G_(a,G>>>2);c[he.currentCaseLViewIndex]<0&&yx(a,he,_,c)}}T+=j}}function yx(a,c,d,_){let b=_[c.currentCaseLViewIndex];if(null!==b){let T=$m;b<0&&(b=_[c.currentCaseLViewIndex]=~b,T=-1),_x(a,_,c.update[b],d,T)}}function aS(a,c,d,_){const b=function lS(a,c){let d=a.cases.indexOf(c);if(-1===d)switch(a.type){case 1:{const _=function KC(a,c){const d=Qh(c)(parseInt(a,10)),_=YC[d];return void 0!==_?_:"other"}(c,function XC(){return px}());d=a.cases.indexOf(_),-1===d&&"other"!==_&&(d=a.cases.indexOf("other"));break}case 0:d=a.cases.indexOf("other")}return-1===d?null:d}(c,_);if(Xh(c,d)!==b&&(vx(a,c,d),d[c.currentCaseLViewIndex]=null===b?null:~b,null!==b)){const k=d[c.anchorIdx];k&&Z_(a,c.create[b],d,k)}}function vx(a,c,d){let _=Xh(c,d);if(null!==_){const b=c.remove[_];for(let T=0;T<b.length;T++){const k=b[T];if(k>0){const j=mc(k,d);null!==j&&Ip(d[zn],j)}else vx(a,G_(a,~k),d)}}}function cS(){const a=[];let d,_,c=-1;function T(j,G){c=0;const ne=Xh(j,G);_=null!==ne?j.remove[ne]:Vt}function k(){if(c<_.length){const j=_[c++];return j>0?d[j]:(a.push(c,_),T(d[bt].data[~j],d),k())}return 0===a.length?null:(_=a.pop(),c=a.pop(),k())}return function b(j,G){for(d=G;a.length;)a.pop();return T(j.value,G),k}}const q_=/\ufffd(\d+):?\d*\ufffd/gi,uS=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,hS=/\ufffd(\d+)\ufffd/,xx=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Zm="\ufffd",dS=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,pS=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Wm=/\uE500/g;function wx(a,c,d,_,b,T,k){const j=Hr(a,_,1,null);let G=j<<Bo.SHIFT,ne=Gl();c===ne&&(ne=null),null===ne&&(G|=Bo.APPEND_EAGERLY),k&&(G|=Bo.COMMENT,function za(a){void 0===yd&&(yd=a())}(cS)),b.push(G,null===T?"":T);const he=gr(a,j,k?32:1,null===T?"":T,null);eS(d,he);const Ee=he.index;return gi(he,!1),null!==ne&&c!==ne&&function nS(a,c){let d=a.insertBeforeIndex;null===d?(Bg(Gv,JC),d=a.insertBeforeIndex=[null,c]):(function xn(a,c,d){a!=c&&Yn(d,a,c,"==")}(Array.isArray(d),!0,"Expecting array here"),d.push(c))}(ne,Ee),he}function gS(a,c,d,_,b,T,k){const j=k.match(q_),G=wx(a,c,d,T,_,j?null:k,!1);j&&qm(b,k,G.index,null,0,null)}function qm(a,c,d,_,b,T){const k=a.length,j=k+1;a.push(null,null);const G=k+2,ne=c.split(q_);let he=0;for(let Ee=0;Ee<ne.length;Ee++){const He=ne[Ee];if(1&Ee){const ot=b+parseInt(He,10);a.push(-1-ot),he|=Cx(ot)}else""!==He&&a.push(He)}return a.push(d<<2|(_?1:0)),_&&a.push(_,T),a[k]=he,a[j]=a.length-G,he}function yS(a){let c=0;for(let d=0;d<a.length;d++){const _=a[d];"number"==typeof _&&_<0&&c++}return c}function Cx(a){return 1<<Math.min(a,31)}function Sx(a){let c,T,d="",_=0,b=!1;for(;null!==(c=dS.exec(a));)b?c[0]===`${Zm}/*${T}${Zm}`&&(_=c.index,b=!1):(d+=a.substring(_,c.index+c[0].length),T=c[1],b=!0);return d+=a.slice(_),d}function Ex(a,c,d,_,b,T){let k=0;const j={type:b.type,currentCaseLViewIndex:Hr(a,c,1,null),anchorIdx:T,cases:[],create:[],remove:[],update:[]};(function SS(a,c,d){a.push(Cx(c.mainBinding),2,-1-c.mainBinding,d<<2|2)})(d,b,T),function gx(a,c,d){const _=a.data[c];null===_?a.data[c]=d:_.value=d}(a,T,j);const G=b.values;for(let ne=0;ne<G.length;ne++){const he=G[ne],Ee=[];for(let He=0;He<he.length;He++){const ot=he[He];if("string"!=typeof ot){const _t=Ee.push(ot)-1;he[He]=`\x3c!--\ufffd${_t}\ufffd--\x3e`}}k=wS(a,j,c,d,_,b.cases[ne],he.join(""),Ee)|k}k&&function ul(a,c,d){a.push(c,1,d<<2|3)}(d,k,T)}function xS(a){const c=[],d=[];let _=1,b=0;const T=Wv(a=a.replace(xx,function(k,j,G){return _="select"===G?0:1,b=parseInt(j.slice(1),10),""}));for(let k=0;k<T.length;){let j=T[k++].trim();1===_&&(j=j.replace(/\s*(?:=)?(\w+)\s*/,"$1")),j.length&&c.push(j);const G=Wv(T[k++]);c.length>d.length&&d.push(G)}return{type:_,mainBinding:b,cases:c,values:d}}function Wv(a){if(!a)return[];let c=0;const d=[],_=[],b=/[{}]/g;let T;for(b.lastIndex=0;T=b.exec(a);){const j=T.index;if("}"==T[0]){if(d.pop(),0==d.length){const G=a.substring(c,j);xx.test(G)?_.push(xS(G)):_.push(G),c=j+1}}else{if(0==d.length){const G=a.substring(c,j);_.push(G),c=j+1}d.push("{")}}const k=a.substring(c);return _.push(k),_}function wS(a,c,d,_,b,T,k,j){const G=[],ne=[],he=[];c.cases.push(T),c.create.push(G),c.remove.push(ne),c.update.push(he);const He=Xf(co()).getInertBodyElement(k),ot=Md(He)||He;return ot?CS(a,c,d,_,G,ne,he,ot,b,j,0):0}function CS(a,c,d,_,b,T,k,j,G,ne,he){let Ee=0,He=j.firstChild;for(;He;){const ot=Hr(a,d,1,null);switch(He.nodeType){case Node.ELEMENT_NODE:const _t=He,Bt=_t.tagName.toLowerCase();if(Fp.hasOwnProperty(Bt)){Yo(b,H_,Bt,G,ot),a.data[ot]=Bt;const Dt=_t.attributes;for(let wi=0;wi<Dt.length;wi++){const _o=Dt.item(wi),Mo=_o.name.toLowerCase();_o.value.match(q_)?Wg.hasOwnProperty(Mo)&&qm(k,_o.value,ot,_o.name,0,em[Mo]?Td:null):Y_(b,ot,_o)}Ee=CS(a,c,d,_,b,T,k,He,ot,ne,he+1)|Ee,Tx(T,ot,he)}break;case Node.TEXT_NODE:const rn=He.textContent||"",_n=rn.match(q_);Yo(b,null,_n?"":rn,G,ot),Tx(T,ot,he),_n&&(Ee=qm(k,rn,ot,null,0,null)|Ee);break;case Node.COMMENT_NODE:const ti=hS.exec(He.textContent||"");if(ti){const wi=ne[parseInt(ti[1],10)];Yo(b,Hm,"",G,ot),Ex(a,d,_,G,wi,ot),VD(T,ot,he)}}He=He.nextSibling}return Ee}function Tx(a,c,d){0===d&&a.push(c)}function VD(a,c,d){0===d&&(a.push(~c),a.push(c))}function Yo(a,c,d,_,b){null!==c&&a.push(c),a.push(d,b,function Nl(a,c,d){return a|c<<17|d<<1}(0,_,b))}function Y_(a,c,d){a.push(c<<1|1,d.name,d.value)}const xa=0,ES=/\[(\ufffd.+?\ufffd?)\]/,TS=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,DS=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,Dx=/{([A-Z0-9_]+)}/g,Mx=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,MS=/\/\*/,IS=/\d+\:(\d+)/;function qv(a,c,d=-1){const _=ki(),b=xt(),T=er+a,k=zs(_.consts,c),j=Gl();_.firstCreatePass&&function mS(a,c,d,_,b,T){const k=Gl(),j=[],G=[],ne=[[]];b=function bS(a,c){if(function vS(a){return-1===a}(c))return Sx(a);{const d=a.indexOf(`:${c}${Zm}`)+2+c.toString().length,_=a.search(new RegExp(`${Zm}\\/\\*\\d+:${c}${Zm}`));return Sx(a.substring(d,_))}}(b,T);const he=function fS(a){return a.replace(Wm," ")}(b).split(pS);for(let Ee=0;Ee<he.length;Ee++){let He=he[Ee];if(1&Ee){const ot=47===He.charCodeAt(0),Bt=(He.charCodeAt(ot?1:0),er+Number.parseInt(He.substring(ot?2:1)));if(ot)ne.shift(),gi(Gl(),!1);else{const rn=RD(a,ne[0],Bt);ne.unshift([]),gi(rn,!0)}}else{const ot=Wv(He);for(let _t=0;_t<ot.length;_t++){let Bt=ot[_t];if(1&_t){const rn=Bt;if("object"!=typeof rn)throw new Error(`Unable to parse ICU expression in "${b}" message.`);Ex(a,d,G,c,rn,wx(a,k,ne[0],d,j,"",!0).index)}else""!==Bt&&gS(a,k,ne[0],j,G,d,Bt)}}}a.data[_]={create:j,update:G}}(_,null===j?0:j.index,b,T,k,d);const G=_.data[T],he=Uf(_,j===b[Mi]?null:j,b);(function sS(a,c,d,_){const b=a[zn];for(let T=0;T<c.length;T++){const k=c[T++],j=c[T],ne=(k&Bo.APPEND_EAGERLY)===Bo.APPEND_EAGERLY,he=k>>>Bo.SHIFT;let Ee=a[he];null===Ee&&(Ee=a[he]=(k&Bo.COMMENT)===Bo.COMMENT?b.createComment(j):vd(b,j)),ne&&null!==d&&ar(b,d,Ee,_,!1)}})(b,G.create,he,j&&8&j.type?b[j.index]:null),vc(!0)}function Yv(){vc(!1)}function Px(a,c,d){qv(a,c,d),Yv()}function Ax(a,c){const d=ki(),_=zs(d.consts,c);!function _S(a,c,d){const b=Kr().index,T=[];if(a.firstCreatePass&&null===a.data[c]){for(let k=0;k<d.length;k+=2){const j=d[k],G=d[k+1];if(""!==G){if(uS.test(G))throw new Error(`ICU expressions are not supported in attributes. Message: "${G}".`);qm(T,G,b,j,yS(T),null)}}a.data[c]=T}}(d,a+er,_)}function Kv(a){return function rS(a){a&&($m|=1<<Math.min(Gm,31)),Gm++}(No(xt(),La(),a)),Kv}function Qv(a){!function oS(a,c,d){if(Gm>0){const _=a.data[d];_x(a,c,Array.isArray(_)?_:_.update,Jo()-Gm-1,$m)}$m=0,Gm=0}(ki(),xt(),a+er)}function Ym(a,c={}){return function Ix(a,c={}){let d=a;if(ES.test(a)){const _={},b=[xa];d=d.replace(TS,(T,k,j)=>{const G=k||j,ne=_[G]||[];if(ne.length||(G.split("|").forEach(Bt=>{const rn=Bt.match(IS),_n=rn?parseInt(rn[1],10):xa,ti=MS.test(Bt);ne.push([_n,ti,Bt])}),_[G]=ne),!ne.length)throw new Error(`i18n postprocess: unmatched placeholder - ${G}`);const he=b[b.length-1];let Ee=0;for(let Bt=0;Bt<ne.length;Bt++)if(ne[Bt][0]===he){Ee=Bt;break}const[He,ot,_t]=ne[Ee];return ot?b.pop():he!==He&&b.push(He),ne.splice(Ee,1),_t})}return Object.keys(c).length&&(d=d.replace(DS,(_,b,T,k,j,G)=>c.hasOwnProperty(T)?`${b}${c[T]}${G}`:_),d=d.replace(Dx,(_,b)=>c.hasOwnProperty(b)?c[b]:_),d=d.replace(Mx,(_,b)=>{if(c.hasOwnProperty(b)){const T=c[b];if(!T.length)throw new Error(`i18n postprocess: unmatched ICU - ${_} with key: ${b}`);return T.shift()}return _})),d}(a,c)}function Km(a,c,d,_,b){if(a=gt(a),Array.isArray(a))for(let T=0;T<a.length;T++)Km(a[T],c,d,_,b);else{const T=ki(),k=xt();let j=ma(a)?a:gt(a.provide),G=om(a);const ne=Kr(),he=1048575&ne.providerIndexes,Ee=ne.directiveStart,He=ne.providerIndexes>>20;if(ma(a)||!a.multi){const ot=new xl(G,b,Pt),_t=Qm(j,c,b?he:he+He,Ee);-1===_t?(Ql(da(ne,k),T,j),K_(T,a,c.length),c.push(j),ne.directiveStart++,ne.directiveEnd++,b&&(ne.providerIndexes+=1048576),d.push(ot),k.push(ot)):(d[_t]=ot,k[_t]=ot)}else{const ot=Qm(j,c,he+He,Ee),_t=Qm(j,c,he,he+He),rn=_t>=0&&d[_t];if(b&&!rn||!b&&!(ot>=0&&d[ot])){Ql(da(ne,k),T,j);const _n=function Ox(a,c,d,_,b){const T=new xl(a,d,Pt);return T.multi=[],T.index=c,T.componentProviders=0,kx(T,b,_&&!d),T}(b?Q_:PS,d.length,b,_,G);!b&&rn&&(d[_t].providerFactory=_n),K_(T,a,c.length,0),c.push(j),ne.directiveStart++,ne.directiveEnd++,b&&(ne.providerIndexes+=1048576),d.push(_n),k.push(_n)}else K_(T,a,ot>-1?ot:_t,kx(d[b?_t:ot],G,!b&&_));!b&&_&&rn&&d[_t].componentProviders++}}}function K_(a,c,d,_){const b=ma(c),T=function Kg(a){return!!a.useClass}(c);if(b||T){const G=(T?gt(c.useClass):c).prototype.ngOnDestroy;if(G){const ne=a.destroyHooks||(a.destroyHooks=[]);if(!b&&c.multi){const he=ne.indexOf(d);-1===he?ne.push(d,[_,G]):ne[he+1].push(_,G)}else ne.push(d,G)}}}function kx(a,c,d){return d&&a.componentProviders++,a.multi.push(c)-1}function Qm(a,c,d,_){for(let b=d;b<_;b++)if(c[b]===a)return b;return-1}function PS(a,c,d,_){return Xm(this.multi,[])}function Q_(a,c,d,_){const b=this.multi;let T;if(this.providerFactory){const k=this.providerFactory.componentProviders,j=gs(d,d[bt],this.providerFactory.index,_);T=j.slice(0,k),Xm(b,T);for(let G=k;G<j.length;G++)T.push(j[G])}else T=[],Xm(b,T);return T}function Xm(a,c){for(let d=0;d<a.length;d++)c.push((0,a[d])());return c}function X_(a,c=[]){return d=>{d.providersResolver=(_,b)=>function Lx(a,c,d){const _=ki();if(_.firstCreatePass){const b=On(a);Km(d,_.data,_.blueprint,b,!0),Km(c,_.data,_.blueprint,b,!1)}}(_,b?b(a):a,c)}}class Jh{}class Rx{}function Xv(a,c){return new Jv(a,c??null)}const AS=Xv;class Jv extends Jh{constructor(c,d){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new SC(this);const _=Ne(c);this._bootstrapComponents=Mc(_.bootstrap),this._r3Injector=$d(c,d,[{provide:Jh,useValue:this},{provide:Qu,useValue:this.componentFactoryResolver}],it(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class J_ extends Rx{constructor(c){super(),this.moduleType=c}create(c){return new Jv(this.moduleType,c)}}class Fx extends Jh{constructor(c,d,_){super(),this.componentFactoryResolver=new SC(this),this.instance=null;const b=new kd([...c,{provide:Jh,useValue:this},{provide:Qu,useValue:this.componentFactoryResolver}],d||Nh(),_,new Set(["environment"]));this.injector=b,b.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function eb(a,c,d=null){return new Fx(a,c,d).injector}let wr=(()=>{class a{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const _=il(0,d.type),b=_.length>0?eb([_],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,b)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Wi({token:a,providedIn:"environment",factory:()=>new a(ve(Yu))}),a})();function Jm(a){a.getStandaloneInjector=c=>c.get(wr).getOrCreateStandaloneInjector(a)}function tb(a){const c=jr(a);if(null===c)return null;if(void 0===c.component){const d=c.lView;if(null===d)return null;c.component=function Hu(a,c){const d=c[bt].data[a],{directiveStart:_,componentOffset:b}=d;return b>-1?c[_+b]:null}(c.nodeIndex,d)}return c.component}function nb(a){!function FS(a){if(typeof Element<"u"&&!(a instanceof Element))throw new Error("Expecting instance of DOM Element")}(a);const c=jr(a),d=c?c.lView:null;return null===d?null:d[Yi]}function Nx(a){const c=jr(a);let _,d=c?c.lView:null;if(null===d)return null;for(;2===d[bt].type&&(_=qs(d));)d=_;return 256&d[ft]?null:d[Yi]}function zx(a){const c=rs(a);return null!==c?[Jy(c)]:[]}function ey(a){const c=jr(a),d=c?c.lView:null;return null===d?ol.NULL:new pa(d[bt].data[c.nodeIndex],d)}function Bx(a){if(a instanceof Text)return[];const c=jr(a),d=c?c.lView:null;if(null===d)return[];const b=c.nodeIndex;return d[bt]?.data[b]?(void 0===c.directives&&(c.directives=Og(b,d)),null===c.directives?[]:[...c.directives]):[]}function ib(a){const{constructor:c}=a;if(!c)throw new Error("Unable to find the instance constructor");const d=te(c);if(d)return{inputs:d.inputs,outputs:d.outputs,encapsulation:d.encapsulation,changeDetection:d.onPush?sn.OnPush:sn.Default};const _=se(c);return _?{inputs:_.inputs,outputs:_.outputs}:null}function df(a){return jr(a).native}function Vx(a){const c=jr(a),d=null===c?null:c.lView;if(null===d)return[];const b=d[Ns],T=d[bt].cleanup,k=[];if(T&&b)for(let j=0;j<T.length;){const G=T[j++],ne=T[j++];if("string"==typeof G){const he=G,Ee=Bn(d[ne]),He=b[T[j++]],ot=T[j++];a==Ee&&k.push({element:a,name:he,callback:He,useCapture:"boolean"==typeof ot&&ot,type:"boolean"==typeof ot||ot>=0?"dom":"output"})}}return k.sort(jD),k}function jD(a,c){return a.name==c.name?0:a.name<c.name?-1:1}function RS(a){return void 0!==a.type&&void 0!==a.declaredInputs&&void 0!==a.findHostDirectiveDefs}function jx(a,c,d,_){return Kt(()=>{const b=a;null!==c&&(b.hasOwnProperty("decorators")&&void 0!==b.decorators?b.decorators.push(...c):b.decorators=c),null!==d&&(b.ctorParameters=d),null!==_&&(b.propDecorators=b.hasOwnProperty("propDecorators")&&void 0!==b.propDecorators?{...b.propDecorators,..._}:_)})}function Ux(a,c,d){const _=Mr()+a,b=xt();return b[_]===oi?Ol(b,_,d?c.call(d):c()):Xp(b,_)}function NS(a,c,d,_){return $x(xt(),Mr(),a,c,d,_)}function zS(a,c,d,_,b){return $S(xt(),Mr(),a,c,d,_,b)}function BS(a,c,d,_,b,T){return Vo(xt(),Mr(),a,c,d,_,b,T)}function VS(a,c,d,_,b,T,k){return zc(xt(),Mr(),a,c,d,_,b,T,k)}function jS(a,c,d,_,b,T,k,j){const G=Mr()+a,ne=xt(),he=cs(ne,G,d,_,b,T);return No(ne,G+4,k)||he?Ol(ne,G+5,j?c.call(j,d,_,b,T,k):c(d,_,b,T,k)):Xp(ne,G+5)}function Hx(a,c,d,_,b,T,k,j,G){const ne=Mr()+a,he=xt(),Ee=cs(he,ne,d,_,b,T);return qo(he,ne+4,k,j)||Ee?Ol(he,ne+6,G?c.call(G,d,_,b,T,k,j):c(d,_,b,T,k,j)):Xp(he,ne+6)}function US(a,c,d,_,b,T,k,j,G,ne){const he=Mr()+a,Ee=xt();let He=cs(Ee,he,d,_,b,T);return __(Ee,he+4,k,j,G)||He?Ol(Ee,he+7,ne?c.call(ne,d,_,b,T,k,j,G):c(d,_,b,T,k,j,G)):Xp(Ee,he+7)}function rb(a,c,d,_,b,T,k,j,G,ne,he){const Ee=Mr()+a,He=xt(),ot=cs(He,Ee,d,_,b,T);return cs(He,Ee+4,k,j,G,ne)||ot?Ol(He,Ee+8,he?c.call(he,d,_,b,T,k,j,G,ne):c(d,_,b,T,k,j,G,ne)):Xp(He,Ee+8)}function HS(a,c,d,_){return jo(xt(),Mr(),a,c,d,_)}function eg(a,c){const d=a[c];return d===oi?void 0:d}function $x(a,c,d,_,b,T){const k=c+d;return No(a,k,b)?Ol(a,k+1,T?_.call(T,b):_(b)):eg(a,k+1)}function $S(a,c,d,_,b,T,k){const j=c+d;return qo(a,j,b,T)?Ol(a,j+2,k?_.call(k,b,T):_(b,T)):eg(a,j+2)}function Vo(a,c,d,_,b,T,k,j){const G=c+d;return __(a,G,b,T,k)?Ol(a,G+3,j?_.call(j,b,T,k):_(b,T,k)):eg(a,G+3)}function zc(a,c,d,_,b,T,k,j,G){const ne=c+d;return cs(a,ne,b,T,k,j)?Ol(a,ne+4,G?_.call(G,b,T,k,j):_(b,T,k,j)):eg(a,ne+4)}function jo(a,c,d,_,b,T){let k=c+d,j=!1;for(let G=0;G<b.length;G++)No(a,k++,b[G])&&(j=!0);return j?Ol(a,k,_.apply(T,b)):eg(a,k)}function go(a,c){const d=ki();let _;const b=a+er;d.firstCreatePass?(_=function Eu(a,c){if(c)for(let d=c.length-1;d>=0;d--){const _=c[d];if(a===_.name)return _}}(c,d.pipeRegistry),d.data[b]=_,_.onDestroy&&(d.destroyHooks??(d.destroyHooks=[])).push(b,_.onDestroy)):_=d.data[b];const T=_.factory||(_.factory=Ea(_.type)),k=yn(Pt);try{const j=qt(!1),G=T();return qt(j),Cv(d,xt(),b,G),G}finally{yn(k)}}function Do(a,c,d){const _=a+er,b=xt(),T=Hi(b,_);return ed(b,_)?$x(b,Mr(),c,T.transform,d,T):T.transform(d)}function tg(a,c,d,_){const b=a+er,T=xt(),k=Hi(T,b);return ed(T,b)?$S(T,Mr(),c,k.transform,d,_,k):k.transform(d,_)}function ty(a,c,d,_,b){const T=a+er,k=xt(),j=Hi(k,T);return ed(k,T)?Vo(k,Mr(),c,j.transform,d,_,b,j):j.transform(d,_,b)}function ob(a,c,d,_,b,T){const k=a+er,j=xt(),G=Hi(j,k);return ed(j,k)?zc(j,Mr(),c,G.transform,d,_,b,T,G):G.transform(d,_,b,T)}function sb(a,c,d){const _=a+er,b=xt(),T=Hi(b,_);return ed(b,_)?jo(b,Mr(),c,T.transform,d,T):T.transform.apply(T,d)}function ed(a,c){return a[bt].data[c].pure}function ny(a){return c=>{setTimeout(a,void 0,c)}}const Tu=class ZS extends r.xQ{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,d,_){let b=c,T=d||(()=>null),k=_;if(c&&"object"==typeof c){const G=c;b=G.next?.bind(G),T=G.error?.bind(G),k=G.complete?.bind(G)}this.__isAsync&&(T=ny(T),b&&(b=ny(b)),k&&(k=ny(k)));const j=super.subscribe({next:b,error:T,complete:k});return c instanceof V.w&&c.add(j),j}};function WS(){return this._results[Symbol.iterator]()}class pf{get changes(){return this._changes||(this._changes=new Tu)}constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=pf.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=WS)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,d){return this._results.reduce(c,d)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,d){const _=this;_.dirty=!1;const b=St(c);(this._changesDetected=!function vt(a,c,d){if(a.length!==c.length)return!1;for(let _=0;_<a.length;_++){let b=a[_],T=c[_];if(d&&(b=d(b),T=d(T)),T!==b)return!1}return!0}(_._results,b,d))&&(_._results=b,_.length=b.length,_.last=b[this.length-1],_.first=b[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ng=(()=>{class a{}return a.__NG_ELEMENT_ID__=YS,a})();const qS=ng,ab=class extends qS{constructor(c,d,_){super(),this._declarationLView=c,this._declarationTContainer=d,this.elementRef=_}createEmbeddedView(c,d){const _=this._declarationTContainer.tView,b=si(this._declarationLView,_,c,16,null,_.declTNode,null,null,null,null,d||null);b[Yr]=this._declarationLView[this._declarationTContainer.index];const k=this._declarationLView[Ts];return null!==k&&(b[Ts]=k.createEmbeddedView(_)),xs(_,b,c),new qd(b)}};function YS(){return np(Kr(),xt())}function np(a,c){return 4&a.type?new ab(c,a,fu(a,c)):null}let ig=(()=>{class a{}return a.__NG_ELEMENT_ID__=KS,a})();function KS(){return lb(Kr(),xt())}const Gx=ig,ff=class extends Gx{constructor(c,d,_){super(),this._lContainer=c,this._hostTNode=d,this._hostLView=_}get element(){return fu(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){const c=Ir(this._hostTNode,this._hostLView);if(ue(c)){const d=at(c,this._hostLView),_=Pe(c);return new pa(d[bt].data[_+8],d)}return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const d=QS(this._lContainer);return null!==d&&d[c]||null}get length(){return this._lContainer.length-rr}createEmbeddedView(c,d,_){let b,T;"number"==typeof _?b=_:null!=_&&(b=_.index,T=_.injector);const k=c.createEmbeddedView(d||{},T);return this.insert(k,b),k}createComponent(c,d,_,b,T){const k=c&&!Ct(c);let j;if(k)j=d;else{const Ee=d||{};j=Ee.index,_=Ee.injector,b=Ee.projectableNodes,T=Ee.environmentInjector||Ee.ngModuleRef}const G=k?c:new wm(te(c)),ne=_||this.parentInjector;if(!T&&null==G.ngModule){const He=(k?ne:this.parentInjector).get(Yu,null);He&&(T=He)}const he=G.create(ne,b,void 0,T);return this.insert(he.hostView,j),he}insert(c,d){const _=c._lView,b=_[bt];if(function ku(a){return Nr(a[kn])}(_)){const he=this.indexOf(c);if(-1!==he)this.detach(he);else{const Ee=_[kn],He=new ff(Ee,Ee[Mi],Ee[kn]);He.detach(He.indexOf(c))}}const T=this._adjustIndex(d),k=this._lContainer;!function Cp(a,c,d,_){const b=rr+_,T=d.length;_>0&&(d[b-1][on]=c),_<T-rr?(c[on]=d[b],_i(d,rr+_,c)):(d.push(c),c[on]=null),c[kn]=d;const k=c[Yr];null!==k&&d!==k&&function wh(a,c){const d=a[ia];c[qr]!==c[kn][kn][qr]&&(a[$n]=!0),null===d?a[ia]=[c]:d.push(c)}(k,c);const j=c[Ts];null!==j&&j.insertView(a),c[ft]|=64}(b,_,k,T);const j=Zf(T,k),G=_[zn],ne=Eh(G,k[Go]);return null!==ne&&function vs(a,c,d,_,b,T){_[dn]=b,_[Mi]=c,wd(a,_,d,1,b,T)}(b,k[Mi],G,_,ne,j),c.attachToViewContainerRef(),_i(ah(k),T,c),c}move(c,d){return this.insert(c,d)}indexOf(c){const d=QS(this._lContainer);return null!==d?d.indexOf(c):-1}remove(c){const d=this._adjustIndex(c,-1),_=Sp(this._lContainer,d);_&&(zt(ah(this._lContainer),d),Ch(_[bt],_))}detach(c){const d=this._adjustIndex(c,-1),_=Sp(this._lContainer,d);return _&&null!=zt(ah(this._lContainer),d)?new qd(_):null}_adjustIndex(c,d=0){return c??this.length+d}};function QS(a){return a[Ai]}function ah(a){return a[Ai]||(a[Ai]=[])}function lb(a,c){let d;const _=c[a.index];if(Nr(_))d=_;else{let b;if(8&a.type)b=Bn(_);else{const T=c[zn];b=T.createComment("");const k=jn(a,c);ar(T,Eh(T,k),b,function Tp(a,c){return a.nextSibling(c)}(T,k),!1)}c[a.index]=d=fv(_,c,b,a),kc(c,d)}return new ff(d,a,c)}class mf{constructor(c){this.queryList=c,this.matches=null}clone(){return new mf(this.queryList)}setDirty(){this.queryList.setDirty()}}class cb{constructor(c=[]){this.queries=c}createEmbeddedView(c){const d=c.queries;if(null!==d){const _=null!==c.contentQueries?c.contentQueries[0]:d.length,b=[];for(let T=0;T<_;T++){const k=d.getByIndex(T);b.push(this.queries[k.indexInDeclarationView].clone())}return new cb(b)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let d=0;d<this.queries.length;d++)null!==iy(c,d).matches&&this.queries[d].setDirty()}}class ub{constructor(c,d,_=null){this.predicate=c,this.flags=d,this.read=_}}class hb{constructor(c=[]){this.queries=c}elementStart(c,d){for(let _=0;_<this.queries.length;_++)this.queries[_].elementStart(c,d)}elementEnd(c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(c)}embeddedTView(c){let d=null;for(let _=0;_<this.length;_++){const b=null!==d?d.length:0,T=this.getByIndex(_).embeddedTView(c,b);T&&(T.indexInDeclarationView=_,null!==d?d.push(T):d=[T])}return null!==d?new hb(d):null}template(c,d){for(let _=0;_<this.queries.length;_++)this.queries[_].template(c,d)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class db{constructor(c,d=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(c,d){this.isApplyingToNode(d)&&this.matchTNode(c,d)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,d){this.elementStart(c,d)}embeddedTView(c,d){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,d),new db(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let _=c.parent;for(;null!==_&&8&_.type&&_.index!==d;)_=_.parent;return d===(null!==_?_.index:-1)}return this._appliesToNextNode}matchTNode(c,d){const _=this.metadata.predicate;if(Array.isArray(_))for(let b=0;b<_.length;b++){const T=_[b];this.matchTNodeWithReadOption(c,d,pb(d,T)),this.matchTNodeWithReadOption(c,d,Ka(d,c,T,!1,!1))}else _===ng?4&d.type&&this.matchTNodeWithReadOption(c,d,-1):this.matchTNodeWithReadOption(c,d,Ka(d,c,_,!1,!1))}matchTNodeWithReadOption(c,d,_){if(null!==_){const b=this.metadata.read;if(null!==b)if(b===mu||b===ig||b===ng&&4&d.type)this.addMatch(d.index,-2);else{const T=Ka(d,c,b,!1,!1);null!==T&&this.addMatch(d.index,T)}else this.addMatch(d.index,_)}}addMatch(c,d){null===this.matches?this.matches=[c,d]:this.matches.push(c,d)}}function pb(a,c){const d=a.localNames;if(null!==d)for(let _=0;_<d.length;_+=2)if(d[_]===c)return d[_+1];return null}function JS(a,c,d,_){return-1===d?function XS(a,c){return 11&a.type?fu(a,c):4&a.type?np(a,c):null}(c,a):-2===d?function fb(a,c,d){return d===mu?fu(c,a):d===ng?np(c,a):d===ig?lb(c,a):void 0}(a,c,_):gs(a,a[bt],d,c)}function Zx(a,c,d,_){const b=c[Ts].queries[_];if(null===b.matches){const T=a.data,k=d.matches,j=[];for(let G=0;G<k.length;G+=2){const ne=k[G];j.push(ne<0?null:JS(c,T[ne],k[G+1],d.metadata.read))}b.matches=j}return b.matches}function gf(a,c,d,_){const b=a.queries.getByIndex(d),T=b.matches;if(null!==T){const k=Zx(a,c,b,d);for(let j=0;j<T.length;j+=2){const G=T[j];if(G>0)_.push(k[j/2]);else{const ne=T[j+1],he=c[-G];for(let Ee=rr;Ee<he.length;Ee++){const He=he[Ee];He[Yr]===He[kn]&&gf(He[bt],He,ne,_)}if(null!==he[ia]){const Ee=he[ia];for(let He=0;He<Ee.length;He++){const ot=Ee[He];gf(ot[bt],ot,ne,_)}}}}}return _}function mb(a){const c=xt(),d=ki(),_=bc();Kc(_+1);const b=iy(d,_);if(a.dirty&&function qc(a){return 4==(4&a[ft])}(c)===(2==(2&b.metadata.flags))){if(null===b.matches)a.reset([]);else{const T=b.crossesNgTemplate?gf(d,c,_,[]):Zx(d,c,b,_);a.reset(T,am),a.notifyOnChanges()}return!0}return!1}function Wx(a,c,d){const _=ki();_.firstCreatePass&&(qx(_,new ub(a,c,d),-1),2==(2&c)&&(_.staticViewQueries=!0)),gb(_,xt(),c)}function ip(a,c,d,_){const b=ki();if(b.firstCreatePass){const T=Kr();qx(b,new ub(c,d,_),T.index),function tE(a,c){const d=a.contentQueries||(a.contentQueries=[]);c!==(d.length?d[d.length-1]:-1)&&d.push(a.queries.length-1,c)}(b,a),2==(2&d)&&(b.staticContentQueries=!0)}gb(b,xt(),d)}function rg(){return function eE(a,c){return a[Ts].queries[c].queryList}(xt(),bc())}function gb(a,c,d){const _=new pf(4==(4&d));ss(a,c,_,_.destroy),null===c[Ts]&&(c[Ts]=new cb),c[Ts].queries.push(new mf(_))}function qx(a,c,d){null===a.queries&&(a.queries=new hb),a.queries.track(new db(c,d))}function iy(a,c){return a.queries.getByIndex(c)}function Yx(a,c){return np(a,c)}const Va=(()=>({\u0275\u0275attribute:xv,\u0275\u0275attributeInterpolate1:I0,\u0275\u0275attributeInterpolate2:y_,\u0275\u0275attributeInterpolate3:v_,\u0275\u0275attributeInterpolate4:b_,\u0275\u0275attributeInterpolate5:x_,\u0275\u0275attributeInterpolate6:w_,\u0275\u0275attributeInterpolate7:C_,\u0275\u0275attributeInterpolate8:S_,\u0275\u0275attributeInterpolateV:E_,\u0275\u0275defineComponent:ur,\u0275\u0275defineDirective:z,\u0275\u0275defineInjectable:Wi,\u0275\u0275defineInjector:Br,\u0275\u0275defineNgModule:ea,\u0275\u0275definePipe:Z,\u0275\u0275directiveInject:Pt,\u0275\u0275getInheritedFactory:nu,\u0275\u0275inject:ve,\u0275\u0275injectAttribute:f,\u0275\u0275invalidFactory:nn,\u0275\u0275invalidFactoryDep:De,\u0275\u0275templateRefExtractor:Yx,\u0275\u0275resetView:Wa,\u0275\u0275HostDirectivesFeature:To,\u0275\u0275NgOnChangesFeature:Ds,\u0275\u0275ProvidersFeature:X_,\u0275\u0275CopyDefinitionFeature:E0,\u0275\u0275InheritDefinitionFeature:vv,\u0275\u0275StandaloneFeature:Jm,\u0275\u0275nextContext:sf,\u0275\u0275namespaceHTML:Xt,\u0275\u0275namespaceMathML:ca,\u0275\u0275namespaceSVG:vl,\u0275\u0275enableBindings:$l,\u0275\u0275disableBindings:_c,\u0275\u0275elementStart:rf,\u0275\u0275elementEnd:Sm,\u0275\u0275element:Em,\u0275\u0275elementContainerStart:Tm,\u0275\u0275elementContainerEnd:Dm,\u0275\u0275elementContainer:Mm,\u0275\u0275pureFunction0:Ux,\u0275\u0275pureFunction1:NS,\u0275\u0275pureFunction2:zS,\u0275\u0275pureFunction3:BS,\u0275\u0275pureFunction4:VS,\u0275\u0275pureFunction5:jS,\u0275\u0275pureFunction6:Hx,\u0275\u0275pureFunction7:US,\u0275\u0275pureFunction8:rb,\u0275\u0275pureFunctionV:HS,\u0275\u0275getCurrentView:Im,\u0275\u0275restoreView:Ia,\u0275\u0275listener:Qs,\u0275\u0275projection:O0,\u0275\u0275syntheticHostProperty:$v,\u0275\u0275syntheticHostListener:wu,\u0275\u0275pipeBind1:Do,\u0275\u0275pipeBind2:tg,\u0275\u0275pipeBind3:ty,\u0275\u0275pipeBind4:ob,\u0275\u0275pipeBindV:sb,\u0275\u0275projectionDef:Pm,\u0275\u0275hostProperty:ep,\u0275\u0275property:Ev,\u0275\u0275propertyInterpolate:Am,\u0275\u0275propertyInterpolate1:M_,\u0275\u0275propertyInterpolate2:R0,\u0275\u0275propertyInterpolate3:F0,\u0275\u0275propertyInterpolate4:N0,\u0275\u0275propertyInterpolate5:z0,\u0275\u0275propertyInterpolate6:B0,\u0275\u0275propertyInterpolate7:V0,\u0275\u0275propertyInterpolate8:j0,\u0275\u0275propertyInterpolateV:Iv,\u0275\u0275pipe:go,\u0275\u0275queryRefresh:mb,\u0275\u0275viewQuery:Wx,\u0275\u0275loadQuery:rg,\u0275\u0275contentQuery:ip,\u0275\u0275reference:Sv,\u0275\u0275classMap:q0,\u0275\u0275classMapInterpolate1:oc,\u0275\u0275classMapInterpolate2:N_,\u0275\u0275classMapInterpolate3:tx,\u0275\u0275classMapInterpolate4:Fv,\u0275\u0275classMapInterpolate5:nx,\u0275\u0275classMapInterpolate6:WC,\u0275\u0275classMapInterpolate7:Nv,\u0275\u0275classMapInterpolate8:ix,\u0275\u0275classMapInterpolateV:zv,\u0275\u0275styleMap:Rc,\u0275\u0275styleMapInterpolate1:rx,\u0275\u0275styleMapInterpolate2:Bv,\u0275\u0275styleMapInterpolate3:z_,\u0275\u0275styleMapInterpolate4:ox,\u0275\u0275styleMapInterpolate5:rh,\u0275\u0275styleMapInterpolate6:sx,\u0275\u0275styleMapInterpolate7:qh,\u0275\u0275styleMapInterpolate8:ax,\u0275\u0275styleMapInterpolateV:B_,\u0275\u0275styleProp:cf,\u0275\u0275stylePropInterpolate1:Vv,\u0275\u0275stylePropInterpolate2:jm,\u0275\u0275stylePropInterpolate3:V_,\u0275\u0275stylePropInterpolate4:jv,\u0275\u0275stylePropInterpolate5:hf,\u0275\u0275stylePropInterpolate6:Uv,\u0275\u0275stylePropInterpolate7:j_,\u0275\u0275stylePropInterpolate8:Hv,\u0275\u0275stylePropInterpolateV:oh,\u0275\u0275classProp:Av,\u0275\u0275advance:a_,\u0275\u0275template:wv,\u0275\u0275text:O_,\u0275\u0275textInterpolate:kv,\u0275\u0275textInterpolate1:Vm,\u0275\u0275textInterpolate2:Q0,\u0275\u0275textInterpolate3:X0,\u0275\u0275textInterpolate4:J0,\u0275\u0275textInterpolate5:ex,\u0275\u0275textInterpolate6:Ov,\u0275\u0275textInterpolate7:R_,\u0275\u0275textInterpolate8:Rv,\u0275\u0275textInterpolateV:F_,\u0275\u0275i18n:Px,\u0275\u0275i18nAttributes:Ax,\u0275\u0275i18nExp:Kv,\u0275\u0275i18nStart:qv,\u0275\u0275i18nEnd:Yv,\u0275\u0275i18nApply:Qv,\u0275\u0275i18nPostprocess:Ym,\u0275\u0275resolveWindow:cm,\u0275\u0275resolveDocument:i_,\u0275\u0275resolveBody:Bd,\u0275\u0275setComponentScope:Wr,\u0275\u0275setNgModuleScope:hc,\u0275\u0275registerNgModuleType:_h,\u0275\u0275sanitizeHtml:Ph,\u0275\u0275sanitizeStyle:qu,\u0275\u0275sanitizeResourceUrl:Id,\u0275\u0275sanitizeScript:Vp,\u0275\u0275sanitizeUrl:Bp,\u0275\u0275sanitizeUrlOrResourceUrl:rc,\u0275\u0275trustConstantHtml:So,\u0275\u0275trustConstantResourceUrl:jp,\u0275\u0275validateIframeAttribute:Lp,forwardRef:Zt,resolveForwardRef:gt}))();let td=null;function Kx(){td=null}function _b(a){return!!Ne(a)}const _f=[];let yb=!1;function oy(){if(!yb){yb=!0;try{for(let a=_f.length-1;a>=0;a--){const{moduleType:c,ngModule:d}=_f[a];d.declarations&&d.declarations.every(Qx)&&(_f.splice(a,1),oE(c,d))}}finally{yb=!1}}}function Qx(a){return Array.isArray(a)?a.every(Qx):!!gt(a)}function Xx(a,c={}){sy(a,c),void 0!==c.id&&_h(a,c.id),function iE(a,c){_f.push({moduleType:a,ngModule:c})}(a,c)}function sy(a,c,d=!1){const _=St(c.declarations||Vt);let b=null;Object.defineProperty(a,ci,{configurable:!0,get:()=>(null===b&&(b=Je().compileNgModule(Va,`ng:///${a.name}/\u0275mod.js`,{type:a,bootstrap:St(c.bootstrap||Vt).map(gt),declarations:_.map(gt),imports:St(c.imports||Vt).map(gt).map(ay),exports:St(c.exports||Vt).map(gt).map(ay),schemas:c.schemas?St(c.schemas):null,id:c.id||null}),b.schemas||(b.schemas=[])),b)});let T=null;Object.defineProperty(a,ir,{get:()=>{if(null===T){const j=Je();T=j.compileFactory(Va,`ng:///${a.name}/\u0275fac.js`,{name:a.name,type:a,deps:Ar(a),target:j.FactoryTarget.NgModule,typeArgumentCount:0})}return T},configurable:!1});let k=null;Object.defineProperty(a,Gn,{get:()=>{if(null===k){const j={name:a.name,type:a,providers:c.providers||Vt,imports:[(c.imports||Vt).map(gt),(c.exports||Vt).map(gt)]};k=Je().compileInjector(Va,`ng:///${a.name}/\u0275inj.js`,j)}return k},configurable:!1})}let rp=new WeakMap,bb=new WeakMap;function ew(){rp=new WeakMap,bb=new WeakMap,_f.length=0}function oE(a,c){const d=St(c.declarations||Vt),_=op(a);d.forEach(b=>{(b=gt(b)).hasOwnProperty(mi)?sg(te(b),_):!b.hasOwnProperty(di)&&!b.hasOwnProperty(li)&&(b.ngSelectorScope=a)})}function sg(a,c){a.directiveDefs=()=>Array.from(c.compilation.directives).map(d=>d.hasOwnProperty(mi)?te(d):se(d)).filter(d=>!!d),a.pipeDefs=()=>Array.from(c.compilation.pipes).map(d=>fe(d)),a.schemas=c.schemas,a.tView=null}function op(a){if(_b(a))return function sE(a){const c=Ne(a,!0);if(null!==c.transitiveCompileScopes)return c.transitiveCompileScopes;const d={schemas:c.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return Mc(c.imports).forEach(_=>{const b=op(_);b.exported.directives.forEach(T=>d.compilation.directives.add(T)),b.exported.pipes.forEach(T=>d.compilation.pipes.add(T))}),Mc(c.declarations).forEach(_=>{fe(_)?d.compilation.pipes.add(_):d.compilation.directives.add(_)}),Mc(c.exports).forEach(_=>{const b=_;if(_b(b)){const T=op(b);T.exported.directives.forEach(k=>{d.compilation.directives.add(k),d.exported.directives.add(k)}),T.exported.pipes.forEach(k=>{d.compilation.pipes.add(k),d.exported.pipes.add(k)})}else fe(b)?d.exported.pipes.add(b):d.exported.directives.add(b)}),c.transitiveCompileScopes=d,d}(a);if(Be(a)){if(null!==(te(a)||se(a)))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set([a]),pipes:new Set}};if(null!==fe(a))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set([a])}}}throw new Error(`${a.name} does not have a module def (\u0275mod property)`)}function ay(a){return function og(a){return void 0!==a.ngModule}(a)?a.ngModule:a}let xb=0;function ag(a,c){let d=null;(function gh(a,c){Jl(c)&&(xc.set(a,c),Vu.add(a))})(a,c),rw(a,c),Object.defineProperty(a,mi,{get:()=>{if(null===d){const _=Je();if(Jl(c)){const ne=[`Component '${a.name}' is not resolved:`];throw c.templateUrl&&ne.push(` - templateUrl: ${c.templateUrl}`),c.styleUrls&&c.styleUrls.length&&ne.push(` - styleUrls: ${JSON.stringify(c.styleUrls)}`),ne.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(ne.join("\n"))}const b=function ry(){return td}();let T=c.preserveWhitespaces;void 0===T&&(T=null!==b&&void 0!==b.preserveWhitespaces&&b.preserveWhitespaces);let k=c.encapsulation;void 0===k&&(k=null!==b&&void 0!==b.defaultEncapsulation?b.defaultEncapsulation:Ht.Emulated);const j=c.templateUrl||`ng:///${a.name}/template.html`,G={...ow(a,c),typeSourceSpan:_.createParseSourceSpan("Component",a.name,j),template:c.template||"",preserveWhitespaces:T,styles:c.styles||Vt,animations:c.animations,declarations:[],changeDetection:c.changeDetection,encapsulation:k,interpolation:c.interpolation,viewProviders:c.viewProviders||null};xb++;try{if(G.usesInheritance&&sw(a),d=_.compileComponent(Va,j,G),c.standalone){const ne=St(c.imports||Vt),{directiveDefs:he,pipeDefs:Ee}=function ly(a,c){let d=null,_=null;return{directiveDefs:()=>{if(null===d){d=[te(a)];const k=new Set;for(const j of c){const G=gt(j);if(!k.has(G))if(k.add(G),Ne(G)){const ne=op(G);for(const he of ne.exported.directives){const Ee=te(he)||se(he);Ee&&!k.has(he)&&(k.add(he),d.push(Ee))}}else{const ne=te(G)||se(G);ne&&d.push(ne)}}}return d},pipeDefs:()=>{if(null===_){_=[];const k=new Set;for(const j of c){const G=gt(j);if(!k.has(G))if(k.add(G),Ne(G)){const ne=op(G);for(const he of ne.exported.pipes){const Ee=fe(he);Ee&&!k.has(he)&&(k.add(he),_.push(Ee))}}else{const ne=fe(G);ne&&_.push(ne)}}}return _}}}(a,ne);d.directiveDefs=he,d.pipeDefs=Ee,d.dependencies=()=>ne.map(gt)}}finally{xb--}if(0===xb&&oy(),function aE(a){return void 0!==a.ngSelectorScope}(a)){const ne=op(a.ngSelectorScope);sg(d,ne)}if(c.schemas){if(!c.standalone)throw new Error(`The 'schemas' was specified for the ${bn(a)} but is only valid on a component that is standalone.`);d.schemas=c.schemas}else c.standalone&&(d.schemas=[])}return d},configurable:!1})}function cy(a,c){let d=null;rw(a,c||{}),Object.defineProperty(a,di,{get:()=>{if(null===d){const _=iw(a,c||{});d=Je().compileDirective(Va,_.sourceMapUrl,_.metadata)}return d},configurable:!1})}function iw(a,c){const d=a&&a.name,_=`ng:///${d}/\u0275dir.js`,b=Je(),T=ow(a,c);return T.typeSourceSpan=b.createParseSourceSpan("Directive",d,_),T.usesInheritance&&sw(a),{metadata:T,sourceMapUrl:_}}function rw(a,c){let d=null;Object.defineProperty(a,ir,{get:()=>{if(null===d){const _=iw(a,c),b=Je();d=b.compileFactory(Va,`ng:///${a.name}/\u0275fac.js`,{name:_.metadata.name,type:_.metadata.type,typeArgumentCount:0,deps:Ar(a),target:b.FactoryTarget.Directive})}return d},configurable:!1})}function wb(a){return Object.getPrototypeOf(a.prototype)===Object.prototype}function ow(a,c){const d=Oo(),_=d.ownPropMetadata(a);return{name:a.name,type:a,selector:void 0!==c.selector?c.selector:null,host:c.host||Qt,propMetadata:_,inputs:c.inputs||Vt,outputs:c.outputs||Vt,queries:lg(a,_,lw),lifecycle:{usesOnChanges:d.hasLifecycleHook(a,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!wb(a),exportAs:aw(c.exportAs),providers:c.providers||null,viewQueries:lg(a,_,cg),isStandalone:!!c.standalone,hostDirectives:c.hostDirectives?.map(b=>"function"==typeof b?{directive:b}:b)||null}}function sw(a){const c=Object.prototype;let d=Object.getPrototypeOf(a.prototype).constructor;for(;d&&d!==c;)!se(d)&&!te(d)&&uE(d)&&cy(d,null),d=Object.getPrototypeOf(d)}function Cb(a){return"string"==typeof a?Sb(a):gt(a)}function lE(a,c){return{propertyName:a,predicate:Cb(c.selector),descendants:c.descendants,first:c.first,read:c.read?c.read:null,static:!!c.static,emitDistinctChangesOnly:!!c.emitDistinctChangesOnly}}function lg(a,c,d){const _=[];for(const b in c)if(c.hasOwnProperty(b)){const T=c[b];T.forEach(k=>{if(d(k)){if(!k.selector)throw new Error(`Can't construct a query for the property "${b}" of "${bn(a)}" since the query selector wasn't defined.`);if(T.some(cw))throw new Error("Cannot combine @Input decorators with query decorators");_.push(lE(b,k))}})}return _}function aw(a){return void 0===a?null:Sb(a)}function lw(a){const c=a.ngMetadataName;return"ContentChild"===c||"ContentChildren"===c}function cg(a){const c=a.ngMetadataName;return"ViewChild"===c||"ViewChildren"===c}function cw(a){return"Input"===a.ngMetadataName}function Sb(a){return a.split(",").map(c=>c.trim())}const cE=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function uE(a){const c=Oo();if(cE.some(_=>c.hasLifecycleHook(a,_)))return!0;const d=c.propMetadata(a);for(const _ in d){const b=d[_];for(let T=0;T<b.length;T++){const k=b[T],j=k.ngMetadataName;if(cw(k)||lw(k)||cg(k)||"Output"===j||"HostBinding"===j||"HostListener"===j)return!0}}return!1}function uy(a,c){let d=null,_=null;Object.defineProperty(a,ir,{get:()=>{if(null===_){const b=uw(a,c),T=Je();_=T.compileFactory(Va,`ng:///${b.name}/\u0275fac.js`,{name:b.name,type:b.type,typeArgumentCount:0,deps:Ar(a),target:T.FactoryTarget.Pipe})}return _},configurable:!1}),Object.defineProperty(a,li,{get:()=>{if(null===d){const b=uw(a,c);d=Je().compilePipe(Va,`ng:///${b.name}/\u0275pipe.js`,b)}return d},configurable:!1})}function uw(a,c){return{type:a,name:a.name,pipeName:c.name,pure:void 0===c.pure||c.pure,isStandalone:!!c.standalone}}const hw=R("Directive",(a={})=>a,void 0,void 0,(a,c)=>cy(a,c)),Eb=R("Component",(a={})=>({changeDetection:sn.Default,...a}),hw,void 0,(a,c)=>ag(a,c)),hE=R("Pipe",a=>({pure:!0,...a}),void 0,void 0,(a,c)=>uy(a,c)),hy=W("Input",a=>({bindingPropertyName:a})),dw=W("Output",a=>({bindingPropertyName:a})),dE=W("HostBinding",a=>({hostPropertyName:a})),dy=W("HostListener",(a,c)=>({eventName:a,args:c})),pE=R("NgModule",a=>a,void 0,void 0,(a,c)=>Xx(a,c));function ug(...a){}const pw=new X("Application Initializer");let vf=(()=>{class a{constructor(d){this.appInits=d,this.resolve=ug,this.reject=ug,this.initialized=!1,this.done=!1,this.donePromise=new Promise((_,b)=>{this.resolve=_,this.reject=b})}runInitializers(){if(this.initialized)return;const d=[],_=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let b=0;b<this.appInits.length;b++){const T=this.appInits[b]();if(D_(T))d.push(T);else if(Dv(T)){const k=new Promise((j,G)=>{T.subscribe({complete:j,error:G})});d.push(k)}}Promise.all(d).then(()=>{_()}).catch(b=>{this.reject(b)}),0===d.length&&_(),this.initialized=!0}}return a.\u0275fac=function(d){return new(d||a)(ve(pw,8))},a.\u0275prov=Wi({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const fw=new X("AppId",{providedIn:"root",factory:mw});function mw(){return`${Db()}${Db()}${Db()}`}const Tb={provide:fw,useFactory:mw,deps:[]};function Db(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hg=new X("Platform Initializer"),gw=new X("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),fE=new X("Application Packages Root URL"),mE=new X("AnimationModuleType");let gE=(()=>{class a{log(d){console.log(d)}warn(d){console.warn(d)}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=Wi({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const py=new X("LocaleId",{providedIn:"root",factory:()=>Ge(py,Mn.Optional|Mn.SkipSelf)||function _E(){return typeof $localize<"u"&&$localize.locale||sh}()}),fy=new X("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),yE=new X("Translations"),_w=new X("TranslationsFormat");var Du=(()=>((Du=Du||{})[Du.Error=0]="Error",Du[Du.Warning=1]="Warning",Du[Du.Ignore=2]="Ignore",Du))();class yw{constructor(c,d){this.ngModuleFactory=c,this.componentFactories=d}}let Mb=(()=>{class a{compileModuleSync(d){return new J_(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const _=this.compileModuleSync(d),T=Mc(Ne(d).declarations).reduce((k,j)=>{const G=te(j);return G&&k.push(new wm(G)),k},[]);return new yw(_,T)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=Wi({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const vw=new X("compilerOptions");class vE{}function Ib(a){vm(gd(a)),zx(a).forEach(c=>Cm(c))}const bw="ng";let dg=!1;function xw(){dg||(dg=!0,ac("\u0275setProfiler",Da),ac("getDirectiveMetadata",ib),ac("getComponent",tb),ac("getContext",nb),ac("getListeners",Vx),ac("getOwningComponent",Nx),ac("getHostElement",df),ac("getInjector",ey),ac("getRootComponents",zx),ac("getDirectives",Bx),ac("applyChanges",Ib))}function ac(a,c){if((typeof COMPILED>"u"||!COMPILED)&&Vn){let _=Vn[bw];_||(_=Vn[bw]={}),_[a]=c}}const bE=(()=>Promise.resolve(0))();function Pb(a){typeof Zone>"u"?bE.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class lc{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:_=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tu(!1),this.onMicrotaskEmpty=new Tu(!1),this.onStable=new Tu(!1),this.onError=new Tu(!1),typeof Zone>"u")throw new fn(908,!1);Zone.assertZonePatched();const b=this;b._nesting=0,b._outer=b._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(b._inner=b._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(b._inner=b._inner.fork(Zone.longStackTraceZoneSpec)),b.shouldCoalesceEventChangeDetection=!_&&d,b.shouldCoalesceRunChangeDetection=_,b.lastRequestAnimationFrameId=-1,b.nativeRequestAnimationFrame=function xE(){let a=Vn.requestAnimationFrame,c=Vn.cancelAnimationFrame;if(typeof Zone<"u"&&a&&c){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const _=c[Zone.__symbol__("OriginalDelegate")];_&&(c=_)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function wE(a){const c=()=>{!function ww(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Vn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Lb(a),a.isCheckStableRunning=!0,Ab(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Lb(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,_,b,T,k,j)=>{try{return gy(a),d.invokeTask(b,T,k,j)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===T.type||a.shouldCoalesceRunChangeDetection)&&c(),Cw(a)}},onInvoke:(d,_,b,T,k,j,G)=>{try{return gy(a),d.invoke(b,T,k,j,G)}finally{a.shouldCoalesceRunChangeDetection&&c(),Cw(a)}},onHasTask:(d,_,b,T)=>{d.hasTask(b,T),_===b&&("microTask"==T.change?(a._hasPendingMicrotasks=T.microTask,Lb(a),Ab(a)):"macroTask"==T.change&&(a.hasPendingMacrotasks=T.macroTask))},onHandleError:(d,_,b,T)=>(d.handleError(b,T),a.runOutsideAngular(()=>a.onError.emit(T)),!1)})}(b)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lc.isInAngularZone())throw new fn(909,!1)}static assertNotInAngularZone(){if(lc.isInAngularZone())throw new fn(909,!1)}run(c,d,_){return this._inner.run(c,d,_)}runTask(c,d,_,b){const T=this._inner,k=T.scheduleEventTask("NgZoneEvent: "+b,c,my,ug,ug);try{return T.runTask(k,d,_)}finally{T.cancelTask(k)}}runGuarded(c,d,_){return this._inner.runGuarded(c,d,_)}runOutsideAngular(c){return this._outer.run(c)}}const my={};function Ab(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Lb(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function gy(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Cw(a){a._nesting--,Ab(a)}class Sw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tu,this.onMicrotaskEmpty=new Tu,this.onStable=new Tu,this.onError=new Tu}run(c,d,_){return c.apply(d,_)}runGuarded(c,d,_){return c.apply(d,_)}runOutsideAngular(c){return c()}runTask(c,d,_,b){return c.apply(d,_)}}const _y=new X(""),Ew=new X("");let bf,yy=(()=>{class a{constructor(d,_,b){this._ngZone=d,this.registry=_,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bf||(Tw(b),b.addToWindow(_)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lc.assertNotInAngularZone(),Pb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pb(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(_=>!_.updateCb||!_.updateCb(d)||(clearTimeout(_.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,_,b){let T=-1;_&&_>0&&(T=setTimeout(()=>{this._callbacks=this._callbacks.filter(k=>k.timeoutId!==T),d(this._didWork,this.getPendingTasks())},_)),this._callbacks.push({doneCb:d,timeoutId:T,updateCb:b})}whenStable(d,_,b){if(b&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,_,b),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,_,b){return[]}}return a.\u0275fac=function(d){return new(d||a)(ve(lc),ve(kb),ve(Ew))},a.\u0275prov=Wi({token:a,factory:a.\u0275fac}),a})(),kb=(()=>{class a{constructor(){this._applications=new Map}registerApplication(d,_){this._applications.set(d,_)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,_=!0){return bf?.findTestabilityInTree(this,d,_)??null}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=Wi({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function Tw(a){bf=a}const lh=!1;let ch=null;const Ob=new X("AllowMultipleToken"),Rb=new X("PlatformDestroyListeners"),vy=new X("appBootstrapListener");function Dw(a,c,d){const _=new J_(d);return Promise.resolve(_)}function pg(a){return a.isBoundToModule}class CE{constructor(c,d){this.name=c,this.token=d}}function fg(a){if(ch&&!ch.get(Ob,!1))throw new fn(400,!1);ch=a;const c=a.get(Nb);return Mw(a),c}function Mw(a){const c=a.get(hg,null);c&&c.forEach(d=>d())}function SE(a){const{rootComponent:c,appProviders:d,platformProviders:_}=a;lh&&void 0!==c&&function sv(a){if(function av(a){if(!te(a))throw new fn(906,`The ${bn(a)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(a),!te(a).standalone)throw new fn(907,`The ${bn(a)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${bn(a)} component has the \`standalone: true\` flag in the decorator.`)}(c);const b=function Fb(a=[]){if(ch)return ch;const c=Pw(a);return ch=c,Mw(c),c}(_),T=Lw("zone.js",xy());return T.run(()=>{const j=eb([{provide:lc,useValue:T},...d||[]],b,"Environment Injector"),G=j.get(Xu,null);if(lh&&!G)throw new fn(402,"No `ErrorHandler` found in the Dependency Injection tree.");let ne;T.runOutsideAngular(()=>{ne=T.onError.subscribe({next:He=>{G.handleError(He)}})});const he=()=>j.destroy(),Ee=b.get(Rb);return Ee.add(he),j.onDestroy(()=>{ne.unsubscribe(),Ee.delete(he)}),kw(G,T,()=>{const He=j.get(vf);return He.runInitializers(),He.donePromise.then(()=>{$_(j.get(py,sh)||sh);const _t=j.get(wy);return void 0!==c&&_t.bootstrap(c),_t})})})}function Iw(a,c,d=[]){const _=`Platform: ${c}`,b=new X(_);return(T=[])=>{let k=by();if(!k||k.injector.get(Ob,!1)){const j=[...d,...T,{provide:b,useValue:!0}];a?a(j):fg(Pw(j,_))}return mg()}}function mg(a){const c=by();if(!c)throw new fn(401,!1);return c}function Pw(a=[],c){return ol.create({name:c,providers:[{provide:Ld,useValue:"platform"},{provide:Rb,useValue:new Set([()=>ch=null])},...a]})}function Aw(){by()?.destroy()}function by(){return ch?.get(Nb)??null}let Nb=(()=>{class a{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,_){const b=Lw(_?.ngZone,xy(_)),T=[{provide:lc,useValue:b}];return b.run(()=>{const k=ol.create({providers:T,parent:this.injector,name:d.moduleType.name}),j=d.create(k),G=j.injector.get(Xu,null);if(!G)throw new fn(402,!1);return b.runOutsideAngular(()=>{const ne=b.onError.subscribe({next:he=>{G.handleError(he)}});j.onDestroy(()=>{sp(this._modules,j),ne.unsubscribe()})}),kw(G,b,()=>{const ne=j.injector.get(vf);return ne.runInitializers(),ne.donePromise.then(()=>($_(j.injector.get(py,sh)||sh),this._moduleDoBootstrap(j),j))})})}bootstrapModule(d,_=[]){const b=gg({},_);return Dw(0,0,d).then(T=>this.bootstrapModuleFactory(T,b))}_moduleDoBootstrap(d){const _=d.injector.get(wy);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(b=>_.bootstrap(b));else{if(!d.instance.ngDoBootstrap)throw new fn(-403,!1);d.instance.ngDoBootstrap(_)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fn(404,!1);this._modules.slice().forEach(_=>_.destroy()),this._destroyListeners.forEach(_=>_());const d=this._injector.get(Rb,null);d&&(d.forEach(_=>_()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(d){return new(d||a)(ve(ol))},a.\u0275prov=Wi({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function xy(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}function Lw(a,c){let d;return d="noop"===a?new Sw:("zone.js"===a?void 0:a)||new lc(c),d}function kw(a,c,d){try{const _=d();return D_(_)?_.catch(b=>{throw c.runOutsideAngular(()=>a.handleError(b)),b}):_}catch(_){throw c.runOutsideAngular(()=>a.handleError(_)),_}}function gg(a,c){return Array.isArray(c)?c.reduce(gg,a):{...a,...c}}let wy=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(d,_,b){this._zone=d,this._injector=_,this._exceptionHandler=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new q.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),k=new q.y(j=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{lc.assertNotInAngularZone(),Pb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{lc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{G.unsubscribe(),ne.unsubscribe()}});this.isStable=(0,y.T)(T,k.pipe(function We(){return a=>(0,Ce.x)()(function pe(a,c){return function(_){let b;if(b="function"==typeof a?a:function(){return a},"function"==typeof c)return _.lift(new lt(b,c));const T=Object.create(_,Ve.N);return T.source=_,T.subjectFactory=b,T}}(Ue)(a))}()))}bootstrap(d,_){lh&&this.warnIfDestroyed();const b=d instanceof Vh;if(!this._injector.get(vf).done){const ot="Cannot bootstrap as there are still asynchronous initializers running."+(!b&&Be(d)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new fn(405,lh&&ot)}let k;k=b?d:this._injector.get(Qu).resolveComponentFactory(d),this.componentTypes.push(k.componentType);const j=pg(k)?void 0:this._injector.get(Jh),ne=k.create(ol.NULL,[],_||k.selector,j),he=ne.location.nativeElement,Ee=ne.injector.get(_y,null);return Ee?.registerApplication(he),ne.onDestroy(()=>{this.detachView(ne.hostView),sp(this.components,ne),Ee?.unregisterApplication(he)}),this._loadComponent(ne),ne}tick(){if(lh&&this.warnIfDestroyed(),this._runningTick)throw new fn(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){lh&&this.warnIfDestroyed();const _=d;this._views.push(_),_.attachToAppRef(this)}detachView(d){lh&&this.warnIfDestroyed();const _=d;sp(this._views,_),_.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const _=this._injector.get(vy,[]);_.push(...this._bootstrapListeners),_.forEach(b=>b(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return lh&&this.warnIfDestroyed(),this._destroyListeners.push(d),()=>sp(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new fn(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){lh&&this._destroyed&&console.warn(hi(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return a.\u0275fac=function(d){return new(d||a)(ve(lc),ve(Yu),ve(Xu))},a.\u0275prov=Wi({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function sp(a,c){const d=a.indexOf(c);d>-1&&a.splice(d,1)}function zb(){return!1}function Sy(){}function TE(a){const c=Tl(a);if(!c)throw Rw(a);return new J_(c)}function Ow(a){const c=Tl(a);if(!c)throw Rw(a);return c}function Rw(a){return new Error(`No module with ID ${a} loaded`)}let Fw=(()=>{class a{}return a.__NG_ELEMENT_ID__=Ey,a})();function Ey(a){return function DE(a,c,d){if(Ao(a)&&!d){const _=so(a.index,c);return new qd(_,_)}return 47&a.type?new qd(c[qr],c):null}(Kr(),xt(),16==(16&a))}class Nw extends Fw{}class Bb extends Nw{}class Ty{constructor(c,d){this.name=c,this.callback=d}}function zw(a){return a.map(c=>c.nativeElement)}class Vb{constructor(c){this.nativeNode=c}get parent(){const c=this.nativeNode.parentNode;return c?new nd(c):null}get injector(){return ey(this.nativeNode)}get componentInstance(){const c=this.nativeNode;return c&&(tb(c)||Nx(c))}get context(){return tb(this.nativeNode)||nb(this.nativeNode)}get listeners(){return Vx(this.nativeNode).filter(c=>"dom"===c.type)}get references(){return function kS(a){const c=jr(a);if(null===c)return{};if(void 0===c.localRefs){const d=c.lView;if(null===d)return{};c.localRefs=function bp(a,c){const d=a[bt].data[c];if(d&&d.localNames){const _={};let b=d.index+1;for(let T=0;T<d.localNames.length;T+=2)_[d.localNames[T]]=a[b],b++;return _}return null}(d,c.nodeIndex)}return c.localRefs||{}}(this.nativeNode)}get providerTokens(){return function LS(a){const c=jr(a),d=c?c.lView:null;if(null===d)return[];const _=d[bt],b=_.data[c.nodeIndex],T=[],j=b.directiveEnd;for(let G=1048575&b.providerIndexes;G<j;G++){let ne=_.data[G];RS(ne)&&(ne=ne.type),T.push(ne)}return T}(this.nativeNode)}}class nd extends Vb{constructor(c){super(c)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){const c=jr(this.nativeNode),d=c?c.lView:null;return null!==d?d[bt].data[c.nodeIndex].value:this.nativeNode.nodeName}get properties(){const c=jr(this.nativeNode),d=c?c.lView:null;if(null===d)return{};const _=d[bt].data,b=_[c.nodeIndex],T={};return function ME(a,c){if(a){let d=Object.getPrototypeOf(a);const _=Node.prototype;for(;null!==d&&d!==_;){const b=Object.getOwnPropertyDescriptors(d);for(let T in b)if(!T.startsWith("__")&&!T.startsWith("on")){const k=a[T];Bw(k)&&(c[T]=k)}d=Object.getPrototypeOf(d)}}}(this.nativeElement,T),function Hb(a,c,d,_){let b=c.propertyBindings;if(null!==b)for(let T=0;T<b.length;T++){const k=b[T],G=_[k].split("\ufffd"),ne=G[0];if(G.length>1){let he=G[1];for(let Ee=1;Ee<G.length-1;Ee++)he+=In(d[k+Ee-1])+G[Ee+1];a[ne]=he}else a[ne]=d[k]}}(T,b,d,_),T}get attributes(){const c={},d=this.nativeElement;if(!d)return c;const _=jr(d),b=_?_.lView:null;if(null===b)return{};const T=b[bt].data[_.nodeIndex].attrs,k=[];if(T){let G=0;for(;G<T.length;){const ne=T[G];if("string"!=typeof ne)break;c[ne]=T[G+1],k.push(ne.toLowerCase()),G+=2}}const j=d.attributes;for(let G=0;G<j.length;G++){const ne=j[G],he=ne.name.toLowerCase();-1===k.indexOf(he)&&(c[he]=ne.value)}return c}get styles(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}get classes(){const c={},_=this.nativeElement.className;return("string"!=typeof _?_.baseVal.split(" "):_.split(" ")).forEach(T=>c[T]=!0),c}get childNodes(){const c=this.nativeNode.childNodes,d=[];for(let _=0;_<c.length;_++)d.push(lp(c[_]));return d}get children(){const c=this.nativeElement;if(!c)return[];const d=c.children,_=[];for(let b=0;b<d.length;b++)_.push(lp(d[b]));return _}query(c){return this.queryAll(c)[0]||null}queryAll(c){const d=[];return Vw(this,c,d,!0),d}queryAllNodes(c){const d=[];return Vw(this,c,d,!1),d}triggerEventHandler(c,d){const _=this.nativeNode,b=[];this.listeners.forEach(T=>{if(T.name===c){const k=T.callback;k.call(_,d),b.push(k)}}),"function"==typeof _.eventListeners&&_.eventListeners(c).forEach(T=>{if(-1!==T.toString().indexOf("__ngUnwrap__")){const k=T("__ngUnwrap__");return-1===b.indexOf(k)&&k.call(_,d)}})}}function Bw(a){return"string"==typeof a||"boolean"==typeof a||"number"==typeof a||null===a}function Vw(a,c,d,_){const b=jr(a.nativeNode),T=b?b.lView:null;null!==T?ap(T[bt].data[b.nodeIndex],T,c,d,_,a.nativeNode):Ub(a.nativeNode,c,d,_)}function ap(a,c,d,_,b,T){const k=function ml(a,c){const d=null===a?-1:a.index;return-1!==d?Bn(c[d]):null}(a,c);if(11&a.type){if(jb(k,d,_,b,T),Ao(a)){const G=so(a.index,c);G&&G[bt].firstChild&&ap(G[bt].firstChild,G,d,_,b,T)}else a.child&&ap(a.child,c,d,_,b,T),k&&Ub(k,d,_,b);const j=c[a.index];Nr(j)&&Dy(j,d,_,b,T)}else if(4&a.type){const j=c[a.index];jb(j[Go],d,_,b,T),Dy(j,d,_,b,T)}else if(16&a.type){const j=c[qr],ne=j[Mi].projection[a.projection];if(Array.isArray(ne))for(let he of ne)jb(he,d,_,b,T);else if(ne){const he=j[kn];ap(he[bt].data[ne.index],he,d,_,b,T)}}else a.child&&ap(a.child,c,d,_,b,T);if(T!==k){const j=2&a.flags?a.projectionNext:a.next;j&&ap(j,c,d,_,b,T)}}function Dy(a,c,d,_,b){for(let T=rr;T<a.length;T++){const k=a[T],j=k[bt].firstChild;j&&ap(j,k,c,d,_,b)}}function jb(a,c,d,_,b){if(b!==a){const T=lp(a);if(!T)return;(_&&T instanceof nd&&c(T)&&-1===d.indexOf(T)||!_&&c(T)&&-1===d.indexOf(T))&&d.push(T)}}function Ub(a,c,d,_){const b=a.childNodes,T=b.length;for(let k=0;k<T;k++){const j=b[k],G=lp(j);G&&((_&&G instanceof nd&&c(G)&&-1===d.indexOf(G)||!_&&c(G)&&-1===d.indexOf(G))&&d.push(G),Ub(j,c,d,_))}}const xf="__ng_debug__";function lp(a){return a instanceof Node?(a.hasOwnProperty(xf)||(a[xf]=a.nodeType==Node.ELEMENT_NODE?new nd(a):new Vb(a)),a[xf]):null}function IE(a){return null}class jw{constructor(){}supports(c){return Yd(c)}create(c){return new My(c)}}const AE=(a,c)=>c;class My{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||AE}forEachItem(c){let d;for(d=this._itHead;null!==d;d=d._next)c(d)}forEachOperation(c){let d=this._itHead,_=this._removalsHead,b=0,T=null;for(;d||_;){const k=!_||d&&d.currentIndex<Uw(_,b,T)?d:_,j=Uw(k,b,T),G=k.currentIndex;if(k===_)b--,_=_._nextRemoved;else if(d=d._next,null==k.previousIndex)b++;else{T||(T=[]);const ne=j-b,he=G-b;if(ne!=he){for(let He=0;He<ne;He++){const ot=He<T.length?T[He]:T[He]=0,_t=ot+He;he<=_t&&_t<ne&&(T[He]=ot+1)}T[k.previousIndex]=he-ne}}j!==G&&c(k,j,G)}}forEachPreviousItem(c){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)c(d)}forEachAddedItem(c){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)c(d)}forEachMovedItem(c){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)c(d)}forEachRemovedItem(c){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)c(d)}forEachIdentityChange(c){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)c(d)}diff(c){if(null==c&&(c=[]),!Yd(c))throw new fn(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let b,T,k,d=this._itHead,_=!1;if(Array.isArray(c)){this.length=c.length;for(let j=0;j<this.length;j++)T=c[j],k=this._trackByFn(j,T),null!==d&&Object.is(d.trackById,k)?(_&&(d=this._verifyReinsertion(d,T,k,j)),Object.is(d.item,T)||this._addIdentityChange(d,T)):(d=this._mismatch(d,T,k,j),_=!0),d=d._next}else b=0,function RC(a,c){if(Array.isArray(a))for(let d=0;d<a.length;d++)c(a[d]);else{const d=a[Symbol.iterator]();let _;for(;!(_=d.next()).done;)c(_.value)}}(c,j=>{k=this._trackByFn(b,j),null!==d&&Object.is(d.trackById,k)?(_&&(d=this._verifyReinsertion(d,j,k,b)),Object.is(d.item,j)||this._addIdentityChange(d,j)):(d=this._mismatch(d,j,k,b),_=!0),d=d._next,b++}),this.length=b;return this._truncate(d),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,d,_,b){let T;return null===c?T=this._itTail:(T=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(_,null))?(Object.is(c.item,d)||this._addIdentityChange(c,d),this._reinsertAfter(c,T,b)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(_,b))?(Object.is(c.item,d)||this._addIdentityChange(c,d),this._moveAfter(c,T,b)):c=this._addAfter(new LE(d,_),T,b),c}_verifyReinsertion(c,d,_,b){let T=null===this._unlinkedRecords?null:this._unlinkedRecords.get(_,null);return null!==T?c=this._reinsertAfter(T,c._prev,b):c.currentIndex!=b&&(c.currentIndex=b,this._addToMoves(c,b)),c}_truncate(c){for(;null!==c;){const d=c._next;this._addToRemovals(this._unlink(c)),c=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,d,_){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const b=c._prevRemoved,T=c._nextRemoved;return null===b?this._removalsHead=T:b._nextRemoved=T,null===T?this._removalsTail=b:T._prevRemoved=b,this._insertAfter(c,d,_),this._addToMoves(c,_),c}_moveAfter(c,d,_){return this._unlink(c),this._insertAfter(c,d,_),this._addToMoves(c,_),c}_addAfter(c,d,_){return this._insertAfter(c,d,_),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,d,_){const b=null===d?this._itHead:d._next;return c._next=b,c._prev=d,null===b?this._itTail=c:b._prev=c,null===d?this._itHead=c:d._next=c,null===this._linkedRecords&&(this._linkedRecords=new Iy),this._linkedRecords.put(c),c.currentIndex=_,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const d=c._prev,_=c._next;return null===d?this._itHead=_:d._next=_,null===_?this._itTail=d:_._prev=d,c}_addToMoves(c,d){return c.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Iy),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,d){return c.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class LE{constructor(c,d){this.item=c,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kE{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,d){let _;for(_=this._head;null!==_;_=_._nextDup)if((null===d||d<=_.currentIndex)&&Object.is(_.trackById,c))return _;return null}remove(c){const d=c._prevDup,_=c._nextDup;return null===d?this._head=_:d._nextDup=_,null===_?this._tail=d:_._prevDup=d,null===this._head}}class Iy{constructor(){this.map=new Map}put(c){const d=c.trackById;let _=this.map.get(d);_||(_=new kE,this.map.set(d,_)),_.add(c)}get(c,d){const b=this.map.get(c);return b?b.get(c,d):null}remove(c){const d=c.trackById;return this.map.get(d).remove(c)&&this.map.delete(d),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Uw(a,c,d){const _=a.previousIndex;if(null===_)return _;let b=0;return d&&_<d.length&&(b=d[_]),_+c+b}class _g{constructor(){}supports(c){return c instanceof Map||bv(c)}create(){return new Hw}}class Hw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let d;for(d=this._mapHead;null!==d;d=d._next)c(d)}forEachPreviousItem(c){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)c(d)}forEachChangedItem(c){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)c(d)}forEachAddedItem(c){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)c(d)}forEachRemovedItem(c){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)c(d)}diff(c){if(c){if(!(c instanceof Map||bv(c)))throw new fn(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(c,(_,b)=>{if(d&&d.key===b)this._maybeAddToChanges(d,_),this._appendAfter=d,d=d._next;else{const T=this._getOrCreateRecordForKey(b,_);d=this._insertBeforeOrAppend(d,T)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let _=d;null!==_;_=_._nextRemoved)_===this._mapHead&&(this._mapHead=null),this._records.delete(_.key),_._nextRemoved=_._next,_.previousValue=_.currentValue,_.currentValue=null,_._prev=null,_._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,d){if(c){const _=c._prev;return d._next=c,d._prev=_,c._prev=d,_&&(_._next=d),c===this._mapHead&&(this._mapHead=d),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(c,d){if(this._records.has(c)){const b=this._records.get(c);this._maybeAddToChanges(b,d);const T=b._prev,k=b._next;return T&&(T._next=k),k&&(k._prev=T),b._next=null,b._prev=null,b}const _=new OE(c);return this._records.set(c,_),_.currentValue=d,this._addToAdditions(_),_}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,d){Object.is(d,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=d,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,d){c instanceof Map?c.forEach(d):Object.keys(c).forEach(_=>d(c[_],_))}}class OE{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $w(){return new wf([new jw])}let wf=(()=>{class a{constructor(d){this.factories=d}static create(d,_){if(null!=_){const b=_.factories.slice();d=d.concat(b)}return new a(d)}static extend(d){return{provide:a,useFactory:_=>a.create(d,_||$w()),deps:[[a,new _s,new Jr]]}}find(d){const _=this.factories.find(b=>b.supports(d));if(null!=_)return _;throw new fn(901,!1)}}return a.\u0275prov=Wi({token:a,providedIn:"root",factory:$w}),a})();function Zb(){return new Wb([new _g])}let Wb=(()=>{class a{constructor(d){this.factories=d}static create(d,_){if(_){const b=_.factories.slice();d=d.concat(b)}return new a(d)}static extend(d){return{provide:a,useFactory:_=>a.create(d,_||Zb()),deps:[[a,new _s,new Jr]]}}find(d){const _=this.factories.find(b=>b.supports(d));if(_)return _;throw new fn(901,!1)}}return a.\u0275prov=Wi({token:a,providedIn:"root",factory:Zb}),a})();const RE=[new _g],FE=new wf([new jw]),NE=new Wb(RE),Yb=Iw(null,"core",[]);let zE=(()=>{class a{constructor(d){}}return a.\u0275fac=function(d){return new(d||a)(ve(wy))},a.\u0275mod=ea({type:a}),a.\u0275inj=Br({}),a})();function Py(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function Gw(a){return Je().compileDirectiveDeclaration(Va,`ng:///${a.type.name}/\u0275fac.js`,a)}function BE(a){jx(a.type,a.decorators,a.ctorParameters??null,a.propDecorators??null)}function Ay(a){return Je().compileComponentDeclaration(Va,`ng:///${a.type.name}/\u0275cmp.js`,a)}function VE(a){return Je(function Zw(a){switch(a){case Se.Directive:return"directive";case Se.Component:return"component";case Se.Injectable:return"injectable";case Se.Pipe:return"pipe";case Se.NgModule:return"NgModule"}}(a.target)).compileFactoryDeclaration(Va,`ng:///${a.type.name}/\u0275fac.js`,a)}function jE(a){return Je().compileInjectableDeclaration(Va,`ng:///${a.type.name}/\u0275prov.js`,a)}function UE(a){return Je().compileInjectorDeclaration(Va,`ng:///${a.type.name}/\u0275inj.js`,a)}function Kb(a){return Je().compileNgModuleDeclaration(Va,`ng:///${a.type.name}/\u0275mod.js`,a)}function HE(a){return Je().compilePipeDeclaration(Va,`ng:///${a.type.name}/\u0275pipe.js`,a)}function $E(a,c){const d=te(a),_=c.elementInjector||Nh();return new wm(d).create(_,c.projectableNodes,c.hostElement,c.environmentInjector)}function Qb(a){const c=te(a);if(!c)return null;const d=new wm(c);return{get selector(){return d.selector},get type(){return d.componentType},get inputs(){return d.inputs},get outputs(){return d.outputs},get ngContentSelectors(){return d.ngContentSelectors},get isStandalone(){return c.standalone}}}}},fi=>{fi(fi.s=12)}]);